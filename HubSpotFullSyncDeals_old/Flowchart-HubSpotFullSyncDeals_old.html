<!DOCTYPE html>
<html lang="en">
<head>
    <title>HubSpotFullSyncDeals_old</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/mermaid/6.0.0/mermaid.css" rel="stylesheet" type="text/css"/>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/6.0.0/mermaid.min.js"></script>
    <script>mermaid.initialize({startOnLoad:true});</script>
    <script>
        var callback = function(){}
    </script>
    <style>
        div.mermaidTooltip {
                    margin-left: 50px;
                    text-align: left;
                    max-width: none;
                }
        .node rect,
        .node circle,
        .node ellipse,
        .node polygon {
                    fill: #ffffff;
                    stroke: rgb(200,200,200);
                    stroke-width: 2px;
                }
        .mermaid .label {
                  max-width: 50px;
                }
        table, th, td {
                    border: 1px solid black;
                }
        table {
                    border-spacing: 5px;
                    border-radius: 5px;
                    margin: auto;
                }
        th, td {
                    padding-left: 15px;
                    padding-right: 15px;
                    border-radius: 5px;
                }
        th {
                    color: blue;
                }
        td {
                    width: 180px;
                    text-align: center;
                    background-color: rgb(237, 241, 242);
                }
        h2 {
                    text-align: center;
                    border: 1px solid black;
                    border-radius: 5px;
                    padding: 1em;
                }
        .container {
                    text-align: center;
                    background-color: rgb(237, 241, 242);
                    font-size: 11px;
                    font-weight: 900;
                }
        body {
                    font-family: 'Arial';
                }
        .edgeLabel {
                    font-size: 9px;
                }
    </style>
</head>
<body>
    <h2>
        HubSpotFullSyncDeals_old
    </h2>
    <div class="container">
        <div class="mermaid">
            graph TD

                step-000((Trigger))
            step-001(InputParams)
            step-002(SyncLog)
            step-003[ChargebeeConfigParams]
            step-004[GetCBCustomFields]
            step-005(UpdateCustomFieldInfo)
            step-006(CustomersParam)
            step-007{DoContinue}
            step-008(TPParam)
            step-009(SyncDone)
            step-010((END))
            step-011[GetTpData]
            step-012(UpdateTPList)
            step-013{HaveTPOffset}
            step-014[GetHubSpotPipeLine]
            step-015(SubParam)
            step-016{IsValid}
            step-017[GetAllSubscriptions]
            step-018(-LoopOverSubscriptions-)
            step-019(DealInfo)
            step-020{HasNoSubOffset}
            step-021(CBInfo)
            step-022[GetCustomerEntityMappping]
            step-023{HasAContactExist}
            step-024[GetCurrentHubSpotContact]
            step-025(UpdateSubscriptionError)
            step-026{HasAContactExistInHubSpot}
            step-027[UpdateThirdPartyError5]
            step-028[GetSubscriptionEntity]
            step-029{HasADealInEntityMapping}
            step-030[GetDealByID]
            step-031{DoLookupforDealInHubSpot}
            step-032(UpdateDealInfoFromEM)
            step-033[GetDealsByContact]
            step-034[GetInvoiceForDeal]
            step-035{HasAValidDealInHubSpot}
            step-036{DoLookupforDealByCompany}
            step-037{DoGetPlan}
            step-038[GetDealsByCompany]
            step-039{HasADealForLookup}
            step-040[GetPlanByID]
            step-041(UpdateCBInfo)
            step-042(UpdateDealInfo)
            step-043[GetLookUPDeal]
            step-044{NoOpenDealOption}
            step-045{IsDealCreate}
            step-046{HasLookUpDeal}
            step-047(PrepareDealCreate)
            step-048(PrepareDealUpdate)
            step-049[CreateDealInHubSpot]
            step-050[UpdateDealInHubSpot]
            step-051(DealThirdpartyCreateParam)
            step-052(DealCreateError)
            step-053(DealThirdPartyCreateParam)
            step-054[UpdateThirdPartyDeal]
            step-055[UpdateThirdPartyError6]

                step-000== continue ==>step-001
            step-001-- success -->step-002
            step-002-- success -->step-003
            step-003-- success -->step-004
            step-004-- success -->step-005
            step-005-- success -->step-006
            step-006-- success -->step-007
            step-007-- success -->step-008
            step-007-- failure -->step-009
            step-008-- success -->step-011
            step-009-. done .->step-010
            step-011-- success -->step-012
            step-012-- success -->step-013
            step-013-- success -->step-008
            step-013-- failure -->step-014
            step-014-- success -->step-015
            step-015-- success -->step-016
            step-016-- success -->step-017
            step-016-- failure -->step-009
            step-017-- success -->step-018
            step-018-- success -->step-019
            step-018-- failure -->step-020
            step-019-- success -->step-021
            step-020-- success -->step-009
            step-020-- failure -->step-015
            step-021-- success -->step-022
            step-022-- success -->step-023
            step-023-- success -->step-024
            step-023-- failure -->step-025
            step-024== continue ==>step-026
            step-025-- success -->step-027
            step-026-- success -->step-028
            step-026-- failure -->step-025
            step-027-- success -->step-018
            step-028-- success -->step-029
            step-029-- success -->step-030
            step-029-- failure -->step-031
            step-030== continue ==>step-032
            step-031-- success -->step-033
            step-031-- failure -->step-034
            step-032-- success -->step-035
            step-033== continue ==>step-036
            step-034-- success -->step-037
            step-035-- success -->step-034
            step-035-- failure -->step-031
            step-036-- success -->step-038
            step-036-- failure -->step-039
            step-037-- success -->step-040
            step-037-- failure -->step-041
            step-038-- success -->step-042
            step-039-- success -->step-043
            step-039-- failure -->step-044
            step-040-- success -->step-041
            step-041-- success -->step-045
            step-042-- success -->step-039
            step-043-- success -->step-046
            step-044-- success -->step-034
            step-044-- failure -->step-018
            step-045-- success -->step-047
            step-045-- failure -->step-048
            step-046-- success -->step-034
            step-046-- failure -->step-044
            step-047-- success -->step-049
            step-048-- success -->step-050
            step-049-- success -->step-051
            step-049-- failure -->step-052
            step-050-- success -->step-053
            step-050-- failure -->step-052
            step-051-- success -->step-054
            step-052-- success -->step-055
            step-053-- success -->step-054
            step-054-- success -->step-018
            step-055-- success -->step-018

                style step-010 stroke-width:3px,stroke-dasharray: 5, 5;

                click step-000 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPnRyaWdnZXI8L3RpdGxlPjwvaGVhZD48Ym9keT48Yj5UcmlnZ2VyIEVsZW1lbnQ6PC9iPjxicj48YnI+PHByZT4gICB0eXBlIDogbWFudWFsPGJyPiAgYXN5bmMgOiB0cnVlPC9wcmU+PGJyPjxiPlJBVyBKU09OOjwvYj48YnI+PGJyPjxwcmU+ezxicj4gICdvblN1Y2Nlc3MnOiBbPGJyPiAgICAnSW5wdXRQYXJhbXMnPGJyPiAgXSw8YnI+ICAnb25GYWlsdXJlJzogW10sPGJyPiAgJ3R5cGUnOiAnbWFudWFsJyw8YnI+ICAnYXN5bmMnOiB0cnVlLDxicj4gICduYW1lJzogJ3RyaWdnZXInLDxicj4gICdwcm9wZXJ0aWVzJzoge308YnI+fTwvcHJlPjwvYm9keT48L2h0bWw+'));document.close();" "Trigger Element:<br><pre>   type : manual<br>  async : true</pre>"
            click step-001 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPklucHV0UGFyYW1zPC90aXRsZT48L2hlYWQ+PGJvZHk+PGI+SmF2YVNjcmlwdDo8L2I+PGJyPjxicj48cHJlPmxldCBhcGlLZXkgPSB0cmlnZ2VyLmFyZ3NbJ2NiLWFwaS1rZXknXTs8YnI+bGV0IHNpdGVOYW1lID0gdHJpZ2dlci5hcmdzWydjYi1zaXRlLW5hbWUnXTs8YnI+bGV0IHR5cGUgPSB0cmlnZ2VyLmFyZ3MudHlwZTs8YnI+bGV0IHNpdGVEb21haW4gPSB0cmlnZ2VyLmFyZ3NbJ2NiLWRvbWFpbiddOzxicj48YnI+bGV0IHBhc3N3b3JkID0gJyc7PGJyPmxldCBkYXRhID0gezxicj4gICBpbnB1dDogezxicj4gICAgICAgIGFwaUtleTogYXBpS2V5LDxicj4gICAgICAgIHNpdGVOYW1lOiBzaXRlTmFtZSw8YnI+ICAgICAgICBzaXRlRG9tYWluOiBzaXRlRG9tYWluLDxicj4gICAgICAgIHR5cGU6IHR5cGUsPGJyPiAgICB9LDxicj4gICAgY29uZmlnOiB7PGJyPiAgICAgICAgdXJsOiAnaHR0cHM6Ly8nICsgc2l0ZU5hbWUgKyAnLicgKyBzaXRlRG9tYWluICsgJy9hcGkvdjIvdGhpcmRfcGFydHlfY29uZmlndXJhdGlvbnMnLDxicj4gICAgICAgIHN5bmNVcmw6ICdodHRwczovLycgKyBzaXRlTmFtZSArICcuJyArIHNpdGVEb21haW4gKyAnL2FwaS92Mi90aGlyZF9wYXJ0eV9zeW5jX2RldGFpbHMvcmV0cmlldmVfbGF0ZXN0X3N5bmMnLDxicj4gICAgICAgIGN1c3RvbUZpZWxkVXJsOiAnaHR0cHM6Ly8nICsgc2l0ZU5hbWUgKyAnLicgKyBzaXRlRG9tYWluICsgJy9hcGkvdjIvY3VzdG9tX2ZpZWxkX2NvbmZpZ3MnLDxicj4gICAgICAgIGF1dGg6IHs8YnI+ICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogJ0Jhc2ljICcgKyBDRS5iNjQoYXBpS2V5ICsgJzonICsgcGFzc3dvcmQpPGJyPiAgICAgICAgfSw8YnI+ICAgICAgICBxdWVyeTogezxicj4gICAgICAgICAgICBpbnRlZ3JhdGlvbl9uYW1lOiB0eXBlPGJyPiAgICAgICAgfTxicj4gICAgfSw8YnI+ICAgIHVwZGF0ZTogezxicj4gICAgICAgIHVybDogJ2h0dHBzOi8vJyArIHNpdGVOYW1lICsgJy5pbnRlZ3JhdGlvbnMuJyArIHNpdGVEb21haW4gKyAnL2ludGVncmF0aW9ucy91cGRhdGVfdHBfaW50ZWdfY29uZicsPGJyPiAgICAgICAgaGVhZGVyczogezxicj4gICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLDxicj4gICAgICAgICAgICAnY2FjaGUtY29udHJvbCc6ICduby1jYWNoZSc8YnI+ICAgICAgICB9LDxicj4gICAgICAgIGJvZHk6IHs8YnI+ICAgICAgICAgICAgaW50ZWdyYXRpb25fbmFtZTogdHlwZSw8YnI+ICAgICAgICAgICAgc2l0ZV9uYW1lOiBzaXRlTmFtZSw8YnI+ICAgICAgICAgICAgYXBpX2tleTogYXBpS2V5PGJyPiAgICAgICAgfTxicj4gICAgfSw8YnI+fTs8YnI+PGJyPmRvbmUoZGF0YSk7PC9wcmU+PGJyPjxiPlJBVyBKU09OOjwvYj48YnI+PGJyPjxwcmU+ezxicj4gICdvblN1Y2Nlc3MnOiBbPGJyPiAgICAnU3luY0xvZyc8YnI+ICBdLDxicj4gICdvbkZhaWx1cmUnOiBbXSw8YnI+ICAnbmFtZSc6ICdJbnB1dFBhcmFtcycsPGJyPiAgJ3R5cGUnOiAnc2NyaXB0Jyw8YnI+ICAncHJvcGVydGllcyc6IHs8YnI+ICAgICdib2R5JzogJ2xldCBhcGlLZXkgPSB0cmlnZ2VyLmFyZ3NbJ2NiLWFwaS1rZXknXTtcbmxldCBzaXRlTmFtZSA9IHRyaWdnZXIuYXJnc1snY2Itc2l0ZS1uYW1lJ107XG5sZXQgdHlwZSA9IHRyaWdnZXIuYXJncy50eXBlO1xubGV0IHNpdGVEb21haW4gPSB0cmlnZ2VyLmFyZ3NbJ2NiLWRvbWFpbiddO1xuXG5sZXQgcGFzc3dvcmQgPSBcJ1wnO1xubGV0IGRhdGEgPSB7XG4gICBpbnB1dDoge1xuICAgICAgICBhcGlLZXk6IGFwaUtleSxcbiAgICAgICAgc2l0ZU5hbWU6IHNpdGVOYW1lLFxuICAgICAgICBzaXRlRG9tYWluOiBzaXRlRG9tYWluLFxuICAgICAgICB0eXBlOiB0eXBlLFxuICAgIH0sXG4gICAgY29uZmlnOiB7XG4gICAgICAgIHVybDogXCdodHRwczovL1wnICsgc2l0ZU5hbWUgKyBcJy5cJyArIHNpdGVEb21haW4gKyBcJy9hcGkvdjIvdGhpcmRfcGFydHlfY29uZmlndXJhdGlvbnNcJyxcbiAgICAgICAgc3luY1VybDogXCdodHRwczovL1wnICsgc2l0ZU5hbWUgKyBcJy5cJyArIHNpdGVEb21haW4gKyBcJy9hcGkvdjIvdGhpcmRfcGFydHlfc3luY19kZXRhaWxzL3JldHJpZXZlX2xhdGVzdF9zeW5jXCcsXG4gICAgICAgIGN1c3RvbUZpZWxkVXJsOiBcJ2h0dHBzOi8vXCcgKyBzaXRlTmFtZSArIFwnLlwnICsgc2l0ZURvbWFpbiArIFwnL2FwaS92Mi9jdXN0b21fZmllbGRfY29uZmlnc1wnLFxuICAgICAgICBhdXRoOiB7XG4gICAgICAgICAgICBBdXRob3JpemF0aW9uOiBcJ0Jhc2ljIFwnICsgQ0UuYjY0KGFwaUtleSArIFwnOlwnICsgcGFzc3dvcmQpXG4gICAgICAgIH0sXG4gICAgICAgIHF1ZXJ5OiB7XG4gICAgICAgICAgICBpbnRlZ3JhdGlvbl9uYW1lOiB0eXBlXG4gICAgICAgIH1cbiAgICB9LFxuICAgIHVwZGF0ZToge1xuICAgICAgICB1cmw6IFwnaHR0cHM6Ly9cJyArIHNpdGVOYW1lICsgXCcuaW50ZWdyYXRpb25zLlwnICsgc2l0ZURvbWFpbiArIFwnL2ludGVncmF0aW9ucy91cGRhdGVfdHBfaW50ZWdfY29uZlwnLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICBcJ0NvbnRlbnQtVHlwZVwnOiBcJ2FwcGxpY2F0aW9uL2pzb25cJyxcbiAgICAgICAgICAgIFwnY2FjaGUtY29udHJvbFwnOiBcJ25vLWNhY2hlXCdcbiAgICAgICAgfSxcbiAgICAgICAgYm9keToge1xuICAgICAgICAgICAgaW50ZWdyYXRpb25fbmFtZTogdHlwZSxcbiAgICAgICAgICAgIHNpdGVfbmFtZTogc2l0ZU5hbWUsXG4gICAgICAgICAgICBhcGlfa2V5OiBhcGlLZXlcbiAgICAgICAgfVxuICAgIH0sXG59O1xuXG5kb25lKGRhdGEpOyc8YnI+ICB9PGJyPn08L3ByZT48L2JvZHk+PC9odG1sPg=='));document.close();" "JavaScript:<br><pre>let apiKey = trigger.args['cb-api-key'];<br>let siteName = trigger.args['cb-site-name'];<br>let type = trigger.args.type;<br>let siteDomain = trigger.args['cb-domain'];<br><br>let password = '';<br>let data = {<br>   input: {<br>        apiKey: apiKey,<br>        siteName: siteName,<br>        siteDomain: siteDomain,<br>        type: type,<br>    },<br>    config: {<br>        url: 'https://' + siteName + '.' + siteDomain + '/api/v2/third_party_configurations',<br>        syncUrl: 'https://' + siteName + '.' + siteDomain + '/api/v2/third_party_sync_details/retrieve_latest_sync',<br>        customFieldUrl: 'https://' + siteName + '.' + siteDomain + '/api/v2/custom_field_configs',<br>        auth: {<br>            Authorization: 'Basic ' + CE.b64(apiKey + ':' + password)<br>        },<br>        query: {<br>            integration_name: type<br>        }<br>    },<br>    update: {<br>        url: 'https://' + siteName + '.integrations.' + siteDomain + '/integrations/update_tp_integ_conf',<br>        headers: {<br>            'Content-Type': 'application/json',<br>            'cache-control': 'no-cache'<br>        },<br>        body: {<br>            integration_name: type,<br>            site_name: siteName,<br>            api_key: apiKey<br>        }<br>    },<br>};<br><br>done(data);</pre>"
            click step-002 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPlN5bmNMb2c8L3RpdGxlPjwvaGVhZD48Ym9keT48Yj5KYXZhU2NyaXB0OjwvYj48YnI+PGJyPjxwcmU+bGV0IGRhdGEgPSB7PGJyPiAgY3VzdG9tZWZpZWxkczogWzxicj4gICAgICAgICAgICB7PGJyPiAgICAgICAgICAgICAgICBsYWJlbDogJ1N1YnNjcmlwdGlvbicsPGJyPiAgICAgICAgICAgICAgICBrZXk6ICdzdWJjc3QnLDxicj4gICAgICAgICAgICAgICAgZmllbGRzOiBbPGJyPiAgICAgICAgICAgICAgICAgICAgWydjdXJyZW5jeV9jb2RlJywgJ3N0cmluZycsICd0ZXh0J10sPGJyPiAgICAgICAgICAgICAgICAgICAgIFsncGxhbl9xdWFudGl0eScsICdudW1iZXInLCAndGV4dCddLDxicj4gICAgICAgICAgICAgICAgICAgIFsncGxhbl91bml0X3ByaWNlJywgJ251bWJlcicsICd0ZXh0JywgJ2N1cnJlbmN5J10sPGJyPiAgICAgICAgICAgICAgICAgICAgWydwbGFuX2Ftb3VudCcsICdudW1iZXInLCAndGV4dCcsICdjdXJyZW5jeSddLDxicj4gICAgICAgICAgICAgICAgICAgIFsnYmlsbGluZ19wZXJpb2QnLCAnbnVtYmVyJywgJ3RleHQnXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ2JpbGxpbmdfcGVyaW9kX3VuaXQnLCAnc3RyaW5nJywgJ3RleHQnXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ3BsYW5fZnJlZV9xdWFudGl0eScsICdudW1iZXInLCAndGV4dCddLDxicj4gICAgICAgICAgICAgICAgICAgIFsnc3RhcnRfZGF0ZScsICdkYXRldGltZScsICdkYXRlJ10sPGJyPiAgICAgICAgICAgICAgICAgICAgWyd0cmlhbF9zdGFydCcsICdkYXRldGltZScsICdkYXRlJ10sPGJyPiAgICAgICAgICAgICAgICAgICAgWyd0cmlhbF9lbmQnLCAnZGF0ZXRpbWUnLCAnZGF0ZSddLDxicj4gICAgICAgICAgICAgICAgICAgIFsnY3VycmVudF90ZXJtX3N0YXJ0JywgJ2RhdGV0aW1lJywgJ2RhdGUnXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ2N1cnJlbnRfdGVybV9lbmQnLCAnZGF0ZXRpbWUnLCAnZGF0ZSddLDxicj4gICAgICAgICAgICAgICAgICAgIFsnY3JlYXRlZF9hdCcsICdkYXRldGltZScsICdkYXRlJ10sPGJyPiAgICAgICAgICAgICAgICAgICAgWydzdGFydGVkX2F0JywgJ2RhdGV0aW1lJywgJ2RhdGUnXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ2FjdGl2YXRlZF9hdCcsICdkYXRldGltZScsICdkYXRlJ10sPGJyPiAgICAgICAgICAgICAgICAgICAgWydnaWZ0X2lkJywgJ3N0cmluZycsICd0ZXh0J10sPGJyPiAgICAgICAgICAgICAgICAgICAgWydvdmVycmlkZV9yZWxhdGlvbnNoaXAnLCAnc3RyaW5nJywgJ3RleHQnXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ3BhdXNlX2RhdGUnLCAnZGF0ZXRpbWUnLCAnZGF0ZSddLDxicj4gICAgICAgICAgICAgICAgICAgIFsncmVzdW1lX2RhdGUnLCAnZGF0ZXRpbWUnLCAnZGF0ZSddLDxicj4gICAgICAgICAgICAgICAgICAgIFsnY2FuY2VsbGVkX2F0JywgJ2RhdGV0aW1lJywgJ2RhdGUnXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ2NhbmNlbF9yZWFzb24nLCAnc3RyaW5nJywgJ3RleHQnXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ2FmZmlsaWF0ZV90b2tlbicsICdzdHJpbmcnLCAndGV4dCddLDxicj4gICAgICAgICAgICAgICAgICAgIFsnY3JlYXRlZF9mcm9tX2lwJywgJ3N0cmluZycsICd0ZXh0J10sPGJyPiAgICAgICAgICAgICAgICAgICAgWydyZXNvdXJjZV92ZXJzaW9uJywgJ251bWJlcicsICd0ZXh0J10sPGJyPiAgICAgICAgICAgICAgICAgICAgWyd1cGRhdGVkX2F0JywgJ2RhdGV0aW1lJywgJ2RhdGUnXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ2hhc19zY2hlZHVsZWRfY2hhbmdlcycsICdzdHJpbmcnLCAndGV4dCddLDxicj4gICAgICAgICAgICAgICAgICAgIFsncGF5bWVudF9zb3VyY2VfaWQnLCAnc3RyaW5nJywgJ3RleHQnXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ2V4Y2hhbmdlX3JhdGUnLCAnbnVtYmVyJywgJ3RleHQnXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ2Jhc2VfY3VycmVuY3lfY29kZScsICdzdHJpbmcnLCAndGV4dCddPGJyPiAgICAgICAgICAgICAgICBdPGJyPiAgICAgICAgICAgIH0sPGJyPiAgICAgICAgICAgIHs8YnI+ICAgICAgICAgICAgICAgIGxhYmVsOiAnQ3VzdG9tZXInLDxicj4gICAgICAgICAgICAgICAga2V5OiAnY3VzdGNzdCcsPGJyPiAgICAgICAgICAgICAgICBmaWVsZHM6IFs8YnI+ICAgICAgICAgICAgICAgICAgICBbJ3ZhdF9udW1iZXInLCAnc3RyaW5nJywgJ3RleHQnXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ3ZhdF9udW1iZXJfdmFsaWRhdGVkX3RpbWUnLCAnZGF0ZXRpbWUnLCAnZGF0ZSddLDxicj4gICAgICAgICAgICAgICAgICAgIFsndmF0X251bWJlcl9zdGF0dXMnLCAnc3RyaW5nJywgJ3RleHQnXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ2FsbG93X2RpcmVjdF9kZWJpdCcsICdzdHJpbmcnLCAndGV4dCddLDxicj4gICAgICAgICAgICAgICAgICAgIFsnaXNfbG9jYXRpb25fdmFsaWQnLCAnc3RyaW5nJywgJ3RleHQnXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ2NyZWF0ZWRfYXQnLCAnZGF0ZXRpbWUnLCAnZGF0ZSddLDxicj4gICAgICAgICAgICAgICAgICAgIFsnY3JlYXRlZF9mcm9tX2lwJywgJ3N0cmluZycsICd0ZXh0J10sPGJyPiAgICAgICAgICAgICAgICAgICAgWyd0YXhhYmlsaXR5JywgJ3N0cmluZycsICd0ZXh0J10sPGJyPiAgICAgICAgICAgICAgICAgICAgWydlbnRpdHlfY29kZScsICdzdHJpbmcnLCAndGV4dCddLDxicj4gICAgICAgICAgICAgICAgICAgIFsnZXhlbXB0X251bWJlcicsICdzdHJpbmcnLCAndGV4dCddLDxicj4gICAgICAgICAgICAgICAgICAgIFsncmVzb3VyY2VfdmVyc2lvbicsICdudW1iZXInLCAndGV4dCddLDxicj4gICAgICAgICAgICAgICAgICAgIFsndXBkYXRlZF9hdCcsICdkYXRldGltZScsICdkYXRlJ10sPGJyPiAgICAgICAgICAgICAgICAgICAgWydsb2NhbGUnLCAnc3RyaW5nJywgJ3RleHQnXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ2NvbnNvbGlkYXRlZF9pbnZvaWNpbmcnLCAnc3RyaW5nJywgJ3RleHQnXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ2JpbGxpbmdfZGF0ZV9tb2RlJywgJ3N0cmluZycsICd0ZXh0J10sPGJyPiAgICAgICAgICAgICAgICAgICAgWydiaWxsaW5nX2RheV9vZl93ZWVrJywgJ3N0cmluZycsICd0ZXh0J10sPGJyPiAgICAgICAgICAgICAgICAgICAgWydiaWxsaW5nX2RheV9vZl93ZWVrX21vZGUnLCAnc3RyaW5nJywgJ3RleHQnXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ3BpaV9jbGVhcmVkJywgJ3N0cmluZycsICd0ZXh0J10sPGJyPiAgICAgICAgICAgICAgICAgICAgWydmcmF1ZF9mbGFnJywgJ3N0cmluZycsICd0ZXh0J10sPGJyPiAgICAgICAgICAgICAgICAgICAgWydwcmltYXJ5X3BheW1lbnRfc291cmNlX2lkJywgJ3N0cmluZycsICd0ZXh0J10sPGJyPiAgICAgICAgICAgICAgICAgICAgWydiYWNrdXBfcGF5bWVudF9zb3VyY2VfaWQnLCAnc3RyaW5nJywgJ3RleHQnXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ3Byb21vdGlvbmFsX2NyZWRpdHMnLCAnbnVtYmVyJywgJ3RleHQnLCAnY3VycmVuY3knXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ3VuYmlsbGVkX2NoYXJnZXMnLCAnbnVtYmVyJywgJ3RleHQnLCAnY3VycmVuY3knXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ3JlZnVuZGFibGVfY3JlZGl0cycsICdudW1iZXInLCAndGV4dCcsICdjdXJyZW5jeSddLDxicj4gICAgICAgICAgICAgICAgICAgIFsnZXhjZXNzX3BheW1lbnRzJywgJ251bWJlcicsICd0ZXh0JywgJ2N1cnJlbmN5J10sPGJyPiAgICAgICAgICAgICAgICAgICAgWydkZWxldGVkJywgJ3N0cmluZycsICd0ZXh0J10sPGJyPiAgICAgICAgICAgICAgICAgICAgWydyZWdpc3RlcmVkX2Zvcl9nc3QnLCAnc3RyaW5nJywgJ3RleHQnXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ2J1c2luZXNzX2N1c3RvbWVyX3dpdGhvdXRfdmF0X251bWJlcicsICdzdHJpbmcnLCAndGV4dCddLDxicj4gICAgICAgICAgICAgICAgICAgIFsnY3VzdG9tZXJfdHlwZScsICdzdHJpbmcnLCAndGV4dCddLDxicj4gICAgICAgICAgICAgICAgICAgIFsnY2xpZW50X3Byb2ZpbGVfaWQnLCAnc3RyaW5nJywgJ3RleHQnXSw8YnI+ICAgICAgICAgICAgICAgIF08YnI+ICAgICAgICAgICAgfSw8YnI+ICAgICAgICAgICAgezxicj4gICAgICAgICAgICAgICAgbGFiZWw6ICdPcmRlcicsPGJyPiAgICAgICAgICAgICAgICBrZXk6ICdvcmRlcmNzdCcsPGJyPiAgICAgICAgICAgICAgICBmaWVsZHM6IFs8YnI+ICAgICAgICAgICAgICAgICAgICBbJ2RvY3VtZW50X251bWJlcicsICdzdHJpbmcnLCAndGV4dCddLDxicj4gICAgICAgICAgICAgICAgICAgIFsnaW52b2ljZV9pZCcsICdzdHJpbmcnLCAndGV4dCddLDxicj4gICAgICAgICAgICAgICAgICAgIFsnY2FuY2VsbGF0aW9uX3JlYXNvbicsICdzdHJpbmcnLCAndGV4dCddLDxicj4gICAgICAgICAgICAgICAgICAgIFsncGF5bWVudF9zdGF0dXMnLCAnc3RyaW5nJywgJ3RleHQnXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ29yZGVyX3R5cGUnLCAnc3RyaW5nJywgJ3RleHQnXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ3ByaWNlX3R5cGUnLCAnc3RyaW5nJywgJ3RleHQnXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ3JlZmVyZW5jZV9pZCcsICdzdHJpbmcnLCAndGV4dCddLDxicj4gICAgICAgICAgICAgICAgICAgIFsnZnVsZmlsbG1lbnRfc3RhdHVzJywgJ3N0cmluZycsICd0ZXh0J10sPGJyPiAgICAgICAgICAgICAgICAgICAgWydzaGlwcGluZ19kYXRlJywgJ2RhdGV0aW1lJywgJ2RhdGUnXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ3RyYWNraW5nX2lkJywgJ3N0cmluZycsICd0ZXh0J10sPGJyPiAgICAgICAgICAgICAgICAgICAgWydiYXRjaF9pZCcsICdzdHJpbmcnLCAndGV4dCddLDxicj4gICAgICAgICAgICAgICAgICAgIFsnY3JlYXRlZF9ieScsICdzdHJpbmcnLCAndGV4dCddLDxicj4gICAgICAgICAgICAgICAgICAgIFsnc2hpcG1lbnRfY2FycmllcicsICdzdHJpbmcnLCAndGV4dCddLDxicj4gICAgICAgICAgICAgICAgICAgIFsnaW52b2ljZV9yb3VuZF9vZmZfYW1vdW50JywgJ251bWJlcicsICd0ZXh0JywgJ2N1cnJlbmN5J10sPGJyPiAgICAgICAgICAgICAgICAgICAgWyd0YXgnLCAnbnVtYmVyJywgJ3RleHQnLCAnY3VycmVuY3knXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ2Ftb3VudF9hZGp1c3RlZCcsICdudW1iZXInLCAndGV4dCcsICdjdXJyZW5jeSddLDxicj4gICAgICAgICAgICAgICAgICAgIFsncmVmdW5kYWJsZV9jcmVkaXRzX2lzc3VlZCcsICdudW1iZXInLCAndGV4dCcsICdjdXJyZW5jeSddLDxicj4gICAgICAgICAgICAgICAgICAgIFsncmVmdW5kYWJsZV9jcmVkaXRzJywgJ251bWJlcicsICd0ZXh0JywgJ2N1cnJlbmN5J10sPGJyPiAgICAgICAgICAgICAgICAgICAgWydyb3VuZGluZ19hZGp1c3RlbWVudCcsICdudW1iZXInLCAndGV4dCcsICdjdXJyZW5jeSddLDxicj4gICAgICAgICAgICAgICAgICAgIFsncGFpZF9vbicsICdkYXRldGltZScsICdkYXRlJ10sPGJyPiAgICAgICAgICAgICAgICAgICAgWydzaGlwcGluZ19jdXRfb2ZmX2RhdGUnLCAnZGF0ZXRpbWUnLCAnZGF0ZSddLDxicj4gICAgICAgICAgICAgICAgICAgIFsnY3JlYXRlZF9hdCcsICdkYXRldGltZScsICdkYXRlJ10sPGJyPiAgICAgICAgICAgICAgICAgICAgWydzdGF0dXNfdXBkYXRlX2F0JywgJ2RhdGV0aW1lJywgJ2RhdGUnXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ2RlbGl2ZXJlZF9hdCcsICdkYXRldGltZScsICdkYXRlJ10sPGJyPiAgICAgICAgICAgICAgICAgICAgWydzaGlwcGVkX2F0JywgJ2RhdGV0aW1lJywgJ2RhdGUnXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ3Jlc291cmNlX3ZlcnNpb24nLCAnbnVtYmVyJywgJ3RleHQnXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ3VwZGF0ZWRfYXQnLCAnZGF0ZXRpbWUnLCAnZGF0ZSddLDxicj4gICAgICAgICAgICAgICAgICAgIFsnY2FuY2VsbGVkX2F0JywgJ2RhdGV0aW1lJywgJ2RhdGUnXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ2Rpc2NvdW50JywgJ251bWJlcicsICd0ZXh0JywgJ2N1cnJlbmN5J10sPGJyPiAgICAgICAgICAgICAgICAgICAgWydzdWJfdG90YWwnLCAnbnVtYmVyJywgJ3RleHQnLCAnY3VycmVuY3knXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ3RvdGFsJywgJ251bWJlcicsICd0ZXh0JywgJ2N1cnJlbmN5J10sPGJyPiAgICAgICAgICAgICAgICAgICAgWydkZWxldGVkJywgJ3N0cmluZycsICd0ZXh0J10sPGJyPiAgICAgICAgICAgICAgICAgICAgWydjdXJyZW5jeV9jb2RlJywgJ3N0cmluZycsICd0ZXh0J10sPGJyPiAgICAgICAgICAgICAgICAgICAgWydpc19naWZ0ZWQnLCAnc3RyaW5nJywgJ3RleHQnXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ2dpZnRfaWQnLCAnc3RyaW5nJywgJ3RleHQnXTxicj4gICAgICAgICAgICAgICAgXTxicj4gICAgICAgICAgICB9LDxicj4gICAgICAgIF0sPGJyPiAgZWxpc3Q6W10sPGJyPiAgZW1hcDp7fSw8YnI+ICBzbGlzdDpbXSw8YnI+ICBzbWFwOnt9LDxicj4gICBzeW5jQ291bnQ6ezxicj4gICAgZUNvdW50OjAsPGJyPiAgICBzQ291bnQ6MDxicj4gIH08YnI+fTs8YnI+ZG9uZShkYXRhKTs8L3ByZT48YnI+PGI+UkFXIEpTT046PC9iPjxicj48YnI+PHByZT57PGJyPiAgJ29uU3VjY2Vzcyc6IFs8YnI+ICAgICdDaGFyZ2ViZWVDb25maWdQYXJhbXMnPGJyPiAgXSw8YnI+ICAnb25GYWlsdXJlJzogW10sPGJyPiAgJ25hbWUnOiAnU3luY0xvZycsPGJyPiAgJ3R5cGUnOiAnc2NyaXB0Jyw8YnI+ICAncHJvcGVydGllcyc6IHs8YnI+ICAgICdib2R5JzogJ2xldCBkYXRhID0ge1xuICBjdXN0b21lZmllbGRzOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbGFiZWw6IFwnU3Vic2NyaXB0aW9uXCcsXG4gICAgICAgICAgICAgICAga2V5OiBcJ3N1YmNzdFwnLFxuICAgICAgICAgICAgICAgIGZpZWxkczogW1xuICAgICAgICAgICAgICAgICAgICBbJ2N1cnJlbmN5X2NvZGUnLCAnc3RyaW5nJywgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgIFsncGxhbl9xdWFudGl0eScsICdudW1iZXInLCAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ3BsYW5fdW5pdF9wcmljZScsICdudW1iZXInLCAndGV4dCcsICdjdXJyZW5jeSddLFxuICAgICAgICAgICAgICAgICAgICBbJ3BsYW5fYW1vdW50JywgJ251bWJlcicsICd0ZXh0JywgJ2N1cnJlbmN5J10sXG4gICAgICAgICAgICAgICAgICAgIFsnYmlsbGluZ19wZXJpb2QnLCAnbnVtYmVyJywgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydiaWxsaW5nX3BlcmlvZF91bml0JywgJ3N0cmluZycsICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsncGxhbl9mcmVlX3F1YW50aXR5JywgJ251bWJlcicsICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsnc3RhcnRfZGF0ZScsICdkYXRldGltZScsICdkYXRlJ10sXG4gICAgICAgICAgICAgICAgICAgIFsndHJpYWxfc3RhcnQnLCAnZGF0ZXRpbWUnLCAnZGF0ZSddLFxuICAgICAgICAgICAgICAgICAgICBbJ3RyaWFsX2VuZCcsICdkYXRldGltZScsICdkYXRlJ10sXG4gICAgICAgICAgICAgICAgICAgIFsnY3VycmVudF90ZXJtX3N0YXJ0JywgJ2RhdGV0aW1lJywgJ2RhdGUnXSxcbiAgICAgICAgICAgICAgICAgICAgWydjdXJyZW50X3Rlcm1fZW5kJywgJ2RhdGV0aW1lJywgJ2RhdGUnXSxcbiAgICAgICAgICAgICAgICAgICAgWydjcmVhdGVkX2F0JywgJ2RhdGV0aW1lJywgJ2RhdGUnXSxcbiAgICAgICAgICAgICAgICAgICAgWydzdGFydGVkX2F0JywgJ2RhdGV0aW1lJywgJ2RhdGUnXSxcbiAgICAgICAgICAgICAgICAgICAgWydhY3RpdmF0ZWRfYXQnLCAnZGF0ZXRpbWUnLCAnZGF0ZSddLFxuICAgICAgICAgICAgICAgICAgICBbJ2dpZnRfaWQnLCAnc3RyaW5nJywgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydvdmVycmlkZV9yZWxhdGlvbnNoaXAnLCAnc3RyaW5nJywgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydwYXVzZV9kYXRlJywgJ2RhdGV0aW1lJywgJ2RhdGUnXSxcbiAgICAgICAgICAgICAgICAgICAgWydyZXN1bWVfZGF0ZScsICdkYXRldGltZScsICdkYXRlJ10sXG4gICAgICAgICAgICAgICAgICAgIFsnY2FuY2VsbGVkX2F0JywgJ2RhdGV0aW1lJywgJ2RhdGUnXSxcbiAgICAgICAgICAgICAgICAgICAgWydjYW5jZWxfcmVhc29uJywgJ3N0cmluZycsICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsnYWZmaWxpYXRlX3Rva2VuJywgJ3N0cmluZycsICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsnY3JlYXRlZF9mcm9tX2lwJywgJ3N0cmluZycsICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsncmVzb3VyY2VfdmVyc2lvbicsICdudW1iZXInLCAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ3VwZGF0ZWRfYXQnLCAnZGF0ZXRpbWUnLCAnZGF0ZSddLFxuICAgICAgICAgICAgICAgICAgICBbJ2hhc19zY2hlZHVsZWRfY2hhbmdlcycsICdzdHJpbmcnLCAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ3BheW1lbnRfc291cmNlX2lkJywgJ3N0cmluZycsICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsnZXhjaGFuZ2VfcmF0ZScsICdudW1iZXInLCAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2Jhc2VfY3VycmVuY3lfY29kZScsICdzdHJpbmcnLCAndGV4dCddXG4gICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBsYWJlbDogXCdDdXN0b21lclwnLFxuICAgICAgICAgICAgICAgIGtleTogXCdjdXN0Y3N0XCcsXG4gICAgICAgICAgICAgICAgZmllbGRzOiBbXG4gICAgICAgICAgICAgICAgICAgIFsndmF0X251bWJlcicsICdzdHJpbmcnLCAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ3ZhdF9udW1iZXJfdmFsaWRhdGVkX3RpbWUnLCAnZGF0ZXRpbWUnLCAnZGF0ZSddLFxuICAgICAgICAgICAgICAgICAgICBbJ3ZhdF9udW1iZXJfc3RhdHVzJywgJ3N0cmluZycsICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsnYWxsb3dfZGlyZWN0X2RlYml0JywgJ3N0cmluZycsICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsnaXNfbG9jYXRpb25fdmFsaWQnLCAnc3RyaW5nJywgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydjcmVhdGVkX2F0JywgJ2RhdGV0aW1lJywgJ2RhdGUnXSxcbiAgICAgICAgICAgICAgICAgICAgWydjcmVhdGVkX2Zyb21faXAnLCAnc3RyaW5nJywgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWyd0YXhhYmlsaXR5JywgJ3N0cmluZycsICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsnZW50aXR5X2NvZGUnLCAnc3RyaW5nJywgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydleGVtcHRfbnVtYmVyJywgJ3N0cmluZycsICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsncmVzb3VyY2VfdmVyc2lvbicsICdudW1iZXInLCAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ3VwZGF0ZWRfYXQnLCAnZGF0ZXRpbWUnLCAnZGF0ZSddLFxuICAgICAgICAgICAgICAgICAgICBbJ2xvY2FsZScsICdzdHJpbmcnLCAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2NvbnNvbGlkYXRlZF9pbnZvaWNpbmcnLCAnc3RyaW5nJywgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydiaWxsaW5nX2RhdGVfbW9kZScsICdzdHJpbmcnLCAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2JpbGxpbmdfZGF5X29mX3dlZWsnLCAnc3RyaW5nJywgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydiaWxsaW5nX2RheV9vZl93ZWVrX21vZGUnLCAnc3RyaW5nJywgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydwaWlfY2xlYXJlZCcsICdzdHJpbmcnLCAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2ZyYXVkX2ZsYWcnLCAnc3RyaW5nJywgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydwcmltYXJ5X3BheW1lbnRfc291cmNlX2lkJywgJ3N0cmluZycsICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsnYmFja3VwX3BheW1lbnRfc291cmNlX2lkJywgJ3N0cmluZycsICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsncHJvbW90aW9uYWxfY3JlZGl0cycsICdudW1iZXInLCAndGV4dCcsICdjdXJyZW5jeSddLFxuICAgICAgICAgICAgICAgICAgICBbJ3VuYmlsbGVkX2NoYXJnZXMnLCAnbnVtYmVyJywgJ3RleHQnLCAnY3VycmVuY3knXSxcbiAgICAgICAgICAgICAgICAgICAgWydyZWZ1bmRhYmxlX2NyZWRpdHMnLCAnbnVtYmVyJywgJ3RleHQnLCAnY3VycmVuY3knXSxcbiAgICAgICAgICAgICAgICAgICAgWydleGNlc3NfcGF5bWVudHMnLCAnbnVtYmVyJywgJ3RleHQnLCAnY3VycmVuY3knXSxcbiAgICAgICAgICAgICAgICAgICAgWydkZWxldGVkJywgJ3N0cmluZycsICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsncmVnaXN0ZXJlZF9mb3JfZ3N0JywgJ3N0cmluZycsICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsnYnVzaW5lc3NfY3VzdG9tZXJfd2l0aG91dF92YXRfbnVtYmVyJywgJ3N0cmluZycsICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsnY3VzdG9tZXJfdHlwZScsICdzdHJpbmcnLCAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2NsaWVudF9wcm9maWxlX2lkJywgJ3N0cmluZycsICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBsYWJlbDogXCdPcmRlclwnLFxuICAgICAgICAgICAgICAgIGtleTogXCdvcmRlcmNzdFwnLFxuICAgICAgICAgICAgICAgIGZpZWxkczogW1xuICAgICAgICAgICAgICAgICAgICBbJ2RvY3VtZW50X251bWJlcicsICdzdHJpbmcnLCAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2ludm9pY2VfaWQnLCAnc3RyaW5nJywgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydjYW5jZWxsYXRpb25fcmVhc29uJywgJ3N0cmluZycsICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsncGF5bWVudF9zdGF0dXMnLCAnc3RyaW5nJywgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydvcmRlcl90eXBlJywgJ3N0cmluZycsICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsncHJpY2VfdHlwZScsICdzdHJpbmcnLCAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ3JlZmVyZW5jZV9pZCcsICdzdHJpbmcnLCAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2Z1bGZpbGxtZW50X3N0YXR1cycsICdzdHJpbmcnLCAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ3NoaXBwaW5nX2RhdGUnLCAnZGF0ZXRpbWUnLCAnZGF0ZSddLFxuICAgICAgICAgICAgICAgICAgICBbJ3RyYWNraW5nX2lkJywgJ3N0cmluZycsICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsnYmF0Y2hfaWQnLCAnc3RyaW5nJywgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydjcmVhdGVkX2J5JywgJ3N0cmluZycsICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsnc2hpcG1lbnRfY2FycmllcicsICdzdHJpbmcnLCAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2ludm9pY2Vfcm91bmRfb2ZmX2Ftb3VudCcsICdudW1iZXInLCAndGV4dCcsICdjdXJyZW5jeSddLFxuICAgICAgICAgICAgICAgICAgICBbJ3RheCcsICdudW1iZXInLCAndGV4dCcsICdjdXJyZW5jeSddLFxuICAgICAgICAgICAgICAgICAgICBbJ2Ftb3VudF9hZGp1c3RlZCcsICdudW1iZXInLCAndGV4dCcsICdjdXJyZW5jeSddLFxuICAgICAgICAgICAgICAgICAgICBbJ3JlZnVuZGFibGVfY3JlZGl0c19pc3N1ZWQnLCAnbnVtYmVyJywgJ3RleHQnLCAnY3VycmVuY3knXSxcbiAgICAgICAgICAgICAgICAgICAgWydyZWZ1bmRhYmxlX2NyZWRpdHMnLCAnbnVtYmVyJywgJ3RleHQnLCAnY3VycmVuY3knXSxcbiAgICAgICAgICAgICAgICAgICAgWydyb3VuZGluZ19hZGp1c3RlbWVudCcsICdudW1iZXInLCAndGV4dCcsICdjdXJyZW5jeSddLFxuICAgICAgICAgICAgICAgICAgICBbJ3BhaWRfb24nLCAnZGF0ZXRpbWUnLCAnZGF0ZSddLFxuICAgICAgICAgICAgICAgICAgICBbJ3NoaXBwaW5nX2N1dF9vZmZfZGF0ZScsICdkYXRldGltZScsICdkYXRlJ10sXG4gICAgICAgICAgICAgICAgICAgIFsnY3JlYXRlZF9hdCcsICdkYXRldGltZScsICdkYXRlJ10sXG4gICAgICAgICAgICAgICAgICAgIFsnc3RhdHVzX3VwZGF0ZV9hdCcsICdkYXRldGltZScsICdkYXRlJ10sXG4gICAgICAgICAgICAgICAgICAgIFsnZGVsaXZlcmVkX2F0JywgJ2RhdGV0aW1lJywgJ2RhdGUnXSxcbiAgICAgICAgICAgICAgICAgICAgWydzaGlwcGVkX2F0JywgJ2RhdGV0aW1lJywgJ2RhdGUnXSxcbiAgICAgICAgICAgICAgICAgICAgWydyZXNvdXJjZV92ZXJzaW9uJywgJ251bWJlcicsICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsndXBkYXRlZF9hdCcsICdkYXRldGltZScsICdkYXRlJ10sXG4gICAgICAgICAgICAgICAgICAgIFsnY2FuY2VsbGVkX2F0JywgJ2RhdGV0aW1lJywgJ2RhdGUnXSxcbiAgICAgICAgICAgICAgICAgICAgWydkaXNjb3VudCcsICdudW1iZXInLCAndGV4dCcsICdjdXJyZW5jeSddLFxuICAgICAgICAgICAgICAgICAgICBbJ3N1Yl90b3RhbCcsICdudW1iZXInLCAndGV4dCcsICdjdXJyZW5jeSddLFxuICAgICAgICAgICAgICAgICAgICBbJ3RvdGFsJywgJ251bWJlcicsICd0ZXh0JywgJ2N1cnJlbmN5J10sXG4gICAgICAgICAgICAgICAgICAgIFsnZGVsZXRlZCcsICdzdHJpbmcnLCAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2N1cnJlbmN5X2NvZGUnLCAnc3RyaW5nJywgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydpc19naWZ0ZWQnLCAnc3RyaW5nJywgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydnaWZ0X2lkJywgJ3N0cmluZycsICd0ZXh0J11cbiAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICB9LFxuICAgICAgICBdLFxuICBlbGlzdDpbXSxcbiAgZW1hcDp7fSxcbiAgc2xpc3Q6W10sXG4gIHNtYXA6e30sXG4gICBzeW5jQ291bnQ6e1xuICAgIGVDb3VudDowLFxuICAgIHNDb3VudDowXG4gIH1cbn07XG5kb25lKGRhdGEpOyc8YnI+ICB9PGJyPn08L3ByZT48L2JvZHk+PC9odG1sPg=='));document.close();" "JavaScript:<br><pre>let data = {<br>  customefields: [<br>            {<br>                label: 'Subscription',<br>                key: 'subcst',<br>                fields: [<br>                    ['currency_code', 'string', 'text'],<br>                     ['plan_quantity', 'number', 'text'],<br>                    ['plan_unit_price', 'number', 'text', 'currency'],<br>                    ['plan_amount', 'number', 'text', 'currency'],<br>                    ['billing_period', 'number', 'text'],<br>                    ['billing_period_unit', 'string', 'text'],<br>                    ['plan_free_quantity', 'number', 'text'],<br>                    ['start_date', 'datetime', 'date'],<br>                    ['trial_start', 'datetime', 'date'],<br>                    ['trial_end', 'datetime', 'date'],<br>                    ['current_term_start', 'datetime', 'date'],<br>                    ['current_term_end', 'datetime', 'date'],<br>                    ['created_at', 'datetime', 'date'],<br>                    ['started_at', 'datetime', 'date'],<br>                    ['activated_at', 'datetime', 'date'],<br>                    ['gift_id', 'string', 'text'],<br>                    ['override_relationship', 'string', 'text'],<br>                    ['pause_date', 'datetime', 'date'],<br>                    ['resume_date', 'datetime', 'date'],<br>                    ['cancelled_at', 'datetime', 'date'],<br>                    ['cancel_reason', 'string', 'text'],<br>                    ['affiliate_token', 'string', 'text'],<br>                    ['created_from_ip', 'string', 'text'],<br>                    ['resource_version', 'number', 'text'],<br>                    ['updated_at', 'datetime', 'date'],<br>                    ['has_scheduled_changes', 'string', 'text'],<br>                    ['payment_source_id', 'string', 'text'],<br>                    ['exchange_rate', 'number', 'text'],<br>                    ['base_currency_code', 'string', 'text']<br>                ]<br>            },<br>            {<br>                label: 'Customer',<br>                key: 'custcst',<br>                fields: [<br>                    ['vat_number', 'string', 'text'],<br>                    ['vat_number_validated_time', 'datetime', 'date'],<br>                    ['vat_number_status', 'string', 'text'],<br>                    ['allow_direct_debit', 'string', 'text'],<br>                    ['is_location_valid', 'string', 'text'],<br>                    ['created_at', 'datetime', 'date'],<br>                    ['created_from_ip', 'string', 'text'],<br>                    ['taxability', 'string', 'text'],<br>                    ['entity_code', 'string', 'text'],<br>                    ['exempt_number', 'string', 'text'],<br>                    ['resource_version', 'number', 'text'],<br>                    ['updated_at', 'datetime', 'date'],<br>                    ['locale', 'string', 'text'],<br>                    ['consolidated_invoicing', 'string', 'text'],<br>                    ['billing_date_mode', 'string', 'text'],<br>                    ['billing_day_of_week', 'string', 'text'],<br>                    ['billing_day_of_week_mode', 'string', 'text'],<br>                    ['pii_cleared', 'string', 'text'],<br>                    ['fraud_flag', 'string', 'text'],<br>                    ['primary_payment_source_id', 'string', 'text'],<br>                    ['backup_payment_source_id', 'string', 'text'],<br>                    ['promotional_credits', 'number', 'text', 'currency'],<br>                    ['unbilled_charges', 'number', 'text', 'currency'],<br>                    ['refundable_credits', 'number', 'text', 'currency'],<br>                    ['excess_payments', 'number', 'text', 'currency'],<br>                    ['deleted', 'string', 'text'],<br>                    ['registered_for_gst', 'string', 'text'],<br>                    ['business_customer_without_vat_number', 'string', 'text'],<br>                    ['customer_type', 'string', 'text'],<br>                    ['client_profile_id', 'string', 'text'],<br>                ]<br>            },<br>            {<br>                label: 'Order',<br>                key: 'ordercst',<br>                fields: [<br>                    ['document_number', 'string', 'text'],<br>                    ['invoice_id', 'string', 'text'],<br>                    ['cancellation_reason', 'string', 'text'],<br>                    ['payment_status', 'string', 'text'],<br>                    ['order_type', 'string', 'text'],<br>                    ['price_type', 'string', 'text'],<br>                    ['reference_id', 'string', 'text'],<br>                    ['fulfillment_status', 'string', 'text'],<br>                    ['shipping_date', 'datetime', 'date'],<br>                    ['tracking_id', 'string', 'text'],<br>                    ['batch_id', 'string', 'text'],<br>                    ['created_by', 'string', 'text'],<br>                    ['shipment_carrier', 'string', 'text'],<br>                    ['invoice_round_off_amount', 'number', 'text', 'currency'],<br>                    ['tax', 'number', 'text', 'currency'],<br>                    ['amount_adjusted', 'number', 'text', 'currency'],<br>                    ['refundable_credits_issued', 'number', 'text', 'currency'],<br>                    ['refundable_credits', 'number', 'text', 'currency'],<br>                    ['rounding_adjustement', 'number', 'text', 'currency'],<br>                    ['paid_on', 'datetime', 'date'],<br>                    ['shipping_cut_off_date', 'datetime', 'date'],<br>                    ['created_at', 'datetime', 'date'],<br>                    ['status_update_at', 'datetime', 'date'],<br>                    ['delivered_at', 'datetime', 'date'],<br>                    ['shipped_at', 'datetime', 'date'],<br>                    ['resource_version', 'number', 'text'],<br>                    ['updated_at', 'datetime', 'date'],<br>                    ['cancelled_at', 'datetime', 'date'],<br>                    ['discount', 'number', 'text', 'currency'],<br>                    ['sub_total', 'number', 'text', 'currency'],<br>                    ['total', 'number', 'text', 'currency'],<br>                    ['deleted', 'string', 'text'],<br>                    ['currency_code', 'string', 'text'],<br>                    ['is_gifted', 'string', 'text'],<br>                    ['gift_id', 'string', 'text']<br>                ]<br>            },<br>        ],<br>  elist:[],<br>  emap:{},<br>  slist:[],<br>  smap:{},<br>   syncCount:{<br>    eCount:0,<br>    sCount:0<br>  }<br>};<br>done(data);</pre>"
            click step-003 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkNoYXJnZWJlZUNvbmZpZ1BhcmFtczwvdGl0bGU+PC9oZWFkPjxib2R5PjxiPk90aGVyIChodHRwUmVxdWVzdCk6PC9iPjxicj48YnI+PHByZT4gICAgICB1cmwgOiAke3N0ZXBzLklucHV0UGFyYW1zLmNvbmZpZy51cmx9PGJyPiAgICBxdWVyeSA6ICR7c3RlcHMuSW5wdXRQYXJhbXMuY29uZmlnLnF1ZXJ5fTxicj4gIGhlYWRlcnMgOiAke3N0ZXBzLklucHV0UGFyYW1zLmNvbmZpZy5hdXRofTxicj4gICBtZXRob2QgOiBHRVQ8L3ByZT48YnI+PGI+UkFXIEpTT046PC9iPjxicj48YnI+PHByZT57PGJyPiAgJ29uU3VjY2Vzcyc6IFs8YnI+ICAgICdHZXRDQkN1c3RvbUZpZWxkcyc8YnI+ICBdLDxicj4gICdvbkZhaWx1cmUnOiBbXSw8YnI+ICAnbmFtZSc6ICdDaGFyZ2ViZWVDb25maWdQYXJhbXMnLDxicj4gICd0eXBlJzogJ2h0dHBSZXF1ZXN0Jyw8YnI+ICAncHJvcGVydGllcyc6IHs8YnI+ICAgICd1cmwnOiAnJHtzdGVwcy5JbnB1dFBhcmFtcy5jb25maWcudXJsfScsPGJyPiAgICAncXVlcnknOiAnJHtzdGVwcy5JbnB1dFBhcmFtcy5jb25maWcucXVlcnl9Jyw8YnI+ICAgICdoZWFkZXJzJzogJyR7c3RlcHMuSW5wdXRQYXJhbXMuY29uZmlnLmF1dGh9Jyw8YnI+ICAgICdtZXRob2QnOiAnR0VUJzxicj4gIH08YnI+fTwvcHJlPjwvYm9keT48L2h0bWw+'));document.close();" "Other (httpRequest):<br><pre>      url : ${steps.InputParams.config.url}<br>    query : ${steps.InputParams.config.query}<br>  headers : ${steps.InputParams.config.auth}<br>   method : GET</pre>"
            click step-004 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkdldENCQ3VzdG9tRmllbGRzPC90aXRsZT48L2hlYWQ+PGJvZHk+PGI+T3RoZXIgKGh0dHBSZXF1ZXN0KTo8L2I+PGJyPjxicj48cHJlPiAgICAgIHVybCA6ICR7c3RlcHMuSW5wdXRQYXJhbXMuY29uZmlnLmN1c3RvbUZpZWxkVXJsfTxicj4gIGhlYWRlcnMgOiAke3N0ZXBzLklucHV0UGFyYW1zLmNvbmZpZy5hdXRofTxicj4gICBtZXRob2QgOiBHRVQ8L3ByZT48YnI+PGI+UkFXIEpTT046PC9iPjxicj48YnI+PHByZT57PGJyPiAgJ29uU3VjY2Vzcyc6IFs8YnI+ICAgICdVcGRhdGVDdXN0b21GaWVsZEluZm8nPGJyPiAgXSw8YnI+ICAnb25GYWlsdXJlJzogW10sPGJyPiAgJ25hbWUnOiAnR2V0Q0JDdXN0b21GaWVsZHMnLDxicj4gICd0eXBlJzogJ2h0dHBSZXF1ZXN0Jyw8YnI+ICAncHJvcGVydGllcyc6IHs8YnI+ICAgICd1cmwnOiAnJHtzdGVwcy5JbnB1dFBhcmFtcy5jb25maWcuY3VzdG9tRmllbGRVcmx9Jyw8YnI+ICAgICdoZWFkZXJzJzogJyR7c3RlcHMuSW5wdXRQYXJhbXMuY29uZmlnLmF1dGh9Jyw8YnI+ICAgICdtZXRob2QnOiAnR0VUJzxicj4gIH08YnI+fTwvcHJlPjwvYm9keT48L2h0bWw+'));document.close();" "Other (httpRequest):<br><pre>      url : ${steps.InputParams.config.customFieldUrl}<br>  headers : ${steps.InputParams.config.auth}<br>   method : GET</pre>"
            click step-005 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPlVwZGF0ZUN1c3RvbUZpZWxkSW5mbzwvdGl0bGU+PC9oZWFkPjxib2R5PjxiPkphdmFTY3JpcHQ6PC9iPjxicj48YnI+PHByZT5sZXQgY3VzdG9tZWZpZWxkcyA9IHN0ZXBzLlN5bmNMb2cuY3VzdG9tZWZpZWxkczs8YnI+bGV0IGxpc3QgPSBzdGVwcy5HZXRDQkN1c3RvbUZpZWxkcy5yZXNwb25zZS5ib2R5Ozxicj5pZihsaXN0IT09dW5kZWZpbmVkICYmIGxpc3QubGlzdCE9PXVuZGVmaW5lZCAmJiBsaXN0Lmxpc3QubGVuZ3RoPHNwYW4+Pjwvc3Bhbj4wKSB7PGJyPiAgbGlzdCA9IGxpc3QubGlzdDs8YnI+fTxicj5pZihsaXN0IT09dW5kZWZpbmVkKXs8YnI+ICBsZXQgbGlzdE1hcCA9IHt9Ozxicj4gIGZvcih2YXIgaT0wO2k8c3Bhbj48PC9zcGFuPmxpc3QubGVuZ3RoO2krKyl7PGJyPiAgICBsZXQgb2JqID0gbGlzdFtpXTs8YnI+ICAgIGlmKG9iai5jdXN0b21fZmllbGRfY29uZmlnICE9PSB1bmRlZmluZWQpIHs8YnI+ICAgICAgaWYob2JqLmN1c3RvbV9maWVsZF9jb25maWcuZW50aXR5X3R5cGUgPT09ICdjdXN0b21lcicpIHs8YnI+ICAgICAgICBsaXN0TWFwWydjdXN0Y3N0Xycrb2JqLmN1c3RvbV9maWVsZF9jb25maWcuYXBpX25hbWVdID0gb2JqLmN1c3RvbV9maWVsZF9jb25maWc7PGJyPiAgICAgIH1lbHNlIGlmKG9iai5jdXN0b21fZmllbGRfY29uZmlnLmVudGl0eV90eXBlID09PSAnc3Vic2NyaXB0aW9uJykgezxicj4gICAgICAgIGxpc3RNYXBbJ3N1YmNzdF8nK29iai5jdXN0b21fZmllbGRfY29uZmlnLmFwaV9uYW1lXSA9IG9iai5jdXN0b21fZmllbGRfY29uZmlnOzxicj4gICAgICB9PGJyPiAgICB9PGJyPiAgICA8YnI+ICB9PGJyPiAgICBsZXQgc3luY1J1bGVzRmllbGRzID0gc3RlcHMuQ2hhcmdlYmVlQ29uZmlnUGFyYW1zLnJlc3BvbnNlLmJvZHkudGhpcmRfcGFydHlfY29uZmlndXJhdGlvbi5jb25maWdfanNvbi5jbG91ZEVsZW1lbnRzLnN5bmNSdWxlc0ZpZWxkczs8YnI+ICBpZiAoc3luY1J1bGVzRmllbGRzID09PSB1bmRlZmluZWQpIHs8YnI+ICAgIHN5bmNSdWxlc0ZpZWxkcyA9IHs8YnI+ICAgICAgJ2NvbXBhbnknOiB7PGJyPjxicj4gICAgICB9LDxicj4gICAgICAnY29udGFjdCc6IHs8YnI+PGJyPiAgICAgIH0sPGJyPiAgICAgICdkZWFsJzogezxicj4gICAgICB9LDxicj4gICAgICAnc3luYyc6ICdmYWxzZSc8YnI+ICAgIH07PGJyPjxicj4gIH0gZWxzZSB7PGJyPiAgICBpZiAoc3luY1J1bGVzRmllbGRzLmNvbXBhbnkgPT09IHVuZGVmaW5lZCB8fCBzeW5jUnVsZXNGaWVsZHMuY29tcGFueSA9PT0gJycpIHs8YnI+ICAgICAgc3luY1J1bGVzRmllbGRzLmNvbXBhbnkgPSB7fTs8YnI+ICAgIH08YnI+ICAgIGlmIChzeW5jUnVsZXNGaWVsZHMuY29udGFjdCA9PT0gdW5kZWZpbmVkIHx8IHN5bmNSdWxlc0ZpZWxkcy5jb250YWN0ID09PSAnJykgezxicj4gICAgICBzeW5jUnVsZXNGaWVsZHMuY29udGFjdCA9IHt9Ozxicj4gICAgfTxicj4gICAgaWYgKHN5bmNSdWxlc0ZpZWxkcy5kZWFsID09PSB1bmRlZmluZWQgfHwgc3luY1J1bGVzRmllbGRzLmRlYWwgPT09ICcnKSB7PGJyPiAgICAgIHN5bmNSdWxlc0ZpZWxkcy5kZWFsID0ge307PGJyPiAgICB9PGJyPiAgfTxicj4gIDxicj4gIGxldCBjb250YWN0S2V5cyA9IE9iamVjdC5rZXlzKHN5bmNSdWxlc0ZpZWxkcy5jb250YWN0KTs8YnI+ICBsZXQgc3ViS2V5cyA9IE9iamVjdC5rZXlzKHN5bmNSdWxlc0ZpZWxkcy5kZWFsKTs8YnI+ICBsZXQgY0tleXMgPVtdOzxicj4gIGxldCBjTWFwID0ge307PGJyPiAgZm9yICh2YXIgaSA9IDA7IGkgPHNwYW4+PDwvc3Bhbj4gY29udGFjdEtleXMubGVuZ3RoOyBpKyspIHs8YnI+ICAgIGlmKGNvbnRhY3RLZXlzW2ldLnN0YXJ0c1dpdGgoJ2N1c3Rjc3RfY2ZfJykgfHwgY29udGFjdEtleXNbaV0uc3RhcnRzV2l0aCgnc3ViY3N0X2NmXycpICkgezxicj4gICAgICBpZihjTWFwW2NvbnRhY3RLZXlzW2ldXSA9PT0gdW5kZWZpbmVkKXs8YnI+ICAgICAgICBjS2V5cy5wdXNoKGNvbnRhY3RLZXlzW2ldKTs8YnI+ICAgICAgICBjTWFwW2NvbnRhY3RLZXlzW2ldXSA9Y29udGFjdEtleXNbaV07PGJyPiAgICAgIH08YnI+ICAgIH08YnI+ICB9PGJyPiAgZm9yICh2YXIgaSA9IDA7IGkgPHNwYW4+PDwvc3Bhbj4gc3ViS2V5cy5sZW5ndGg7IGkrKykgezxicj4gICAgaWYoc3ViS2V5c1tpXS5zdGFydHNXaXRoKCdjdXN0Y3N0X2NmXycpIHx8IHN1YktleXNbaV0uc3RhcnRzV2l0aCgnc3ViY3N0X2NmXycpICkgezxicj4gICAgICBpZihjTWFwW3N1YktleXNbaV1dID09PSB1bmRlZmluZWQpezxicj4gICAgICAgIGNLZXlzLnB1c2goc3ViS2V5c1tpXSk7PGJyPiAgICAgICAgY01hcFtzdWJLZXlzW2ldXSA9c3ViS2V5c1tpXTs8YnI+ICAgICAgfTxicj4gICAgfTxicj4gIH08YnI+ICA8YnI+ICAgIGZvciAodmFyIGkgPSAwOyBpIDxzcGFuPjw8L3NwYW4+IGNLZXlzLmxlbmd0aDsgaSsrKSB7PGJyPiAgICAgIGlmKGxpc3RNYXBbY0tleXNbaV1dICE9PSB1bmRlZmluZWQpIHs8YnI+ICAgICAgICAgbGV0IHR5cGUgPSBsaXN0TWFwW2NLZXlzW2ldXS5maWVsZF9kYXRhdHlwZTs8YnI+ICAgICAgICAgbGV0IGtleW5hbWUgPSBsaXN0TWFwW2NLZXlzW2ldXS5hcGlfbmFtZTs8YnI+ICAgICAgICAgaWYobGlzdE1hcFtjS2V5c1tpXV0uZW50aXR5X3R5cGUgPT09ICdjdXN0b21lcicpIHs8YnI+ICAgICAgICAgIDxicj4gICAgICAgICAgIGlmKHR5cGUgPT09J2RhdGUnIHx8IHR5cGUgPT09J3RpbWVzdGFtcCcpIHs8YnI+ICAgICAgICAgICAgIGN1c3RvbWVmaWVsZHNbMV0uZmllbGRzLnB1c2goW2tleW5hbWUsICdkYXRldGltZScsICdkYXRlJ10pOzxicj4gICAgICAgICAgIH1lbHNlIGlmKHR5cGUgPT09J2xvbmcnKXs8YnI+ICAgICAgICAgICAgIGN1c3RvbWVmaWVsZHNbMV0uZmllbGRzLnB1c2goW2tleW5hbWUsICdudW1iZXInLCAndGV4dCddKTs8YnI+ICAgICAgICAgICB9ZWxzZSB7PGJyPiAgICAgICAgICAgICBjdXN0b21lZmllbGRzWzFdLmZpZWxkcy5wdXNoKFtrZXluYW1lLCAnc3RyaW5nJywgJ3RleHQnXSk7PGJyPiAgICAgICAgICAgfTxicj4gICAgICAgICAgIDxicj4gICAgICAgICB9ZWxzZSBpZihsaXN0TWFwW2NLZXlzW2ldXS5lbnRpdHlfdHlwZSA9PT0gJ3N1YnNjcmlwdGlvbicpIHs8YnI+ICAgICAgICAgICAgaWYodHlwZSA9PT0nZGF0ZScgfHwgdHlwZSA9PT0ndGltZXN0YW1wJykgezxicj4gICAgICAgICAgICAgY3VzdG9tZWZpZWxkc1swXS5maWVsZHMucHVzaChba2V5bmFtZSwgJ2RhdGV0aW1lJywgJ2RhdGUnXSk7PGJyPiAgICAgICAgICAgfWVsc2UgaWYodHlwZSA9PT0nbG9uZycpezxicj4gICAgICAgICAgICAgY3VzdG9tZWZpZWxkc1swXS5maWVsZHMucHVzaChba2V5bmFtZSwgJ251bWJlcicsICd0ZXh0J10pOzxicj4gICAgICAgICAgIH1lbHNlIHs8YnI+ICAgICAgICAgICAgIGN1c3RvbWVmaWVsZHNbMF0uZmllbGRzLnB1c2goW2tleW5hbWUsICdzdHJpbmcnLCAndGV4dCddKTs8YnI+ICAgICAgICAgICB9PGJyPiAgICAgICAgIH08YnI+ICAgICAgfTxicj4gICAgfTxicj4gIDxicj4gIDxicj5zdGVwcy5TeW5jTG9nLmN1c3RvbWVmaWVsZHM9IGN1c3RvbWVmaWVsZHM7PGJyPiAgPGJyPn08YnI+ZG9uZShzdGVwcy5TeW5jTG9nLmN1c3RvbWVmaWVsZHMpOzwvcHJlPjxicj48Yj5SQVcgSlNPTjo8L2I+PGJyPjxicj48cHJlPns8YnI+ICAnb25TdWNjZXNzJzogWzxicj4gICAgJ0N1c3RvbWVyc1BhcmFtJzxicj4gIF0sPGJyPiAgJ29uRmFpbHVyZSc6IFtdLDxicj4gICduYW1lJzogJ1VwZGF0ZUN1c3RvbUZpZWxkSW5mbycsPGJyPiAgJ3R5cGUnOiAnc2NyaXB0Jyw8YnI+ICAncHJvcGVydGllcyc6IHs8YnI+ICAgICdib2R5JzogJ2xldCBjdXN0b21lZmllbGRzID0gc3RlcHMuU3luY0xvZy5jdXN0b21lZmllbGRzO1xubGV0IGxpc3QgPSBzdGVwcy5HZXRDQkN1c3RvbUZpZWxkcy5yZXNwb25zZS5ib2R5O1xuaWYobGlzdCE9PXVuZGVmaW5lZCAmJiBsaXN0Lmxpc3QhPT11bmRlZmluZWQgJiYgbGlzdC5saXN0Lmxlbmd0aDxzcGFuPj48L3NwYW4+MCkge1xuICBsaXN0ID0gbGlzdC5saXN0O1xufVxuaWYobGlzdCE9PXVuZGVmaW5lZCl7XG4gIGxldCBsaXN0TWFwID0ge307XG4gIGZvcih2YXIgaT0wO2k8c3Bhbj48PC9zcGFuPmxpc3QubGVuZ3RoO2krKyl7XG4gICAgbGV0IG9iaiA9IGxpc3RbaV07XG4gICAgaWYob2JqLmN1c3RvbV9maWVsZF9jb25maWcgIT09IHVuZGVmaW5lZCkge1xuICAgICAgaWYob2JqLmN1c3RvbV9maWVsZF9jb25maWcuZW50aXR5X3R5cGUgPT09IFwnY3VzdG9tZXJcJykge1xuICAgICAgICBsaXN0TWFwW1wnY3VzdGNzdF9cJytvYmouY3VzdG9tX2ZpZWxkX2NvbmZpZy5hcGlfbmFtZV0gPSBvYmouY3VzdG9tX2ZpZWxkX2NvbmZpZztcbiAgICAgIH1lbHNlIGlmKG9iai5jdXN0b21fZmllbGRfY29uZmlnLmVudGl0eV90eXBlID09PSBcJ3N1YnNjcmlwdGlvblwnKSB7XG4gICAgICAgIGxpc3RNYXBbXCdzdWJjc3RfXCcrb2JqLmN1c3RvbV9maWVsZF9jb25maWcuYXBpX25hbWVdID0gb2JqLmN1c3RvbV9maWVsZF9jb25maWc7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICB9XG4gICAgbGV0IHN5bmNSdWxlc0ZpZWxkcyA9IHN0ZXBzLkNoYXJnZWJlZUNvbmZpZ1BhcmFtcy5yZXNwb25zZS5ib2R5LnRoaXJkX3BhcnR5X2NvbmZpZ3VyYXRpb24uY29uZmlnX2pzb24uY2xvdWRFbGVtZW50cy5zeW5jUnVsZXNGaWVsZHM7XG4gIGlmIChzeW5jUnVsZXNGaWVsZHMgPT09IHVuZGVmaW5lZCkge1xuICAgIHN5bmNSdWxlc0ZpZWxkcyA9IHtcbiAgICAgIFwnY29tcGFueVwnOiB7XG5cbiAgICAgIH0sXG4gICAgICBcJ2NvbnRhY3RcJzoge1xuXG4gICAgICB9LFxuICAgICAgXCdkZWFsXCc6IHtcbiAgICAgIH0sXG4gICAgICBcJ3N5bmNcJzogXCdmYWxzZVwnXG4gICAgfTtcblxuICB9IGVsc2Uge1xuICAgIGlmIChzeW5jUnVsZXNGaWVsZHMuY29tcGFueSA9PT0gdW5kZWZpbmVkIHx8IHN5bmNSdWxlc0ZpZWxkcy5jb21wYW55ID09PSBcJ1wnKSB7XG4gICAgICBzeW5jUnVsZXNGaWVsZHMuY29tcGFueSA9IHt9O1xuICAgIH1cbiAgICBpZiAoc3luY1J1bGVzRmllbGRzLmNvbnRhY3QgPT09IHVuZGVmaW5lZCB8fCBzeW5jUnVsZXNGaWVsZHMuY29udGFjdCA9PT0gXCdcJykge1xuICAgICAgc3luY1J1bGVzRmllbGRzLmNvbnRhY3QgPSB7fTtcbiAgICB9XG4gICAgaWYgKHN5bmNSdWxlc0ZpZWxkcy5kZWFsID09PSB1bmRlZmluZWQgfHwgc3luY1J1bGVzRmllbGRzLmRlYWwgPT09IFwnXCcpIHtcbiAgICAgIHN5bmNSdWxlc0ZpZWxkcy5kZWFsID0ge307XG4gICAgfVxuICB9XG4gIFxuICBsZXQgY29udGFjdEtleXMgPSBPYmplY3Qua2V5cyhzeW5jUnVsZXNGaWVsZHMuY29udGFjdCk7XG4gIGxldCBzdWJLZXlzID0gT2JqZWN0LmtleXMoc3luY1J1bGVzRmllbGRzLmRlYWwpO1xuICBsZXQgY0tleXMgPVtdO1xuICBsZXQgY01hcCA9IHt9O1xuICBmb3IgKHZhciBpID0gMDsgaSA8c3Bhbj48PC9zcGFuPiBjb250YWN0S2V5cy5sZW5ndGg7IGkrKykge1xuICAgIGlmKGNvbnRhY3RLZXlzW2ldLnN0YXJ0c1dpdGgoXCdjdXN0Y3N0X2NmX1wnKSB8fCBjb250YWN0S2V5c1tpXS5zdGFydHNXaXRoKFwnc3ViY3N0X2NmX1wnKSApIHtcbiAgICAgIGlmKGNNYXBbY29udGFjdEtleXNbaV1dID09PSB1bmRlZmluZWQpe1xuICAgICAgICBjS2V5cy5wdXNoKGNvbnRhY3RLZXlzW2ldKTtcbiAgICAgICAgY01hcFtjb250YWN0S2V5c1tpXV0gPWNvbnRhY3RLZXlzW2ldO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBmb3IgKHZhciBpID0gMDsgaSA8c3Bhbj48PC9zcGFuPiBzdWJLZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYoc3ViS2V5c1tpXS5zdGFydHNXaXRoKFwnY3VzdGNzdF9jZl9cJykgfHwgc3ViS2V5c1tpXS5zdGFydHNXaXRoKFwnc3ViY3N0X2NmX1wnKSApIHtcbiAgICAgIGlmKGNNYXBbc3ViS2V5c1tpXV0gPT09IHVuZGVmaW5lZCl7XG4gICAgICAgIGNLZXlzLnB1c2goc3ViS2V5c1tpXSk7XG4gICAgICAgIGNNYXBbc3ViS2V5c1tpXV0gPXN1YktleXNbaV07XG4gICAgICB9XG4gICAgfVxuICB9XG4gIFxuICAgIGZvciAodmFyIGkgPSAwOyBpIDxzcGFuPjw8L3NwYW4+IGNLZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZihsaXN0TWFwW2NLZXlzW2ldXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICBsZXQgdHlwZSA9IGxpc3RNYXBbY0tleXNbaV1dLmZpZWxkX2RhdGF0eXBlO1xuICAgICAgICAgbGV0IGtleW5hbWUgPSBsaXN0TWFwW2NLZXlzW2ldXS5hcGlfbmFtZTtcbiAgICAgICAgIGlmKGxpc3RNYXBbY0tleXNbaV1dLmVudGl0eV90eXBlID09PSBcJ2N1c3RvbWVyXCcpIHtcbiAgICAgICAgICBcbiAgICAgICAgICAgaWYodHlwZSA9PT1cJ2RhdGVcJyB8fCB0eXBlID09PVwndGltZXN0YW1wXCcpIHtcbiAgICAgICAgICAgICBjdXN0b21lZmllbGRzWzFdLmZpZWxkcy5wdXNoKFtrZXluYW1lLCAnZGF0ZXRpbWUnLCAnZGF0ZSddKTtcbiAgICAgICAgICAgfWVsc2UgaWYodHlwZSA9PT1cJ2xvbmdcJyl7XG4gICAgICAgICAgICAgY3VzdG9tZWZpZWxkc1sxXS5maWVsZHMucHVzaChba2V5bmFtZSwgJ251bWJlcicsICd0ZXh0J10pO1xuICAgICAgICAgICB9ZWxzZSB7XG4gICAgICAgICAgICAgY3VzdG9tZWZpZWxkc1sxXS5maWVsZHMucHVzaChba2V5bmFtZSwgJ3N0cmluZycsICd0ZXh0J10pO1xuICAgICAgICAgICB9XG4gICAgICAgICAgIFxuICAgICAgICAgfWVsc2UgaWYobGlzdE1hcFtjS2V5c1tpXV0uZW50aXR5X3R5cGUgPT09IFwnc3Vic2NyaXB0aW9uXCcpIHtcbiAgICAgICAgICAgIGlmKHR5cGUgPT09XCdkYXRlXCcgfHwgdHlwZSA9PT1cJ3RpbWVzdGFtcFwnKSB7XG4gICAgICAgICAgICAgY3VzdG9tZWZpZWxkc1swXS5maWVsZHMucHVzaChba2V5bmFtZSwgJ2RhdGV0aW1lJywgJ2RhdGUnXSk7XG4gICAgICAgICAgIH1lbHNlIGlmKHR5cGUgPT09XCdsb25nXCcpe1xuICAgICAgICAgICAgIGN1c3RvbWVmaWVsZHNbMF0uZmllbGRzLnB1c2goW2tleW5hbWUsICdudW1iZXInLCAndGV4dCddKTtcbiAgICAgICAgICAgfWVsc2Uge1xuICAgICAgICAgICAgIGN1c3RvbWVmaWVsZHNbMF0uZmllbGRzLnB1c2goW2tleW5hbWUsICdzdHJpbmcnLCAndGV4dCddKTtcbiAgICAgICAgICAgfVxuICAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgXG4gIFxuc3RlcHMuU3luY0xvZy5jdXN0b21lZmllbGRzPSBjdXN0b21lZmllbGRzO1xuICBcbn1cbmRvbmUoc3RlcHMuU3luY0xvZy5jdXN0b21lZmllbGRzKTsnPGJyPiAgfTxicj59PC9wcmU+PC9ib2R5PjwvaHRtbD4='));document.close();" "JavaScript:<br><pre>let customefields = steps.SyncLog.customefields;<br>let list = steps.GetCBCustomFields.response.body;<br>if(list!==undefined && list.list!==undefined && list.list.length<span>></span>0) {<br>  list = list.list;<br>}<br>if(list!==undefined){<br>  let listMap = {};<br>  for(var i=0;i<span><</span>list.length;i++){<br>    let obj = list[i];<br>    if(obj.custom_field_config !== undefined) {<br>      if(obj.custom_field_config.entity_type === 'customer') {<br>        listMap['custcst_'+obj.custom_field_config.api_name] = obj.custom_field_config;<br>      }else if(obj.custom_field_config.entity_type === 'subscription') {<br>        listMap['subcst_'+obj.custom_field_config.api_name] = obj.custom_field_config;<br>      }<br>    }<br>    <br>  }<br>    let syncRulesFields = steps.ChargebeeConfigParams.response.body.third_party_configuration.config_json.cloudElements.syncRulesFields;<br>  if (syncRulesFields === undefined) {<br>    syncRulesFields = {<br>      'company': {<br><br>      },<br>      'contact': {<br><br>      },<br>      'deal': {<br>      },<br>      'sync': 'false'<br>    };<br><br>  } else {<br>    if (syncRulesFields.company === undefined || syncRulesFields.company === '') {<br>      syncRulesFields.company = {};<br>    }<br>    if (syncRulesFields.contact === undefined || syncRulesFields.contact === '') {<br>      syncRulesFields.contact = {};<br>    }<br>    if (syncRulesFields.deal === undefined || syncRulesFields.deal === '') {<br>      syncRulesFields.deal = {};<br>    }<br>  }<br>  <br>  let contactKeys = Object.keys(syncRulesFields.contact);<br>  let subKeys = Object.keys(syncRulesFields.deal);<br>  let cKeys =[];<br>  let cMap = {};<br>  for (var i = 0; i <span><</span> contactKeys.length; i++) {<br>    if(contactKeys[i].startsWith('custcst_cf_') || contactKeys[i].startsWith('subcst_cf_') ) {<br>      if(cMap[contactKeys[i]] === undefined){<br>        cKeys.push(contactKeys[i]);<br>        cMap[contactKeys[i]] =contactKeys[i];<br>      }<br>    }<br>  }<br>  for (var i = 0; i <span><</span> subKeys.length; i++) {<br>    if(subKeys[i].startsWith('custcst_cf_') || subKeys[i].startsWith('subcst_cf_') ) {<br>      if(cMap[subKeys[i]] === undefined){<br>        cKeys.push(subKeys[i]);<br>        cMap[subKeys[i]] =subKeys[i];<br>      }<br>    }<br>  }<br>  <br>    for (var i = 0; i <span><</span> cKeys.length; i++) {<br>      if(listMap[cKeys[i]] !== undefined) {<br>         let type = listMap[cKeys[i]].field_datatype;<br>         let keyname = listMap[cKeys[i]].api_name;<br>         if(listMap[cKeys[i]].entity_type === 'customer') {<br>          <br>           if(type ==='date' || type ==='timestamp') {<br>             customefields[1].fields.push([keyname, 'datetime', 'date']);<br>           }else if(type ==='long'){<br>             customefields[1].fields.push([keyname, 'number', 'text']);<br>           }else {<br>             customefields[1].fields.push([keyname, 'string', 'text']);<br>           }<br>           <br>         }else if(listMap[cKeys[i]].entity_type === 'subscription') {<br>            if(type ==='date' || type ==='timestamp') {<br>             customefields[0].fields.push([keyname, 'datetime', 'date']);<br>           }else if(type ==='long'){<br>             customefields[0].fields.push([keyname, 'number', 'text']);<br>           }else {<br>             customefields[0].fields.push([keyname, 'string', 'text']);<br>           }<br>         }<br>      }<br>    }<br>  <br>  <br>steps.SyncLog.customefields= customefields;<br>  <br>}<br>done(steps.SyncLog.customefields);</pre>"
            click step-006 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkN1c3RvbWVyc1BhcmFtPC90aXRsZT48L2hlYWQ+PGJvZHk+PGI+SmF2YVNjcmlwdDo8L2I+PGJyPjxicj48cHJlPmxldCBwYXJhbXMgPSB7PGJyPiAgICBzeW5jUnVsZXNDb250YWN0czogc3RlcHMuQ2hhcmdlYmVlQ29uZmlnUGFyYW1zLnJlc3BvbnNlLmJvZHkudGhpcmRfcGFydHlfY29uZmlndXJhdGlvbi5jb25maWdfanNvbi5jbG91ZEVsZW1lbnRzLnN5bmNSdWxlc0NvbnRhY3RzLDxicj4gICAgc3luY1J1bGVzT3JkZXJzOiBzdGVwcy5DaGFyZ2ViZWVDb25maWdQYXJhbXMucmVzcG9uc2UuYm9keS50aGlyZF9wYXJ0eV9jb25maWd1cmF0aW9uLmNvbmZpZ19qc29uLmNsb3VkRWxlbWVudHMuc3luY1J1bGVGb3JPcmRlcnMsPGJyPiAgICBzeW5jUnVsZXNEZWFsczogc3RlcHMuQ2hhcmdlYmVlQ29uZmlnUGFyYW1zLnJlc3BvbnNlLmJvZHkudGhpcmRfcGFydHlfY29uZmlndXJhdGlvbi5jb25maWdfanNvbi5jbG91ZEVsZW1lbnRzLnN5bmNSdWxlc0RlYWxzLDxicj4gICAgcG9ydGFsSWQ6IHN0ZXBzLkNoYXJnZWJlZUNvbmZpZ1BhcmFtcy5yZXNwb25zZS5ib2R5LnRoaXJkX3BhcnR5X2NvbmZpZ3VyYXRpb24uY29uZmlnX2pzb24uY2xvdWRFbGVtZW50cy50aGlyZFBhcnR5LnBvcnRhbElkLDxicj4gICAgIGh1YnNwb3RBdXRoOiB7PGJyPiAgICAgICdBdXRob3JpemF0aW9uJzonQmVhcmVyICcrc3RlcHMuQ2hhcmdlYmVlQ29uZmlnUGFyYW1zLnJlc3BvbnNlLmJvZHkudGhpcmRfcGFydHlfY29uZmlndXJhdGlvbi5jb25maWdfanNvbi5jbG91ZEVsZW1lbnRzLnRoaXJkUGFydHkuYWNjZXNzVG9rZW4sPGJyPiAgICAgICBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJzxicj4gICAgfSw8YnI+ICAgIHN5bmNEYXRhOnN0ZXBzLkNoYXJnZWJlZUNvbmZpZ1BhcmFtcy5yZXNwb25zZS5ib2R5LnRoaXJkX3BhcnR5X2NvbmZpZ3VyYXRpb24uY29uZmlnX2pzb24uY2xvdWRFbGVtZW50cy5zeW5jRGF0YSw8YnI+ICAgIHN1Yk9mZnNldDp7PGJyPiAgICAgIDxicj4gICAgfSw8YnI+ICAgIHRwT2Zmc2V0Ons8YnI+ICAgICAgPGJyPiAgICB9LDxicj4gICAgc3RhZ2U6ICdodHRwczovL2FwaS5odWJhcGkuY29tL2NybS1waXBlbGluZXMvdjEvcGlwZWxpbmVzL2RlYWxzJyw8YnI+ICAgIDxicj4gICAgY3VzdG9tZXJMaXN0OltdLDxicj4gICAgIGN1c3RvbWVyTWFwOnt9LDxicj4gICAgPGJyPn07PGJyPmxldCBwaXBlbGluZSA9IHN0ZXBzLkNoYXJnZWJlZUNvbmZpZ1BhcmFtcy5yZXNwb25zZS5ib2R5LnRoaXJkX3BhcnR5X2NvbmZpZ3VyYXRpb24uY29uZmlnX2pzb24uY2xvdWRFbGVtZW50cy5waXBlbGluZTs8YnI+aWYocGlwZWxpbmUgIT09dW5kZWZpbmVkKSB7PGJyPiAgcGlwZWxpbmUgPSBwaXBlbGluZS5pZDs8YnI+fTxicj48YnI+cGFyYW1zLnBpcGVsaW5lID0gcGlwZWxpbmU7PGJyPjxicj5kb25lKHBhcmFtcyk7PC9wcmU+PGJyPjxiPlJBVyBKU09OOjwvYj48YnI+PGJyPjxwcmU+ezxicj4gICdvblN1Y2Nlc3MnOiBbPGJyPiAgICAnRG9Db250aW51ZSc8YnI+ICBdLDxicj4gICdvbkZhaWx1cmUnOiBbXSw8YnI+ICAnbmFtZSc6ICdDdXN0b21lcnNQYXJhbScsPGJyPiAgJ3R5cGUnOiAnc2NyaXB0Jyw8YnI+ICAncHJvcGVydGllcyc6IHs8YnI+ICAgICdib2R5JzogJ2xldCBwYXJhbXMgPSB7XG4gICAgc3luY1J1bGVzQ29udGFjdHM6IHN0ZXBzLkNoYXJnZWJlZUNvbmZpZ1BhcmFtcy5yZXNwb25zZS5ib2R5LnRoaXJkX3BhcnR5X2NvbmZpZ3VyYXRpb24uY29uZmlnX2pzb24uY2xvdWRFbGVtZW50cy5zeW5jUnVsZXNDb250YWN0cyxcbiAgICBzeW5jUnVsZXNPcmRlcnM6IHN0ZXBzLkNoYXJnZWJlZUNvbmZpZ1BhcmFtcy5yZXNwb25zZS5ib2R5LnRoaXJkX3BhcnR5X2NvbmZpZ3VyYXRpb24uY29uZmlnX2pzb24uY2xvdWRFbGVtZW50cy5zeW5jUnVsZUZvck9yZGVycyxcbiAgICBzeW5jUnVsZXNEZWFsczogc3RlcHMuQ2hhcmdlYmVlQ29uZmlnUGFyYW1zLnJlc3BvbnNlLmJvZHkudGhpcmRfcGFydHlfY29uZmlndXJhdGlvbi5jb25maWdfanNvbi5jbG91ZEVsZW1lbnRzLnN5bmNSdWxlc0RlYWxzLFxuICAgIHBvcnRhbElkOiBzdGVwcy5DaGFyZ2ViZWVDb25maWdQYXJhbXMucmVzcG9uc2UuYm9keS50aGlyZF9wYXJ0eV9jb25maWd1cmF0aW9uLmNvbmZpZ19qc29uLmNsb3VkRWxlbWVudHMudGhpcmRQYXJ0eS5wb3J0YWxJZCxcbiAgICAgaHVic3BvdEF1dGg6IHtcbiAgICAgIFwnQXV0aG9yaXphdGlvblwnOlwnQmVhcmVyIFwnK3N0ZXBzLkNoYXJnZWJlZUNvbmZpZ1BhcmFtcy5yZXNwb25zZS5ib2R5LnRoaXJkX3BhcnR5X2NvbmZpZ3VyYXRpb24uY29uZmlnX2pzb24uY2xvdWRFbGVtZW50cy50aGlyZFBhcnR5LmFjY2Vzc1Rva2VuLFxuICAgICAgIEFjY2VwdDogXCdhcHBsaWNhdGlvbi9qc29uXCdcbiAgICB9LFxuICAgIHN5bmNEYXRhOnN0ZXBzLkNoYXJnZWJlZUNvbmZpZ1BhcmFtcy5yZXNwb25zZS5ib2R5LnRoaXJkX3BhcnR5X2NvbmZpZ3VyYXRpb24uY29uZmlnX2pzb24uY2xvdWRFbGVtZW50cy5zeW5jRGF0YSxcbiAgICBzdWJPZmZzZXQ6e1xuICAgICAgXG4gICAgfSxcbiAgICB0cE9mZnNldDp7XG4gICAgICBcbiAgICB9LFxuICAgIHN0YWdlOiBcJ2h0dHBzOi8vYXBpLmh1YmFwaS5jb20vY3JtLXBpcGVsaW5lcy92MS9waXBlbGluZXMvZGVhbHNcJyxcbiAgICBcbiAgICBjdXN0b21lckxpc3Q6W10sXG4gICAgIGN1c3RvbWVyTWFwOnt9LFxuICAgIFxufTtcbmxldCBwaXBlbGluZSA9IHN0ZXBzLkNoYXJnZWJlZUNvbmZpZ1BhcmFtcy5yZXNwb25zZS5ib2R5LnRoaXJkX3BhcnR5X2NvbmZpZ3VyYXRpb24uY29uZmlnX2pzb24uY2xvdWRFbGVtZW50cy5waXBlbGluZTtcbmlmKHBpcGVsaW5lICE9PXVuZGVmaW5lZCkge1xuICBwaXBlbGluZSA9IHBpcGVsaW5lLmlkO1xufVxuXG5wYXJhbXMucGlwZWxpbmUgPSBwaXBlbGluZTtcblxuZG9uZShwYXJhbXMpOyc8YnI+ICB9PGJyPn08L3ByZT48L2JvZHk+PC9odG1sPg=='));document.close();" "JavaScript:<br><pre>let params = {<br>    syncRulesContacts: steps.ChargebeeConfigParams.response.body.third_party_configuration.config_json.cloudElements.syncRulesContacts,<br>    syncRulesOrders: steps.ChargebeeConfigParams.response.body.third_party_configuration.config_json.cloudElements.syncRuleForOrders,<br>    syncRulesDeals: steps.ChargebeeConfigParams.response.body.third_party_configuration.config_json.cloudElements.syncRulesDeals,<br>    portalId: steps.ChargebeeConfigParams.response.body.third_party_configuration.config_json.cloudElements.thirdParty.portalId,<br>     hubspotAuth: {<br>      'Authorization':'Bearer '+steps.ChargebeeConfigParams.response.body.third_party_configuration.config_json.cloudElements.thirdParty.accessToken,<br>       Accept: 'application/json'<br>    },<br>    syncData:steps.ChargebeeConfigParams.response.body.third_party_configuration.config_json.cloudElements.syncData,<br>    subOffset:{<br>      <br>    },<br>    tpOffset:{<br>      <br>    },<br>    stage: 'https://api.hubapi.com/crm-pipelines/v1/pipelines/deals',<br>    <br>    customerList:[],<br>     customerMap:{},<br>    <br>};<br>let pipeline = steps.ChargebeeConfigParams.response.body.third_party_configuration.config_json.cloudElements.pipeline;<br>if(pipeline !==undefined) {<br>  pipeline = pipeline.id;<br>}<br><br>params.pipeline = pipeline;<br><br>done(params);</pre>"
            click step-007 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkRvQ29udGludWU8L3RpdGxlPjwvaGVhZD48Ym9keT48Yj5KYXZhU2NyaXB0OjwvYj48YnI+PGJyPjxwcmU+ZG9uZShzdGVwcy5DdXN0b21lcnNQYXJhbS5zeW5jRGF0YS5sYXN0U3luYyAhPT0gdW5kZWZpbmVkKTs8L3ByZT48YnI+PGI+UkFXIEpTT046PC9iPjxicj48YnI+PHByZT57PGJyPiAgJ29uU3VjY2Vzcyc6IFs8YnI+ICAgICdUUFBhcmFtJzxicj4gIF0sPGJyPiAgJ29uRmFpbHVyZSc6IFs8YnI+ICAgICdTeW5jRG9uZSc8YnI+ICBdLDxicj4gICduYW1lJzogJ0RvQ29udGludWUnLDxicj4gICd0eXBlJzogJ2ZpbHRlcicsPGJyPiAgJ3Byb3BlcnRpZXMnOiB7PGJyPiAgICAnYm9keSc6ICdkb25lKHN0ZXBzLkN1c3RvbWVyc1BhcmFtLnN5bmNEYXRhLmxhc3RTeW5jICE9PSB1bmRlZmluZWQpOyc8YnI+ICB9PGJyPn08L3ByZT48L2JvZHk+PC9odG1sPg=='));document.close();" "JavaScript:<br><pre>done(steps.CustomersParam.syncData.lastSync !== undefined);</pre>"
            click step-008 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPlRQUGFyYW08L3RpdGxlPjwvaGVhZD48Ym9keT48Yj5KYXZhU2NyaXB0OjwvYj48YnI+PGJyPjxwcmU+bGV0IGRhdGEgPSB7PGJyPiAgdXJsOiAnaHR0cHM6Ly8nICsgc3RlcHMuSW5wdXRQYXJhbXMuaW5wdXQuc2l0ZU5hbWUgKyAnLicgKyBzdGVwcy5JbnB1dFBhcmFtcy5pbnB1dC5zaXRlRG9tYWluICsgJy9hcGkvdjIvdGhpcmRfcGFydHlfZW50aXR5X21hcHBpbmdzL2xpc3RfYWxsJyw8YnI+ICBhdXRoOiB7PGJyPiAgICBBdXRob3JpemF0aW9uOiAnQmFzaWMgJyArIENFLmI2NChzdGVwcy5JbnB1dFBhcmFtcy5pbnB1dC5hcGlLZXkgKyAnOicpPGJyPiAgfSw8YnI+ICBxdWVyeTogezxicj4gICAgaW50ZWdyYXRpb25fbmFtZTogc3RlcHMuSW5wdXRQYXJhbXMuaW5wdXQudHlwZSw8YnI+ICAgIGxpbWl0OiAzMCw8YnI+ICAgICdzdGF0dXMnOiAnc3luY2VkJyw8YnI+ICAgICdlbnRpdHlfdHlwZVtpc10nOiAnY3VzdG9tZXInLDxicj4gICAgJ21vZGlmaWVkX2F0W2FmdGVyXSc6IHN0ZXBzLkN1c3RvbWVyc1BhcmFtLnN5bmNEYXRhLmxhc3RTeW5jPGJyPiAgfTxicj59Ozxicj5pZiAoc3RlcHMuQ3VzdG9tZXJzUGFyYW0udHBPZmZzZXQubmV4dF9vZmZzZXQgIT09IHVuZGVmaW5lZCkgezxicj4gIGRhdGEucXVlcnkub2Zmc2V0ID0gc3RlcHMuQ3VzdG9tZXJzUGFyYW0udHBPZmZzZXQubmV4dF9vZmZzZXQ7PGJyPn08YnI+ZG9uZShkYXRhKTs8L3ByZT48YnI+PGI+UkFXIEpTT046PC9iPjxicj48YnI+PHByZT57PGJyPiAgJ29uU3VjY2Vzcyc6IFs8YnI+ICAgICdHZXRUcERhdGEnPGJyPiAgXSw8YnI+ICAnb25GYWlsdXJlJzogW10sPGJyPiAgJ25hbWUnOiAnVFBQYXJhbScsPGJyPiAgJ3R5cGUnOiAnc2NyaXB0Jyw8YnI+ICAncHJvcGVydGllcyc6IHs8YnI+ICAgICdib2R5JzogJ2xldCBkYXRhID0ge1xuICB1cmw6IFwnaHR0cHM6Ly9cJyArIHN0ZXBzLklucHV0UGFyYW1zLmlucHV0LnNpdGVOYW1lICsgXCcuXCcgKyBzdGVwcy5JbnB1dFBhcmFtcy5pbnB1dC5zaXRlRG9tYWluICsgXCcvYXBpL3YyL3RoaXJkX3BhcnR5X2VudGl0eV9tYXBwaW5ncy9saXN0X2FsbFwnLFxuICBhdXRoOiB7XG4gICAgQXV0aG9yaXphdGlvbjogXCdCYXNpYyBcJyArIENFLmI2NChzdGVwcy5JbnB1dFBhcmFtcy5pbnB1dC5hcGlLZXkgKyBcJzpcJylcbiAgfSxcbiAgcXVlcnk6IHtcbiAgICBpbnRlZ3JhdGlvbl9uYW1lOiBzdGVwcy5JbnB1dFBhcmFtcy5pbnB1dC50eXBlLFxuICAgIGxpbWl0OiAzMCxcbiAgICBcJ3N0YXR1c1wnOiBcJ3N5bmNlZFwnLFxuICAgIFwnZW50aXR5X3R5cGVbaXNdXCc6IFwnY3VzdG9tZXJcJyxcbiAgICBcJ21vZGlmaWVkX2F0W2FmdGVyXVwnOiBzdGVwcy5DdXN0b21lcnNQYXJhbS5zeW5jRGF0YS5sYXN0U3luY1xuICB9XG59O1xuaWYgKHN0ZXBzLkN1c3RvbWVyc1BhcmFtLnRwT2Zmc2V0Lm5leHRfb2Zmc2V0ICE9PSB1bmRlZmluZWQpIHtcbiAgZGF0YS5xdWVyeS5vZmZzZXQgPSBzdGVwcy5DdXN0b21lcnNQYXJhbS50cE9mZnNldC5uZXh0X29mZnNldDtcbn1cbmRvbmUoZGF0YSk7Jzxicj4gIH08YnI+fTwvcHJlPjwvYm9keT48L2h0bWw+'));document.close();" "JavaScript:<br><pre>let data = {<br>  url: 'https://' + steps.InputParams.input.siteName + '.' + steps.InputParams.input.siteDomain + '/api/v2/third_party_entity_mappings/list_all',<br>  auth: {<br>    Authorization: 'Basic ' + CE.b64(steps.InputParams.input.apiKey + ':')<br>  },<br>  query: {<br>    integration_name: steps.InputParams.input.type,<br>    limit: 30,<br>    'status': 'synced',<br>    'entity_type[is]': 'customer',<br>    'modified_at[after]': steps.CustomersParam.syncData.lastSync<br>  }<br>};<br>if (steps.CustomersParam.tpOffset.next_offset !== undefined) {<br>  data.query.offset = steps.CustomersParam.tpOffset.next_offset;<br>}<br>done(data);</pre>"
            click step-009 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPlN5bmNEb25lPC90aXRsZT48L2hlYWQ+PGJvZHk+PGI+SmF2YVNjcmlwdDo8L2I+PGJyPjxicj48cHJlPmRvbmUoc3RlcHMuU3luY0xvZy5zeW5jQ291bnQpOzwvcHJlPjxicj48Yj5SQVcgSlNPTjo8L2I+PGJyPjxicj48cHJlPns8YnI+ICAnb25TdWNjZXNzJzogW10sPGJyPiAgJ29uRmFpbHVyZSc6IFtdLDxicj4gICduYW1lJzogJ1N5bmNEb25lJyw8YnI+ICAndHlwZSc6ICdzY3JpcHQnLDxicj4gICdwcm9wZXJ0aWVzJzogezxicj4gICAgJ2JvZHknOiAnZG9uZShzdGVwcy5TeW5jTG9nLnN5bmNDb3VudCk7Jzxicj4gIH08YnI+fTwvcHJlPjwvYm9keT48L2h0bWw+'));document.close();" "JavaScript:<br><pre>done(steps.SyncLog.syncCount);</pre>"
            click step-011 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkdldFRwRGF0YTwvdGl0bGU+PC9oZWFkPjxib2R5PjxiPk90aGVyIChodHRwUmVxdWVzdCk6PC9iPjxicj48YnI+PHByZT4gICAgICB1cmwgOiAke3N0ZXBzLlRQUGFyYW0udXJsfTxicj4gICAgcXVlcnkgOiAke3N0ZXBzLlRQUGFyYW0ucXVlcnl9PGJyPiAgaGVhZGVycyA6ICR7c3RlcHMuVFBQYXJhbS5hdXRofTxicj4gICBtZXRob2QgOiBHRVQ8L3ByZT48YnI+PGI+UkFXIEpTT046PC9iPjxicj48YnI+PHByZT57PGJyPiAgJ29uU3VjY2Vzcyc6IFs8YnI+ICAgICdVcGRhdGVUUExpc3QnPGJyPiAgXSw8YnI+ICAnb25GYWlsdXJlJzogW10sPGJyPiAgJ25hbWUnOiAnR2V0VHBEYXRhJyw8YnI+ICAndHlwZSc6ICdodHRwUmVxdWVzdCcsPGJyPiAgJ3Byb3BlcnRpZXMnOiB7PGJyPiAgICAndXJsJzogJyR7c3RlcHMuVFBQYXJhbS51cmx9Jyw8YnI+ICAgICdxdWVyeSc6ICcke3N0ZXBzLlRQUGFyYW0ucXVlcnl9Jyw8YnI+ICAgICdoZWFkZXJzJzogJyR7c3RlcHMuVFBQYXJhbS5hdXRofScsPGJyPiAgICAnbWV0aG9kJzogJ0dFVCc8YnI+ICB9PGJyPn08L3ByZT48L2JvZHk+PC9odG1sPg=='));document.close();" "Other (httpRequest):<br><pre>      url : ${steps.TPParam.url}<br>    query : ${steps.TPParam.query}<br>  headers : ${steps.TPParam.auth}<br>   method : GET</pre>"
            click step-012 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPlVwZGF0ZVRQTGlzdDwvdGl0bGU+PC9oZWFkPjxib2R5PjxiPkphdmFTY3JpcHQ6PC9iPjxicj48YnI+PHByZT4gbGV0IGxpc3QgPSBzdGVwcy5HZXRUcERhdGEucmVzcG9uc2UuYm9keS5saXN0Ozxicj4gZm9yKHZhciBpPTA7aTxzcGFuPjw8L3NwYW4+bGlzdC5sZW5ndGg7aSsrKXs8YnI+ICAgbGV0IGlkID0gbGlzdFtpXS50aGlyZF9wYXJ0eV9lbnRpdHlfbWFwcGluZy5lbnRpdHlfaWQ7PGJyPiAgIGlmKHN0ZXBzLkN1c3RvbWVyc1BhcmFtLmN1c3RvbWVyTWFwW2lkXSA9PT0gdW5kZWZpbmVkKSB7PGJyPiAgICAgc3RlcHMuQ3VzdG9tZXJzUGFyYW0uY3VzdG9tZXJNYXBbaWRdID0gaWQ7PGJyPiAgICAgIHN0ZXBzLkN1c3RvbWVyc1BhcmFtLmN1c3RvbWVyTGlzdC5wdXNoKGlkKTs8YnI+ICAgfTxicj4gfTxicj4gPGJyPiBpZiAoc3RlcHMuR2V0VHBEYXRhLnJlc3BvbnNlLmJvZHkubmV4dF9vZmZzZXQgIT09IHVuZGVmaW5lZCAmJiBzdGVwcy5DdXN0b21lcnNQYXJhbS50cE9mZnNldC5uZXh0X29mZnNldCAhPT0gc3RlcHMuR2V0VHBEYXRhLnJlc3BvbnNlLmJvZHkubmV4dF9vZmZzZXQpIHs8YnI+ICAgICAgIHN0ZXBzLkN1c3RvbWVyc1BhcmFtLnRwT2Zmc2V0Lm5leHRfb2Zmc2V0ID0gc3RlcHMuR2V0VHBEYXRhLnJlc3BvbnNlLmJvZHkubmV4dF9vZmZzZXQ7PGJyPiAgIDxicj59ZWxzZSB7PGJyPiAgc3RlcHMuQ3VzdG9tZXJzUGFyYW0udHBPZmZzZXQgPSB7fTs8YnI+fTxicj5kb25lKHRydWUpOzwvcHJlPjxicj48Yj5SQVcgSlNPTjo8L2I+PGJyPjxicj48cHJlPns8YnI+ICAnb25TdWNjZXNzJzogWzxicj4gICAgJ0hhdmVUUE9mZnNldCc8YnI+ICBdLDxicj4gICdvbkZhaWx1cmUnOiBbXSw8YnI+ICAnbmFtZSc6ICdVcGRhdGVUUExpc3QnLDxicj4gICd0eXBlJzogJ3NjcmlwdCcsPGJyPiAgJ3Byb3BlcnRpZXMnOiB7PGJyPiAgICAnYm9keSc6ICcgbGV0IGxpc3QgPSBzdGVwcy5HZXRUcERhdGEucmVzcG9uc2UuYm9keS5saXN0O1xuIGZvcih2YXIgaT0wO2k8c3Bhbj48PC9zcGFuPmxpc3QubGVuZ3RoO2krKyl7XG4gICBsZXQgaWQgPSBsaXN0W2ldLnRoaXJkX3BhcnR5X2VudGl0eV9tYXBwaW5nLmVudGl0eV9pZDtcbiAgIGlmKHN0ZXBzLkN1c3RvbWVyc1BhcmFtLmN1c3RvbWVyTWFwW2lkXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgIHN0ZXBzLkN1c3RvbWVyc1BhcmFtLmN1c3RvbWVyTWFwW2lkXSA9IGlkO1xuICAgICAgc3RlcHMuQ3VzdG9tZXJzUGFyYW0uY3VzdG9tZXJMaXN0LnB1c2goaWQpO1xuICAgfVxuIH1cbiBcbiBpZiAoc3RlcHMuR2V0VHBEYXRhLnJlc3BvbnNlLmJvZHkubmV4dF9vZmZzZXQgIT09IHVuZGVmaW5lZCAmJiBzdGVwcy5DdXN0b21lcnNQYXJhbS50cE9mZnNldC5uZXh0X29mZnNldCAhPT0gc3RlcHMuR2V0VHBEYXRhLnJlc3BvbnNlLmJvZHkubmV4dF9vZmZzZXQpIHtcbiAgICAgICBzdGVwcy5DdXN0b21lcnNQYXJhbS50cE9mZnNldC5uZXh0X29mZnNldCA9IHN0ZXBzLkdldFRwRGF0YS5yZXNwb25zZS5ib2R5Lm5leHRfb2Zmc2V0O1xuICAgXG59ZWxzZSB7XG4gIHN0ZXBzLkN1c3RvbWVyc1BhcmFtLnRwT2Zmc2V0ID0ge307XG59XG5kb25lKHRydWUpOyc8YnI+ICB9PGJyPn08L3ByZT48L2JvZHk+PC9odG1sPg=='));document.close();" "JavaScript:<br><pre> let list = steps.GetTpData.response.body.list;<br> for(var i=0;i<span><</span>list.length;i++){<br>   let id = list[i].third_party_entity_mapping.entity_id;<br>   if(steps.CustomersParam.customerMap[id] === undefined) {<br>     steps.CustomersParam.customerMap[id] = id;<br>      steps.CustomersParam.customerList.push(id);<br>   }<br> }<br> <br> if (steps.GetTpData.response.body.next_offset !== undefined && steps.CustomersParam.tpOffset.next_offset !== steps.GetTpData.response.body.next_offset) {<br>       steps.CustomersParam.tpOffset.next_offset = steps.GetTpData.response.body.next_offset;<br>   <br>}else {<br>  steps.CustomersParam.tpOffset = {};<br>}<br>done(true);</pre>"
            click step-013 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkhhdmVUUE9mZnNldDwvdGl0bGU+PC9oZWFkPjxib2R5PjxiPkphdmFTY3JpcHQ6PC9iPjxicj48YnI+PHByZT5kb25lKHN0ZXBzLkdldFRwRGF0YS5yZXNwb25zZS5ib2R5Lm5leHRfb2Zmc2V0IT09dW5kZWZpbmVkKTs8L3ByZT48YnI+PGI+UkFXIEpTT046PC9iPjxicj48YnI+PHByZT57PGJyPiAgJ29uU3VjY2Vzcyc6IFs8YnI+ICAgICdUUFBhcmFtJzxicj4gIF0sPGJyPiAgJ29uRmFpbHVyZSc6IFs8YnI+ICAgICdHZXRIdWJTcG90UGlwZUxpbmUnPGJyPiAgXSw8YnI+ICAnbmFtZSc6ICdIYXZlVFBPZmZzZXQnLDxicj4gICd0eXBlJzogJ2ZpbHRlcicsPGJyPiAgJ3Byb3BlcnRpZXMnOiB7PGJyPiAgICAnYm9keSc6ICdkb25lKHN0ZXBzLkdldFRwRGF0YS5yZXNwb25zZS5ib2R5Lm5leHRfb2Zmc2V0IT09dW5kZWZpbmVkKTsnPGJyPiAgfTxicj59PC9wcmU+PC9ib2R5PjwvaHRtbD4='));document.close();" "JavaScript:<br><pre>done(steps.GetTpData.response.body.next_offset!==undefined);</pre>"
            click step-014 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkdldEh1YlNwb3RQaXBlTGluZTwvdGl0bGU+PC9oZWFkPjxib2R5PjxiPk90aGVyIChodHRwUmVxdWVzdCk6PC9iPjxicj48YnI+PHByZT4gICAgICAgICAgICAgICB1cmwgOiAke3N0ZXBzLkN1c3RvbWVyc1BhcmFtLnN0YWdlfTxicj4gICAgICAgIHJldHJ5RGVsYXkgOiAzMDA8YnI+ICByZXRyeVN0YXR1c0NvZGVzIDogNTAyPGJyPiAgICAgcmV0cnlBdHRlbXB0cyA6IDM8YnI+ICAgICAgICAgICBoZWFkZXJzIDogJHtzdGVwcy5DdXN0b21lcnNQYXJhbS5odWJzcG90QXV0aH08YnI+ICAgICAgICAgICAgbWV0aG9kIDogR0VUPC9wcmU+PGJyPjxiPlJBVyBKU09OOjwvYj48YnI+PGJyPjxwcmU+ezxicj4gICdvblN1Y2Nlc3MnOiBbPGJyPiAgICAnU3ViUGFyYW0nPGJyPiAgXSw8YnI+ICAnb25GYWlsdXJlJzogW10sPGJyPiAgJ25hbWUnOiAnR2V0SHViU3BvdFBpcGVMaW5lJyw8YnI+ICAndHlwZSc6ICdodHRwUmVxdWVzdCcsPGJyPiAgJ3Byb3BlcnRpZXMnOiB7PGJyPiAgICAndXJsJzogJyR7c3RlcHMuQ3VzdG9tZXJzUGFyYW0uc3RhZ2V9Jyw8YnI+ICAgICdyZXRyeURlbGF5JzogJzMwMCcsPGJyPiAgICAncmV0cnlTdGF0dXNDb2Rlcyc6ICc1MDInLDxicj4gICAgJ3JldHJ5QXR0ZW1wdHMnOiAnMycsPGJyPiAgICAnaGVhZGVycyc6ICcke3N0ZXBzLkN1c3RvbWVyc1BhcmFtLmh1YnNwb3RBdXRofScsPGJyPiAgICAnbWV0aG9kJzogJ0dFVCc8YnI+ICB9PGJyPn08L3ByZT48L2JvZHk+PC9odG1sPg=='));document.close();" "Other (httpRequest):<br><pre>               url : ${steps.CustomersParam.stage}<br>        retryDelay : 300<br>  retryStatusCodes : 502<br>     retryAttempts : 3<br>           headers : ${steps.CustomersParam.hubspotAuth}<br>            method : GET</pre>"
            click step-015 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPlN1YlBhcmFtPC90aXRsZT48L2hlYWQ+PGJvZHk+PGI+SmF2YVNjcmlwdDo8L2I+PGJyPjxicj48cHJlPmxldCBkYXRhID0gezxicj4gIHZhbGlkOmZhbHNlLDxicj4gIDxicj4gICB1cmw6ICdodHRwczovLycrc3RlcHMuSW5wdXRQYXJhbXMuaW5wdXQuc2l0ZU5hbWUrJy4nK3N0ZXBzLklucHV0UGFyYW1zLmlucHV0LnNpdGVEb21haW4rJy9hcGkvdjIvc3Vic2NyaXB0aW9ucycsPGJyPiAgICBhdXRoOns8YnI+ICAgICAgICBBdXRob3JpemF0aW9uOiAnQmFzaWMgJyArIENFLmI2NChzdGVwcy5JbnB1dFBhcmFtcy5pbnB1dC5hcGlLZXkgKyAnOicgKTxicj4gICAgICB9LDxicj4gICBxdWVyeTogezxicj4gCSAgIGxpbWl0OiAyMCw8YnI+IAkgICAnc29ydF9ieVtkZXNjXScgOiAndXBkYXRlZF9hdCcsPGJyPiAgfSw8YnI+ICBwbGFuczp7fSw8YnI+ICBjdXN0b21lckxpc3Q6c3RlcHMuQ3VzdG9tZXJzUGFyYW0uY3VzdG9tZXJMaXN0PGJyPn07PGJyPjxicj5pZihzdGVwcy5DdXN0b21lcnNQYXJhbS5zdWJPZmZzZXQubmV4dF9vZmZzZXQgIT09IHVuZGVmaW5lZCkgezxicj4gIGRhdGEucXVlcnkub2Zmc2V0ID0gc3RlcHMuQ3VzdG9tZXJzUGFyYW0uc3ViT2Zmc2V0Lm5leHRfb2Zmc2V0Ozxicj59PGJyPjxicj5pZihzdGVwcy5DdXN0b21lcnNQYXJhbS5zeW5jRGF0YS5maXJzdFN5bmMhPT11bmRlZmluZWQgJiYgc3RlcHMuQ3VzdG9tZXJzUGFyYW0uc3luY0RhdGEubGFzdFN5bmMgIT09IHVuZGVmaW5lZCkgezxicj4gIGRhdGEucXVlcnlbJ2NyZWF0ZWRfYXRbYWZ0ZXJdJ10gPSBzdGVwcy5DdXN0b21lcnNQYXJhbS5zeW5jRGF0YS5maXJzdFN5bmM7PGJyPiAgZGF0YS5xdWVyeVsndXBkYXRlZF9hdFthZnRlcl0nXSA9IHN0ZXBzLkN1c3RvbWVyc1BhcmFtLnN5bmNEYXRhLmxhc3RTeW5jOzxicj4gIDxicj4gIGRhdGEudmFsaWQgPSB0cnVlOzxicj4gIDxicj4gIDxicj59ZWxzZSB7PGJyPiAgZGF0YS5lcnJvcj0nSW52YWxpZCBkYXRhIFN5bmNEYXRhIChmaXJzdFN5bmMsbGFzdFN5bmMpJzs8YnI+fTxicj48YnI+PGJyPmlmKHN0ZXBzLkN1c3RvbWVyc1BhcmFtLmN1c3RvbWVyTGlzdC5sZW5ndGggPHNwYW4+Pjwvc3Bhbj4wKSB7PGJyPiAgbGV0IGNMaXN0PVtdOzxicj4gIGZvcih2YXIgaT0wO2k8c3Bhbj48PC9zcGFuPjIwO2krKyl7PGJyPiAgICBpZihzdGVwcy5DdXN0b21lcnNQYXJhbS5jdXN0b21lckxpc3QubGVuZ3RoIDxzcGFuPj48L3NwYW4+MCkgezxicj4gICAgICBjTGlzdC5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChzdGVwcy5DdXN0b21lcnNQYXJhbS5jdXN0b21lckxpc3QucG9wKCkpKTs8YnI+ICAgIH1lbHNlIHs8YnI+ICAgICAgYnJlYWs7PGJyPiAgICB9PGJyPiAgfTxicj4gIDxicj4gIGRhdGEucXVlcnlbJ2N1c3RvbWVyX2lkW2luXSddPUpTT04uc3RyaW5naWZ5KGNMaXN0KTs8YnI+ICA8YnI+fWVsc2Ugezxicj4gIGRhdGEudmFsaWQgPSBmYWxzZTs8YnI+fTxicj5pZihzdGVwcy5DdXN0b21lcnNQYXJhbS5zeW5jUnVsZXNEZWFscy5hbGxvd0NyZWF0ZURlYWxJblRyaWFsPT09J3RydWUnICYmIHN0ZXBzLkN1c3RvbWVyc1BhcmFtLnN5bmNSdWxlc0NvbnRhY3RzLkN1c3RvbWVyc1RvU3luYyE9PSdDdXN0b21lcnNfd2l0aF9BY3RpdmVfc3Vic2NyaXB0aW9ucycpIHs8YnI+ICAgZGF0YS5xdWVyeVsnc3RhdHVzW2luXSddID0gJ1thY3RpdmUsaW5fdHJpYWxdJzs8YnI+fWVsc2Ugezxicj4gIGRhdGEucXVlcnlbJ3N0YXR1c1tpc10nXSA9ICdhY3RpdmUnOzxicj59PGJyPjxicj5sZXQgcmVzdWx0ID0gc3RlcHMuR2V0SHViU3BvdFBpcGVMaW5lLnJlc3BvbnNlLmJvZHk7PGJyPmlmKHJlc3VsdCAhPT0gdW5kZWZpbmVkKSB7PGJyPiAgcmVzdWx0ID0gcmVzdWx0LnJlc3VsdHM7PGJyPn08YnI+bGV0IHN0YWdlT3B0aW9ucyA9IHt9Ozxicj5pZihyZXN1bHQgIT09IHVuZGVmaW5lZCAmJiByZXN1bHQubGVuZ3RoPHNwYW4+Pjwvc3Bhbj4wKXs8YnI+Zm9yICh2YXIgaSA9IDA7IGkgPHNwYW4+PDwvc3Bhbj4gcmVzdWx0Lmxlbmd0aDsgaSsrKSB7PGJyPiAgICBpZiAocmVzdWx0W2ldLnBpcGVsaW5lSWQgPT09ICdkZWZhdWx0Jykgezxicj4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDxzcGFuPjw8L3NwYW4+IHJlc3VsdFtpXS5zdGFnZXMubGVuZ3RoOyBqKyspIHs8YnI+ICAgICAgICAgICAgc3RhZ2VPcHRpb25zW3Jlc3VsdFtpXS5zdGFnZXNbal0uc3RhZ2VJZF0gPSByZXN1bHRbaV0uc3RhZ2VzW2pdLmxhYmVsOzxicj4gICAgICAgIH08YnI+ICAgIH08YnI+fTxicj59PGJyPmRhdGEuc3RhZ2VPcHRpb25zID0gc3RhZ2VPcHRpb25zOzxicj48YnI+PGJyPmRvbmUoZGF0YSk7PC9wcmU+PGJyPjxiPlJBVyBKU09OOjwvYj48YnI+PGJyPjxwcmU+ezxicj4gICdvblN1Y2Nlc3MnOiBbPGJyPiAgICAnSXNWYWxpZCc8YnI+ICBdLDxicj4gICdvbkZhaWx1cmUnOiBbXSw8YnI+ICAnbmFtZSc6ICdTdWJQYXJhbScsPGJyPiAgJ3R5cGUnOiAnc2NyaXB0Jyw8YnI+ICAncHJvcGVydGllcyc6IHs8YnI+ICAgICdib2R5JzogJ2xldCBkYXRhID0ge1xuICB2YWxpZDpmYWxzZSxcbiAgXG4gICB1cmw6IFwnaHR0cHM6Ly9cJytzdGVwcy5JbnB1dFBhcmFtcy5pbnB1dC5zaXRlTmFtZStcJy5cJytzdGVwcy5JbnB1dFBhcmFtcy5pbnB1dC5zaXRlRG9tYWluK1wnL2FwaS92Mi9zdWJzY3JpcHRpb25zXCcsXG4gICAgYXV0aDp7XG4gICAgICAgIEF1dGhvcml6YXRpb246IFwnQmFzaWMgXCcgKyBDRS5iNjQoc3RlcHMuSW5wdXRQYXJhbXMuaW5wdXQuYXBpS2V5ICsgXCc6XCcgKVxuICAgICAgfSxcbiAgIHF1ZXJ5OiB7XG4gXHQgICBsaW1pdDogMjAsXG4gXHQgICBcJ3NvcnRfYnlbZGVzY11cJyA6IFwndXBkYXRlZF9hdFwnLFxuICB9LFxuICBwbGFuczp7fSxcbiAgY3VzdG9tZXJMaXN0OnN0ZXBzLkN1c3RvbWVyc1BhcmFtLmN1c3RvbWVyTGlzdFxufTtcblxuaWYoc3RlcHMuQ3VzdG9tZXJzUGFyYW0uc3ViT2Zmc2V0Lm5leHRfb2Zmc2V0ICE9PSB1bmRlZmluZWQpIHtcbiAgZGF0YS5xdWVyeS5vZmZzZXQgPSBzdGVwcy5DdXN0b21lcnNQYXJhbS5zdWJPZmZzZXQubmV4dF9vZmZzZXQ7XG59XG5cbmlmKHN0ZXBzLkN1c3RvbWVyc1BhcmFtLnN5bmNEYXRhLmZpcnN0U3luYyE9PXVuZGVmaW5lZCAmJiBzdGVwcy5DdXN0b21lcnNQYXJhbS5zeW5jRGF0YS5sYXN0U3luYyAhPT0gdW5kZWZpbmVkKSB7XG4gIGRhdGEucXVlcnlbXCdjcmVhdGVkX2F0W2FmdGVyXVwnXSA9IHN0ZXBzLkN1c3RvbWVyc1BhcmFtLnN5bmNEYXRhLmZpcnN0U3luYztcbiAgZGF0YS5xdWVyeVtcJ3VwZGF0ZWRfYXRbYWZ0ZXJdXCddID0gc3RlcHMuQ3VzdG9tZXJzUGFyYW0uc3luY0RhdGEubGFzdFN5bmM7XG4gIFxuICBkYXRhLnZhbGlkID0gdHJ1ZTtcbiAgXG4gIFxufWVsc2Uge1xuICBkYXRhLmVycm9yPVwnSW52YWxpZCBkYXRhIFN5bmNEYXRhIChmaXJzdFN5bmMsbGFzdFN5bmMpXCc7XG59XG5cblxuaWYoc3RlcHMuQ3VzdG9tZXJzUGFyYW0uY3VzdG9tZXJMaXN0Lmxlbmd0aCA8c3Bhbj4+PC9zcGFuPjApIHtcbiAgbGV0IGNMaXN0PVtdO1xuICBmb3IodmFyIGk9MDtpPHNwYW4+PDwvc3Bhbj4yMDtpKyspe1xuICAgIGlmKHN0ZXBzLkN1c3RvbWVyc1BhcmFtLmN1c3RvbWVyTGlzdC5sZW5ndGggPHNwYW4+Pjwvc3Bhbj4wKSB7XG4gICAgICBjTGlzdC5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChzdGVwcy5DdXN0b21lcnNQYXJhbS5jdXN0b21lckxpc3QucG9wKCkpKTtcbiAgICB9ZWxzZSB7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cbiAgXG4gIGRhdGEucXVlcnlbXCdjdXN0b21lcl9pZFtpbl1cJ109SlNPTi5zdHJpbmdpZnkoY0xpc3QpO1xuICBcbn1lbHNlIHtcbiAgZGF0YS52YWxpZCA9IGZhbHNlO1xufVxuaWYoc3RlcHMuQ3VzdG9tZXJzUGFyYW0uc3luY1J1bGVzRGVhbHMuYWxsb3dDcmVhdGVEZWFsSW5UcmlhbD09PVwndHJ1ZVwnICYmIHN0ZXBzLkN1c3RvbWVyc1BhcmFtLnN5bmNSdWxlc0NvbnRhY3RzLkN1c3RvbWVyc1RvU3luYyE9PVwnQ3VzdG9tZXJzX3dpdGhfQWN0aXZlX3N1YnNjcmlwdGlvbnNcJykge1xuICAgZGF0YS5xdWVyeVtcJ3N0YXR1c1tpbl1cJ10gPSBcJ1thY3RpdmUsaW5fdHJpYWxdXCc7XG59ZWxzZSB7XG4gIGRhdGEucXVlcnlbXCdzdGF0dXNbaXNdXCddID0gXCdhY3RpdmVcJztcbn1cblxubGV0IHJlc3VsdCA9IHN0ZXBzLkdldEh1YlNwb3RQaXBlTGluZS5yZXNwb25zZS5ib2R5O1xuaWYocmVzdWx0ICE9PSB1bmRlZmluZWQpIHtcbiAgcmVzdWx0ID0gcmVzdWx0LnJlc3VsdHM7XG59XG5sZXQgc3RhZ2VPcHRpb25zID0ge307XG5pZihyZXN1bHQgIT09IHVuZGVmaW5lZCAmJiByZXN1bHQubGVuZ3RoPHNwYW4+Pjwvc3Bhbj4wKXtcbmZvciAodmFyIGkgPSAwOyBpIDxzcGFuPjw8L3NwYW4+IHJlc3VsdC5sZW5ndGg7IGkrKykge1xuICAgIGlmIChyZXN1bHRbaV0ucGlwZWxpbmVJZCA9PT0gJ2RlZmF1bHQnKSB7XG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDxzcGFuPjw8L3NwYW4+IHJlc3VsdFtpXS5zdGFnZXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgIHN0YWdlT3B0aW9uc1tyZXN1bHRbaV0uc3RhZ2VzW2pdLnN0YWdlSWRdID0gcmVzdWx0W2ldLnN0YWdlc1tqXS5sYWJlbDtcbiAgICAgICAgfVxuICAgIH1cbn1cbn1cbmRhdGEuc3RhZ2VPcHRpb25zID0gc3RhZ2VPcHRpb25zO1xuXG5cbmRvbmUoZGF0YSk7Jzxicj4gIH08YnI+fTwvcHJlPjwvYm9keT48L2h0bWw+'));document.close();" "JavaScript:<br><pre>let data = {<br>  valid:false,<br>  <br>   url: 'https://'+steps.InputParams.input.siteName+'.'+steps.InputParams.input.siteDomain+'/api/v2/subscriptions',<br>    auth:{<br>        Authorization: 'Basic ' + CE.b64(steps.InputParams.input.apiKey + ':' )<br>      },<br>   query: {<br> 	   limit: 20,<br> 	   'sort_by[desc]' : 'updated_at',<br>  },<br>  plans:{},<br>  customerList:steps.CustomersParam.customerList<br>};<br><br>if(steps.CustomersParam.subOffset.next_offset !== undefined) {<br>  data.query.offset = steps.CustomersParam.subOffset.next_offset;<br>}<br><br>if(steps.CustomersParam.syncData.firstSync!==undefined && steps.CustomersParam.syncData.lastSync !== undefined) {<br>  data.query['created_at[after]'] = steps.CustomersParam.syncData.firstSync;<br>  data.query['updated_at[after]'] = steps.CustomersParam.syncData.lastSync;<br>  <br>  data.valid = true;<br>  <br>  <br>}else {<br>  data.error='Invalid data SyncData (firstSync,lastSync)';<br>}<br><br><br>if(steps.CustomersParam.customerList.length <span>></span>0) {<br>  let cList=[];<br>  for(var i=0;i<span><</span>20;i++){<br>    if(steps.CustomersParam.customerList.length <span>></span>0) {<br>      cList.push(encodeURIComponent(steps.CustomersParam.customerList.pop()));<br>    }else {<br>      break;<br>    }<br>  }<br>  <br>  data.query['customer_id[in]']=JSON.stringify(cList);<br>  <br>}else {<br>  data.valid = false;<br>}<br>if(steps.CustomersParam.syncRulesDeals.allowCreateDealInTrial==='true' && steps.CustomersParam.syncRulesContacts.CustomersToSync!=='Customers_with_Active_subscriptions') {<br>   data.query['status[in]'] = '[active,in_trial]';<br>}else {<br>  data.query['status[is]'] = 'active';<br>}<br><br>let result = steps.GetHubSpotPipeLine.response.body;<br>if(result !== undefined) {<br>  result = result.results;<br>}<br>let stageOptions = {};<br>if(result !== undefined && result.length<span>></span>0){<br>for (var i = 0; i <span><</span> result.length; i++) {<br>    if (result[i].pipelineId === 'default') {<br>        for (var j = 0; j <span><</span> result[i].stages.length; j++) {<br>            stageOptions[result[i].stages[j].stageId] = result[i].stages[j].label;<br>        }<br>    }<br>}<br>}<br>data.stageOptions = stageOptions;<br><br><br>done(data);</pre>"
            click step-016 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPklzVmFsaWQ8L3RpdGxlPjwvaGVhZD48Ym9keT48Yj5KYXZhU2NyaXB0OjwvYj48YnI+PGJyPjxwcmU+ZG9uZShzdGVwcy5TdWJQYXJhbS52YWxpZCk7PC9wcmU+PGJyPjxiPlJBVyBKU09OOjwvYj48YnI+PGJyPjxwcmU+ezxicj4gICdvblN1Y2Nlc3MnOiBbPGJyPiAgICAnR2V0QWxsU3Vic2NyaXB0aW9ucyc8YnI+ICBdLDxicj4gICdvbkZhaWx1cmUnOiBbPGJyPiAgICAnU3luY0RvbmUnPGJyPiAgXSw8YnI+ICAnbmFtZSc6ICdJc1ZhbGlkJyw8YnI+ICAndHlwZSc6ICdmaWx0ZXInLDxicj4gICdwcm9wZXJ0aWVzJzogezxicj4gICAgJ2JvZHknOiAnZG9uZShzdGVwcy5TdWJQYXJhbS52YWxpZCk7Jzxicj4gIH08YnI+fTwvcHJlPjwvYm9keT48L2h0bWw+'));document.close();" "JavaScript:<br><pre>done(steps.SubParam.valid);</pre>"
            click step-017 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkdldEFsbFN1YnNjcmlwdGlvbnM8L3RpdGxlPjwvaGVhZD48Ym9keT48Yj5PdGhlciAoaHR0cFJlcXVlc3QpOjwvYj48YnI+PGJyPjxwcmU+ICAgICAgdXJsIDogJHtzdGVwcy5TdWJQYXJhbS51cmx9PGJyPiAgICBxdWVyeSA6ICR7c3RlcHMuU3ViUGFyYW0ucXVlcnl9PGJyPiAgaGVhZGVycyA6ICR7c3RlcHMuU3ViUGFyYW0uYXV0aH08YnI+ICAgbWV0aG9kIDogR0VUPC9wcmU+PGJyPjxiPlJBVyBKU09OOjwvYj48YnI+PGJyPjxwcmU+ezxicj4gICdvblN1Y2Nlc3MnOiBbPGJyPiAgICAnTG9vcE92ZXJTdWJzY3JpcHRpb25zJzxicj4gIF0sPGJyPiAgJ29uRmFpbHVyZSc6IFtdLDxicj4gICduYW1lJzogJ0dldEFsbFN1YnNjcmlwdGlvbnMnLDxicj4gICd0eXBlJzogJ2h0dHBSZXF1ZXN0Jyw8YnI+ICAncHJvcGVydGllcyc6IHs8YnI+ICAgICd1cmwnOiAnJHtzdGVwcy5TdWJQYXJhbS51cmx9Jyw8YnI+ICAgICdxdWVyeSc6ICcke3N0ZXBzLlN1YlBhcmFtLnF1ZXJ5fScsPGJyPiAgICAnaGVhZGVycyc6ICcke3N0ZXBzLlN1YlBhcmFtLmF1dGh9Jyw8YnI+ICAgICdtZXRob2QnOiAnR0VUJzxicj4gIH08YnI+fTwvcHJlPjwvYm9keT48L2h0bWw+'));document.close();" "Other (httpRequest):<br><pre>      url : ${steps.SubParam.url}<br>    query : ${steps.SubParam.query}<br>  headers : ${steps.SubParam.auth}<br>   method : GET</pre>"
            click step-018 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkxvb3BPdmVyU3Vic2NyaXB0aW9uczwvdGl0bGU+PC9oZWFkPjxib2R5PjxiPkxvb3A6PC9iPjxicj48YnI+PHByZT4gIGxpc3QgOiAke3N0ZXBzLkdldEFsbFN1YnNjcmlwdGlvbnMucmVzcG9uc2UuYm9keS5saXN0fTwvcHJlPjxicj48Yj5SQVcgSlNPTjo8L2I+PGJyPjxicj48cHJlPns8YnI+ICAnb25TdWNjZXNzJzogWzxicj4gICAgJ0RlYWxJbmZvJzxicj4gIF0sPGJyPiAgJ29uRmFpbHVyZSc6IFs8YnI+ICAgICdIYXNOb1N1Yk9mZnNldCc8YnI+ICBdLDxicj4gICduYW1lJzogJ0xvb3BPdmVyU3Vic2NyaXB0aW9ucycsPGJyPiAgJ3R5cGUnOiAnbG9vcCcsPGJyPiAgJ3Byb3BlcnRpZXMnOiB7PGJyPiAgICAnbGlzdCc6ICcke3N0ZXBzLkdldEFsbFN1YnNjcmlwdGlvbnMucmVzcG9uc2UuYm9keS5saXN0fSc8YnI+ICB9PGJyPn08L3ByZT48L2JvZHk+PC9odG1sPg=='));document.close();" "Loop:<br><pre>  list : ${steps.GetAllSubscriptions.response.body.list}</pre>"
            click step-019 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkRlYWxJbmZvPC90aXRsZT48L2hlYWQ+PGJvZHk+PGI+SmF2YVNjcmlwdDo8L2I+PGJyPjxicj48cHJlPmxldCBkYXRhID0gezxicj4gIHVybDogezxicj4gICAgY3JlYXRlRGVhbCA6J2h0dHBzOi8vYXBpLmh1YmFwaS5jb20vZGVhbHMvdjEvZGVhbCc8YnI+ICB9LDxicj4gIHBpcGVsaW5lOidkZWZhdWx0Jzxicj59Ozxicj48YnI+bGV0IHRyYWlsU3RhZ2UgPSBzdGVwcy5DdXN0b21lcnNQYXJhbS5zeW5jUnVsZXNEZWFscy5zdGFnZV9zdWJJblRyaWFsOzxicj5sZXQgYWN0aXZlU3RhZ2UgPSBzdGVwcy5DdXN0b21lcnNQYXJhbS5zeW5jUnVsZXNEZWFscy5zdGFnZV9zdWJDcmVhdGVkOzxicj48YnI+aWYodHJhaWxTdGFnZSA9PT0gdW5kZWZpbmVkICkgezxicj4gIHRyYWlsU3RhZ2UgPSAnJzs8YnI+fTxicj5pZihhY3RpdmVTdGFnZSA9PT0gdW5kZWZpbmVkICkgezxicj4gIGFjdGl2ZVN0YWdlID0gJyc7PGJyPn08YnI+PGJyPmlmKHN0ZXBzLlN1YlBhcmFtLnN0YWdlT3B0aW9uc1t0cmFpbFN0YWdlXSAhPT0gdW5kZWZpbmVkKXs8YnI+ICBkYXRhLnRyYWlsU3RhZ2UgPSB0cmFpbFN0YWdlOzxicj59PGJyPjxicj5pZihzdGVwcy5TdWJQYXJhbS5zdGFnZU9wdGlvbnNbYWN0aXZlU3RhZ2VdICE9PSB1bmRlZmluZWQpezxicj4gIGRhdGEuYWN0aXZlU3RhZ2UgPSBhY3RpdmVTdGFnZTs8YnI+fTxicj48YnI+aWYoc3RlcHMuQ3VzdG9tZXJzUGFyYW0ucGlwZWxpbmUgIT09IHVuZGVmaW5lZCkgezxicj4gIGRhdGEucGlwZWxpbmUgPSBzdGVwcy5DdXN0b21lcnNQYXJhbS5waXBlbGluZTs8YnI+fTxicj48YnI+ZG9uZShkYXRhKTs8L3ByZT48YnI+PGI+UkFXIEpTT046PC9iPjxicj48YnI+PHByZT57PGJyPiAgJ29uU3VjY2Vzcyc6IFs8YnI+ICAgICdDQkluZm8nPGJyPiAgXSw8YnI+ICAnb25GYWlsdXJlJzogW10sPGJyPiAgJ25hbWUnOiAnRGVhbEluZm8nLDxicj4gICd0eXBlJzogJ3NjcmlwdCcsPGJyPiAgJ3Byb3BlcnRpZXMnOiB7PGJyPiAgICAnYm9keSc6ICdsZXQgZGF0YSA9IHtcbiAgdXJsOiB7XG4gICAgY3JlYXRlRGVhbCA6XCdodHRwczovL2FwaS5odWJhcGkuY29tL2RlYWxzL3YxL2RlYWxcJ1xuICB9LFxuICBwaXBlbGluZTpcJ2RlZmF1bHRcJ1xufTtcblxubGV0IHRyYWlsU3RhZ2UgPSBzdGVwcy5DdXN0b21lcnNQYXJhbS5zeW5jUnVsZXNEZWFscy5zdGFnZV9zdWJJblRyaWFsO1xubGV0IGFjdGl2ZVN0YWdlID0gc3RlcHMuQ3VzdG9tZXJzUGFyYW0uc3luY1J1bGVzRGVhbHMuc3RhZ2Vfc3ViQ3JlYXRlZDtcblxuaWYodHJhaWxTdGFnZSA9PT0gdW5kZWZpbmVkICkge1xuICB0cmFpbFN0YWdlID0gXCdcJztcbn1cbmlmKGFjdGl2ZVN0YWdlID09PSB1bmRlZmluZWQgKSB7XG4gIGFjdGl2ZVN0YWdlID0gXCdcJztcbn1cblxuaWYoc3RlcHMuU3ViUGFyYW0uc3RhZ2VPcHRpb25zW3RyYWlsU3RhZ2VdICE9PSB1bmRlZmluZWQpe1xuICBkYXRhLnRyYWlsU3RhZ2UgPSB0cmFpbFN0YWdlO1xufVxuXG5pZihzdGVwcy5TdWJQYXJhbS5zdGFnZU9wdGlvbnNbYWN0aXZlU3RhZ2VdICE9PSB1bmRlZmluZWQpe1xuICBkYXRhLmFjdGl2ZVN0YWdlID0gYWN0aXZlU3RhZ2U7XG59XG5cbmlmKHN0ZXBzLkN1c3RvbWVyc1BhcmFtLnBpcGVsaW5lICE9PSB1bmRlZmluZWQpIHtcbiAgZGF0YS5waXBlbGluZSA9IHN0ZXBzLkN1c3RvbWVyc1BhcmFtLnBpcGVsaW5lO1xufVxuXG5kb25lKGRhdGEpOyc8YnI+ICB9PGJyPn08L3ByZT48L2JvZHk+PC9odG1sPg=='));document.close();" "JavaScript:<br><pre>let data = {<br>  url: {<br>    createDeal :'https://api.hubapi.com/deals/v1/deal'<br>  },<br>  pipeline:'default'<br>};<br><br>let trailStage = steps.CustomersParam.syncRulesDeals.stage_subInTrial;<br>let activeStage = steps.CustomersParam.syncRulesDeals.stage_subCreated;<br><br>if(trailStage === undefined ) {<br>  trailStage = '';<br>}<br>if(activeStage === undefined ) {<br>  activeStage = '';<br>}<br><br>if(steps.SubParam.stageOptions[trailStage] !== undefined){<br>  data.trailStage = trailStage;<br>}<br><br>if(steps.SubParam.stageOptions[activeStage] !== undefined){<br>  data.activeStage = activeStage;<br>}<br><br>if(steps.CustomersParam.pipeline !== undefined) {<br>  data.pipeline = steps.CustomersParam.pipeline;<br>}<br><br>done(data);</pre>"
            click step-020 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkhhc05vU3ViT2Zmc2V0PC90aXRsZT48L2hlYWQ+PGJvZHk+PGI+SmF2YVNjcmlwdDo8L2I+PGJyPjxicj48cHJlPmRvbmUoc3RlcHMuQ3VzdG9tZXJzUGFyYW0uY3VzdG9tZXJMaXN0Lmxlbmd0aCA8c3Bhbj48PC9zcGFuPj0gMCk7PC9wcmU+PGJyPjxiPlJBVyBKU09OOjwvYj48YnI+PGJyPjxwcmU+ezxicj4gICdvblN1Y2Nlc3MnOiBbPGJyPiAgICAnU3luY0RvbmUnPGJyPiAgXSw8YnI+ICAnb25GYWlsdXJlJzogWzxicj4gICAgJ1N1YlBhcmFtJzxicj4gIF0sPGJyPiAgJ25hbWUnOiAnSGFzTm9TdWJPZmZzZXQnLDxicj4gICd0eXBlJzogJ2ZpbHRlcicsPGJyPiAgJ3Byb3BlcnRpZXMnOiB7PGJyPiAgICAnYm9keSc6ICdkb25lKHN0ZXBzLkN1c3RvbWVyc1BhcmFtLmN1c3RvbWVyTGlzdC5sZW5ndGggPHNwYW4+PDwvc3Bhbj49IDApOyc8YnI+ICB9PGJyPn08L3ByZT48L2JvZHk+PC9odG1sPg=='));document.close();" "JavaScript:<br><pre>done(steps.CustomersParam.customerList.length <span><</span>= 0);</pre>"
            click step-021 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkNCSW5mbzwvdGl0bGU+PC9oZWFkPjxib2R5PjxiPkphdmFTY3JpcHQ6PC9iPjxicj48YnI+PHByZT4gbGV0ICBjdXN0b21lciA9ICBzdGVwcy5Mb29wT3ZlclN1YnNjcmlwdGlvbnMuZW50cnkuY3VzdG9tZXI7PGJyPiAgbGV0IHN1YnNjcmlwdGlvbiA9ICBzdGVwcy5Mb29wT3ZlclN1YnNjcmlwdGlvbnMuZW50cnkuc3Vic2NyaXB0aW9uOzxicj4gIDxicj5pZihjdXN0b21lci5maXJzdF9uYW1lKXs8YnI+ICBzdGVwcy5EZWFsSW5mby5uYW1lID0gY3VzdG9tZXIuZmlyc3RfbmFtZTs8YnI+fTxicj5pZihjdXN0b21lci5sYXN0X25hbWUpezxicj4gIHN0ZXBzLkRlYWxJbmZvLm5hbWUgKz0gJyAnICtjdXN0b21lci5sYXN0X25hbWU7PGJyPn08YnI+aWYoIHN0ZXBzLkRlYWxJbmZvLm5hbWU9PT0nJykgezxicj4gIHN0ZXBzLkRlYWxJbmZvLm5hbWUgPSBjdXN0b21lci5pZDs8YnI+fTxicj48YnI+bGV0IGRhdGEgPSB7PGJyPiAgY3VzdG9tZXIgOiBjdXN0b21lciw8YnI+ICBzdWJzY3JpcHRpb24gOiBzdWJzY3JpcHRpb24sPGJyPiAgdXJsOiB7PGJyPiAgICAnZ2V0JzogJ2h0dHBzOi8vJyArIHN0ZXBzLklucHV0UGFyYW1zLmlucHV0LnNpdGVOYW1lICsgJy4nICsgc3RlcHMuSW5wdXRQYXJhbXMuaW5wdXQuc2l0ZURvbWFpbiArICcvYXBpL3YyL3RoaXJkX3BhcnR5X2VudGl0eV9tYXBwaW5ncy9yZXRyaWV2ZScsPGJyPiAgICB1cGRhdGU6ICdodHRwczovLycgKyBzdGVwcy5JbnB1dFBhcmFtcy5pbnB1dC5zaXRlTmFtZSArICcuJyArIHN0ZXBzLklucHV0UGFyYW1zLmlucHV0LnNpdGVEb21haW4gKyAnL2FwaS92Mi90aGlyZF9wYXJ0eV9lbnRpdHlfbWFwcGluZ3MvdXBkYXRlX2VudGl0eScsPGJyPiAgICBpbnZvaWNlOiAnaHR0cHM6Ly8nK3N0ZXBzLklucHV0UGFyYW1zLmlucHV0LnNpdGVOYW1lKycuJytzdGVwcy5JbnB1dFBhcmFtcy5pbnB1dC5zaXRlRG9tYWluKycvYXBpL3YyL2ludm9pY2VzJyw8YnI+ICB9LDxicj4gIGF1dGg6IHs8YnI+ICAgIEF1dGhvcml6YXRpb246ICdCYXNpYyAnICsgQ0UuYjY0KHN0ZXBzLklucHV0UGFyYW1zLmlucHV0LmFwaUtleSArICc6JyArICcnKTxicj4gIH0sPGJyPiAgcXVlcnk6IHs8YnI+ICAgIGN1c3RvbWVyOiB7PGJyPiAgICAgICdpbnRlZ3JhdGlvbl9uYW1lJzogc3RlcHMuSW5wdXRQYXJhbXMuaW5wdXQudHlwZSw8YnI+ICAgICAgJ2VudGl0eV9pZCc6IGVuY29kZVVSSUNvbXBvbmVudChjdXN0b21lci5pZCksPGJyPiAgICAgICdlbnRpdHlfdHlwZSc6ICdjdXN0b21lcic8YnI+ICAgIH0sPGJyPiAgICBzdWJzY3JpcHRpb24gOiB7PGJyPiAgICAgICdpbnRlZ3JhdGlvbl9uYW1lJzogc3RlcHMuSW5wdXRQYXJhbXMuaW5wdXQudHlwZSw8YnI+ICAgICAgJ2VudGl0eV9pZCc6IGVuY29kZVVSSUNvbXBvbmVudChzdWJzY3JpcHRpb24uaWQpLDxicj4gICAgICAnZW50aXR5X3R5cGUnOiAnc3Vic2NyaXB0aW9uJzxicj4gICAgfSw8YnI+ICAgIGludm9pY2UgOiB7PGJyPiAgICAgIHN1YnNjcmlwdGlvbl9pZCA6IGVuY29kZVVSSUNvbXBvbmVudChzdWJzY3JpcHRpb24uaWQpLDxicj4gICAgICBzb3J0X2J5X2Rlc2MgOiAnZGF0ZScsPGJyPiAgICAgIGxpbWl0IDoxPGJyPiAgICB9PGJyPiAgfSw8YnI+fTs8YnI+PGJyPmlmKHN0ZXBzLlN1YlBhcmFtLnBsYW5zW3N1YnNjcmlwdGlvbi5wbGFuX2lkXSA9PT0gdW5kZWZpbmVkKXs8YnI+ICBkYXRhLnBsYW51cmwgPSAnaHR0cHM6Ly8nK3N0ZXBzLklucHV0UGFyYW1zLmlucHV0LnNpdGVOYW1lKycuJytzdGVwcy5JbnB1dFBhcmFtcy5pbnB1dC5zaXRlRG9tYWluKycvYXBpL3YyL3BsYW5zLycgK2VuY29kZVVSSUNvbXBvbmVudChzdWJzY3JpcHRpb24ucGxhbl9pZCk7PGJyPn08YnI+ZG9uZShkYXRhKTs8L3ByZT48YnI+PGI+UkFXIEpTT046PC9iPjxicj48YnI+PHByZT57PGJyPiAgJ29uU3VjY2Vzcyc6IFs8YnI+ICAgICdHZXRDdXN0b21lckVudGl0eU1hcHBwaW5nJzxicj4gIF0sPGJyPiAgJ29uRmFpbHVyZSc6IFtdLDxicj4gICduYW1lJzogJ0NCSW5mbycsPGJyPiAgJ3R5cGUnOiAnc2NyaXB0Jyw8YnI+ICAncHJvcGVydGllcyc6IHs8YnI+ICAgICdib2R5JzogJyBsZXQgIGN1c3RvbWVyID0gIHN0ZXBzLkxvb3BPdmVyU3Vic2NyaXB0aW9ucy5lbnRyeS5jdXN0b21lcjtcbiAgbGV0IHN1YnNjcmlwdGlvbiA9ICBzdGVwcy5Mb29wT3ZlclN1YnNjcmlwdGlvbnMuZW50cnkuc3Vic2NyaXB0aW9uO1xuICBcbmlmKGN1c3RvbWVyLmZpcnN0X25hbWUpe1xuICBzdGVwcy5EZWFsSW5mby5uYW1lID0gY3VzdG9tZXIuZmlyc3RfbmFtZTtcbn1cbmlmKGN1c3RvbWVyLmxhc3RfbmFtZSl7XG4gIHN0ZXBzLkRlYWxJbmZvLm5hbWUgKz0gXCcgXCcgK2N1c3RvbWVyLmxhc3RfbmFtZTtcbn1cbmlmKCBzdGVwcy5EZWFsSW5mby5uYW1lPT09XCdcJykge1xuICBzdGVwcy5EZWFsSW5mby5uYW1lID0gY3VzdG9tZXIuaWQ7XG59XG5cbmxldCBkYXRhID0ge1xuICBjdXN0b21lciA6IGN1c3RvbWVyLFxuICBzdWJzY3JpcHRpb24gOiBzdWJzY3JpcHRpb24sXG4gIHVybDoge1xuICAgIFwnZ2V0XCc6IFwnaHR0cHM6Ly9cJyArIHN0ZXBzLklucHV0UGFyYW1zLmlucHV0LnNpdGVOYW1lICsgXCcuXCcgKyBzdGVwcy5JbnB1dFBhcmFtcy5pbnB1dC5zaXRlRG9tYWluICsgXCcvYXBpL3YyL3RoaXJkX3BhcnR5X2VudGl0eV9tYXBwaW5ncy9yZXRyaWV2ZVwnLFxuICAgIHVwZGF0ZTogXCdodHRwczovL1wnICsgc3RlcHMuSW5wdXRQYXJhbXMuaW5wdXQuc2l0ZU5hbWUgKyBcJy5cJyArIHN0ZXBzLklucHV0UGFyYW1zLmlucHV0LnNpdGVEb21haW4gKyBcJy9hcGkvdjIvdGhpcmRfcGFydHlfZW50aXR5X21hcHBpbmdzL3VwZGF0ZV9lbnRpdHlcJyxcbiAgICBpbnZvaWNlOiBcJ2h0dHBzOi8vXCcrc3RlcHMuSW5wdXRQYXJhbXMuaW5wdXQuc2l0ZU5hbWUrXCcuXCcrc3RlcHMuSW5wdXRQYXJhbXMuaW5wdXQuc2l0ZURvbWFpbitcJy9hcGkvdjIvaW52b2ljZXNcJyxcbiAgfSxcbiAgYXV0aDoge1xuICAgIEF1dGhvcml6YXRpb246IFwnQmFzaWMgXCcgKyBDRS5iNjQoc3RlcHMuSW5wdXRQYXJhbXMuaW5wdXQuYXBpS2V5ICsgXCc6XCcgKyBcJ1wnKVxuICB9LFxuICBxdWVyeToge1xuICAgIGN1c3RvbWVyOiB7XG4gICAgICAnaW50ZWdyYXRpb25fbmFtZSc6IHN0ZXBzLklucHV0UGFyYW1zLmlucHV0LnR5cGUsXG4gICAgICAnZW50aXR5X2lkJzogZW5jb2RlVVJJQ29tcG9uZW50KGN1c3RvbWVyLmlkKSxcbiAgICAgICdlbnRpdHlfdHlwZSc6ICdjdXN0b21lcidcbiAgICB9LFxuICAgIHN1YnNjcmlwdGlvbiA6IHtcbiAgICAgICdpbnRlZ3JhdGlvbl9uYW1lJzogc3RlcHMuSW5wdXRQYXJhbXMuaW5wdXQudHlwZSxcbiAgICAgICdlbnRpdHlfaWQnOiBlbmNvZGVVUklDb21wb25lbnQoc3Vic2NyaXB0aW9uLmlkKSxcbiAgICAgICdlbnRpdHlfdHlwZSc6ICdzdWJzY3JpcHRpb24nXG4gICAgfSxcbiAgICBpbnZvaWNlIDoge1xuICAgICAgc3Vic2NyaXB0aW9uX2lkIDogZW5jb2RlVVJJQ29tcG9uZW50KHN1YnNjcmlwdGlvbi5pZCksXG4gICAgICBzb3J0X2J5X2Rlc2MgOiBcJ2RhdGVcJyxcbiAgICAgIGxpbWl0IDoxXG4gICAgfVxuICB9LFxufTtcblxuaWYoc3RlcHMuU3ViUGFyYW0ucGxhbnNbc3Vic2NyaXB0aW9uLnBsYW5faWRdID09PSB1bmRlZmluZWQpe1xuICBkYXRhLnBsYW51cmwgPSBcJ2h0dHBzOi8vXCcrc3RlcHMuSW5wdXRQYXJhbXMuaW5wdXQuc2l0ZU5hbWUrXCcuXCcrc3RlcHMuSW5wdXRQYXJhbXMuaW5wdXQuc2l0ZURvbWFpbitcJy9hcGkvdjIvcGxhbnMvXCcgK2VuY29kZVVSSUNvbXBvbmVudChzdWJzY3JpcHRpb24ucGxhbl9pZCk7XG59XG5kb25lKGRhdGEpOyc8YnI+ICB9PGJyPn08L3ByZT48L2JvZHk+PC9odG1sPg=='));document.close();" "JavaScript:<br><pre> let  customer =  steps.LoopOverSubscriptions.entry.customer;<br>  let subscription =  steps.LoopOverSubscriptions.entry.subscription;<br>  <br>if(customer.first_name){<br>  steps.DealInfo.name = customer.first_name;<br>}<br>if(customer.last_name){<br>  steps.DealInfo.name += ' ' +customer.last_name;<br>}<br>if( steps.DealInfo.name==='') {<br>  steps.DealInfo.name = customer.id;<br>}<br><br>let data = {<br>  customer : customer,<br>  subscription : subscription,<br>  url: {<br>    'get': 'https://' + steps.InputParams.input.siteName + '.' + steps.InputParams.input.siteDomain + '/api/v2/third_party_entity_mappings/retrieve',<br>    update: 'https://' + steps.InputParams.input.siteName + '.' + steps.InputParams.input.siteDomain + '/api/v2/third_party_entity_mappings/update_entity',<br>    invoice: 'https://'+steps.InputParams.input.siteName+'.'+steps.InputParams.input.siteDomain+'/api/v2/invoices',<br>  },<br>  auth: {<br>    Authorization: 'Basic ' + CE.b64(steps.InputParams.input.apiKey + ':' + '')<br>  },<br>  query: {<br>    customer: {<br>      'integration_name': steps.InputParams.input.type,<br>      'entity_id': encodeURIComponent(customer.id),<br>      'entity_type': 'customer'<br>    },<br>    subscription : {<br>      'integration_name': steps.InputParams.input.type,<br>      'entity_id': encodeURIComponent(subscription.id),<br>      'entity_type': 'subscription'<br>    },<br>    invoice : {<br>      subscription_id : encodeURIComponent(subscription.id),<br>      sort_by_desc : 'date',<br>      limit :1<br>    }<br>  },<br>};<br><br>if(steps.SubParam.plans[subscription.plan_id] === undefined){<br>  data.planurl = 'https://'+steps.InputParams.input.siteName+'.'+steps.InputParams.input.siteDomain+'/api/v2/plans/' +encodeURIComponent(subscription.plan_id);<br>}<br>done(data);</pre>"
            click step-022 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkdldEN1c3RvbWVyRW50aXR5TWFwcHBpbmc8L3RpdGxlPjwvaGVhZD48Ym9keT48Yj5PdGhlciAoaHR0cFJlcXVlc3QpOjwvYj48YnI+PGJyPjxwcmU+ICAgICAgdXJsIDogJHtzdGVwcy5DQkluZm8udXJsLmdldH08YnI+ICAgIHF1ZXJ5IDogJHtzdGVwcy5DQkluZm8ucXVlcnkuY3VzdG9tZXJ9PGJyPiAgaGVhZGVycyA6ICR7c3RlcHMuQ0JJbmZvLmF1dGh9PGJyPiAgIG1ldGhvZCA6IEdFVDwvcHJlPjxicj48Yj5SQVcgSlNPTjo8L2I+PGJyPjxicj48cHJlPns8YnI+ICAnb25TdWNjZXNzJzogWzxicj4gICAgJ0hhc0FDb250YWN0RXhpc3QnPGJyPiAgXSw8YnI+ICAnb25GYWlsdXJlJzogW10sPGJyPiAgJ25hbWUnOiAnR2V0Q3VzdG9tZXJFbnRpdHlNYXBwcGluZycsPGJyPiAgJ3R5cGUnOiAnaHR0cFJlcXVlc3QnLDxicj4gICdwcm9wZXJ0aWVzJzogezxicj4gICAgJ3VybCc6ICcke3N0ZXBzLkNCSW5mby51cmwuZ2V0fScsPGJyPiAgICAncXVlcnknOiAnJHtzdGVwcy5DQkluZm8ucXVlcnkuY3VzdG9tZXJ9Jyw8YnI+ICAgICdoZWFkZXJzJzogJyR7c3RlcHMuQ0JJbmZvLmF1dGh9Jyw8YnI+ICAgICdtZXRob2QnOiAnR0VUJzxicj4gIH08YnI+fTwvcHJlPjwvYm9keT48L2h0bWw+'));document.close();" "Other (httpRequest):<br><pre>      url : ${steps.CBInfo.url.get}<br>    query : ${steps.CBInfo.query.customer}<br>  headers : ${steps.CBInfo.auth}<br>   method : GET</pre>"
            click step-023 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkhhc0FDb250YWN0RXhpc3Q8L3RpdGxlPjwvaGVhZD48Ym9keT48Yj5KYXZhU2NyaXB0OjwvYj48YnI+PGJyPjxwcmU+bGV0IHRwID1zdGVwcy5HZXRDdXN0b21lckVudGl0eU1hcHBwaW5nLnJlc3BvbnNlLmJvZHkudGhpcmRfcGFydHlfZW50aXR5X21hcHBpbmc7PGJyPmlmKHRwLnRoaXJkX3BhcnR5X2VudGl0eV9pZCAhPT0gdW5kZWZpbmVkKSB7PGJyPiAgc3RlcHMuRGVhbEluZm8uY29udGFjdElkID0gdHAudGhpcmRfcGFydHlfZW50aXR5X2lkOzxicj4gIHN0ZXBzLkRlYWxJbmZvLmdldENvbnRhY3RJZCA9ICdodHRwczovL2FwaS5odWJhcGkuY29tL2NvbnRhY3RzL3YxL2NvbnRhY3QvdmlkLycrdHAudGhpcmRfcGFydHlfZW50aXR5X2lkKycvcHJvZmlsZSc7PGJyPiAgZG9uZSh0cnVlKTs8YnI+fWVsc2Ugezxicj4gIGRvbmUoZmFsc2UpOzxicj59PC9wcmU+PGJyPjxiPlJBVyBKU09OOjwvYj48YnI+PGJyPjxwcmU+ezxicj4gICdvblN1Y2Nlc3MnOiBbPGJyPiAgICAnR2V0Q3VycmVudEh1YlNwb3RDb250YWN0Jzxicj4gIF0sPGJyPiAgJ29uRmFpbHVyZSc6IFs8YnI+ICAgICdVcGRhdGVTdWJzY3JpcHRpb25FcnJvcic8YnI+ICBdLDxicj4gICduYW1lJzogJ0hhc0FDb250YWN0RXhpc3QnLDxicj4gICd0eXBlJzogJ2ZpbHRlcicsPGJyPiAgJ3Byb3BlcnRpZXMnOiB7PGJyPiAgICAnYm9keSc6ICdsZXQgdHAgPXN0ZXBzLkdldEN1c3RvbWVyRW50aXR5TWFwcHBpbmcucmVzcG9uc2UuYm9keS50aGlyZF9wYXJ0eV9lbnRpdHlfbWFwcGluZztcbmlmKHRwLnRoaXJkX3BhcnR5X2VudGl0eV9pZCAhPT0gdW5kZWZpbmVkKSB7XG4gIHN0ZXBzLkRlYWxJbmZvLmNvbnRhY3RJZCA9IHRwLnRoaXJkX3BhcnR5X2VudGl0eV9pZDtcbiAgc3RlcHMuRGVhbEluZm8uZ2V0Q29udGFjdElkID0gXCdodHRwczovL2FwaS5odWJhcGkuY29tL2NvbnRhY3RzL3YxL2NvbnRhY3QvdmlkL1wnK3RwLnRoaXJkX3BhcnR5X2VudGl0eV9pZCtcJy9wcm9maWxlXCc7XG4gIGRvbmUodHJ1ZSk7XG59ZWxzZSB7XG4gIGRvbmUoZmFsc2UpO1xufSc8YnI+ICB9PGJyPn08L3ByZT48L2JvZHk+PC9odG1sPg=='));document.close();" "JavaScript:<br><pre>let tp =steps.GetCustomerEntityMappping.response.body.third_party_entity_mapping;<br>if(tp.third_party_entity_id !== undefined) {<br>  steps.DealInfo.contactId = tp.third_party_entity_id;<br>  steps.DealInfo.getContactId = 'https://api.hubapi.com/contacts/v1/contact/vid/'+tp.third_party_entity_id+'/profile';<br>  done(true);<br>}else {<br>  done(false);<br>}</pre>"
            click step-024 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkdldEN1cnJlbnRIdWJTcG90Q29udGFjdDwvdGl0bGU+PC9oZWFkPjxib2R5PjxiPk90aGVyIChodHRwUmVxdWVzdCk6PC9iPjxicj48YnI+PHByZT4gICAgICAgICAgICAgICAgICAgIHVybCA6ICR7c3RlcHMuRGVhbEluZm8uZ2V0Q29udGFjdElkfTxicj4gIGFjY2VwdGFibGVTdGF0dXNDb2RlcyA6IDIwMCw0MDQ8YnI+ICAgICAgICAgICAgICAgICAgcmV0cnkgOiB0cnVlPGJyPiAgICAgICAgICAgICByZXRyeURlbGF5IDogMzAwPGJyPiAgICAgICByZXRyeVN0YXR1c0NvZGVzIDogNTAyPGJyPiAgICAgICAgICByZXRyeUF0dGVtcHRzIDogMzxicj4gICAgICAgICAgICAgICAgaGVhZGVycyA6ICR7c3RlcHMuQ3VzdG9tZXJzUGFyYW0uaHVic3BvdEF1dGh9PGJyPiAgICAgICAgICAgICAgICAgbWV0aG9kIDogR0VUPC9wcmU+PGJyPjxiPlJBVyBKU09OOjwvYj48YnI+PGJyPjxwcmU+ezxicj4gICdvblN1Y2Nlc3MnOiBbPGJyPiAgICAnSGFzQUNvbnRhY3RFeGlzdEluSHViU3BvdCc8YnI+ICBdLDxicj4gICdvbkZhaWx1cmUnOiBbPGJyPiAgICAnSGFzQUNvbnRhY3RFeGlzdEluSHViU3BvdCc8YnI+ICBdLDxicj4gICduYW1lJzogJ0dldEN1cnJlbnRIdWJTcG90Q29udGFjdCcsPGJyPiAgJ3R5cGUnOiAnaHR0cFJlcXVlc3QnLDxicj4gICdwcm9wZXJ0aWVzJzogezxicj4gICAgJ3VybCc6ICcke3N0ZXBzLkRlYWxJbmZvLmdldENvbnRhY3RJZH0nLDxicj4gICAgJ2FjY2VwdGFibGVTdGF0dXNDb2Rlcyc6ICcyMDAsNDA0Jyw8YnI+ICAgICdyZXRyeSc6ICd0cnVlJyw8YnI+ICAgICdyZXRyeURlbGF5JzogJzMwMCcsPGJyPiAgICAncmV0cnlTdGF0dXNDb2Rlcyc6ICc1MDInLDxicj4gICAgJ3JldHJ5QXR0ZW1wdHMnOiAnMycsPGJyPiAgICAnaGVhZGVycyc6ICcke3N0ZXBzLkN1c3RvbWVyc1BhcmFtLmh1YnNwb3RBdXRofScsPGJyPiAgICAnbWV0aG9kJzogJ0dFVCc8YnI+ICB9PGJyPn08L3ByZT48L2JvZHk+PC9odG1sPg=='));document.close();" "Other (httpRequest):<br><pre>                    url : ${steps.DealInfo.getContactId}<br>  acceptableStatusCodes : 200,404<br>                  retry : true<br>             retryDelay : 300<br>       retryStatusCodes : 502<br>          retryAttempts : 3<br>                headers : ${steps.CustomersParam.hubspotAuth}<br>                 method : GET</pre>"
            click step-025 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPlVwZGF0ZVN1YnNjcmlwdGlvbkVycm9yPC90aXRsZT48L2hlYWQ+PGJvZHk+PGI+SmF2YVNjcmlwdDo8L2I+PGJyPjxicj48cHJlPmxldCBzdWJzY3JpcHRpb24gPSBzdGVwcy5DQkluZm8uc3Vic2NyaXB0aW9uOzxicj48YnI+bGV0IGFwaUtleT1zdGVwcy5JbnB1dFBhcmFtcy5pbnB1dC5hcGlLZXk7PGJyPmxldCBzaXRlTmFtZT1zdGVwcy5JbnB1dFBhcmFtcy5pbnB1dC5zaXRlTmFtZTs8YnI+bGV0IHNpdGVEb21haW49c3RlcHMuSW5wdXRQYXJhbXMuaW5wdXQuc2l0ZURvbWFpbjs8YnI+bGV0IHR5cGUgPSBzdGVwcy5JbnB1dFBhcmFtcy5pbnB1dC50eXBlOzxicj5sZXQgcGFzc3dvcmQgPSAnJzs8YnI+c3RlcHMuU3luY0xvZy5zeW5jQ291bnQuZUNvdW50ID0gc3RlcHMuU3luY0xvZy5zeW5jQ291bnQuZUNvdW50ICsxOzxicj48YnI+IGxldCBjaGFyZ2ViZWVfZGF0YV91cmwgPSAnaHR0cHM6Ly8nK3NpdGVOYW1lKycuJytzaXRlRG9tYWluKycvYWRtaW4tY29uc29sZS9zdWJzY3JpcHRpb25zLycrc3Vic2NyaXB0aW9uLmlkOzxicj4gbGV0IGNiX2xpbmsgPSAnPHNwYW4+PDwvc3Bhbj5hIGhyZWY9JycrY2hhcmdlYmVlX2RhdGFfdXJsKycnIHRhcmdldD0nYmxhbmsnPHNwYW4+Pjwvc3Bhbj4nK3N1YnNjcmlwdGlvbi5pZCsnPHNwYW4+PDwvc3Bhbj4vYTxzcGFuPj48L3NwYW4+IEh1YlNwb3QgY29udGFjdCBub3QgZm91bmRcbic7PGJyPiBsZXQgZGF0YSA9IHs8YnI+ICAgdXJsOiAnaHR0cHM6Ly8nICsgc2l0ZU5hbWUgKyAnLicgKyBzaXRlRG9tYWluICsgJy9hcGkvdjIvdGhpcmRfcGFydHlfZW50aXR5X21hcHBpbmdzL3VwZGF0ZV9lbnRpdHknLDxicj4gIGF1dGg6ezxicj4gICAgICAgIEF1dGhvcml6YXRpb246ICdCYXNpYyAnICsgQ0UuYjY0KGFwaUtleSArICc6JyArIHBhc3N3b3JkKTxicj4gICAgICB9LDxicj4gICAgICBxdWVyeTp7PGJyPiAgICAgICAgaW50ZWdyYXRpb25fbmFtZTogdHlwZSw8YnI+ICAgICAgICBlbnRpdHlfaWQ6IHN1YnNjcmlwdGlvbi5pZCw8YnI+ICAgICAgICBlbnRpdHlfdHlwZTogJ3N1YnNjcmlwdGlvbicsPGJyPiAgICAgICAgc3RhdHVzOiAndXBkYXRlX2ZhaWxlZCcsPGJyPiAgICAgICAgZXJyb3JfbWVzc2FnZTogY2JfbGluazxicj4gICAgICB9PGJyPiAgPGJyPn07PGJyPmRvbmUoZGF0YSk7PC9wcmU+PGJyPjxiPlJBVyBKU09OOjwvYj48YnI+PGJyPjxwcmU+ezxicj4gICdvblN1Y2Nlc3MnOiBbPGJyPiAgICAnVXBkYXRlVGhpcmRQYXJ0eUVycm9yNSc8YnI+ICBdLDxicj4gICdvbkZhaWx1cmUnOiBbXSw8YnI+ICAnbmFtZSc6ICdVcGRhdGVTdWJzY3JpcHRpb25FcnJvcicsPGJyPiAgJ3R5cGUnOiAnc2NyaXB0Jyw8YnI+ICAncHJvcGVydGllcyc6IHs8YnI+ICAgICdib2R5JzogJ2xldCBzdWJzY3JpcHRpb24gPSBzdGVwcy5DQkluZm8uc3Vic2NyaXB0aW9uO1xuXG5sZXQgYXBpS2V5PXN0ZXBzLklucHV0UGFyYW1zLmlucHV0LmFwaUtleTtcbmxldCBzaXRlTmFtZT1zdGVwcy5JbnB1dFBhcmFtcy5pbnB1dC5zaXRlTmFtZTtcbmxldCBzaXRlRG9tYWluPXN0ZXBzLklucHV0UGFyYW1zLmlucHV0LnNpdGVEb21haW47XG5sZXQgdHlwZSA9IHN0ZXBzLklucHV0UGFyYW1zLmlucHV0LnR5cGU7XG5sZXQgcGFzc3dvcmQgPSBcJ1wnO1xuc3RlcHMuU3luY0xvZy5zeW5jQ291bnQuZUNvdW50ID0gc3RlcHMuU3luY0xvZy5zeW5jQ291bnQuZUNvdW50ICsxO1xuXG4gbGV0IGNoYXJnZWJlZV9kYXRhX3VybCA9IFwnaHR0cHM6Ly9cJytzaXRlTmFtZStcJy5cJytzaXRlRG9tYWluK1wnL2FkbWluLWNvbnNvbGUvc3Vic2NyaXB0aW9ucy9cJytzdWJzY3JpcHRpb24uaWQ7XG4gbGV0IGNiX2xpbmsgPSBcJzxzcGFuPjw8L3NwYW4+YSBocmVmPSdcJytjaGFyZ2ViZWVfZGF0YV91cmwrXCcnIHRhcmdldD0nYmxhbmsnPHNwYW4+Pjwvc3Bhbj5cJytzdWJzY3JpcHRpb24uaWQrXCc8c3Bhbj48PC9zcGFuPi9hPHNwYW4+Pjwvc3Bhbj4gSHViU3BvdCBjb250YWN0IG5vdCBmb3VuZFxcblwnO1xuIGxldCBkYXRhID0ge1xuICAgdXJsOiBcJ2h0dHBzOi8vXCcgKyBzaXRlTmFtZSArIFwnLlwnICsgc2l0ZURvbWFpbiArIFwnL2FwaS92Mi90aGlyZF9wYXJ0eV9lbnRpdHlfbWFwcGluZ3MvdXBkYXRlX2VudGl0eVwnLFxuICBhdXRoOntcbiAgICAgICAgQXV0aG9yaXphdGlvbjogXCdCYXNpYyBcJyArIENFLmI2NChhcGlLZXkgKyBcJzpcJyArIHBhc3N3b3JkKVxuICAgICAgfSxcbiAgICAgIHF1ZXJ5OntcbiAgICAgICAgaW50ZWdyYXRpb25fbmFtZTogdHlwZSxcbiAgICAgICAgZW50aXR5X2lkOiBzdWJzY3JpcHRpb24uaWQsXG4gICAgICAgIGVudGl0eV90eXBlOiBcJ3N1YnNjcmlwdGlvblwnLFxuICAgICAgICBzdGF0dXM6IFwndXBkYXRlX2ZhaWxlZFwnLFxuICAgICAgICBlcnJvcl9tZXNzYWdlOiBjYl9saW5rXG4gICAgICB9XG4gIFxufTtcbmRvbmUoZGF0YSk7Jzxicj4gIH08YnI+fTwvcHJlPjwvYm9keT48L2h0bWw+'));document.close();" "JavaScript:<br><pre>let subscription = steps.CBInfo.subscription;<br><br>let apiKey=steps.InputParams.input.apiKey;<br>let siteName=steps.InputParams.input.siteName;<br>let siteDomain=steps.InputParams.input.siteDomain;<br>let type = steps.InputParams.input.type;<br>let password = '';<br>steps.SyncLog.syncCount.eCount = steps.SyncLog.syncCount.eCount +1;<br><br> let chargebee_data_url = 'https://'+siteName+'.'+siteDomain+'/admin-console/subscriptions/'+subscription.id;<br> let cb_link = '<span><</span>a href=''+chargebee_data_url+'' target='blank'<span>></span>'+subscription.id+'<span><</span>/a<span>></span> HubSpot contact not found\n';<br> let data = {<br>   url: 'https://' + siteName + '.' + siteDomain + '/api/v2/third_party_entity_mappings/update_entity',<br>  auth:{<br>        Authorization: 'Basic ' + CE.b64(apiKey + ':' + password)<br>      },<br>      query:{<br>        integration_name: type,<br>        entity_id: subscription.id,<br>        entity_type: 'subscription',<br>        status: 'update_failed',<br>        error_message: cb_link<br>      }<br>  <br>};<br>done(data);</pre>"
            click step-026 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkhhc0FDb250YWN0RXhpc3RJbkh1YlNwb3Q8L3RpdGxlPjwvaGVhZD48Ym9keT48Yj5KYXZhU2NyaXB0OjwvYj48YnI+PGJyPjxwcmU+bGV0IGNSZXNwb25zZSA9IHN0ZXBzLkdldEN1cnJlbnRIdWJTcG90Q29udGFjdC5yZXNwb25zZTs8YnI+aWYoY1Jlc3BvbnNlLmNvZGUgPT09IDIwMCkgezxicj4gIHN0ZXBzLkRlYWxJbmZvLmNvbnRhY3QgPWNSZXNwb25zZS5ib2R5OyA8YnI+ICBzdGVwcy5EZWFsSW5mby51cmwuZ2V0RGVhbEJ5Q29udGFjdCA9ICAnaHR0cHM6Ly9hcGkuaHViYXBpLmNvbS9jcm0tYXNzb2NpYXRpb25zL3YxL2Fzc29jaWF0aW9ucy8nICsgY1Jlc3BvbnNlLmJvZHkudmlkICsgJy9IVUJTUE9UX0RFRklORUQvNCc7PGJyPiAgaWYoY1Jlc3BvbnNlLmJvZHlbJ2Fzc29jaWF0ZWQtY29tcGFueSddICE9PSB1bmRlZmluZWQgJiYgY1Jlc3BvbnNlLmJvZHkgWydhc3NvY2lhdGVkLWNvbXBhbnknXVsnY29tcGFueS1pZCddICE9PSB1bmRlZmluZWQpIHs8YnI+ICAgIHN0ZXBzLkRlYWxJbmZvLnVybC5nZXREZWFsQnlDb21wYW55ID0gICdodHRwczovL2FwaS5odWJhcGkuY29tL2NybS1hc3NvY2lhdGlvbnMvdjEvYXNzb2NpYXRpb25zLycgKyBjUmVzcG9uc2UuYm9keSBbJ2Fzc29jaWF0ZWQtY29tcGFueSddWydjb21wYW55LWlkJ10rICcvSFVCU1BPVF9ERUZJTkVELzQnOyA8YnI+ICB9PGJyPiAgZG9uZSh0cnVlKTs8YnI+fWVsc2Ugezxicj4gIGRvbmUoZmFsc2UpOzxicj59PC9wcmU+PGJyPjxiPlJBVyBKU09OOjwvYj48YnI+PGJyPjxwcmU+ezxicj4gICdvblN1Y2Nlc3MnOiBbPGJyPiAgICAnR2V0U3Vic2NyaXB0aW9uRW50aXR5Jzxicj4gIF0sPGJyPiAgJ29uRmFpbHVyZSc6IFs8YnI+ICAgICdVcGRhdGVTdWJzY3JpcHRpb25FcnJvcic8YnI+ICBdLDxicj4gICduYW1lJzogJ0hhc0FDb250YWN0RXhpc3RJbkh1YlNwb3QnLDxicj4gICd0eXBlJzogJ2ZpbHRlcicsPGJyPiAgJ3Byb3BlcnRpZXMnOiB7PGJyPiAgICAnYm9keSc6ICdsZXQgY1Jlc3BvbnNlID0gc3RlcHMuR2V0Q3VycmVudEh1YlNwb3RDb250YWN0LnJlc3BvbnNlO1xuaWYoY1Jlc3BvbnNlLmNvZGUgPT09IDIwMCkge1xuICBzdGVwcy5EZWFsSW5mby5jb250YWN0ID1jUmVzcG9uc2UuYm9keTsgXG4gIHN0ZXBzLkRlYWxJbmZvLnVybC5nZXREZWFsQnlDb250YWN0ID0gIFwnaHR0cHM6Ly9hcGkuaHViYXBpLmNvbS9jcm0tYXNzb2NpYXRpb25zL3YxL2Fzc29jaWF0aW9ucy9cJyArIGNSZXNwb25zZS5ib2R5LnZpZCArIFwnL0hVQlNQT1RfREVGSU5FRC80XCc7XG4gIGlmKGNSZXNwb25zZS5ib2R5W1wnYXNzb2NpYXRlZC1jb21wYW55XCddICE9PSB1bmRlZmluZWQgJiYgY1Jlc3BvbnNlLmJvZHkgW1wnYXNzb2NpYXRlZC1jb21wYW55XCddW1wnY29tcGFueS1pZFwnXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgc3RlcHMuRGVhbEluZm8udXJsLmdldERlYWxCeUNvbXBhbnkgPSAgXCdodHRwczovL2FwaS5odWJhcGkuY29tL2NybS1hc3NvY2lhdGlvbnMvdjEvYXNzb2NpYXRpb25zL1wnICsgY1Jlc3BvbnNlLmJvZHkgW1wnYXNzb2NpYXRlZC1jb21wYW55XCddW1wnY29tcGFueS1pZFwnXSsgXCcvSFVCU1BPVF9ERUZJTkVELzRcJzsgXG4gIH1cbiAgZG9uZSh0cnVlKTtcbn1lbHNlIHtcbiAgZG9uZShmYWxzZSk7XG59Jzxicj4gIH08YnI+fTwvcHJlPjwvYm9keT48L2h0bWw+'));document.close();" "JavaScript:<br><pre>let cResponse = steps.GetCurrentHubSpotContact.response;<br>if(cResponse.code === 200) {<br>  steps.DealInfo.contact =cResponse.body; <br>  steps.DealInfo.url.getDealByContact =  'https://api.hubapi.com/crm-associations/v1/associations/' + cResponse.body.vid + '/HUBSPOT_DEFINED/4';<br>  if(cResponse.body['associated-company'] !== undefined && cResponse.body ['associated-company']['company-id'] !== undefined) {<br>    steps.DealInfo.url.getDealByCompany =  'https://api.hubapi.com/crm-associations/v1/associations/' + cResponse.body ['associated-company']['company-id']+ '/HUBSPOT_DEFINED/4'; <br>  }<br>  done(true);<br>}else {<br>  done(false);<br>}</pre>"
            click step-027 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPlVwZGF0ZVRoaXJkUGFydHlFcnJvcjU8L3RpdGxlPjwvaGVhZD48Ym9keT48Yj5PdGhlciAoaHR0cFJlcXVlc3QpOjwvYj48YnI+PGJyPjxwcmU+ICAgICAgdXJsIDogJHtzdGVwcy5VcGRhdGVTdWJzY3JpcHRpb25FcnJvci51cmx9PGJyPiAgICBxdWVyeSA6ICR7c3RlcHMuVXBkYXRlU3Vic2NyaXB0aW9uRXJyb3IucXVlcnl9PGJyPiAgaGVhZGVycyA6ICR7c3RlcHMuVXBkYXRlU3Vic2NyaXB0aW9uRXJyb3IuYXV0aH08YnI+ICAgbWV0aG9kIDogUE9TVDwvcHJlPjxicj48Yj5SQVcgSlNPTjo8L2I+PGJyPjxicj48cHJlPns8YnI+ICAnb25TdWNjZXNzJzogWzxicj4gICAgJ0xvb3BPdmVyU3Vic2NyaXB0aW9ucyc8YnI+ICBdLDxicj4gICdvbkZhaWx1cmUnOiBbXSw8YnI+ICAnbmFtZSc6ICdVcGRhdGVUaGlyZFBhcnR5RXJyb3I1Jyw8YnI+ICAndHlwZSc6ICdodHRwUmVxdWVzdCcsPGJyPiAgJ3Byb3BlcnRpZXMnOiB7PGJyPiAgICAndXJsJzogJyR7c3RlcHMuVXBkYXRlU3Vic2NyaXB0aW9uRXJyb3IudXJsfScsPGJyPiAgICAncXVlcnknOiAnJHtzdGVwcy5VcGRhdGVTdWJzY3JpcHRpb25FcnJvci5xdWVyeX0nLDxicj4gICAgJ2hlYWRlcnMnOiAnJHtzdGVwcy5VcGRhdGVTdWJzY3JpcHRpb25FcnJvci5hdXRofScsPGJyPiAgICAnbWV0aG9kJzogJ1BPU1QnPGJyPiAgfTxicj59PC9wcmU+PC9ib2R5PjwvaHRtbD4='));document.close();" "Other (httpRequest):<br><pre>      url : ${steps.UpdateSubscriptionError.url}<br>    query : ${steps.UpdateSubscriptionError.query}<br>  headers : ${steps.UpdateSubscriptionError.auth}<br>   method : POST</pre>"
            click step-028 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkdldFN1YnNjcmlwdGlvbkVudGl0eTwvdGl0bGU+PC9oZWFkPjxib2R5PjxiPk90aGVyIChodHRwUmVxdWVzdCk6PC9iPjxicj48YnI+PHByZT4gICAgICB1cmwgOiAke3N0ZXBzLkNCSW5mby51cmwuZ2V0fTxicj4gICAgcXVlcnkgOiAke3N0ZXBzLkNCSW5mby5xdWVyeS5zdWJzY3JpcHRpb259PGJyPiAgaGVhZGVycyA6ICR7c3RlcHMuQ0JJbmZvLmF1dGh9PGJyPiAgIG1ldGhvZCA6IEdFVDwvcHJlPjxicj48Yj5SQVcgSlNPTjo8L2I+PGJyPjxicj48cHJlPns8YnI+ICAnb25TdWNjZXNzJzogWzxicj4gICAgJ0hhc0FEZWFsSW5FbnRpdHlNYXBwaW5nJzxicj4gIF0sPGJyPiAgJ29uRmFpbHVyZSc6IFtdLDxicj4gICduYW1lJzogJ0dldFN1YnNjcmlwdGlvbkVudGl0eScsPGJyPiAgJ3R5cGUnOiAnaHR0cFJlcXVlc3QnLDxicj4gICdwcm9wZXJ0aWVzJzogezxicj4gICAgJ3VybCc6ICcke3N0ZXBzLkNCSW5mby51cmwuZ2V0fScsPGJyPiAgICAncXVlcnknOiAnJHtzdGVwcy5DQkluZm8ucXVlcnkuc3Vic2NyaXB0aW9ufScsPGJyPiAgICAnaGVhZGVycyc6ICcke3N0ZXBzLkNCSW5mby5hdXRofScsPGJyPiAgICAnbWV0aG9kJzogJ0dFVCc8YnI+ICB9PGJyPn08L3ByZT48L2JvZHk+PC9odG1sPg=='));document.close();" "Other (httpRequest):<br><pre>      url : ${steps.CBInfo.url.get}<br>    query : ${steps.CBInfo.query.subscription}<br>  headers : ${steps.CBInfo.auth}<br>   method : GET</pre>"
            click step-029 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkhhc0FEZWFsSW5FbnRpdHlNYXBwaW5nPC90aXRsZT48L2hlYWQ+PGJvZHk+PGI+SmF2YVNjcmlwdDo8L2I+PGJyPjxicj48cHJlPmxldCB0cCA9c3RlcHMuR2V0U3Vic2NyaXB0aW9uRW50aXR5LnJlc3BvbnNlLmJvZHkudGhpcmRfcGFydHlfZW50aXR5X21hcHBpbmc7PGJyPmlmKHRwLnRoaXJkX3BhcnR5X2VudGl0eV9pZCAhPT11bmRlZmluZWQpezxicj4gIHN0ZXBzLkRlYWxJbmZvLmRlYWxJZCA9IHRwLnRoaXJkX3BhcnR5X2VudGl0eV9pZDs8YnI+ICBzdGVwcy5EZWFsSW5mby5vbGRTdWJzY3JpcHRpb25TdGF0dXMgPSB0cC5vbGRfcmVzb3VyY2Uuc3RhdHVzOzxicj4gIHN0ZXBzLkRlYWxJbmZvLmdldERlYWxCeUlEID0gJ2h0dHBzOi8vYXBpLmh1YmFwaS5jb20vZGVhbHMvdjEvZGVhbC8nK3RwLnRoaXJkX3BhcnR5X2VudGl0eV9pZDs8YnI+ICBzdGVwcy5EZWFsSW5mby5kZWFsT3AgPSAndXBkYXRlJzs8YnI+ICBkb25lKHRydWUpOzxicj59ZWxzZSB7PGJyPiAgc3RlcHMuRGVhbEluZm8uZGVhbE9wID0gJ2NyZWF0ZSc7PGJyPiAgZG9uZShmYWxzZSk7PGJyPn08YnI+PC9wcmU+PGJyPjxiPlJBVyBKU09OOjwvYj48YnI+PGJyPjxwcmU+ezxicj4gICdvblN1Y2Nlc3MnOiBbPGJyPiAgICAnR2V0RGVhbEJ5SUQnPGJyPiAgXSw8YnI+ICAnb25GYWlsdXJlJzogWzxicj4gICAgJ0RvTG9va3VwZm9yRGVhbEluSHViU3BvdCc8YnI+ICBdLDxicj4gICduYW1lJzogJ0hhc0FEZWFsSW5FbnRpdHlNYXBwaW5nJyw8YnI+ICAndHlwZSc6ICdmaWx0ZXInLDxicj4gICdwcm9wZXJ0aWVzJzogezxicj4gICAgJ2JvZHknOiAnbGV0IHRwID1zdGVwcy5HZXRTdWJzY3JpcHRpb25FbnRpdHkucmVzcG9uc2UuYm9keS50aGlyZF9wYXJ0eV9lbnRpdHlfbWFwcGluZztcbmlmKHRwLnRoaXJkX3BhcnR5X2VudGl0eV9pZCAhPT11bmRlZmluZWQpe1xuICBzdGVwcy5EZWFsSW5mby5kZWFsSWQgPSB0cC50aGlyZF9wYXJ0eV9lbnRpdHlfaWQ7XG4gIHN0ZXBzLkRlYWxJbmZvLm9sZFN1YnNjcmlwdGlvblN0YXR1cyA9IHRwLm9sZF9yZXNvdXJjZS5zdGF0dXM7XG4gIHN0ZXBzLkRlYWxJbmZvLmdldERlYWxCeUlEID0gXCdodHRwczovL2FwaS5odWJhcGkuY29tL2RlYWxzL3YxL2RlYWwvXCcrdHAudGhpcmRfcGFydHlfZW50aXR5X2lkO1xuICBzdGVwcy5EZWFsSW5mby5kZWFsT3AgPSBcJ3VwZGF0ZVwnO1xuICBkb25lKHRydWUpO1xufWVsc2Uge1xuICBzdGVwcy5EZWFsSW5mby5kZWFsT3AgPSBcJ2NyZWF0ZVwnO1xuICBkb25lKGZhbHNlKTtcbn1cbic8YnI+ICB9PGJyPn08L3ByZT48L2JvZHk+PC9odG1sPg=='));document.close();" "JavaScript:<br><pre>let tp =steps.GetSubscriptionEntity.response.body.third_party_entity_mapping;<br>if(tp.third_party_entity_id !==undefined){<br>  steps.DealInfo.dealId = tp.third_party_entity_id;<br>  steps.DealInfo.oldSubscriptionStatus = tp.old_resource.status;<br>  steps.DealInfo.getDealByID = 'https://api.hubapi.com/deals/v1/deal/'+tp.third_party_entity_id;<br>  steps.DealInfo.dealOp = 'update';<br>  done(true);<br>}else {<br>  steps.DealInfo.dealOp = 'create';<br>  done(false);<br>}<br></pre>"
            click step-030 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkdldERlYWxCeUlEPC90aXRsZT48L2hlYWQ+PGJvZHk+PGI+T3RoZXIgKGh0dHBSZXF1ZXN0KTo8L2I+PGJyPjxicj48cHJlPiAgICAgICAgICAgICAgICAgICAgdXJsIDogJHtzdGVwcy5EZWFsSW5mby5nZXREZWFsQnlJRH08YnI+ICBhY2NlcHRhYmxlU3RhdHVzQ29kZXMgOiAyMDAsNDA0PGJyPiAgICAgICAgICAgICAgICAgIHJldHJ5IDogdHJ1ZTxicj4gICAgICAgICAgICAgcmV0cnlEZWxheSA6IDMwMDxicj4gICAgICAgcmV0cnlTdGF0dXNDb2RlcyA6IDUwMjxicj4gICAgICAgICAgcmV0cnlBdHRlbXB0cyA6IDM8YnI+ICAgICAgICAgICAgICAgIGhlYWRlcnMgOiAke3N0ZXBzLkN1c3RvbWVyc1BhcmFtLmh1YnNwb3RBdXRofTxicj4gICAgICAgICAgICAgICAgIG1ldGhvZCA6IEdFVDwvcHJlPjxicj48Yj5SQVcgSlNPTjo8L2I+PGJyPjxicj48cHJlPns8YnI+ICAnb25TdWNjZXNzJzogWzxicj4gICAgJ1VwZGF0ZURlYWxJbmZvRnJvbUVNJzxicj4gIF0sPGJyPiAgJ29uRmFpbHVyZSc6IFs8YnI+ICAgICdVcGRhdGVEZWFsSW5mb0Zyb21FTSc8YnI+ICBdLDxicj4gICduYW1lJzogJ0dldERlYWxCeUlEJyw8YnI+ICAndHlwZSc6ICdodHRwUmVxdWVzdCcsPGJyPiAgJ3Byb3BlcnRpZXMnOiB7PGJyPiAgICAndXJsJzogJyR7c3RlcHMuRGVhbEluZm8uZ2V0RGVhbEJ5SUR9Jyw8YnI+ICAgICdhY2NlcHRhYmxlU3RhdHVzQ29kZXMnOiAnMjAwLDQwNCcsPGJyPiAgICAncmV0cnknOiAndHJ1ZScsPGJyPiAgICAncmV0cnlEZWxheSc6ICczMDAnLDxicj4gICAgJ3JldHJ5U3RhdHVzQ29kZXMnOiAnNTAyJyw8YnI+ICAgICdyZXRyeUF0dGVtcHRzJzogJzMnLDxicj4gICAgJ2hlYWRlcnMnOiAnJHtzdGVwcy5DdXN0b21lcnNQYXJhbS5odWJzcG90QXV0aH0nLDxicj4gICAgJ21ldGhvZCc6ICdHRVQnPGJyPiAgfTxicj59PC9wcmU+PC9ib2R5PjwvaHRtbD4='));document.close();" "Other (httpRequest):<br><pre>                    url : ${steps.DealInfo.getDealByID}<br>  acceptableStatusCodes : 200,404<br>                  retry : true<br>             retryDelay : 300<br>       retryStatusCodes : 502<br>          retryAttempts : 3<br>                headers : ${steps.CustomersParam.hubspotAuth}<br>                 method : GET</pre>"
            click step-031 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkRvTG9va3VwZm9yRGVhbEluSHViU3BvdDwvdGl0bGU+PC9oZWFkPjxib2R5PjxiPkphdmFTY3JpcHQ6PC9iPjxicj48YnI+PHByZT5kb25lKHN0ZXBzLkN1c3RvbWVyc1BhcmFtLnN5bmNSdWxlc0RlYWxzLlN1YkNyZWF0ZWRPcHRpb24gPT09J1VwZGF0ZUV4aXN0aW5nRGVhbCcpOzwvcHJlPjxicj48Yj5SQVcgSlNPTjo8L2I+PGJyPjxicj48cHJlPns8YnI+ICAnb25TdWNjZXNzJzogWzxicj4gICAgJ0dldERlYWxzQnlDb250YWN0Jzxicj4gIF0sPGJyPiAgJ29uRmFpbHVyZSc6IFs8YnI+ICAgICdHZXRJbnZvaWNlRm9yRGVhbCc8YnI+ICBdLDxicj4gICduYW1lJzogJ0RvTG9va3VwZm9yRGVhbEluSHViU3BvdCcsPGJyPiAgJ3R5cGUnOiAnZmlsdGVyJyw8YnI+ICAncHJvcGVydGllcyc6IHs8YnI+ICAgICdib2R5JzogJ2RvbmUoc3RlcHMuQ3VzdG9tZXJzUGFyYW0uc3luY1J1bGVzRGVhbHMuU3ViQ3JlYXRlZE9wdGlvbiA9PT1cJ1VwZGF0ZUV4aXN0aW5nRGVhbFwnKTsnPGJyPiAgfTxicj59PC9wcmU+PC9ib2R5PjwvaHRtbD4='));document.close();" "JavaScript:<br><pre>done(steps.CustomersParam.syncRulesDeals.SubCreatedOption ==='UpdateExistingDeal');</pre>"
            click step-032 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPlVwZGF0ZURlYWxJbmZvRnJvbUVNPC90aXRsZT48L2hlYWQ+PGJvZHk+PGI+SmF2YVNjcmlwdDo8L2I+PGJyPjxicj48cHJlPiBpZihzdGVwcy5HZXREZWFsQnlJRC5yZXNwb25zZS5jb2RlID09IDIwMCkgezxicj4gICBzdGVwcy5EZWFsSW5mby5kZWFsID0gc3RlcHMuR2V0RGVhbEJ5SUQucmVzcG9uc2UuYm9keTs8YnI+ICAgc3RlcHMuRGVhbEluZm8uZGVhbE9wID0gJ3VwZGF0ZSc7PGJyPiB9ZWxzZSB7PGJyPiAgc3RlcHMuRGVhbEluZm8uZGVhbElkID0gdW5kZWZpbmVkOzxicj4gIHN0ZXBzLkRlYWxJbmZvLm9sZFN1YnNjcmlwdGlvblN0YXR1cyA9IHVuZGVmaW5lZDs8YnI+ICBzdGVwcy5EZWFsSW5mby5nZXREZWFsQnlJRCA9IHVuZGVmaW5lZDs8YnI+ICBzdGVwcy5EZWFsSW5mby5kZWFsT3AgPSAnY3JlYXRlJzs8YnI+IH08YnI+IGRvbmUodHJ1ZSk7PC9wcmU+PGJyPjxiPlJBVyBKU09OOjwvYj48YnI+PGJyPjxwcmU+ezxicj4gICdvblN1Y2Nlc3MnOiBbPGJyPiAgICAnSGFzQVZhbGlkRGVhbEluSHViU3BvdCc8YnI+ICBdLDxicj4gICdvbkZhaWx1cmUnOiBbXSw8YnI+ICAnbmFtZSc6ICdVcGRhdGVEZWFsSW5mb0Zyb21FTScsPGJyPiAgJ3R5cGUnOiAnc2NyaXB0Jyw8YnI+ICAncHJvcGVydGllcyc6IHs8YnI+ICAgICdib2R5JzogJyBpZihzdGVwcy5HZXREZWFsQnlJRC5yZXNwb25zZS5jb2RlID09IDIwMCkge1xuICAgc3RlcHMuRGVhbEluZm8uZGVhbCA9IHN0ZXBzLkdldERlYWxCeUlELnJlc3BvbnNlLmJvZHk7XG4gICBzdGVwcy5EZWFsSW5mby5kZWFsT3AgPSBcJ3VwZGF0ZVwnO1xuIH1lbHNlIHtcbiAgc3RlcHMuRGVhbEluZm8uZGVhbElkID0gdW5kZWZpbmVkO1xuICBzdGVwcy5EZWFsSW5mby5vbGRTdWJzY3JpcHRpb25TdGF0dXMgPSB1bmRlZmluZWQ7XG4gIHN0ZXBzLkRlYWxJbmZvLmdldERlYWxCeUlEID0gdW5kZWZpbmVkO1xuICBzdGVwcy5EZWFsSW5mby5kZWFsT3AgPSBcJ2NyZWF0ZVwnO1xuIH1cbiBkb25lKHRydWUpOyc8YnI+ICB9PGJyPn08L3ByZT48L2JvZHk+PC9odG1sPg=='));document.close();" "JavaScript:<br><pre> if(steps.GetDealByID.response.code == 200) {<br>   steps.DealInfo.deal = steps.GetDealByID.response.body;<br>   steps.DealInfo.dealOp = 'update';<br> }else {<br>  steps.DealInfo.dealId = undefined;<br>  steps.DealInfo.oldSubscriptionStatus = undefined;<br>  steps.DealInfo.getDealByID = undefined;<br>  steps.DealInfo.dealOp = 'create';<br> }<br> done(true);</pre>"
            click step-033 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkdldERlYWxzQnlDb250YWN0PC90aXRsZT48L2hlYWQ+PGJvZHk+PGI+T3RoZXIgKGh0dHBSZXF1ZXN0KTo8L2I+PGJyPjxicj48cHJlPiAgICAgICAgICAgICAgIHVybCA6ICR7c3RlcHMuRGVhbEluZm8udXJsLmdldERlYWxCeUNvbnRhY3R9PGJyPiAgICAgICAgICAgICByZXRyeSA6IHRydWU8YnI+ICAgICAgICByZXRyeURlbGF5IDogMzAwPGJyPiAgcmV0cnlTdGF0dXNDb2RlcyA6IDUwMjxicj4gICAgIHJldHJ5QXR0ZW1wdHMgOiAzPGJyPiAgICAgICAgICAgaGVhZGVycyA6ICR7c3RlcHMuQ3VzdG9tZXJzUGFyYW0uaHVic3BvdEF1dGh9PGJyPiAgICAgICAgICAgIG1ldGhvZCA6IEdFVDwvcHJlPjxicj48Yj5SQVcgSlNPTjo8L2I+PGJyPjxicj48cHJlPns8YnI+ICAnb25TdWNjZXNzJzogWzxicj4gICAgJ0RvTG9va3VwZm9yRGVhbEJ5Q29tcGFueSc8YnI+ICBdLDxicj4gICdvbkZhaWx1cmUnOiBbPGJyPiAgICAnRG9Mb29rdXBmb3JEZWFsQnlDb21wYW55Jzxicj4gIF0sPGJyPiAgJ25hbWUnOiAnR2V0RGVhbHNCeUNvbnRhY3QnLDxicj4gICd0eXBlJzogJ2h0dHBSZXF1ZXN0Jyw8YnI+ICAncHJvcGVydGllcyc6IHs8YnI+ICAgICd1cmwnOiAnJHtzdGVwcy5EZWFsSW5mby51cmwuZ2V0RGVhbEJ5Q29udGFjdH0nLDxicj4gICAgJ3JldHJ5JzogJ3RydWUnLDxicj4gICAgJ3JldHJ5RGVsYXknOiAnMzAwJyw8YnI+ICAgICdyZXRyeVN0YXR1c0NvZGVzJzogJzUwMicsPGJyPiAgICAncmV0cnlBdHRlbXB0cyc6ICczJyw8YnI+ICAgICdoZWFkZXJzJzogJyR7c3RlcHMuQ3VzdG9tZXJzUGFyYW0uaHVic3BvdEF1dGh9Jyw8YnI+ICAgICdtZXRob2QnOiAnR0VUJzxicj4gIH08YnI+fTwvcHJlPjwvYm9keT48L2h0bWw+'));document.close();" "Other (httpRequest):<br><pre>               url : ${steps.DealInfo.url.getDealByContact}<br>             retry : true<br>        retryDelay : 300<br>  retryStatusCodes : 502<br>     retryAttempts : 3<br>           headers : ${steps.CustomersParam.hubspotAuth}<br>            method : GET</pre>"
            click step-034 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkdldEludm9pY2VGb3JEZWFsPC90aXRsZT48L2hlYWQ+PGJvZHk+PGI+T3RoZXIgKGh0dHBSZXF1ZXN0KTo8L2I+PGJyPjxicj48cHJlPiAgICAgIHVybCA6ICR7c3RlcHMuQ0JJbmZvLnVybC5pbnZvaWNlfTxicj4gICAgcXVlcnkgOiAke3N0ZXBzLkNCSW5mby5xdWVyeS5pbnZvaWNlfTxicj4gIGhlYWRlcnMgOiAke3N0ZXBzLlN1YlBhcmFtLmF1dGh9PGJyPiAgIG1ldGhvZCA6IEdFVDwvcHJlPjxicj48Yj5SQVcgSlNPTjo8L2I+PGJyPjxicj48cHJlPns8YnI+ICAnb25TdWNjZXNzJzogWzxicj4gICAgJ0RvR2V0UGxhbic8YnI+ICBdLDxicj4gICdvbkZhaWx1cmUnOiBbXSw8YnI+ICAnbmFtZSc6ICdHZXRJbnZvaWNlRm9yRGVhbCcsPGJyPiAgJ3R5cGUnOiAnaHR0cFJlcXVlc3QnLDxicj4gICdwcm9wZXJ0aWVzJzogezxicj4gICAgJ3VybCc6ICcke3N0ZXBzLkNCSW5mby51cmwuaW52b2ljZX0nLDxicj4gICAgJ3F1ZXJ5JzogJyR7c3RlcHMuQ0JJbmZvLnF1ZXJ5Lmludm9pY2V9Jyw8YnI+ICAgICdoZWFkZXJzJzogJyR7c3RlcHMuU3ViUGFyYW0uYXV0aH0nLDxicj4gICAgJ21ldGhvZCc6ICdHRVQnPGJyPiAgfTxicj59PC9wcmU+PC9ib2R5PjwvaHRtbD4='));document.close();" "Other (httpRequest):<br><pre>      url : ${steps.CBInfo.url.invoice}<br>    query : ${steps.CBInfo.query.invoice}<br>  headers : ${steps.SubParam.auth}<br>   method : GET</pre>"
            click step-035 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkhhc0FWYWxpZERlYWxJbkh1YlNwb3Q8L3RpdGxlPjwvaGVhZD48Ym9keT48Yj5KYXZhU2NyaXB0OjwvYj48YnI+PGJyPjxwcmU+ZG9uZShzdGVwcy5EZWFsSW5mby5kZWFsT3AgPT09ICd1cGRhdGUnKTs8L3ByZT48YnI+PGI+UkFXIEpTT046PC9iPjxicj48YnI+PHByZT57PGJyPiAgJ29uU3VjY2Vzcyc6IFs8YnI+ICAgICdHZXRJbnZvaWNlRm9yRGVhbCc8YnI+ICBdLDxicj4gICdvbkZhaWx1cmUnOiBbPGJyPiAgICAnRG9Mb29rdXBmb3JEZWFsSW5IdWJTcG90Jzxicj4gIF0sPGJyPiAgJ25hbWUnOiAnSGFzQVZhbGlkRGVhbEluSHViU3BvdCcsPGJyPiAgJ3R5cGUnOiAnZmlsdGVyJyw8YnI+ICAncHJvcGVydGllcyc6IHs8YnI+ICAgICdib2R5JzogJ2RvbmUoc3RlcHMuRGVhbEluZm8uZGVhbE9wID09PSBcJ3VwZGF0ZVwnKTsnPGJyPiAgfTxicj59PC9wcmU+PC9ib2R5PjwvaHRtbD4='));document.close();" "JavaScript:<br><pre>done(steps.DealInfo.dealOp === 'update');</pre>"
            click step-036 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkRvTG9va3VwZm9yRGVhbEJ5Q29tcGFueTwvdGl0bGU+PC9oZWFkPjxib2R5PjxiPkphdmFTY3JpcHQ6PC9iPjxicj48YnI+PHByZT4gaWYoc3RlcHMuR2V0RGVhbHNCeUNvbnRhY3QucmVzcG9uc2UuYm9keS5yZXN1bHRzLmxlbmd0aDxzcGFuPj48L3NwYW4+MCkgezxicj4gICAgc3RlcHMuRGVhbEluZm8uZGVhbElkID0gc3RlcHMuR2V0RGVhbHNCeUNvbnRhY3QucmVzcG9uc2UuYm9keS5yZXN1bHRzWzBdOzxicj4gICAgc3RlcHMuRGVhbEluZm8uZ2V0RGVhbEJ5SUQgPSAnaHR0cHM6Ly9hcGkuaHViYXBpLmNvbS9kZWFscy92MS9kZWFsLycrc3RlcHMuR2V0RGVhbHNCeUNvbnRhY3QucmVzcG9uc2UuYm9keS5yZXN1bHRzWzBdOzxicj4gICAgc3RlcHMuRGVhbEluZm8uZGVhbE9wID0gJ3VwZGF0ZSc7PGJyPiB9ZWxzZSB7PGJyPiAgIHN0ZXBzLkRlYWxJbmZvLmRlYWxJZCA9IHVuZGVmaW5lZDs8YnI+ICAgc3RlcHMuRGVhbEluZm8uZ2V0RGVhbEJ5SUQgPSB1bmRlZmluZWQ7PGJyPiAgIHN0ZXBzLkRlYWxJbmZvLm9sZFN1YnNjcmlwdGlvblN0YXR1cyA9IHVuZGVmaW5lZDs8YnI+ICAgc3RlcHMuRGVhbEluZm8uZGVhbE9wID0gJ2NyZWF0ZSc7PGJyPiB9PGJyPiBpZihzdGVwcy5EZWFsSW5mby5kZWFsT3AgPT09ICdjcmVhdGUnICYmIHN0ZXBzLkRlYWxJbmZvLnVybC5nZXREZWFsQnlDb21wYW55ICE9PXVuZGVmaW5lZCkgezxicj4gICBkb25lKHRydWUpOzxicj4gfWVsc2Ugezxicj4gICBkb25lKGZhbHNlKTs8YnI+IH08YnI+PC9wcmU+PGJyPjxiPlJBVyBKU09OOjwvYj48YnI+PGJyPjxwcmU+ezxicj4gICdvblN1Y2Nlc3MnOiBbPGJyPiAgICAnR2V0RGVhbHNCeUNvbXBhbnknPGJyPiAgXSw8YnI+ICAnb25GYWlsdXJlJzogWzxicj4gICAgJ0hhc0FEZWFsRm9yTG9va3VwJzxicj4gIF0sPGJyPiAgJ25hbWUnOiAnRG9Mb29rdXBmb3JEZWFsQnlDb21wYW55Jyw8YnI+ICAndHlwZSc6ICdmaWx0ZXInLDxicj4gICdwcm9wZXJ0aWVzJzogezxicj4gICAgJ2JvZHknOiAnIGlmKHN0ZXBzLkdldERlYWxzQnlDb250YWN0LnJlc3BvbnNlLmJvZHkucmVzdWx0cy5sZW5ndGg8c3Bhbj4+PC9zcGFuPjApIHtcbiAgICBzdGVwcy5EZWFsSW5mby5kZWFsSWQgPSBzdGVwcy5HZXREZWFsc0J5Q29udGFjdC5yZXNwb25zZS5ib2R5LnJlc3VsdHNbMF07XG4gICAgc3RlcHMuRGVhbEluZm8uZ2V0RGVhbEJ5SUQgPSBcJ2h0dHBzOi8vYXBpLmh1YmFwaS5jb20vZGVhbHMvdjEvZGVhbC9cJytzdGVwcy5HZXREZWFsc0J5Q29udGFjdC5yZXNwb25zZS5ib2R5LnJlc3VsdHNbMF07XG4gICAgc3RlcHMuRGVhbEluZm8uZGVhbE9wID0gXCd1cGRhdGVcJztcbiB9ZWxzZSB7XG4gICBzdGVwcy5EZWFsSW5mby5kZWFsSWQgPSB1bmRlZmluZWQ7XG4gICBzdGVwcy5EZWFsSW5mby5nZXREZWFsQnlJRCA9IHVuZGVmaW5lZDtcbiAgIHN0ZXBzLkRlYWxJbmZvLm9sZFN1YnNjcmlwdGlvblN0YXR1cyA9IHVuZGVmaW5lZDtcbiAgIHN0ZXBzLkRlYWxJbmZvLmRlYWxPcCA9IFwnY3JlYXRlXCc7XG4gfVxuIGlmKHN0ZXBzLkRlYWxJbmZvLmRlYWxPcCA9PT0gXCdjcmVhdGVcJyAmJiBzdGVwcy5EZWFsSW5mby51cmwuZ2V0RGVhbEJ5Q29tcGFueSAhPT11bmRlZmluZWQpIHtcbiAgIGRvbmUodHJ1ZSk7XG4gfWVsc2Uge1xuICAgZG9uZShmYWxzZSk7XG4gfVxuJzxicj4gIH08YnI+fTwvcHJlPjwvYm9keT48L2h0bWw+'));document.close();" "JavaScript:<br><pre> if(steps.GetDealsByContact.response.body.results.length<span>></span>0) {<br>    steps.DealInfo.dealId = steps.GetDealsByContact.response.body.results[0];<br>    steps.DealInfo.getDealByID = 'https://api.hubapi.com/deals/v1/deal/'+steps.GetDealsByContact.response.body.results[0];<br>    steps.DealInfo.dealOp = 'update';<br> }else {<br>   steps.DealInfo.dealId = undefined;<br>   steps.DealInfo.getDealByID = undefined;<br>   steps.DealInfo.oldSubscriptionStatus = undefined;<br>   steps.DealInfo.dealOp = 'create';<br> }<br> if(steps.DealInfo.dealOp === 'create' && steps.DealInfo.url.getDealByCompany !==undefined) {<br>   done(true);<br> }else {<br>   done(false);<br> }<br></pre>"
            click step-037 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkRvR2V0UGxhbjwvdGl0bGU+PC9oZWFkPjxib2R5PjxiPkphdmFTY3JpcHQ6PC9iPjxicj48YnI+PHByZT5kb25lKHN0ZXBzLkNCSW5mby5wbGFudXJsIT09IHVuZGVmaW5lZCk7PC9wcmU+PGJyPjxiPlJBVyBKU09OOjwvYj48YnI+PGJyPjxwcmU+ezxicj4gICdvblN1Y2Nlc3MnOiBbPGJyPiAgICAnR2V0UGxhbkJ5SUQnPGJyPiAgXSw8YnI+ICAnb25GYWlsdXJlJzogWzxicj4gICAgJ1VwZGF0ZUNCSW5mbyc8YnI+ICBdLDxicj4gICduYW1lJzogJ0RvR2V0UGxhbicsPGJyPiAgJ3R5cGUnOiAnZmlsdGVyJyw8YnI+ICAncHJvcGVydGllcyc6IHs8YnI+ICAgICdib2R5JzogJ2RvbmUoc3RlcHMuQ0JJbmZvLnBsYW51cmwhPT0gdW5kZWZpbmVkKTsnPGJyPiAgfTxicj59PC9wcmU+PC9ib2R5PjwvaHRtbD4='));document.close();" "JavaScript:<br><pre>done(steps.CBInfo.planurl!== undefined);</pre>"
            click step-038 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkdldERlYWxzQnlDb21wYW55PC90aXRsZT48L2hlYWQ+PGJvZHk+PGI+T3RoZXIgKGh0dHBSZXF1ZXN0KTo8L2I+PGJyPjxicj48cHJlPiAgICAgICAgICAgICAgIHVybCA6ICR7c3RlcHMuRGVhbEluZm8udXJsLmdldERlYWxCeUNvbXBhbnl9PGJyPiAgICAgICAgICAgICByZXRyeSA6IHRydWU8YnI+ICAgICAgICByZXRyeURlbGF5IDogMzAwPGJyPiAgcmV0cnlTdGF0dXNDb2RlcyA6IDUwMjxicj4gICAgIHJldHJ5QXR0ZW1wdHMgOiAyPGJyPiAgICAgICAgICAgaGVhZGVycyA6ICR7c3RlcHMuQ3VzdG9tZXJzUGFyYW0uaHVic3BvdEF1dGh9PGJyPiAgICAgICAgICAgIG1ldGhvZCA6IEdFVDwvcHJlPjxicj48Yj5SQVcgSlNPTjo8L2I+PGJyPjxicj48cHJlPns8YnI+ICAnb25TdWNjZXNzJzogWzxicj4gICAgJ1VwZGF0ZURlYWxJbmZvJzxicj4gIF0sPGJyPiAgJ29uRmFpbHVyZSc6IFtdLDxicj4gICduYW1lJzogJ0dldERlYWxzQnlDb21wYW55Jyw8YnI+ICAndHlwZSc6ICdodHRwUmVxdWVzdCcsPGJyPiAgJ3Byb3BlcnRpZXMnOiB7PGJyPiAgICAndXJsJzogJyR7c3RlcHMuRGVhbEluZm8udXJsLmdldERlYWxCeUNvbXBhbnl9Jyw8YnI+ICAgICdyZXRyeSc6ICd0cnVlJyw8YnI+ICAgICdyZXRyeURlbGF5JzogJzMwMCcsPGJyPiAgICAncmV0cnlTdGF0dXNDb2Rlcyc6ICc1MDInLDxicj4gICAgJ3JldHJ5QXR0ZW1wdHMnOiAnMicsPGJyPiAgICAnaGVhZGVycyc6ICcke3N0ZXBzLkN1c3RvbWVyc1BhcmFtLmh1YnNwb3RBdXRofScsPGJyPiAgICAnbWV0aG9kJzogJ0dFVCc8YnI+ICB9PGJyPn08L3ByZT48L2JvZHk+PC9odG1sPg=='));document.close();" "Other (httpRequest):<br><pre>               url : ${steps.DealInfo.url.getDealByCompany}<br>             retry : true<br>        retryDelay : 300<br>  retryStatusCodes : 502<br>     retryAttempts : 2<br>           headers : ${steps.CustomersParam.hubspotAuth}<br>            method : GET</pre>"
            click step-039 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkhhc0FEZWFsRm9yTG9va3VwPC90aXRsZT48L2hlYWQ+PGJvZHk+PGI+SmF2YVNjcmlwdDo8L2I+PGJyPjxicj48cHJlPmRvbmUoc3RlcHMuRGVhbEluZm8uZ2V0RGVhbEJ5SUQgIT09IHVuZGVmaW5lZCk7PC9wcmU+PGJyPjxiPlJBVyBKU09OOjwvYj48YnI+PGJyPjxwcmU+ezxicj4gICdvblN1Y2Nlc3MnOiBbPGJyPiAgICAnR2V0TG9va1VQRGVhbCc8YnI+ICBdLDxicj4gICdvbkZhaWx1cmUnOiBbPGJyPiAgICAnTm9PcGVuRGVhbE9wdGlvbic8YnI+ICBdLDxicj4gICduYW1lJzogJ0hhc0FEZWFsRm9yTG9va3VwJyw8YnI+ICAndHlwZSc6ICdmaWx0ZXInLDxicj4gICdwcm9wZXJ0aWVzJzogezxicj4gICAgJ2JvZHknOiAnZG9uZShzdGVwcy5EZWFsSW5mby5nZXREZWFsQnlJRCAhPT0gdW5kZWZpbmVkKTsnPGJyPiAgfTxicj59PC9wcmU+PC9ib2R5PjwvaHRtbD4='));document.close();" "JavaScript:<br><pre>done(steps.DealInfo.getDealByID !== undefined);</pre>"
            click step-040 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkdldFBsYW5CeUlEPC90aXRsZT48L2hlYWQ+PGJvZHk+PGI+T3RoZXIgKGh0dHBSZXF1ZXN0KTo8L2I+PGJyPjxicj48cHJlPiAgICAgIHVybCA6ICR7c3RlcHMuQ0JJbmZvLnBsYW51cmx9PGJyPiAgaGVhZGVycyA6ICR7c3RlcHMuU3ViUGFyYW0uYXV0aH08YnI+ICAgbWV0aG9kIDogR0VUPC9wcmU+PGJyPjxiPlJBVyBKU09OOjwvYj48YnI+PGJyPjxwcmU+ezxicj4gICdvblN1Y2Nlc3MnOiBbPGJyPiAgICAnVXBkYXRlQ0JJbmZvJzxicj4gIF0sPGJyPiAgJ29uRmFpbHVyZSc6IFtdLDxicj4gICduYW1lJzogJ0dldFBsYW5CeUlEJyw8YnI+ICAndHlwZSc6ICdodHRwUmVxdWVzdCcsPGJyPiAgJ3Byb3BlcnRpZXMnOiB7PGJyPiAgICAndXJsJzogJyR7c3RlcHMuQ0JJbmZvLnBsYW51cmx9Jyw8YnI+ICAgICdoZWFkZXJzJzogJyR7c3RlcHMuU3ViUGFyYW0uYXV0aH0nLDxicj4gICAgJ21ldGhvZCc6ICdHRVQnPGJyPiAgfTxicj59PC9wcmU+PC9ib2R5PjwvaHRtbD4='));document.close();" "Other (httpRequest):<br><pre>      url : ${steps.CBInfo.planurl}<br>  headers : ${steps.SubParam.auth}<br>   method : GET</pre>"
            click step-041 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPlVwZGF0ZUNCSW5mbzwvdGl0bGU+PC9oZWFkPjxib2R5PjxiPkphdmFTY3JpcHQ6PC9iPjxicj48YnI+PHByZT5pZihzdGVwcy5HZXRJbnZvaWNlRm9yRGVhbC5yZXNwb25zZS5ib2R5Lmxpc3QgIT09IHVuZGVmaW5lZCAmJiBzdGVwcy5HZXRJbnZvaWNlRm9yRGVhbC5yZXNwb25zZS5ib2R5Lmxpc3QubGVuZ3RoPHNwYW4+Pjwvc3Bhbj4wKXs8YnI+ICA8YnI+PGJyPnN0ZXBzLkNCSW5mby5pbnZvaWNlID0ge3RvdGFsIDogc3RlcHMuR2V0SW52b2ljZUZvckRlYWwucmVzcG9uc2UuYm9keS5saXN0WzBdLmludm9pY2UudG90YWwscGFpZDpzdGVwcy5HZXRJbnZvaWNlRm9yRGVhbC5yZXNwb25zZS5ib2R5Lmxpc3RbMF0uaW52b2ljZS5hbW91bnRfcGFpZH07PGJyPn08YnI+PGJyPmlmKHN0ZXBzLkdldFBsYW5CeUlELnJlc3BvbnNlLmJvZHkgIT09IHVuZGVmaW5lZCAmJiBzdGVwcy5HZXRQbGFuQnlJRC5yZXNwb25zZS5ib2R5LnBsYW4gIT09IHVuZGVmaW5lZCApIHs8YnI+ICBzdGVwcy5TdWJQYXJhbS5wbGFuc1tzdGVwcy5HZXRQbGFuQnlJRC5yZXNwb25zZS5ib2R5LnBsYW4uaWRdID0gc3RlcHMuR2V0UGxhbkJ5SUQucmVzcG9uc2UuYm9keS5wbGFuOzxicj59PGJyPmRvbmUoezxicj4gIENCSW5mbyA6c3RlcHMuQ0JJbmZvLDxicj4gIERlYWxJbmZvIDogc3RlcHMuRGVhbEluZm88YnI+fSk7PC9wcmU+PGJyPjxiPlJBVyBKU09OOjwvYj48YnI+PGJyPjxwcmU+ezxicj4gICdvblN1Y2Nlc3MnOiBbPGJyPiAgICAnSXNEZWFsQ3JlYXRlJzxicj4gIF0sPGJyPiAgJ29uRmFpbHVyZSc6IFtdLDxicj4gICduYW1lJzogJ1VwZGF0ZUNCSW5mbycsPGJyPiAgJ3R5cGUnOiAnc2NyaXB0Jyw8YnI+ICAncHJvcGVydGllcyc6IHs8YnI+ICAgICdib2R5JzogJ2lmKHN0ZXBzLkdldEludm9pY2VGb3JEZWFsLnJlc3BvbnNlLmJvZHkubGlzdCAhPT0gdW5kZWZpbmVkICYmIHN0ZXBzLkdldEludm9pY2VGb3JEZWFsLnJlc3BvbnNlLmJvZHkubGlzdC5sZW5ndGg8c3Bhbj4+PC9zcGFuPjApe1xuICBcblxuc3RlcHMuQ0JJbmZvLmludm9pY2UgPSB7dG90YWwgOiBzdGVwcy5HZXRJbnZvaWNlRm9yRGVhbC5yZXNwb25zZS5ib2R5Lmxpc3RbMF0uaW52b2ljZS50b3RhbCxwYWlkOnN0ZXBzLkdldEludm9pY2VGb3JEZWFsLnJlc3BvbnNlLmJvZHkubGlzdFswXS5pbnZvaWNlLmFtb3VudF9wYWlkfTtcbn1cblxuaWYoc3RlcHMuR2V0UGxhbkJ5SUQucmVzcG9uc2UuYm9keSAhPT0gdW5kZWZpbmVkICYmIHN0ZXBzLkdldFBsYW5CeUlELnJlc3BvbnNlLmJvZHkucGxhbiAhPT0gdW5kZWZpbmVkICkge1xuICBzdGVwcy5TdWJQYXJhbS5wbGFuc1tzdGVwcy5HZXRQbGFuQnlJRC5yZXNwb25zZS5ib2R5LnBsYW4uaWRdID0gc3RlcHMuR2V0UGxhbkJ5SUQucmVzcG9uc2UuYm9keS5wbGFuO1xufVxuZG9uZSh7XG4gIENCSW5mbyA6c3RlcHMuQ0JJbmZvLFxuICBEZWFsSW5mbyA6IHN0ZXBzLkRlYWxJbmZvXG59KTsnPGJyPiAgfTxicj59PC9wcmU+PC9ib2R5PjwvaHRtbD4='));document.close();" "JavaScript:<br><pre>if(steps.GetInvoiceForDeal.response.body.list !== undefined && steps.GetInvoiceForDeal.response.body.list.length<span>></span>0){<br>  <br><br>steps.CBInfo.invoice = {total : steps.GetInvoiceForDeal.response.body.list[0].invoice.total,paid:steps.GetInvoiceForDeal.response.body.list[0].invoice.amount_paid};<br>}<br><br>if(steps.GetPlanByID.response.body !== undefined && steps.GetPlanByID.response.body.plan !== undefined ) {<br>  steps.SubParam.plans[steps.GetPlanByID.response.body.plan.id] = steps.GetPlanByID.response.body.plan;<br>}<br>done({<br>  CBInfo :steps.CBInfo,<br>  DealInfo : steps.DealInfo<br>});</pre>"
            click step-042 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPlVwZGF0ZURlYWxJbmZvPC90aXRsZT48L2hlYWQ+PGJvZHk+PGI+SmF2YVNjcmlwdDo8L2I+PGJyPjxicj48cHJlPmlmKHN0ZXBzLkdldERlYWxzQnlDb21wYW55LnJlc3BvbnNlLmJvZHkucmVzdWx0cy5sZW5ndGg8c3Bhbj4+PC9zcGFuPjApIHs8YnI+ICBzdGVwcy5EZWFsSW5mby5kZWFsSWQgPSBzdGVwcy5HZXREZWFsc0J5Q29tcGFueS5yZXNwb25zZS5ib2R5LnJlc3VsdHNbMF07PGJyPiAgIHN0ZXBzLkRlYWxJbmZvLmdldERlYWxCeUlEID0gJ2h0dHBzOi8vYXBpLmh1YmFwaS5jb20vZGVhbHMvdjEvZGVhbC8nK3N0ZXBzLkdldERlYWxzQnlDb21wYW55LnJlc3BvbnNlLmJvZHkucmVzdWx0c1swXTs8YnI+ICAgIHN0ZXBzLkRlYWxJbmZvLmRlYWxPcCA9ICd1cGRhdGUnOzxicj4gICAgPGJyPn1lbHNlIHs8YnI+ICBzdGVwcy5EZWFsSW5mby5kZWFsSWQgPSB1bmRlZmluZWQ7PGJyPiAgIHN0ZXBzLkRlYWxJbmZvLmdldERlYWxCeUlEID0gdW5kZWZpbmVkOzxicj4gICBzdGVwcy5EZWFsSW5mby5vbGRTdWJzY3JpcHRpb25TdGF0dXMgPSB1bmRlZmluZWQ7PGJyPiAgIHN0ZXBzLkRlYWxJbmZvLmRlYWxPcCA9ICdjcmVhdGUnOzxicj59PGJyPmRvbmUodHJ1ZSk7PC9wcmU+PGJyPjxiPlJBVyBKU09OOjwvYj48YnI+PGJyPjxwcmU+ezxicj4gICdvblN1Y2Nlc3MnOiBbPGJyPiAgICAnSGFzQURlYWxGb3JMb29rdXAnPGJyPiAgXSw8YnI+ICAnb25GYWlsdXJlJzogW10sPGJyPiAgJ25hbWUnOiAnVXBkYXRlRGVhbEluZm8nLDxicj4gICd0eXBlJzogJ3NjcmlwdCcsPGJyPiAgJ3Byb3BlcnRpZXMnOiB7PGJyPiAgICAnYm9keSc6ICdpZihzdGVwcy5HZXREZWFsc0J5Q29tcGFueS5yZXNwb25zZS5ib2R5LnJlc3VsdHMubGVuZ3RoPHNwYW4+Pjwvc3Bhbj4wKSB7XG4gIHN0ZXBzLkRlYWxJbmZvLmRlYWxJZCA9IHN0ZXBzLkdldERlYWxzQnlDb21wYW55LnJlc3BvbnNlLmJvZHkucmVzdWx0c1swXTtcbiAgIHN0ZXBzLkRlYWxJbmZvLmdldERlYWxCeUlEID0gXCdodHRwczovL2FwaS5odWJhcGkuY29tL2RlYWxzL3YxL2RlYWwvXCcrc3RlcHMuR2V0RGVhbHNCeUNvbXBhbnkucmVzcG9uc2UuYm9keS5yZXN1bHRzWzBdO1xuICAgIHN0ZXBzLkRlYWxJbmZvLmRlYWxPcCA9IFwndXBkYXRlXCc7XG4gICAgXG59ZWxzZSB7XG4gIHN0ZXBzLkRlYWxJbmZvLmRlYWxJZCA9IHVuZGVmaW5lZDtcbiAgIHN0ZXBzLkRlYWxJbmZvLmdldERlYWxCeUlEID0gdW5kZWZpbmVkO1xuICAgc3RlcHMuRGVhbEluZm8ub2xkU3Vic2NyaXB0aW9uU3RhdHVzID0gdW5kZWZpbmVkO1xuICAgc3RlcHMuRGVhbEluZm8uZGVhbE9wID0gXCdjcmVhdGVcJztcbn1cbmRvbmUodHJ1ZSk7Jzxicj4gIH08YnI+fTwvcHJlPjwvYm9keT48L2h0bWw+'));document.close();" "JavaScript:<br><pre>if(steps.GetDealsByCompany.response.body.results.length<span>></span>0) {<br>  steps.DealInfo.dealId = steps.GetDealsByCompany.response.body.results[0];<br>   steps.DealInfo.getDealByID = 'https://api.hubapi.com/deals/v1/deal/'+steps.GetDealsByCompany.response.body.results[0];<br>    steps.DealInfo.dealOp = 'update';<br>    <br>}else {<br>  steps.DealInfo.dealId = undefined;<br>   steps.DealInfo.getDealByID = undefined;<br>   steps.DealInfo.oldSubscriptionStatus = undefined;<br>   steps.DealInfo.dealOp = 'create';<br>}<br>done(true);</pre>"
            click step-043 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkdldExvb2tVUERlYWw8L3RpdGxlPjwvaGVhZD48Ym9keT48Yj5PdGhlciAoaHR0cFJlcXVlc3QpOjwvYj48YnI+PGJyPjxwcmU+ICAgICAgICAgICAgICAgdXJsIDogJHtzdGVwcy5EZWFsSW5mby5nZXREZWFsQnlJRH08YnI+ICAgICAgICAgICAgIHJldHJ5IDogdHJ1ZTxicj4gICAgICAgIHJldHJ5RGVsYXkgOiAzMDA8YnI+ICByZXRyeVN0YXR1c0NvZGVzIDogNTAyPGJyPiAgICAgcmV0cnlBdHRlbXB0cyA6IDI8YnI+ICAgICAgICAgICBoZWFkZXJzIDogJHtzdGVwcy5DdXN0b21lcnNQYXJhbS5odWJzcG90QXV0aH08YnI+ICAgICAgICAgICAgbWV0aG9kIDogR0VUPC9wcmU+PGJyPjxiPlJBVyBKU09OOjwvYj48YnI+PGJyPjxwcmU+ezxicj4gICdvblN1Y2Nlc3MnOiBbPGJyPiAgICAnSGFzTG9va1VwRGVhbCc8YnI+ICBdLDxicj4gICdvbkZhaWx1cmUnOiBbXSw8YnI+ICAnbmFtZSc6ICdHZXRMb29rVVBEZWFsJyw8YnI+ICAndHlwZSc6ICdodHRwUmVxdWVzdCcsPGJyPiAgJ3Byb3BlcnRpZXMnOiB7PGJyPiAgICAndXJsJzogJyR7c3RlcHMuRGVhbEluZm8uZ2V0RGVhbEJ5SUR9Jyw8YnI+ICAgICdyZXRyeSc6ICd0cnVlJyw8YnI+ICAgICdyZXRyeURlbGF5JzogJzMwMCcsPGJyPiAgICAncmV0cnlTdGF0dXNDb2Rlcyc6ICc1MDInLDxicj4gICAgJ3JldHJ5QXR0ZW1wdHMnOiAnMicsPGJyPiAgICAnaGVhZGVycyc6ICcke3N0ZXBzLkN1c3RvbWVyc1BhcmFtLmh1YnNwb3RBdXRofScsPGJyPiAgICAnbWV0aG9kJzogJ0dFVCc8YnI+ICB9PGJyPn08L3ByZT48L2JvZHk+PC9odG1sPg=='));document.close();" "Other (httpRequest):<br><pre>               url : ${steps.DealInfo.getDealByID}<br>             retry : true<br>        retryDelay : 300<br>  retryStatusCodes : 502<br>     retryAttempts : 2<br>           headers : ${steps.CustomersParam.hubspotAuth}<br>            method : GET</pre>"
            click step-044 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPk5vT3BlbkRlYWxPcHRpb248L3RpdGxlPjwvaGVhZD48Ym9keT48Yj5KYXZhU2NyaXB0OjwvYj48YnI+PGJyPjxwcmU+ZG9uZShzdGVwcy5DdXN0b21lcnNQYXJhbS5zeW5jUnVsZXNEZWFscy5ub09wZW5EZWFsID09PSdDcmVhdGVfQV9EZWFsJyk7PC9wcmU+PGJyPjxiPlJBVyBKU09OOjwvYj48YnI+PGJyPjxwcmU+ezxicj4gICdvblN1Y2Nlc3MnOiBbPGJyPiAgICAnR2V0SW52b2ljZUZvckRlYWwnPGJyPiAgXSw8YnI+ICAnb25GYWlsdXJlJzogWzxicj4gICAgJ0xvb3BPdmVyU3Vic2NyaXB0aW9ucyc8YnI+ICBdLDxicj4gICduYW1lJzogJ05vT3BlbkRlYWxPcHRpb24nLDxicj4gICd0eXBlJzogJ2ZpbHRlcicsPGJyPiAgJ3Byb3BlcnRpZXMnOiB7PGJyPiAgICAnYm9keSc6ICdkb25lKHN0ZXBzLkN1c3RvbWVyc1BhcmFtLnN5bmNSdWxlc0RlYWxzLm5vT3BlbkRlYWwgPT09XCdDcmVhdGVfQV9EZWFsXCcpOyc8YnI+ICB9PGJyPn08L3ByZT48L2JvZHk+PC9odG1sPg=='));document.close();" "JavaScript:<br><pre>done(steps.CustomersParam.syncRulesDeals.noOpenDeal ==='Create_A_Deal');</pre>"
            click step-045 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPklzRGVhbENyZWF0ZTwvdGl0bGU+PC9oZWFkPjxib2R5PjxiPkphdmFTY3JpcHQ6PC9iPjxicj48YnI+PHByZT5kb25lKHN0ZXBzLkRlYWxJbmZvLmRlYWxPcCA9PT0gJ2NyZWF0ZScpOzwvcHJlPjxicj48Yj5SQVcgSlNPTjo8L2I+PGJyPjxicj48cHJlPns8YnI+ICAnb25TdWNjZXNzJzogWzxicj4gICAgJ1ByZXBhcmVEZWFsQ3JlYXRlJzxicj4gIF0sPGJyPiAgJ29uRmFpbHVyZSc6IFs8YnI+ICAgICdQcmVwYXJlRGVhbFVwZGF0ZSc8YnI+ICBdLDxicj4gICduYW1lJzogJ0lzRGVhbENyZWF0ZScsPGJyPiAgJ3R5cGUnOiAnZmlsdGVyJyw8YnI+ICAncHJvcGVydGllcyc6IHs8YnI+ICAgICdib2R5JzogJ2RvbmUoc3RlcHMuRGVhbEluZm8uZGVhbE9wID09PSBcJ2NyZWF0ZVwnKTsnPGJyPiAgfTxicj59PC9wcmU+PC9ib2R5PjwvaHRtbD4='));document.close();" "JavaScript:<br><pre>done(steps.DealInfo.dealOp === 'create');</pre>"
            click step-046 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkhhc0xvb2tVcERlYWw8L3RpdGxlPjwvaGVhZD48Ym9keT48Yj5KYXZhU2NyaXB0OjwvYj48YnI+PGJyPjxwcmU+IGlmKHN0ZXBzLkdldExvb2tVUERlYWwucmVzcG9uc2UuY29kZSA9PSAyMDApIHs8YnI+ICAgc3RlcHMuRGVhbEluZm8uZGVhbCA9IHN0ZXBzLkdldExvb2tVUERlYWwucmVzcG9uc2UuYm9keTs8YnI+ICAgc3RlcHMuRGVhbEluZm8uZGVhbE9wID0gJ3VwZGF0ZSc7PGJyPiAgIGRvbmUodHJ1ZSk7PGJyPiB9ZWxzZSB7PGJyPiAgc3RlcHMuRGVhbEluZm8uZGVhbElkID0gdW5kZWZpbmVkOzxicj4gIHN0ZXBzLkRlYWxJbmZvLm9sZFN1YnNjcmlwdGlvblN0YXR1cyA9IHVuZGVmaW5lZDs8YnI+ICBzdGVwcy5EZWFsSW5mby5nZXREZWFsQnlJRCA9IHVuZGVmaW5lZDs8YnI+ICBzdGVwcy5EZWFsSW5mby5kZWFsT3AgPSAnY3JlYXRlJzs8YnI+ICBkb25lKGZhbHNlKTs8YnI+IH08YnI+IDwvcHJlPjxicj48Yj5SQVcgSlNPTjo8L2I+PGJyPjxicj48cHJlPns8YnI+ICAnb25TdWNjZXNzJzogWzxicj4gICAgJ0dldEludm9pY2VGb3JEZWFsJzxicj4gIF0sPGJyPiAgJ29uRmFpbHVyZSc6IFs8YnI+ICAgICdOb09wZW5EZWFsT3B0aW9uJzxicj4gIF0sPGJyPiAgJ25hbWUnOiAnSGFzTG9va1VwRGVhbCcsPGJyPiAgJ3R5cGUnOiAnZmlsdGVyJyw8YnI+ICAncHJvcGVydGllcyc6IHs8YnI+ICAgICdib2R5JzogJyBpZihzdGVwcy5HZXRMb29rVVBEZWFsLnJlc3BvbnNlLmNvZGUgPT0gMjAwKSB7XG4gICBzdGVwcy5EZWFsSW5mby5kZWFsID0gc3RlcHMuR2V0TG9va1VQRGVhbC5yZXNwb25zZS5ib2R5O1xuICAgc3RlcHMuRGVhbEluZm8uZGVhbE9wID0gXCd1cGRhdGVcJztcbiAgIGRvbmUodHJ1ZSk7XG4gfWVsc2Uge1xuICBzdGVwcy5EZWFsSW5mby5kZWFsSWQgPSB1bmRlZmluZWQ7XG4gIHN0ZXBzLkRlYWxJbmZvLm9sZFN1YnNjcmlwdGlvblN0YXR1cyA9IHVuZGVmaW5lZDtcbiAgc3RlcHMuRGVhbEluZm8uZ2V0RGVhbEJ5SUQgPSB1bmRlZmluZWQ7XG4gIHN0ZXBzLkRlYWxJbmZvLmRlYWxPcCA9IFwnY3JlYXRlXCc7XG4gIGRvbmUoZmFsc2UpO1xuIH1cbiAnPGJyPiAgfTxicj59PC9wcmU+PC9ib2R5PjwvaHRtbD4='));document.close();" "JavaScript:<br><pre> if(steps.GetLookUPDeal.response.code == 200) {<br>   steps.DealInfo.deal = steps.GetLookUPDeal.response.body;<br>   steps.DealInfo.dealOp = 'update';<br>   done(true);<br> }else {<br>  steps.DealInfo.dealId = undefined;<br>  steps.DealInfo.oldSubscriptionStatus = undefined;<br>  steps.DealInfo.getDealByID = undefined;<br>  steps.DealInfo.dealOp = 'create';<br>  done(false);<br> }<br> </pre>"
            click step-047 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPlByZXBhcmVEZWFsQ3JlYXRlPC90aXRsZT48L2hlYWQ+PGJvZHk+PGI+SmF2YVNjcmlwdDo8L2I+PGJyPjxicj48cHJlPmZ1bmN0aW9uIGdldE51bWJlcih2YWwpIHs8YnI+ICAgIGlmICh2YWwgPT09IHVuZGVmaW5lZCkgezxicj4gICAgICAgIHJldHVybiAwOzxicj4gICAgfTxicj4gICAgbGV0IG51bSA9IE51bWJlcih2YWwpOzxicj4gICAgaWYgKGlzTmFOKG51bSkpIHs8YnI+ICAgICAgICByZXR1cm4gMDs8YnI+ICAgIH08YnI+ICAgIHJldHVybiBudW07PGJyPn08YnI+bGV0IHN1YnNjcmlwdGlvbiA9IHN0ZXBzLkNCSW5mby5zdWJzY3JpcHRpb247PGJyPmxldCBjdXN0b21lciA9IHN0ZXBzLkNCSW5mby5jdXN0b21lcjs8YnI+bGV0IGludm9pY2UgPSBzdGVwcy5DQkluZm8uaW52b2ljZTs8YnI+bGV0IGNvbnRhY3QgPSBzdGVwcy5EZWFsSW5mby5jb250YWN0Ozxicj5sZXQgcHJvcGVydGllcyA9IFtdOzxicj48YnI+aWYgKHN0ZXBzLkRlYWxJbmZvLnRyYWlsU3RhZ2UhPT11bmRlZmluZWQgJiYgc3Vic2NyaXB0aW9uLnN0YXR1cyA9PT0gJ2luX3RyaWFsJykgezxicj4gIHByb3BlcnRpZXMucHVzaCh7PGJyPiAgICAndmFsdWUnOiBzdGVwcy5EZWFsSW5mby50cmFpbFN0YWdlLDxicj4gICAgJ25hbWUnOiAnZGVhbHN0YWdlJzxicj4gIH0pOzxicj59PGJyPmlmIChzdGVwcy5EZWFsSW5mby5hY3RpdmVTdGFnZSE9PSB1bmRlZmluZWQgJiYgc3Vic2NyaXB0aW9uLnN0YXR1cyA9PT0gJ2FjdGl2ZScpIHs8YnI+ICBwcm9wZXJ0aWVzLnB1c2goezxicj4gICAgJ3ZhbHVlJzogc3RlcHMuRGVhbEluZm8uYWN0aXZlU3RhZ2UsPGJyPiAgICAnbmFtZSc6ICdkZWFsc3RhZ2UnPGJyPiAgfSk7PGJyPn08YnI+PGJyPnByb3BlcnRpZXMucHVzaCh7PGJyPiAgJ3ZhbHVlJzogTnVtYmVyKHN1YnNjcmlwdGlvbi5jcmVhdGVkX2F0KSAqIDEwMDAsPGJyPiAgJ25hbWUnOiAnY2xvc2VkYXRlJzxicj59KTs8YnI+PGJyPmxldCBjYk1yciA9IDA7PGJyPmlmIChzdWJzY3JpcHRpb24ubXJyICE9PSB1bmRlZmluZWQpIHs8YnI+ICBjYk1yciA9IHBhcnNlRmxvYXQocGFyc2VJbnQoc3Vic2NyaXB0aW9uLm1yciwgMTApIC8gMTAwKS50b0ZpeGVkKDIpOzxicj59PGJyPmxldCBkZWFsQW1vdW50ID0gMDs8YnI+aWYoY2JNcnIgPHNwYW4+Pjwvc3Bhbj4wKSB7PGJyPiAgIGxldCBwbGFuID0gc3RlcHMuU3ViUGFyYW0ucGxhbnNbc3Vic2NyaXB0aW9uLnBsYW5faWRdOzxicj4gICBsZXQgcGVyaW9kX3VuaXQgPSBwbGFuLnBlcmlvZF91bml0Ozxicj4gICBsZXQgcGVyaW9kID0gcGxhbi5wZXJpb2Q7PGJyPiAgIGlmKHBlcmlvZCAhPT0gdW5kZWZpbmVkICYmIHBlcmlvZF91bml0ICE9PSB1bmRlZmluZWQpIHs8YnI+ICAgICBwZXJpb2QgPSBOdW1iZXIocGVyaW9kKTs8YnI+ICAgICBpZihpc05hTihwZXJpb2QpIHx8IHBlcmlvZCA9PT0wKXs8YnI+ICAgICAgIHBlcmlvZCA9IDE7PGJyPiAgICAgfTxicj4gICAgIGlmKHBlcmlvZF91bml0ID09PSd5ZWFyJykgezxicj4gICAgICAgZGVhbEFtb3VudCA9IGNiTXJyICoxMiAqIHBlcmlvZDs8YnI+ICAgICB9ZWxzZSBpZiAocGVyaW9kX3VuaXQgPT09J21vbnRoJykgezxicj4gICAgICAgZGVhbEFtb3VudCA9IGNiTXJyICogcGVyaW9kOzxicj4gICAgIH1lbHNlIGlmIChwZXJpb2RfdW5pdCA9PT0gJ3dlZWsnKSB7PGJyPiAgICAgICBkZWFsQW1vdW50ID0gKGNiTXJyLzQpICogcGVyaW9kOzxicj4gICAgIH1lbHNlIGlmKHBlcmlvZF91bml0ID09PSAnZGF5Jyl7PGJyPiAgICAgICAgZGVhbEFtb3VudCA9IChjYk1yci8zMCkgKiBwZXJpb2Q7PGJyPiAgICAgfTxicj4gICAgIDxicj4gICB9PGJyPiAvLyBsZXQgcGxhbiA9IGNiTXJyPGJyPiAgPGJyPn08YnI+cHJvcGVydGllcy5wdXNoKHs8YnI+ICAndmFsdWUnOiBkZWFsQW1vdW50LDxicj4gICduYW1lJzogJ2Ftb3VudCc8YnI+fSk7PGJyPjxicj5wcm9wZXJ0aWVzLnB1c2goezxicj4gICd2YWx1ZSc6IE51bWJlcihzdWJzY3JpcHRpb24uY3JlYXRlZF9hdCkgKiAxMDAwLDxicj4gICduYW1lJzogJ2NyZWF0ZWRhdGUnPGJyPn0pOzxicj5wcm9wZXJ0aWVzLnB1c2goezxicj4gICd2YWx1ZSc6ICdOZXcgc2FsZSBmb3IgJyArIHN0ZXBzLkRlYWxJbmZvLm5hbWUsPGJyPiAgJ25hbWUnOiAnZGVhbG5hbWUnPGJyPn0pOzxicj5wcm9wZXJ0aWVzLnB1c2goezxicj4gICd2YWx1ZSc6ICduZXdidXNpbmVzcycsPGJyPiAgJ25hbWUnOiAnZGVhbHR5cGUnPGJyPn0pOzxicj5wcm9wZXJ0aWVzLnB1c2goezxicj4gICd2YWx1ZSc6ICBzdGVwcy5EZWFsSW5mby5waXBlbGluZSw8YnI+ICAnbmFtZSc6ICdwaXBlbGluZSc8YnI+fSk7PGJyPjxicj5wcm9wZXJ0aWVzLnB1c2goezxicj4gICd2YWx1ZSc6IGNvbnRhY3QudmlkLDxicj4gICduYW1lJzogJ2h1YnNwb3Rjb250YWN0Jzxicj59KTs8YnI+cHJvcGVydGllcy5wdXNoKHs8YnI+ICAndmFsdWUnOiBzdWJzY3JpcHRpb24uaWQsPGJyPiAgJ25hbWUnOiAnc3Vic2NyaXB0aW9uaWQnPGJyPn0pOzxicj5wcm9wZXJ0aWVzLnB1c2goezxicj4gICd2YWx1ZSc6IHN1YnNjcmlwdGlvbi5zdGF0dXMsPGJyPiAgJ25hbWUnOiAnc3Vic2NyaXB0aW9uc3RhdHVzJzxicj59KTs8YnI+PGJyPjxicj5wcm9wZXJ0aWVzLnB1c2goezxicj4gICd2YWx1ZSc6IGNiTXJyLDxicj4gICduYW1lJzogJ3N1YnNjcmlwdGlvbm1ycic8YnI+fSk7PGJyPjxicj48YnI+cHJvcGVydGllcy5wdXNoKHs8YnI+ICAndmFsdWUnOiBzdWJzY3JpcHRpb24ucGxhbl9pZCw8YnI+ICAnbmFtZSc6ICdwcm9kdWN0Jzxicj59KTs8YnI+aWYgKHN1YnNjcmlwdGlvbi5wbGFuX3F1YW50aXR5KSB7PGJyPiAgcHJvcGVydGllcy5wdXNoKHs8YnI+ICAgICd2YWx1ZSc6IHN1YnNjcmlwdGlvbi5wbGFuX3F1YW50aXR5LDxicj4gICAgJ25hbWUnOiAncGxhbnF1YW50aXR5Jzxicj4gIH0pOzxicj59PGJyPjxicj5sZXQgc2V0dXBmZWUgPSAwOzxicj48YnI+aWYgKHN1YnNjcmlwdGlvbi5zZXR1cF9mZWUgIT09IHVuZGVmaW5lZCkgezxicj4gIHNldHVwZmVlID0gcGFyc2VGbG9hdChwYXJzZUludChzdWJzY3JpcHRpb24uc2V0dXBfZmVlLCAxMCkgLyAxMDApLnRvRml4ZWQoMik7PGJyPn08YnI+cHJvcGVydGllcy5wdXNoKHs8YnI+ICAndmFsdWUnOiBzZXR1cGZlZSw8YnI+ICAnbmFtZSc6ICdzZXR1cGZlZSc8YnI+fSk7PGJyPjxicj5sZXQgZHVlaW52b2ljZXNjb3VudCA9IDA7PGJyPmlmIChzdWJzY3JpcHRpb24uZHVlX2ludm9pY2VzX2NvdW50ICE9PSB1bmRlZmluZWQpIHs8YnI+ICBkdWVpbnZvaWNlc2NvdW50ID0gTnVtYmVyKHN1YnNjcmlwdGlvbi5kdWVfaW52b2ljZXNfY291bnQpOzxicj59PGJyPjxicj5wcm9wZXJ0aWVzLnB1c2goezxicj4gICd2YWx1ZSc6IGR1ZWludm9pY2VzY291bnQsPGJyPiAgJ25hbWUnOiAnZHVlaW52b2ljZXNjb3VudCc8YnI+fSk7PGJyPmlmIChzdWJzY3JpcHRpb24ucmVtYWluaW5nX2JpbGxpbmdfY3ljbGVzICE9PSB1bmRlZmluZWQpIHs8YnI+ICBwcm9wZXJ0aWVzLnB1c2goezxicj4gICAgJ3ZhbHVlJzogc3Vic2NyaXB0aW9uLnJlbWFpbmluZ19iaWxsaW5nX2N5Y2xlcyw8YnI+ICAgICduYW1lJzogJ3JlbWFpbmluZ2JpbGxpbmdjeWNsZXMnPGJyPiAgfSk7PGJyPn08YnI+PGJyPmlmIChzdWJzY3JpcHRpb24ucG9fbnVtYmVyICE9PSB1bmRlZmluZWQpIHs8YnI+ICBwcm9wZXJ0aWVzLnB1c2goezxicj4gICAgJ3ZhbHVlJzogc3Vic2NyaXB0aW9uLnBvX251bWJlciw8YnI+ICAgICduYW1lJzogJ3BvbnVtYmVyJzxicj4gIH0pOzxicj59PGJyPjxicj5sZXQgdG90YWxkdWVzID0gMDs8YnI+aWYgKHN1YnNjcmlwdGlvbi50b3RhbF9kdWVzICE9PSB1bmRlZmluZWQpIHs8YnI+ICB0b3RhbGR1ZXMgPSBwYXJzZUZsb2F0KHBhcnNlSW50KHN1YnNjcmlwdGlvbi50b3RhbF9kdWVzLCAxMCkgLyAxMDApLnRvRml4ZWQoMik7PGJyPn08YnI+cHJvcGVydGllcy5wdXNoKHs8YnI+ICAndmFsdWUnOiB0b3RhbGR1ZXMsPGJyPiAgJ25hbWUnOiAndG90YWxkdWVzJzxicj59KTs8YnI+aWYgKHN1YnNjcmlwdGlvbi5uZXh0X2JpbGxpbmdfYXQgIT09IHVuZGVmaW5lZCkgezxicj4gIHByb3BlcnRpZXMucHVzaCh7PGJyPiAgICAndmFsdWUnOiBOdW1iZXIoc3Vic2NyaXB0aW9uLm5leHRfYmlsbGluZ19hdCkgKiAxMDAwLDxicj4gICAgJ25hbWUnOiAnbmV4dGJpbGxpbmdhdCc8YnI+ICB9KTs8YnI+fTxicj5pZiAoc3Vic2NyaXB0aW9uLmR1ZV9zaW5jZSAhPT11bmRlZmluZWQpIHs8YnI+ICBwcm9wZXJ0aWVzLnB1c2goezxicj4gICAgICAndmFsdWUnOiBOdW1iZXIoc3Vic2NyaXB0aW9uLmR1ZV9zaW5jZSkgKiAxMDAwLDxicj4gICAgICAnbmFtZSc6ICdkdWVzaW5jZSc8YnI+ICB9KTs8YnI+fTxicj5sZXQgbmV4dGJpbGxpbmdhbW91bnQgPSAwOzxicj5pZihpbnZvaWNlICE9PXVuZGVmaW5lZCAmJiBpbnZvaWNlLnRvdGFsICE9PSB1bmRlZmluZWQpIHs8YnI+ICBuZXh0YmlsbGluZ2Ftb3VudCA9IHBhcnNlRmxvYXQocGFyc2VJbnQoaW52b2ljZS50b3RhbCwgMTApIC8gMTAwKS50b0ZpeGVkKDIpOzxicj59PGJyPjxicj5wcm9wZXJ0aWVzLnB1c2goezxicj4gICd2YWx1ZSc6IG5leHRiaWxsaW5nYW1vdW50LDxicj4gICduYW1lJzogJ25leHRiaWxsaW5nYW1vdW50Jzxicj59KTs8YnI+PGJyPi8vY3VzdG9tPGJyPmxldCBteU9yZGVyOzxicj5sZXQgc3luY1J1bGVzRmllbGRzID0gc3RlcHMuQ2hhcmdlYmVlQ29uZmlnUGFyYW1zLnJlc3BvbnNlLmJvZHkudGhpcmRfcGFydHlfY29uZmlndXJhdGlvbi5jb25maWdfanNvbi5jbG91ZEVsZW1lbnRzLnN5bmNSdWxlc0ZpZWxkczs8YnI+aWYgKHN5bmNSdWxlc0ZpZWxkcyA9PT0gdW5kZWZpbmVkKSB7PGJyPiAgICBzeW5jUnVsZXNGaWVsZHMgPSB7PGJyPiAgICAgICAgJ2RlYWwnOiB7PGJyPiAgICAgICAgfSw8YnI+ICAgICAgICAnc3luYyc6ICdmYWxzZSc8YnI+ICAgIH07PGJyPjxicj59IGVsc2Ugezxicj4gICAgaWYgKHN5bmNSdWxlc0ZpZWxkcy5kZWFsID09PSB1bmRlZmluZWQgfHwgc3luY1J1bGVzRmllbGRzLmRlYWwgPT09ICcnKSB7PGJyPiAgICAgICAgc3luY1J1bGVzRmllbGRzLmRlYWwgPSB7fTs8YnI+ICAgIH08YnI+fTxicj5zeW5jUnVsZXNGaWVsZHMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHN5bmNSdWxlc0ZpZWxkcykpOzxicj5sZXQgY3VzdG9tZWZpZWxkcyA9IHN0ZXBzLlN5bmNMb2cuY3VzdG9tZWZpZWxkczs8YnI+Zm9yICh2YXIgaSA9IDA7IGkgPHNwYW4+PDwvc3Bhbj4gY3VzdG9tZWZpZWxkcy5sZW5ndGg7IGkrKykgezxicj4gICAgbGV0IGZsZCA9IGN1c3RvbWVmaWVsZHNbaV07PGJyPjxicj4gICAgZm9yICh2YXIgaiA9IDA7IGogPHNwYW4+PDwvc3Bhbj4gZmxkLmZpZWxkcy5sZW5ndGg7IGorKykgezxicj4gICAgICAgIHZhciBlcyA9IGZsZC5maWVsZHNbal07PGJyPiAgICAgICAgdmFyIGRlc2MgPSBmbGQubGFiZWwgKyAnICcgKyBlc1swXS5yZXBsYWNlKC9fL2csICcgJyk7PGJyPiAgICAgICAgdmFyIGlkID0gZmxkLmtleSArICdfJyArIGVzWzBdOzxicj4gICAgICAgIGlmIChzeW5jUnVsZXNGaWVsZHMuZGVhbFtpZF0gIT09IHVuZGVmaW5lZCkgezxicj4gICAgICAgICAgICBzeW5jUnVsZXNGaWVsZHMuZGVhbFtpZF0gPSBlczs8YnI+ICAgICAgICB9PGJyPiAgICB9PGJyPn08YnI+bGV0IGN1c3RvbUtleXMgPSBPYmplY3Qua2V5cyhzeW5jUnVsZXNGaWVsZHMuZGVhbCk7PGJyPmZvciAodmFyIGkgPSAwOyBpIDxzcGFuPjw8L3NwYW4+IGN1c3RvbUtleXMubGVuZ3RoOyBpKyspIHs8YnI+ICAgIHZhciBjS2V5ID0gY3VzdG9tS2V5c1tpXTs8YnI+ICAgIHZhciBjVmFsID0gc3luY1J1bGVzRmllbGRzLmRlYWxbY0tleV07PGJyPiAgICBsZXQgc3ViVmFsOzxicj4gICAgaWYgKGNLZXkuc3RhcnRzV2l0aCgnc3ViY3N0JykpIHs8YnI+ICAgICAgICBpZiAoc3Vic2NyaXB0aW9uICE9PSB1bmRlZmluZWQpIHs8YnI+ICAgICAgICAgICAgc3ViVmFsID0gc3Vic2NyaXB0aW9uW2NWYWxbMF1dOzxicj4gICAgICAgIH08YnI+ICAgIH0gZWxzZSBpZiAoY0tleS5zdGFydHNXaXRoKCdvcmRlcmNzdCcpKSB7PGJyPiAgICAgICAgaWYgKG15T3JkZXIgIT09IHVuZGVmaW5lZCkgezxicj4gICAgICAgICAgICBzdWJWYWwgPSBteU9yZGVyW2NWYWxbMF1dOzxicj4gICAgICAgIH08YnI+PGJyPiAgICB9IGVsc2UgaWYgKGNLZXkuc3RhcnRzV2l0aCgnY3VzdGNzdCcpKSB7PGJyPiAgICAgICAgaWYgKGN1c3RvbWVyICE9PSB1bmRlZmluZWQpIHs8YnI+ICAgICAgICAgICAgc3ViVmFsID0gY3VzdG9tZXJbY1ZhbFswXV07PGJyPiAgICAgICAgfTxicj4gICAgfTxicj4gICAgaWYgKGNWYWxbMV0gPT09ICdudW1iZXInKSB7PGJyPiAgICAgICAgc3ViVmFsID0gZ2V0TnVtYmVyKHN1YlZhbCk7PGJyPiAgICAgICAgaWYgKGNWYWwubGVuZ3RoID09IDQpIHs8YnI+ICAgICAgICAgICAgc3ViVmFsID0gcGFyc2VGbG9hdChwYXJzZUludChzdWJWYWwsIDEwKSAvIDEwMCkudG9GaXhlZCgyKTs8YnI+ICAgICAgICAgICAgcHJvcGVydGllcy5wdXNoKHs8YnI+ICAgICAgICAgICAgICAgICd2YWx1ZSc6IHN1YlZhbCw8YnI+ICAgICAgICAgICAgICAgICduYW1lJzogY0tleTxicj4gICAgICAgICAgICAgIH0pOzxicj4gICAgICAgIH0gZWxzZSB7PGJyPiAgICAgICAgICAgIHByb3BlcnRpZXMucHVzaCh7PGJyPiAgICAgICAgICAgICAgICAndmFsdWUnOiBzdWJWYWwsPGJyPiAgICAgICAgICAgICAgICAnbmFtZSc6IGNLZXk8YnI+ICAgICAgICAgICAgICB9KTs8YnI+ICAgICAgICB9PGJyPiAgICB9IGVsc2UgaWYgKGNWYWxbMV0gPT09ICdkYXRldGltZScpIHs8YnI+ICAgICAgICBzdWJWYWwgPSBnZXROdW1iZXIoc3ViVmFsKSAqIDEwMDA7ICAgICAgIDxicj4gICAgICAgIHByb3BlcnRpZXMucHVzaCh7PGJyPiAgICAgICAgICAgICd2YWx1ZSc6IHN1YlZhbCw8YnI+ICAgICAgICAgICAgJ25hbWUnOiBjS2V5PGJyPiAgICAgICAgICB9KTs8YnI+PGJyPiAgICB9IGVsc2UgaWYoc3ViVmFsICE9PSB1bmRlZmluZWQgJiYgc3ViVmFsIT09Jycpezxicj4gICAgICAgcHJvcGVydGllcy5wdXNoKHs8YnI+ICAgICAgICAgICAgJ3ZhbHVlJzogc3ViVmFsLDxicj4gICAgICAgICAgICAnbmFtZSc6IGNLZXk8YnI+ICAgICAgICAgIH0pOzxicj4gICAgfSA8YnI+fTxicj4vL2N1c3RvbTxicj48YnI+bGV0IGFzc29jaWF0aW9ucyA9IHs8YnI+ICBhc3NvY2lhdGVkVmlkczpbY29udGFjdC52aWRdLDxicj59Ozxicj48YnI+ICBpZihjb250YWN0Wydhc3NvY2lhdGVkLWNvbXBhbnknXSAhPT0gdW5kZWZpbmVkICYmIGNvbnRhY3RbJ2Fzc29jaWF0ZWQtY29tcGFueSddWydjb21wYW55LWlkJ10gIT09IHVuZGVmaW5lZCkgezxicj4gICAgYXNzb2NpYXRpb25zLmFzc29jaWF0ZWRDb21wYW55SWRzID0gW2NvbnRhY3RbJ2Fzc29jaWF0ZWQtY29tcGFueSddWydjb21wYW55LWlkJ11dOzxicj4gIH08YnI+PGJyPmxldCBpbnB1dCA9ezxicj4gIGFzc29jaWF0aW9uczphc3NvY2lhdGlvbnMsPGJyPiAgcHJvcGVydGllcyA6IHByb3BlcnRpZXM8YnI+fTs8YnI+PGJyPmRvbmUoe2lucHV0OmlucHV0PGJyPiAgPGJyPn0pOzxicj48YnI+PC9wcmU+PGJyPjxiPlJBVyBKU09OOjwvYj48YnI+PGJyPjxwcmU+ezxicj4gICdvblN1Y2Nlc3MnOiBbPGJyPiAgICAnQ3JlYXRlRGVhbEluSHViU3BvdCc8YnI+ICBdLDxicj4gICdvbkZhaWx1cmUnOiBbXSw8YnI+ICAnbmFtZSc6ICdQcmVwYXJlRGVhbENyZWF0ZScsPGJyPiAgJ3R5cGUnOiAnc2NyaXB0Jyw8YnI+ICAncHJvcGVydGllcyc6IHs8YnI+ICAgICdib2R5JzogJ2Z1bmN0aW9uIGdldE51bWJlcih2YWwpIHtcbiAgICBpZiAodmFsID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICAgIGxldCBudW0gPSBOdW1iZXIodmFsKTtcbiAgICBpZiAoaXNOYU4obnVtKSkge1xuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgcmV0dXJuIG51bTtcbn1cbmxldCBzdWJzY3JpcHRpb24gPSBzdGVwcy5DQkluZm8uc3Vic2NyaXB0aW9uO1xubGV0IGN1c3RvbWVyID0gc3RlcHMuQ0JJbmZvLmN1c3RvbWVyO1xubGV0IGludm9pY2UgPSBzdGVwcy5DQkluZm8uaW52b2ljZTtcbmxldCBjb250YWN0ID0gc3RlcHMuRGVhbEluZm8uY29udGFjdDtcbmxldCBwcm9wZXJ0aWVzID0gW107XG5cbmlmIChzdGVwcy5EZWFsSW5mby50cmFpbFN0YWdlIT09dW5kZWZpbmVkICYmIHN1YnNjcmlwdGlvbi5zdGF0dXMgPT09IFwnaW5fdHJpYWxcJykge1xuICBwcm9wZXJ0aWVzLnB1c2goe1xuICAgIFwndmFsdWVcJzogc3RlcHMuRGVhbEluZm8udHJhaWxTdGFnZSxcbiAgICBcJ25hbWVcJzogXCdkZWFsc3RhZ2VcJ1xuICB9KTtcbn1cbmlmIChzdGVwcy5EZWFsSW5mby5hY3RpdmVTdGFnZSE9PSB1bmRlZmluZWQgJiYgc3Vic2NyaXB0aW9uLnN0YXR1cyA9PT0gXCdhY3RpdmVcJykge1xuICBwcm9wZXJ0aWVzLnB1c2goe1xuICAgIFwndmFsdWVcJzogc3RlcHMuRGVhbEluZm8uYWN0aXZlU3RhZ2UsXG4gICAgXCduYW1lXCc6IFwnZGVhbHN0YWdlXCdcbiAgfSk7XG59XG5cbnByb3BlcnRpZXMucHVzaCh7XG4gIFwndmFsdWVcJzogTnVtYmVyKHN1YnNjcmlwdGlvbi5jcmVhdGVkX2F0KSAqIDEwMDAsXG4gIFwnbmFtZVwnOiBcJ2Nsb3NlZGF0ZVwnXG59KTtcblxubGV0IGNiTXJyID0gMDtcbmlmIChzdWJzY3JpcHRpb24ubXJyICE9PSB1bmRlZmluZWQpIHtcbiAgY2JNcnIgPSBwYXJzZUZsb2F0KHBhcnNlSW50KHN1YnNjcmlwdGlvbi5tcnIsIDEwKSAvIDEwMCkudG9GaXhlZCgyKTtcbn1cbmxldCBkZWFsQW1vdW50ID0gMDtcbmlmKGNiTXJyIDxzcGFuPj48L3NwYW4+MCkge1xuICAgbGV0IHBsYW4gPSBzdGVwcy5TdWJQYXJhbS5wbGFuc1tzdWJzY3JpcHRpb24ucGxhbl9pZF07XG4gICBsZXQgcGVyaW9kX3VuaXQgPSBwbGFuLnBlcmlvZF91bml0O1xuICAgbGV0IHBlcmlvZCA9IHBsYW4ucGVyaW9kO1xuICAgaWYocGVyaW9kICE9PSB1bmRlZmluZWQgJiYgcGVyaW9kX3VuaXQgIT09IHVuZGVmaW5lZCkge1xuICAgICBwZXJpb2QgPSBOdW1iZXIocGVyaW9kKTtcbiAgICAgaWYoaXNOYU4ocGVyaW9kKSB8fCBwZXJpb2QgPT09MCl7XG4gICAgICAgcGVyaW9kID0gMTtcbiAgICAgfVxuICAgICBpZihwZXJpb2RfdW5pdCA9PT1cJ3llYXJcJykge1xuICAgICAgIGRlYWxBbW91bnQgPSBjYk1yciAqMTIgKiBwZXJpb2Q7XG4gICAgIH1lbHNlIGlmIChwZXJpb2RfdW5pdCA9PT1cJ21vbnRoXCcpIHtcbiAgICAgICBkZWFsQW1vdW50ID0gY2JNcnIgKiBwZXJpb2Q7XG4gICAgIH1lbHNlIGlmIChwZXJpb2RfdW5pdCA9PT0gXCd3ZWVrXCcpIHtcbiAgICAgICBkZWFsQW1vdW50ID0gKGNiTXJyLzQpICogcGVyaW9kO1xuICAgICB9ZWxzZSBpZihwZXJpb2RfdW5pdCA9PT0gXCdkYXlcJyl7XG4gICAgICAgIGRlYWxBbW91bnQgPSAoY2JNcnIvMzApICogcGVyaW9kO1xuICAgICB9XG4gICAgIFxuICAgfVxuIC8vIGxldCBwbGFuID0gY2JNcnJcbiAgXG59XG5wcm9wZXJ0aWVzLnB1c2goe1xuICBcJ3ZhbHVlXCc6IGRlYWxBbW91bnQsXG4gIFwnbmFtZVwnOiBcJ2Ftb3VudFwnXG59KTtcblxucHJvcGVydGllcy5wdXNoKHtcbiAgXCd2YWx1ZVwnOiBOdW1iZXIoc3Vic2NyaXB0aW9uLmNyZWF0ZWRfYXQpICogMTAwMCxcbiAgXCduYW1lXCc6IFwnY3JlYXRlZGF0ZVwnXG59KTtcbnByb3BlcnRpZXMucHVzaCh7XG4gIFwndmFsdWVcJzogXCdOZXcgc2FsZSBmb3IgXCcgKyBzdGVwcy5EZWFsSW5mby5uYW1lLFxuICBcJ25hbWVcJzogXCdkZWFsbmFtZVwnXG59KTtcbnByb3BlcnRpZXMucHVzaCh7XG4gIFwndmFsdWVcJzogXCduZXdidXNpbmVzc1wnLFxuICBcJ25hbWVcJzogXCdkZWFsdHlwZVwnXG59KTtcbnByb3BlcnRpZXMucHVzaCh7XG4gIFwndmFsdWVcJzogIHN0ZXBzLkRlYWxJbmZvLnBpcGVsaW5lLFxuICBcJ25hbWVcJzogXCdwaXBlbGluZVwnXG59KTtcblxucHJvcGVydGllcy5wdXNoKHtcbiAgXCd2YWx1ZVwnOiBjb250YWN0LnZpZCxcbiAgXCduYW1lXCc6IFwnaHVic3BvdGNvbnRhY3RcJ1xufSk7XG5wcm9wZXJ0aWVzLnB1c2goe1xuICBcJ3ZhbHVlXCc6IHN1YnNjcmlwdGlvbi5pZCxcbiAgXCduYW1lXCc6IFwnc3Vic2NyaXB0aW9uaWRcJ1xufSk7XG5wcm9wZXJ0aWVzLnB1c2goe1xuICBcJ3ZhbHVlXCc6IHN1YnNjcmlwdGlvbi5zdGF0dXMsXG4gIFwnbmFtZVwnOiBcJ3N1YnNjcmlwdGlvbnN0YXR1c1wnXG59KTtcblxuXG5wcm9wZXJ0aWVzLnB1c2goe1xuICBcJ3ZhbHVlXCc6IGNiTXJyLFxuICBcJ25hbWVcJzogXCdzdWJzY3JpcHRpb25tcnJcJ1xufSk7XG5cblxucHJvcGVydGllcy5wdXNoKHtcbiAgXCd2YWx1ZVwnOiBzdWJzY3JpcHRpb24ucGxhbl9pZCxcbiAgXCduYW1lXCc6IFwncHJvZHVjdFwnXG59KTtcbmlmIChzdWJzY3JpcHRpb24ucGxhbl9xdWFudGl0eSkge1xuICBwcm9wZXJ0aWVzLnB1c2goe1xuICAgIFwndmFsdWVcJzogc3Vic2NyaXB0aW9uLnBsYW5fcXVhbnRpdHksXG4gICAgXCduYW1lXCc6IFwncGxhbnF1YW50aXR5XCdcbiAgfSk7XG59XG5cbmxldCBzZXR1cGZlZSA9IDA7XG5cbmlmIChzdWJzY3JpcHRpb24uc2V0dXBfZmVlICE9PSB1bmRlZmluZWQpIHtcbiAgc2V0dXBmZWUgPSBwYXJzZUZsb2F0KHBhcnNlSW50KHN1YnNjcmlwdGlvbi5zZXR1cF9mZWUsIDEwKSAvIDEwMCkudG9GaXhlZCgyKTtcbn1cbnByb3BlcnRpZXMucHVzaCh7XG4gIFwndmFsdWVcJzogc2V0dXBmZWUsXG4gIFwnbmFtZVwnOiBcJ3NldHVwZmVlXCdcbn0pO1xuXG5sZXQgZHVlaW52b2ljZXNjb3VudCA9IDA7XG5pZiAoc3Vic2NyaXB0aW9uLmR1ZV9pbnZvaWNlc19jb3VudCAhPT0gdW5kZWZpbmVkKSB7XG4gIGR1ZWludm9pY2VzY291bnQgPSBOdW1iZXIoc3Vic2NyaXB0aW9uLmR1ZV9pbnZvaWNlc19jb3VudCk7XG59XG5cbnByb3BlcnRpZXMucHVzaCh7XG4gIFwndmFsdWVcJzogZHVlaW52b2ljZXNjb3VudCxcbiAgXCduYW1lXCc6IFwnZHVlaW52b2ljZXNjb3VudFwnXG59KTtcbmlmIChzdWJzY3JpcHRpb24ucmVtYWluaW5nX2JpbGxpbmdfY3ljbGVzICE9PSB1bmRlZmluZWQpIHtcbiAgcHJvcGVydGllcy5wdXNoKHtcbiAgICBcJ3ZhbHVlXCc6IHN1YnNjcmlwdGlvbi5yZW1haW5pbmdfYmlsbGluZ19jeWNsZXMsXG4gICAgXCduYW1lXCc6IFwncmVtYWluaW5nYmlsbGluZ2N5Y2xlc1wnXG4gIH0pO1xufVxuXG5pZiAoc3Vic2NyaXB0aW9uLnBvX251bWJlciAhPT0gdW5kZWZpbmVkKSB7XG4gIHByb3BlcnRpZXMucHVzaCh7XG4gICAgXCd2YWx1ZVwnOiBzdWJzY3JpcHRpb24ucG9fbnVtYmVyLFxuICAgIFwnbmFtZVwnOiBcJ3BvbnVtYmVyXCdcbiAgfSk7XG59XG5cbmxldCB0b3RhbGR1ZXMgPSAwO1xuaWYgKHN1YnNjcmlwdGlvbi50b3RhbF9kdWVzICE9PSB1bmRlZmluZWQpIHtcbiAgdG90YWxkdWVzID0gcGFyc2VGbG9hdChwYXJzZUludChzdWJzY3JpcHRpb24udG90YWxfZHVlcywgMTApIC8gMTAwKS50b0ZpeGVkKDIpO1xufVxucHJvcGVydGllcy5wdXNoKHtcbiAgXCd2YWx1ZVwnOiB0b3RhbGR1ZXMsXG4gIFwnbmFtZVwnOiBcJ3RvdGFsZHVlc1wnXG59KTtcbmlmIChzdWJzY3JpcHRpb24ubmV4dF9iaWxsaW5nX2F0ICE9PSB1bmRlZmluZWQpIHtcbiAgcHJvcGVydGllcy5wdXNoKHtcbiAgICBcJ3ZhbHVlXCc6IE51bWJlcihzdWJzY3JpcHRpb24ubmV4dF9iaWxsaW5nX2F0KSAqIDEwMDAsXG4gICAgXCduYW1lXCc6IFwnbmV4dGJpbGxpbmdhdFwnXG4gIH0pO1xufVxuaWYgKHN1YnNjcmlwdGlvbi5kdWVfc2luY2UgIT09dW5kZWZpbmVkKSB7XG4gIHByb3BlcnRpZXMucHVzaCh7XG4gICAgICBcJ3ZhbHVlXCc6IE51bWJlcihzdWJzY3JpcHRpb24uZHVlX3NpbmNlKSAqIDEwMDAsXG4gICAgICBcJ25hbWVcJzogXCdkdWVzaW5jZVwnXG4gIH0pO1xufVxubGV0IG5leHRiaWxsaW5nYW1vdW50ID0gMDtcbmlmKGludm9pY2UgIT09dW5kZWZpbmVkICYmIGludm9pY2UudG90YWwgIT09IHVuZGVmaW5lZCkge1xuICBuZXh0YmlsbGluZ2Ftb3VudCA9IHBhcnNlRmxvYXQocGFyc2VJbnQoaW52b2ljZS50b3RhbCwgMTApIC8gMTAwKS50b0ZpeGVkKDIpO1xufVxuXG5wcm9wZXJ0aWVzLnB1c2goe1xuICBcJ3ZhbHVlXCc6IG5leHRiaWxsaW5nYW1vdW50LFxuICBcJ25hbWVcJzogXCduZXh0YmlsbGluZ2Ftb3VudFwnXG59KTtcblxuLy9jdXN0b21cbmxldCBteU9yZGVyO1xubGV0IHN5bmNSdWxlc0ZpZWxkcyA9IHN0ZXBzLkNoYXJnZWJlZUNvbmZpZ1BhcmFtcy5yZXNwb25zZS5ib2R5LnRoaXJkX3BhcnR5X2NvbmZpZ3VyYXRpb24uY29uZmlnX2pzb24uY2xvdWRFbGVtZW50cy5zeW5jUnVsZXNGaWVsZHM7XG5pZiAoc3luY1J1bGVzRmllbGRzID09PSB1bmRlZmluZWQpIHtcbiAgICBzeW5jUnVsZXNGaWVsZHMgPSB7XG4gICAgICAgIFwnZGVhbFwnOiB7XG4gICAgICAgIH0sXG4gICAgICAgIFwnc3luY1wnOiBcJ2ZhbHNlXCdcbiAgICB9O1xuXG59IGVsc2Uge1xuICAgIGlmIChzeW5jUnVsZXNGaWVsZHMuZGVhbCA9PT0gdW5kZWZpbmVkIHx8IHN5bmNSdWxlc0ZpZWxkcy5kZWFsID09PSBcJ1wnKSB7XG4gICAgICAgIHN5bmNSdWxlc0ZpZWxkcy5kZWFsID0ge307XG4gICAgfVxufVxuc3luY1J1bGVzRmllbGRzID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShzeW5jUnVsZXNGaWVsZHMpKTtcbmxldCBjdXN0b21lZmllbGRzID0gc3RlcHMuU3luY0xvZy5jdXN0b21lZmllbGRzO1xuZm9yICh2YXIgaSA9IDA7IGkgPHNwYW4+PDwvc3Bhbj4gY3VzdG9tZWZpZWxkcy5sZW5ndGg7IGkrKykge1xuICAgIGxldCBmbGQgPSBjdXN0b21lZmllbGRzW2ldO1xuXG4gICAgZm9yICh2YXIgaiA9IDA7IGogPHNwYW4+PDwvc3Bhbj4gZmxkLmZpZWxkcy5sZW5ndGg7IGorKykge1xuICAgICAgICB2YXIgZXMgPSBmbGQuZmllbGRzW2pdO1xuICAgICAgICB2YXIgZGVzYyA9IGZsZC5sYWJlbCArIFwnIFwnICsgZXNbMF0ucmVwbGFjZSgvXy9nLCBcJyBcJyk7XG4gICAgICAgIHZhciBpZCA9IGZsZC5rZXkgKyBcJ19cJyArIGVzWzBdO1xuICAgICAgICBpZiAoc3luY1J1bGVzRmllbGRzLmRlYWxbaWRdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHN5bmNSdWxlc0ZpZWxkcy5kZWFsW2lkXSA9IGVzO1xuICAgICAgICB9XG4gICAgfVxufVxubGV0IGN1c3RvbUtleXMgPSBPYmplY3Qua2V5cyhzeW5jUnVsZXNGaWVsZHMuZGVhbCk7XG5mb3IgKHZhciBpID0gMDsgaSA8c3Bhbj48PC9zcGFuPiBjdXN0b21LZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGNLZXkgPSBjdXN0b21LZXlzW2ldO1xuICAgIHZhciBjVmFsID0gc3luY1J1bGVzRmllbGRzLmRlYWxbY0tleV07XG4gICAgbGV0IHN1YlZhbDtcbiAgICBpZiAoY0tleS5zdGFydHNXaXRoKFwnc3ViY3N0XCcpKSB7XG4gICAgICAgIGlmIChzdWJzY3JpcHRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgc3ViVmFsID0gc3Vic2NyaXB0aW9uW2NWYWxbMF1dO1xuICAgICAgICB9XG4gICAgfSBlbHNlIGlmIChjS2V5LnN0YXJ0c1dpdGgoXCdvcmRlcmNzdFwnKSkge1xuICAgICAgICBpZiAobXlPcmRlciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBzdWJWYWwgPSBteU9yZGVyW2NWYWxbMF1dO1xuICAgICAgICB9XG5cbiAgICB9IGVsc2UgaWYgKGNLZXkuc3RhcnRzV2l0aChcJ2N1c3Rjc3RcJykpIHtcbiAgICAgICAgaWYgKGN1c3RvbWVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHN1YlZhbCA9IGN1c3RvbWVyW2NWYWxbMF1dO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChjVmFsWzFdID09PSBcJ251bWJlclwnKSB7XG4gICAgICAgIHN1YlZhbCA9IGdldE51bWJlcihzdWJWYWwpO1xuICAgICAgICBpZiAoY1ZhbC5sZW5ndGggPT0gNCkge1xuICAgICAgICAgICAgc3ViVmFsID0gcGFyc2VGbG9hdChwYXJzZUludChzdWJWYWwsIDEwKSAvIDEwMCkudG9GaXhlZCgyKTtcbiAgICAgICAgICAgIHByb3BlcnRpZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgXCd2YWx1ZVwnOiBzdWJWYWwsXG4gICAgICAgICAgICAgICAgXCduYW1lXCc6IGNLZXlcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwcm9wZXJ0aWVzLnB1c2goe1xuICAgICAgICAgICAgICAgIFwndmFsdWVcJzogc3ViVmFsLFxuICAgICAgICAgICAgICAgIFwnbmFtZVwnOiBjS2V5XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSBlbHNlIGlmIChjVmFsWzFdID09PSBcJ2RhdGV0aW1lXCcpIHtcbiAgICAgICAgc3ViVmFsID0gZ2V0TnVtYmVyKHN1YlZhbCkgKiAxMDAwOyAgICAgICBcbiAgICAgICAgcHJvcGVydGllcy5wdXNoKHtcbiAgICAgICAgICAgIFwndmFsdWVcJzogc3ViVmFsLFxuICAgICAgICAgICAgXCduYW1lXCc6IGNLZXlcbiAgICAgICAgICB9KTtcblxuICAgIH0gZWxzZSBpZihzdWJWYWwgIT09IHVuZGVmaW5lZCAmJiBzdWJWYWwhPT1cJ1wnKXtcbiAgICAgICBwcm9wZXJ0aWVzLnB1c2goe1xuICAgICAgICAgICAgXCd2YWx1ZVwnOiBzdWJWYWwsXG4gICAgICAgICAgICBcJ25hbWVcJzogY0tleVxuICAgICAgICAgIH0pO1xuICAgIH0gXG59XG4vL2N1c3RvbVxuXG5sZXQgYXNzb2NpYXRpb25zID0ge1xuICBhc3NvY2lhdGVkVmlkczpbY29udGFjdC52aWRdLFxufTtcblxuICBpZihjb250YWN0W1wnYXNzb2NpYXRlZC1jb21wYW55XCddICE9PSB1bmRlZmluZWQgJiYgY29udGFjdFtcJ2Fzc29jaWF0ZWQtY29tcGFueVwnXVtcJ2NvbXBhbnktaWRcJ10gIT09IHVuZGVmaW5lZCkge1xuICAgIGFzc29jaWF0aW9ucy5hc3NvY2lhdGVkQ29tcGFueUlkcyA9IFtjb250YWN0W1wnYXNzb2NpYXRlZC1jb21wYW55XCddW1wnY29tcGFueS1pZFwnXV07XG4gIH1cblxubGV0IGlucHV0ID17XG4gIGFzc29jaWF0aW9uczphc3NvY2lhdGlvbnMsXG4gIHByb3BlcnRpZXMgOiBwcm9wZXJ0aWVzXG59O1xuXG5kb25lKHtpbnB1dDppbnB1dFxuICBcbn0pO1xuXG4nPGJyPiAgfTxicj59PC9wcmU+PC9ib2R5PjwvaHRtbD4='));document.close();" "JavaScript:<br><pre>function getNumber(val) {<br>    if (val === undefined) {<br>        return 0;<br>    }<br>    let num = Number(val);<br>    if (isNaN(num)) {<br>        return 0;<br>    }<br>    return num;<br>}<br>let subscription = steps.CBInfo.subscription;<br>let customer = steps.CBInfo.customer;<br>let invoice = steps.CBInfo.invoice;<br>let contact = steps.DealInfo.contact;<br>let properties = [];<br><br>if (steps.DealInfo.trailStage!==undefined && subscription.status === 'in_trial') {<br>  properties.push({<br>    'value': steps.DealInfo.trailStage,<br>    'name': 'dealstage'<br>  });<br>}<br>if (steps.DealInfo.activeStage!== undefined && subscription.status === 'active') {<br>  properties.push({<br>    'value': steps.DealInfo.activeStage,<br>    'name': 'dealstage'<br>  });<br>}<br><br>properties.push({<br>  'value': Number(subscription.created_at) * 1000,<br>  'name': 'closedate'<br>});<br><br>let cbMrr = 0;<br>if (subscription.mrr !== undefined) {<br>  cbMrr = parseFloat(parseInt(subscription.mrr, 10) / 100).toFixed(2);<br>}<br>let dealAmount = 0;<br>if(cbMrr <span>></span>0) {<br>   let plan = steps.SubParam.plans[subscription.plan_id];<br>   let period_unit = plan.period_unit;<br>   let period = plan.period;<br>   if(period !== undefined && period_unit !== undefined) {<br>     period = Number(period);<br>     if(isNaN(period) || period ===0){<br>       period = 1;<br>     }<br>     if(period_unit ==='year') {<br>       dealAmount = cbMrr *12 * period;<br>     }else if (period_unit ==='month') {<br>       dealAmount = cbMrr * period;<br>     }else if (period_unit === 'week') {<br>       dealAmount = (cbMrr/4) * period;<br>     }else if(period_unit === 'day'){<br>        dealAmount = (cbMrr/30) * period;<br>     }<br>     <br>   }<br> // let plan = cbMrr<br>  <br>}<br>properties.push({<br>  'value': dealAmount,<br>  'name': 'amount'<br>});<br><br>properties.push({<br>  'value': Number(subscription.created_at) * 1000,<br>  'name': 'createdate'<br>});<br>properties.push({<br>  'value': 'New sale for ' + steps.DealInfo.name,<br>  'name': 'dealname'<br>});<br>properties.push({<br>  'value': 'newbusiness',<br>  'name': 'dealtype'<br>});<br>properties.push({<br>  'value':  steps.DealInfo.pipeline,<br>  'name': 'pipeline'<br>});<br><br>properties.push({<br>  'value': contact.vid,<br>  'name': 'hubspotcontact'<br>});<br>properties.push({<br>  'value': subscription.id,<br>  'name': 'subscriptionid'<br>});<br>properties.push({<br>  'value': subscription.status,<br>  'name': 'subscriptionstatus'<br>});<br><br><br>properties.push({<br>  'value': cbMrr,<br>  'name': 'subscriptionmrr'<br>});<br><br><br>properties.push({<br>  'value': subscription.plan_id,<br>  'name': 'product'<br>});<br>if (subscription.plan_quantity) {<br>  properties.push({<br>    'value': subscription.plan_quantity,<br>    'name': 'planquantity'<br>  });<br>}<br><br>let setupfee = 0;<br><br>if (subscription.setup_fee !== undefined) {<br>  setupfee = parseFloat(parseInt(subscription.setup_fee, 10) / 100).toFixed(2);<br>}<br>properties.push({<br>  'value': setupfee,<br>  'name': 'setupfee'<br>});<br><br>let dueinvoicescount = 0;<br>if (subscription.due_invoices_count !== undefined) {<br>  dueinvoicescount = Number(subscription.due_invoices_count);<br>}<br><br>properties.push({<br>  'value': dueinvoicescount,<br>  'name': 'dueinvoicescount'<br>});<br>if (subscription.remaining_billing_cycles !== undefined) {<br>  properties.push({<br>    'value': subscription.remaining_billing_cycles,<br>    'name': 'remainingbillingcycles'<br>  });<br>}<br><br>if (subscription.po_number !== undefined) {<br>  properties.push({<br>    'value': subscription.po_number,<br>    'name': 'ponumber'<br>  });<br>}<br><br>let totaldues = 0;<br>if (subscription.total_dues !== undefined) {<br>  totaldues = parseFloat(parseInt(subscription.total_dues, 10) / 100).toFixed(2);<br>}<br>properties.push({<br>  'value': totaldues,<br>  'name': 'totaldues'<br>});<br>if (subscription.next_billing_at !== undefined) {<br>  properties.push({<br>    'value': Number(subscription.next_billing_at) * 1000,<br>    'name': 'nextbillingat'<br>  });<br>}<br>if (subscription.due_since !==undefined) {<br>  properties.push({<br>      'value': Number(subscription.due_since) * 1000,<br>      'name': 'duesince'<br>  });<br>}<br>let nextbillingamount = 0;<br>if(invoice !==undefined && invoice.total !== undefined) {<br>  nextbillingamount = parseFloat(parseInt(invoice.total, 10) / 100).toFixed(2);<br>}<br><br>properties.push({<br>  'value': nextbillingamount,<br>  'name': 'nextbillingamount'<br>});<br><br>//custom<br>let myOrder;<br>let syncRulesFields = steps.ChargebeeConfigParams.response.body.third_party_configuration.config_json.cloudElements.syncRulesFields;<br>if (syncRulesFields === undefined) {<br>    syncRulesFields = {<br>        'deal': {<br>        },<br>        'sync': 'false'<br>    };<br><br>} else {<br>    if (syncRulesFields.deal === undefined || syncRulesFields.deal === '') {<br>        syncRulesFields.deal = {};<br>    }<br>}<br>syncRulesFields = JSON.parse(JSON.stringify(syncRulesFields));<br>let customefields = steps.SyncLog.customefields;<br>for (var i = 0; i <span><</span> customefields.length; i++) {<br>    let fld = customefields[i];<br><br>    for (var j = 0; j <span><</span> fld.fields.length; j++) {<br>        var es = fld.fields[j];<br>        var desc = fld.label + ' ' + es[0].replace(/_/g, ' ');<br>        var id = fld.key + '_' + es[0];<br>        if (syncRulesFields.deal[id] !== undefined) {<br>            syncRulesFields.deal[id] = es;<br>        }<br>    }<br>}<br>let customKeys = Object.keys(syncRulesFields.deal);<br>for (var i = 0; i <span><</span> customKeys.length; i++) {<br>    var cKey = customKeys[i];<br>    var cVal = syncRulesFields.deal[cKey];<br>    let subVal;<br>    if (cKey.startsWith('subcst')) {<br>        if (subscription !== undefined) {<br>            subVal = subscription[cVal[0]];<br>        }<br>    } else if (cKey.startsWith('ordercst')) {<br>        if (myOrder !== undefined) {<br>            subVal = myOrder[cVal[0]];<br>        }<br><br>    } else if (cKey.startsWith('custcst')) {<br>        if (customer !== undefined) {<br>            subVal = customer[cVal[0]];<br>        }<br>    }<br>    if (cVal[1] === 'number') {<br>        subVal = getNumber(subVal);<br>        if (cVal.length == 4) {<br>            subVal = parseFloat(parseInt(subVal, 10) / 100).toFixed(2);<br>            properties.push({<br>                'value': subVal,<br>                'name': cKey<br>              });<br>        } else {<br>            properties.push({<br>                'value': subVal,<br>                'name': cKey<br>              });<br>        }<br>    } else if (cVal[1] === 'datetime') {<br>        subVal = getNumber(subVal) * 1000;       <br>        properties.push({<br>            'value': subVal,<br>            'name': cKey<br>          });<br><br>    } else if(subVal !== undefined && subVal!==''){<br>       properties.push({<br>            'value': subVal,<br>            'name': cKey<br>          });<br>    } <br>}<br>//custom<br><br>let associations = {<br>  associatedVids:[contact.vid],<br>};<br><br>  if(contact['associated-company'] !== undefined && contact['associated-company']['company-id'] !== undefined) {<br>    associations.associatedCompanyIds = [contact['associated-company']['company-id']];<br>  }<br><br>let input ={<br>  associations:associations,<br>  properties : properties<br>};<br><br>done({input:input<br>  <br>});<br><br></pre>"
            click step-048 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPlByZXBhcmVEZWFsVXBkYXRlPC90aXRsZT48L2hlYWQ+PGJvZHk+PGI+SmF2YVNjcmlwdDo8L2I+PGJyPjxicj48cHJlPmZ1bmN0aW9uIGdldE51bWJlcih2YWwpIHs8YnI+ICAgIGlmICh2YWwgPT09IHVuZGVmaW5lZCkgezxicj4gICAgICAgIHJldHVybiAwOzxicj4gICAgfTxicj4gICAgbGV0IG51bSA9IE51bWJlcih2YWwpOzxicj4gICAgaWYgKGlzTmFOKG51bSkpIHs8YnI+ICAgICAgICByZXR1cm4gMDs8YnI+ICAgIH08YnI+ICAgIHJldHVybiBudW07PGJyPn08YnI+bGV0IHN1YnNjcmlwdGlvbiA9IHN0ZXBzLkNCSW5mby5zdWJzY3JpcHRpb247PGJyPmxldCBjdXN0b21lciA9IHN0ZXBzLkNCSW5mby5jdXN0b21lcjs8YnI+bGV0IGludm9pY2UgPSBzdGVwcy5DQkluZm8uaW52b2ljZTs8YnI+bGV0IGNvbnRhY3QgPSBzdGVwcy5EZWFsSW5mby5jb250YWN0Ozxicj5sZXQgZGVhbCA9IHN0ZXBzLkRlYWxJbmZvLmRlYWw7PGJyPjxicj5sZXQgcHJvcGVydGllcyA9IFtdOzxicj48YnI+bGV0IGRlYWxzdGFnZSwgY2xvc2VkYXRlOzxicj5pZiAoZGVhbC5wcm9wZXJ0aWVzLmRlYWxzdGFnZSAhPT0gdW5kZWZpbmVkICYmIGRlYWwucHJvcGVydGllcy5kZWFsc3RhZ2UudmFsdWUgIT09IHVuZGVmaW5lZCkgezxicj4gIGRlYWxzdGFnZSA9IGRlYWwucHJvcGVydGllcy5kZWFsc3RhZ2UudmFsdWU7PGJyPn08YnI+aWYgKGRlYWwucHJvcGVydGllcy5jbG9zZWRhdGUgIT09IHVuZGVmaW5lZCAmJiBkZWFsLnByb3BlcnRpZXMuY2xvc2VkYXRlLnZhbHVlICE9PSB1bmRlZmluZWQpIHs8YnI+ICBjbG9zZWRhdGUgPSBkZWFsLnByb3BlcnRpZXMuY2xvc2VkYXRlLnZhbHVlOzxicj59PGJyPjxicj5sZXQgb2xkc3RhdHVzID0gc3RlcHMuRGVhbEluZm8ub2xkU3Vic2NyaXB0aW9uU3RhdHVzOzxicj5pZihvbGRzdGF0dXMgPT09IHVuZGVmaW5lZCkgezxicj4gIG9sZHN0YXR1cyA9ICcnOzxicj59PGJyPmlmIChkZWFsc3RhZ2UgPT09IHVuZGVmaW5lZCkgezxicj4gIGlmICggc3RlcHMuRGVhbEluZm8udHJhaWxTdGFnZSE9PXVuZGVmaW5lZCAmJiBzdWJzY3JpcHRpb24uc3RhdHVzID09PSAnaW5fdHJpYWwnKSB7PGJyPiAgICBwcm9wZXJ0aWVzLnB1c2goezxicj4gICAgICAndmFsdWUnOiBzdGVwcy5EZWFsSW5mby50cmFpbFN0YWdlLDxicj4gICAgICAnbmFtZSc6ICdkZWFsc3RhZ2UnPGJyPiAgICB9KTs8YnI+ICB9PGJyPiAgaWYgKHN0ZXBzLkRlYWxJbmZvLmFjdGl2ZVN0YWdlIT09dW5kZWZpbmVkICYmIHN1YnNjcmlwdGlvbi5zdGF0dXMgPT09ICdhY3RpdmUnKSB7PGJyPiAgICBwcm9wZXJ0aWVzLnB1c2goezxicj4gICAgICAndmFsdWUnOiBzdGVwcy5EZWFsSW5mby5hY3RpdmVTdGFnZSw8YnI+ICAgICAgJ25hbWUnOiAnZGVhbHN0YWdlJzxicj4gICAgfSk7PGJyPiAgfTxicj59IGVsc2Ugezxicj4gIGlmIChzdGVwcy5EZWFsSW5mby5hY3RpdmVTdGFnZSE9PXVuZGVmaW5lZCAmJiBzdWJzY3JpcHRpb24uc3RhdHVzID09PSAnYWN0aXZlJyAmJiAgb2xkc3RhdHVzICE9PSAnYWN0aXZlJykgezxicj4gICAgcHJvcGVydGllcy5wdXNoKHs8YnI+ICAgICAgJ3ZhbHVlJzogc3RlcHMuRGVhbEluZm8uYWN0aXZlU3RhZ2UsPGJyPiAgICAgICduYW1lJzogJ2RlYWxzdGFnZSc8YnI+ICAgIH0pOzxicj4gIH08YnI+fTxicj48YnI+aWYgKGNsb3NlZGF0ZSA9PT0gdW5kZWZpbmVkKSB7PGJyPiAgcHJvcGVydGllcy5wdXNoKHs8YnI+ICAgICAgJ3ZhbHVlJzogTnVtYmVyKHN1YnNjcmlwdGlvbi5jcmVhdGVkX2F0KSAqIDEwMDAsPGJyPiAgICAgICduYW1lJzogJ2Nsb3NlZGF0ZSc8YnI+ICB9KTs8YnI+fTxicj48YnI+bGV0IGNiTXJyID0gMDs8YnI+aWYgKHN1YnNjcmlwdGlvbi5tcnIgIT09IHVuZGVmaW5lZCkgezxicj4gIGNiTXJyID0gcGFyc2VGbG9hdChwYXJzZUludChzdWJzY3JpcHRpb24ubXJyLCAxMCkgLyAxMDApLnRvRml4ZWQoMik7PGJyPn08YnI+PGJyPjxicj5wcm9wZXJ0aWVzLnB1c2goezxicj4gICd2YWx1ZSc6IGNvbnRhY3QudmlkLDxicj4gICduYW1lJzogJ2h1YnNwb3Rjb250YWN0Jzxicj59KTs8YnI+cHJvcGVydGllcy5wdXNoKHs8YnI+ICAndmFsdWUnOiBzdWJzY3JpcHRpb24uaWQsPGJyPiAgJ25hbWUnOiAnc3Vic2NyaXB0aW9uaWQnPGJyPn0pOzxicj5wcm9wZXJ0aWVzLnB1c2goezxicj4gICd2YWx1ZSc6IHN1YnNjcmlwdGlvbi5zdGF0dXMsPGJyPiAgJ25hbWUnOiAnc3Vic2NyaXB0aW9uc3RhdHVzJzxicj59KTs8YnI+PGJyPjxicj5wcm9wZXJ0aWVzLnB1c2goezxicj4gICd2YWx1ZSc6IGNiTXJyLDxicj4gICduYW1lJzogJ3N1YnNjcmlwdGlvbm1ycic8YnI+fSk7PGJyPjxicj48YnI+cHJvcGVydGllcy5wdXNoKHs8YnI+ICAndmFsdWUnOiBzdWJzY3JpcHRpb24ucGxhbl9pZCw8YnI+ICAnbmFtZSc6ICdwcm9kdWN0Jzxicj59KTs8YnI+aWYgKHN1YnNjcmlwdGlvbi5wbGFuX3F1YW50aXR5KSB7PGJyPiAgcHJvcGVydGllcy5wdXNoKHs8YnI+ICAgICd2YWx1ZSc6IHN1YnNjcmlwdGlvbi5wbGFuX3F1YW50aXR5LDxicj4gICAgJ25hbWUnOiAncGxhbnF1YW50aXR5Jzxicj4gIH0pOzxicj59PGJyPjxicj5sZXQgc2V0dXBmZWUgPSAwOzxicj48YnI+aWYgKHN1YnNjcmlwdGlvbi5zZXR1cF9mZWUgIT09IHVuZGVmaW5lZCkgezxicj4gIHNldHVwZmVlID0gcGFyc2VGbG9hdChwYXJzZUludChzdWJzY3JpcHRpb24uc2V0dXBfZmVlLCAxMCkgLyAxMDApLnRvRml4ZWQoMik7PGJyPn08YnI+cHJvcGVydGllcy5wdXNoKHs8YnI+ICAndmFsdWUnOiBzZXR1cGZlZSw8YnI+ICAnbmFtZSc6ICdzZXR1cGZlZSc8YnI+fSk7PGJyPjxicj5sZXQgZHVlaW52b2ljZXNjb3VudCA9IDA7PGJyPmlmIChzdWJzY3JpcHRpb24uZHVlX2ludm9pY2VzX2NvdW50ICE9PSB1bmRlZmluZWQpIHs8YnI+ICBkdWVpbnZvaWNlc2NvdW50ID0gTnVtYmVyKHN1YnNjcmlwdGlvbi5kdWVfaW52b2ljZXNfY291bnQpOzxicj59PGJyPjxicj5wcm9wZXJ0aWVzLnB1c2goezxicj4gICd2YWx1ZSc6IGR1ZWludm9pY2VzY291bnQsPGJyPiAgJ25hbWUnOiAnZHVlaW52b2ljZXNjb3VudCc8YnI+fSk7PGJyPmlmIChzdWJzY3JpcHRpb24ucmVtYWluaW5nX2JpbGxpbmdfY3ljbGVzICE9PSB1bmRlZmluZWQpIHs8YnI+ICBwcm9wZXJ0aWVzLnB1c2goezxicj4gICAgJ3ZhbHVlJzogc3Vic2NyaXB0aW9uLnJlbWFpbmluZ19iaWxsaW5nX2N5Y2xlcyw8YnI+ICAgICduYW1lJzogJ3JlbWFpbmluZ2JpbGxpbmdjeWNsZXMnPGJyPiAgfSk7PGJyPn08YnI+PGJyPmlmIChzdWJzY3JpcHRpb24ucG9fbnVtYmVyICE9PSB1bmRlZmluZWQpIHs8YnI+ICBwcm9wZXJ0aWVzLnB1c2goezxicj4gICAgJ3ZhbHVlJzogc3Vic2NyaXB0aW9uLnBvX251bWJlciw8YnI+ICAgICduYW1lJzogJ3BvbnVtYmVyJzxicj4gIH0pOzxicj59PGJyPjxicj5sZXQgdG90YWxkdWVzID0gMDs8YnI+aWYgKHN1YnNjcmlwdGlvbi50b3RhbF9kdWVzICE9PSB1bmRlZmluZWQpIHs8YnI+ICB0b3RhbGR1ZXMgPSBwYXJzZUZsb2F0KHBhcnNlSW50KHN1YnNjcmlwdGlvbi50b3RhbF9kdWVzLCAxMCkgLyAxMDApLnRvRml4ZWQoMik7PGJyPn08YnI+cHJvcGVydGllcy5wdXNoKHs8YnI+ICAndmFsdWUnOiB0b3RhbGR1ZXMsPGJyPiAgJ25hbWUnOiAndG90YWxkdWVzJzxicj59KTs8YnI+aWYgKHN1YnNjcmlwdGlvbi5uZXh0X2JpbGxpbmdfYXQgIT09IHVuZGVmaW5lZCkgezxicj4gIHByb3BlcnRpZXMucHVzaCh7PGJyPiAgICAndmFsdWUnOiBOdW1iZXIoc3Vic2NyaXB0aW9uLm5leHRfYmlsbGluZ19hdCkgKiAxMDAwLDxicj4gICAgJ25hbWUnOiAnbmV4dGJpbGxpbmdhdCc8YnI+ICB9KTs8YnI+fTxicj5pZiAoc3Vic2NyaXB0aW9uLmR1ZV9zaW5jZSAhPT0gdW5kZWZpbmVkKSB7PGJyPiAgcHJvcGVydGllcy5wdXNoKHs8YnI+ICAgICd2YWx1ZSc6IE51bWJlcihzdWJzY3JpcHRpb24uZHVlX3NpbmNlKSAqIDEwMDAsPGJyPiAgICAnbmFtZSc6ICdkdWVzaW5jZSc8YnI+ICB9KTs8YnI+fTxicj5sZXQgbmV4dGJpbGxpbmdhbW91bnQgPSAwOzxicj5pZiAoaW52b2ljZSAhPT0gdW5kZWZpbmVkICYmIGludm9pY2UudG90YWwgIT09IHVuZGVmaW5lZCkgezxicj4gIG5leHRiaWxsaW5nYW1vdW50ID0gcGFyc2VGbG9hdChwYXJzZUludChpbnZvaWNlLnRvdGFsLCAxMCkgLyAxMDApLnRvRml4ZWQoMik7PGJyPn08YnI+PGJyPnByb3BlcnRpZXMucHVzaCh7PGJyPiAgJ3ZhbHVlJzogbmV4dGJpbGxpbmdhbW91bnQsPGJyPiAgJ25hbWUnOiAnbmV4dGJpbGxpbmdhbW91bnQnPGJyPn0pOzxicj48YnI+Ly9jdXN0b208YnI+bGV0IG15T3JkZXI7PGJyPmxldCBzeW5jUnVsZXNGaWVsZHMgPSBzdGVwcy5DaGFyZ2ViZWVDb25maWdQYXJhbXMucmVzcG9uc2UuYm9keS50aGlyZF9wYXJ0eV9jb25maWd1cmF0aW9uLmNvbmZpZ19qc29uLmNsb3VkRWxlbWVudHMuc3luY1J1bGVzRmllbGRzOzxicj5pZiAoc3luY1J1bGVzRmllbGRzID09PSB1bmRlZmluZWQpIHs8YnI+ICAgIHN5bmNSdWxlc0ZpZWxkcyA9IHs8YnI+ICAgICAgICAnZGVhbCc6IHs8YnI+ICAgICAgICB9LDxicj4gICAgICAgICdzeW5jJzogJ2ZhbHNlJzxicj4gICAgfTs8YnI+PGJyPn0gZWxzZSB7PGJyPiAgICBpZiAoc3luY1J1bGVzRmllbGRzLmRlYWwgPT09IHVuZGVmaW5lZCB8fCBzeW5jUnVsZXNGaWVsZHMuZGVhbCA9PT0gJycpIHs8YnI+ICAgICAgICBzeW5jUnVsZXNGaWVsZHMuZGVhbCA9IHt9Ozxicj4gICAgfTxicj59PGJyPnN5bmNSdWxlc0ZpZWxkcyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoc3luY1J1bGVzRmllbGRzKSk7PGJyPmxldCBjdXN0b21lZmllbGRzID0gc3RlcHMuU3luY0xvZy5jdXN0b21lZmllbGRzOzxicj5mb3IgKHZhciBpID0gMDsgaSA8c3Bhbj48PC9zcGFuPiBjdXN0b21lZmllbGRzLmxlbmd0aDsgaSsrKSB7PGJyPiAgICBsZXQgZmxkID0gY3VzdG9tZWZpZWxkc1tpXTs8YnI+PGJyPiAgICBmb3IgKHZhciBqID0gMDsgaiA8c3Bhbj48PC9zcGFuPiBmbGQuZmllbGRzLmxlbmd0aDsgaisrKSB7PGJyPiAgICAgICAgdmFyIGVzID0gZmxkLmZpZWxkc1tqXTs8YnI+ICAgICAgICB2YXIgZGVzYyA9IGZsZC5sYWJlbCArICcgJyArIGVzWzBdLnJlcGxhY2UoL18vZywgJyAnKTs8YnI+ICAgICAgICB2YXIgaWQgPSBmbGQua2V5ICsgJ18nICsgZXNbMF07PGJyPiAgICAgICAgaWYgKHN5bmNSdWxlc0ZpZWxkcy5kZWFsW2lkXSAhPT0gdW5kZWZpbmVkKSB7PGJyPiAgICAgICAgICAgIHN5bmNSdWxlc0ZpZWxkcy5kZWFsW2lkXSA9IGVzOzxicj4gICAgICAgIH08YnI+ICAgIH08YnI+fTxicj5sZXQgY3VzdG9tS2V5cyA9IE9iamVjdC5rZXlzKHN5bmNSdWxlc0ZpZWxkcy5kZWFsKTs8YnI+Zm9yICh2YXIgaSA9IDA7IGkgPHNwYW4+PDwvc3Bhbj4gY3VzdG9tS2V5cy5sZW5ndGg7IGkrKykgezxicj4gICAgdmFyIGNLZXkgPSBjdXN0b21LZXlzW2ldOzxicj4gICAgdmFyIGNWYWwgPSBzeW5jUnVsZXNGaWVsZHMuZGVhbFtjS2V5XTs8YnI+ICAgIGxldCBzdWJWYWw7PGJyPiAgICBpZiAoY0tleS5zdGFydHNXaXRoKCdzdWJjc3QnKSkgezxicj4gICAgICAgIGlmIChzdWJzY3JpcHRpb24gIT09IHVuZGVmaW5lZCkgezxicj4gICAgICAgICAgICBzdWJWYWwgPSBzdWJzY3JpcHRpb25bY1ZhbFswXV07PGJyPiAgICAgICAgfTxicj4gICAgfSBlbHNlIGlmIChjS2V5LnN0YXJ0c1dpdGgoJ29yZGVyY3N0JykpIHs8YnI+ICAgICAgICBpZiAobXlPcmRlciAhPT0gdW5kZWZpbmVkKSB7PGJyPiAgICAgICAgICAgIHN1YlZhbCA9IG15T3JkZXJbY1ZhbFswXV07PGJyPiAgICAgICAgfTxicj48YnI+ICAgIH0gZWxzZSBpZiAoY0tleS5zdGFydHNXaXRoKCdjdXN0Y3N0JykpIHs8YnI+ICAgICAgICBpZiAoY3VzdG9tZXIgIT09IHVuZGVmaW5lZCkgezxicj4gICAgICAgICAgICBzdWJWYWwgPSBjdXN0b21lcltjVmFsWzBdXTs8YnI+ICAgICAgICB9PGJyPiAgICB9PGJyPiAgICBpZiAoY1ZhbFsxXSA9PT0gJ251bWJlcicpIHs8YnI+ICAgICAgICBzdWJWYWwgPSBnZXROdW1iZXIoc3ViVmFsKTs8YnI+ICAgICAgICBpZiAoY1ZhbC5sZW5ndGggPT0gNCkgezxicj4gICAgICAgICAgICBzdWJWYWwgPSBwYXJzZUZsb2F0KHBhcnNlSW50KHN1YlZhbCwgMTApIC8gMTAwKS50b0ZpeGVkKDIpOzxicj4gICAgICAgICAgICBwcm9wZXJ0aWVzLnB1c2goezxicj4gICAgICAgICAgICAgICAgJ3ZhbHVlJzogc3ViVmFsLDxicj4gICAgICAgICAgICAgICAgJ25hbWUnOiBjS2V5PGJyPiAgICAgICAgICAgICAgfSk7PGJyPiAgICAgICAgfSBlbHNlIHs8YnI+ICAgICAgICAgICAgcHJvcGVydGllcy5wdXNoKHs8YnI+ICAgICAgICAgICAgICAgICd2YWx1ZSc6IHN1YlZhbCw8YnI+ICAgICAgICAgICAgICAgICduYW1lJzogY0tleTxicj4gICAgICAgICAgICAgIH0pOzxicj4gICAgICAgIH08YnI+ICAgIH0gZWxzZSBpZiAoY1ZhbFsxXSA9PT0gJ2RhdGV0aW1lJykgezxicj4gICAgICAgIHN1YlZhbCA9IGdldE51bWJlcihzdWJWYWwpICogMTAwMDsgICAgICAgPGJyPiAgICAgICAgcHJvcGVydGllcy5wdXNoKHs8YnI+ICAgICAgICAgICAgJ3ZhbHVlJzogc3ViVmFsLDxicj4gICAgICAgICAgICAnbmFtZSc6IGNLZXk8YnI+ICAgICAgICAgIH0pOzxicj48YnI+ICAgIH1lbHNlIGlmKHN1YlZhbCAhPT0gdW5kZWZpbmVkICYmIHN1YlZhbCE9PScnKXs8YnI+ICAgICAgIHByb3BlcnRpZXMucHVzaCh7PGJyPiAgICAgICAgICAgICd2YWx1ZSc6IHN1YlZhbCw8YnI+ICAgICAgICAgICAgJ25hbWUnOiBjS2V5PGJyPiAgICAgICAgICB9KTs8YnI+ICAgIH0gPGJyPn08YnI+Ly9jdXN0b208YnI+ZG9uZSh7IGlucHV0OiB7IHByb3BlcnRpZXM6IHByb3BlcnRpZXMgfTxicj59KTs8L3ByZT48YnI+PGI+UkFXIEpTT046PC9iPjxicj48YnI+PHByZT57PGJyPiAgJ29uU3VjY2Vzcyc6IFs8YnI+ICAgICdVcGRhdGVEZWFsSW5IdWJTcG90Jzxicj4gIF0sPGJyPiAgJ29uRmFpbHVyZSc6IFtdLDxicj4gICduYW1lJzogJ1ByZXBhcmVEZWFsVXBkYXRlJyw8YnI+ICAndHlwZSc6ICdzY3JpcHQnLDxicj4gICdwcm9wZXJ0aWVzJzogezxicj4gICAgJ2JvZHknOiAnZnVuY3Rpb24gZ2V0TnVtYmVyKHZhbCkge1xuICAgIGlmICh2YWwgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgbGV0IG51bSA9IE51bWJlcih2YWwpO1xuICAgIGlmIChpc05hTihudW0pKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgICByZXR1cm4gbnVtO1xufVxubGV0IHN1YnNjcmlwdGlvbiA9IHN0ZXBzLkNCSW5mby5zdWJzY3JpcHRpb247XG5sZXQgY3VzdG9tZXIgPSBzdGVwcy5DQkluZm8uY3VzdG9tZXI7XG5sZXQgaW52b2ljZSA9IHN0ZXBzLkNCSW5mby5pbnZvaWNlO1xubGV0IGNvbnRhY3QgPSBzdGVwcy5EZWFsSW5mby5jb250YWN0O1xubGV0IGRlYWwgPSBzdGVwcy5EZWFsSW5mby5kZWFsO1xuXG5sZXQgcHJvcGVydGllcyA9IFtdO1xuXG5sZXQgZGVhbHN0YWdlLCBjbG9zZWRhdGU7XG5pZiAoZGVhbC5wcm9wZXJ0aWVzLmRlYWxzdGFnZSAhPT0gdW5kZWZpbmVkICYmIGRlYWwucHJvcGVydGllcy5kZWFsc3RhZ2UudmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICBkZWFsc3RhZ2UgPSBkZWFsLnByb3BlcnRpZXMuZGVhbHN0YWdlLnZhbHVlO1xufVxuaWYgKGRlYWwucHJvcGVydGllcy5jbG9zZWRhdGUgIT09IHVuZGVmaW5lZCAmJiBkZWFsLnByb3BlcnRpZXMuY2xvc2VkYXRlLnZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgY2xvc2VkYXRlID0gZGVhbC5wcm9wZXJ0aWVzLmNsb3NlZGF0ZS52YWx1ZTtcbn1cblxubGV0IG9sZHN0YXR1cyA9IHN0ZXBzLkRlYWxJbmZvLm9sZFN1YnNjcmlwdGlvblN0YXR1cztcbmlmKG9sZHN0YXR1cyA9PT0gdW5kZWZpbmVkKSB7XG4gIG9sZHN0YXR1cyA9IFwnXCc7XG59XG5pZiAoZGVhbHN0YWdlID09PSB1bmRlZmluZWQpIHtcbiAgaWYgKCBzdGVwcy5EZWFsSW5mby50cmFpbFN0YWdlIT09dW5kZWZpbmVkICYmIHN1YnNjcmlwdGlvbi5zdGF0dXMgPT09IFwnaW5fdHJpYWxcJykge1xuICAgIHByb3BlcnRpZXMucHVzaCh7XG4gICAgICBcJ3ZhbHVlXCc6IHN0ZXBzLkRlYWxJbmZvLnRyYWlsU3RhZ2UsXG4gICAgICBcJ25hbWVcJzogXCdkZWFsc3RhZ2VcJ1xuICAgIH0pO1xuICB9XG4gIGlmIChzdGVwcy5EZWFsSW5mby5hY3RpdmVTdGFnZSE9PXVuZGVmaW5lZCAmJiBzdWJzY3JpcHRpb24uc3RhdHVzID09PSBcJ2FjdGl2ZVwnKSB7XG4gICAgcHJvcGVydGllcy5wdXNoKHtcbiAgICAgIFwndmFsdWVcJzogc3RlcHMuRGVhbEluZm8uYWN0aXZlU3RhZ2UsXG4gICAgICBcJ25hbWVcJzogXCdkZWFsc3RhZ2VcJ1xuICAgIH0pO1xuICB9XG59IGVsc2Uge1xuICBpZiAoc3RlcHMuRGVhbEluZm8uYWN0aXZlU3RhZ2UhPT11bmRlZmluZWQgJiYgc3Vic2NyaXB0aW9uLnN0YXR1cyA9PT0gXCdhY3RpdmVcJyAmJiAgb2xkc3RhdHVzICE9PSBcJ2FjdGl2ZVwnKSB7XG4gICAgcHJvcGVydGllcy5wdXNoKHtcbiAgICAgIFwndmFsdWVcJzogc3RlcHMuRGVhbEluZm8uYWN0aXZlU3RhZ2UsXG4gICAgICBcJ25hbWVcJzogXCdkZWFsc3RhZ2VcJ1xuICAgIH0pO1xuICB9XG59XG5cbmlmIChjbG9zZWRhdGUgPT09IHVuZGVmaW5lZCkge1xuICBwcm9wZXJ0aWVzLnB1c2goe1xuICAgICAgXCd2YWx1ZVwnOiBOdW1iZXIoc3Vic2NyaXB0aW9uLmNyZWF0ZWRfYXQpICogMTAwMCxcbiAgICAgIFwnbmFtZVwnOiBcJ2Nsb3NlZGF0ZVwnXG4gIH0pO1xufVxuXG5sZXQgY2JNcnIgPSAwO1xuaWYgKHN1YnNjcmlwdGlvbi5tcnIgIT09IHVuZGVmaW5lZCkge1xuICBjYk1yciA9IHBhcnNlRmxvYXQocGFyc2VJbnQoc3Vic2NyaXB0aW9uLm1yciwgMTApIC8gMTAwKS50b0ZpeGVkKDIpO1xufVxuXG5cbnByb3BlcnRpZXMucHVzaCh7XG4gIFwndmFsdWVcJzogY29udGFjdC52aWQsXG4gIFwnbmFtZVwnOiBcJ2h1YnNwb3Rjb250YWN0XCdcbn0pO1xucHJvcGVydGllcy5wdXNoKHtcbiAgXCd2YWx1ZVwnOiBzdWJzY3JpcHRpb24uaWQsXG4gIFwnbmFtZVwnOiBcJ3N1YnNjcmlwdGlvbmlkXCdcbn0pO1xucHJvcGVydGllcy5wdXNoKHtcbiAgXCd2YWx1ZVwnOiBzdWJzY3JpcHRpb24uc3RhdHVzLFxuICBcJ25hbWVcJzogXCdzdWJzY3JpcHRpb25zdGF0dXNcJ1xufSk7XG5cblxucHJvcGVydGllcy5wdXNoKHtcbiAgXCd2YWx1ZVwnOiBjYk1ycixcbiAgXCduYW1lXCc6IFwnc3Vic2NyaXB0aW9ubXJyXCdcbn0pO1xuXG5cbnByb3BlcnRpZXMucHVzaCh7XG4gIFwndmFsdWVcJzogc3Vic2NyaXB0aW9uLnBsYW5faWQsXG4gIFwnbmFtZVwnOiBcJ3Byb2R1Y3RcJ1xufSk7XG5pZiAoc3Vic2NyaXB0aW9uLnBsYW5fcXVhbnRpdHkpIHtcbiAgcHJvcGVydGllcy5wdXNoKHtcbiAgICBcJ3ZhbHVlXCc6IHN1YnNjcmlwdGlvbi5wbGFuX3F1YW50aXR5LFxuICAgIFwnbmFtZVwnOiBcJ3BsYW5xdWFudGl0eVwnXG4gIH0pO1xufVxuXG5sZXQgc2V0dXBmZWUgPSAwO1xuXG5pZiAoc3Vic2NyaXB0aW9uLnNldHVwX2ZlZSAhPT0gdW5kZWZpbmVkKSB7XG4gIHNldHVwZmVlID0gcGFyc2VGbG9hdChwYXJzZUludChzdWJzY3JpcHRpb24uc2V0dXBfZmVlLCAxMCkgLyAxMDApLnRvRml4ZWQoMik7XG59XG5wcm9wZXJ0aWVzLnB1c2goe1xuICBcJ3ZhbHVlXCc6IHNldHVwZmVlLFxuICBcJ25hbWVcJzogXCdzZXR1cGZlZVwnXG59KTtcblxubGV0IGR1ZWludm9pY2VzY291bnQgPSAwO1xuaWYgKHN1YnNjcmlwdGlvbi5kdWVfaW52b2ljZXNfY291bnQgIT09IHVuZGVmaW5lZCkge1xuICBkdWVpbnZvaWNlc2NvdW50ID0gTnVtYmVyKHN1YnNjcmlwdGlvbi5kdWVfaW52b2ljZXNfY291bnQpO1xufVxuXG5wcm9wZXJ0aWVzLnB1c2goe1xuICBcJ3ZhbHVlXCc6IGR1ZWludm9pY2VzY291bnQsXG4gIFwnbmFtZVwnOiBcJ2R1ZWludm9pY2VzY291bnRcJ1xufSk7XG5pZiAoc3Vic2NyaXB0aW9uLnJlbWFpbmluZ19iaWxsaW5nX2N5Y2xlcyAhPT0gdW5kZWZpbmVkKSB7XG4gIHByb3BlcnRpZXMucHVzaCh7XG4gICAgXCd2YWx1ZVwnOiBzdWJzY3JpcHRpb24ucmVtYWluaW5nX2JpbGxpbmdfY3ljbGVzLFxuICAgIFwnbmFtZVwnOiBcJ3JlbWFpbmluZ2JpbGxpbmdjeWNsZXNcJ1xuICB9KTtcbn1cblxuaWYgKHN1YnNjcmlwdGlvbi5wb19udW1iZXIgIT09IHVuZGVmaW5lZCkge1xuICBwcm9wZXJ0aWVzLnB1c2goe1xuICAgIFwndmFsdWVcJzogc3Vic2NyaXB0aW9uLnBvX251bWJlcixcbiAgICBcJ25hbWVcJzogXCdwb251bWJlclwnXG4gIH0pO1xufVxuXG5sZXQgdG90YWxkdWVzID0gMDtcbmlmIChzdWJzY3JpcHRpb24udG90YWxfZHVlcyAhPT0gdW5kZWZpbmVkKSB7XG4gIHRvdGFsZHVlcyA9IHBhcnNlRmxvYXQocGFyc2VJbnQoc3Vic2NyaXB0aW9uLnRvdGFsX2R1ZXMsIDEwKSAvIDEwMCkudG9GaXhlZCgyKTtcbn1cbnByb3BlcnRpZXMucHVzaCh7XG4gIFwndmFsdWVcJzogdG90YWxkdWVzLFxuICBcJ25hbWVcJzogXCd0b3RhbGR1ZXNcJ1xufSk7XG5pZiAoc3Vic2NyaXB0aW9uLm5leHRfYmlsbGluZ19hdCAhPT0gdW5kZWZpbmVkKSB7XG4gIHByb3BlcnRpZXMucHVzaCh7XG4gICAgXCd2YWx1ZVwnOiBOdW1iZXIoc3Vic2NyaXB0aW9uLm5leHRfYmlsbGluZ19hdCkgKiAxMDAwLFxuICAgIFwnbmFtZVwnOiBcJ25leHRiaWxsaW5nYXRcJ1xuICB9KTtcbn1cbmlmIChzdWJzY3JpcHRpb24uZHVlX3NpbmNlICE9PSB1bmRlZmluZWQpIHtcbiAgcHJvcGVydGllcy5wdXNoKHtcbiAgICBcJ3ZhbHVlXCc6IE51bWJlcihzdWJzY3JpcHRpb24uZHVlX3NpbmNlKSAqIDEwMDAsXG4gICAgXCduYW1lXCc6IFwnZHVlc2luY2VcJ1xuICB9KTtcbn1cbmxldCBuZXh0YmlsbGluZ2Ftb3VudCA9IDA7XG5pZiAoaW52b2ljZSAhPT0gdW5kZWZpbmVkICYmIGludm9pY2UudG90YWwgIT09IHVuZGVmaW5lZCkge1xuICBuZXh0YmlsbGluZ2Ftb3VudCA9IHBhcnNlRmxvYXQocGFyc2VJbnQoaW52b2ljZS50b3RhbCwgMTApIC8gMTAwKS50b0ZpeGVkKDIpO1xufVxuXG5wcm9wZXJ0aWVzLnB1c2goe1xuICBcJ3ZhbHVlXCc6IG5leHRiaWxsaW5nYW1vdW50LFxuICBcJ25hbWVcJzogXCduZXh0YmlsbGluZ2Ftb3VudFwnXG59KTtcblxuLy9jdXN0b21cbmxldCBteU9yZGVyO1xubGV0IHN5bmNSdWxlc0ZpZWxkcyA9IHN0ZXBzLkNoYXJnZWJlZUNvbmZpZ1BhcmFtcy5yZXNwb25zZS5ib2R5LnRoaXJkX3BhcnR5X2NvbmZpZ3VyYXRpb24uY29uZmlnX2pzb24uY2xvdWRFbGVtZW50cy5zeW5jUnVsZXNGaWVsZHM7XG5pZiAoc3luY1J1bGVzRmllbGRzID09PSB1bmRlZmluZWQpIHtcbiAgICBzeW5jUnVsZXNGaWVsZHMgPSB7XG4gICAgICAgIFwnZGVhbFwnOiB7XG4gICAgICAgIH0sXG4gICAgICAgIFwnc3luY1wnOiBcJ2ZhbHNlXCdcbiAgICB9O1xuXG59IGVsc2Uge1xuICAgIGlmIChzeW5jUnVsZXNGaWVsZHMuZGVhbCA9PT0gdW5kZWZpbmVkIHx8IHN5bmNSdWxlc0ZpZWxkcy5kZWFsID09PSBcJ1wnKSB7XG4gICAgICAgIHN5bmNSdWxlc0ZpZWxkcy5kZWFsID0ge307XG4gICAgfVxufVxuc3luY1J1bGVzRmllbGRzID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShzeW5jUnVsZXNGaWVsZHMpKTtcbmxldCBjdXN0b21lZmllbGRzID0gc3RlcHMuU3luY0xvZy5jdXN0b21lZmllbGRzO1xuZm9yICh2YXIgaSA9IDA7IGkgPHNwYW4+PDwvc3Bhbj4gY3VzdG9tZWZpZWxkcy5sZW5ndGg7IGkrKykge1xuICAgIGxldCBmbGQgPSBjdXN0b21lZmllbGRzW2ldO1xuXG4gICAgZm9yICh2YXIgaiA9IDA7IGogPHNwYW4+PDwvc3Bhbj4gZmxkLmZpZWxkcy5sZW5ndGg7IGorKykge1xuICAgICAgICB2YXIgZXMgPSBmbGQuZmllbGRzW2pdO1xuICAgICAgICB2YXIgZGVzYyA9IGZsZC5sYWJlbCArIFwnIFwnICsgZXNbMF0ucmVwbGFjZSgvXy9nLCBcJyBcJyk7XG4gICAgICAgIHZhciBpZCA9IGZsZC5rZXkgKyBcJ19cJyArIGVzWzBdO1xuICAgICAgICBpZiAoc3luY1J1bGVzRmllbGRzLmRlYWxbaWRdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHN5bmNSdWxlc0ZpZWxkcy5kZWFsW2lkXSA9IGVzO1xuICAgICAgICB9XG4gICAgfVxufVxubGV0IGN1c3RvbUtleXMgPSBPYmplY3Qua2V5cyhzeW5jUnVsZXNGaWVsZHMuZGVhbCk7XG5mb3IgKHZhciBpID0gMDsgaSA8c3Bhbj48PC9zcGFuPiBjdXN0b21LZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGNLZXkgPSBjdXN0b21LZXlzW2ldO1xuICAgIHZhciBjVmFsID0gc3luY1J1bGVzRmllbGRzLmRlYWxbY0tleV07XG4gICAgbGV0IHN1YlZhbDtcbiAgICBpZiAoY0tleS5zdGFydHNXaXRoKFwnc3ViY3N0XCcpKSB7XG4gICAgICAgIGlmIChzdWJzY3JpcHRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgc3ViVmFsID0gc3Vic2NyaXB0aW9uW2NWYWxbMF1dO1xuICAgICAgICB9XG4gICAgfSBlbHNlIGlmIChjS2V5LnN0YXJ0c1dpdGgoXCdvcmRlcmNzdFwnKSkge1xuICAgICAgICBpZiAobXlPcmRlciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBzdWJWYWwgPSBteU9yZGVyW2NWYWxbMF1dO1xuICAgICAgICB9XG5cbiAgICB9IGVsc2UgaWYgKGNLZXkuc3RhcnRzV2l0aChcJ2N1c3Rjc3RcJykpIHtcbiAgICAgICAgaWYgKGN1c3RvbWVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHN1YlZhbCA9IGN1c3RvbWVyW2NWYWxbMF1dO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChjVmFsWzFdID09PSBcJ251bWJlclwnKSB7XG4gICAgICAgIHN1YlZhbCA9IGdldE51bWJlcihzdWJWYWwpO1xuICAgICAgICBpZiAoY1ZhbC5sZW5ndGggPT0gNCkge1xuICAgICAgICAgICAgc3ViVmFsID0gcGFyc2VGbG9hdChwYXJzZUludChzdWJWYWwsIDEwKSAvIDEwMCkudG9GaXhlZCgyKTtcbiAgICAgICAgICAgIHByb3BlcnRpZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgXCd2YWx1ZVwnOiBzdWJWYWwsXG4gICAgICAgICAgICAgICAgXCduYW1lXCc6IGNLZXlcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwcm9wZXJ0aWVzLnB1c2goe1xuICAgICAgICAgICAgICAgIFwndmFsdWVcJzogc3ViVmFsLFxuICAgICAgICAgICAgICAgIFwnbmFtZVwnOiBjS2V5XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSBlbHNlIGlmIChjVmFsWzFdID09PSBcJ2RhdGV0aW1lXCcpIHtcbiAgICAgICAgc3ViVmFsID0gZ2V0TnVtYmVyKHN1YlZhbCkgKiAxMDAwOyAgICAgICBcbiAgICAgICAgcHJvcGVydGllcy5wdXNoKHtcbiAgICAgICAgICAgIFwndmFsdWVcJzogc3ViVmFsLFxuICAgICAgICAgICAgXCduYW1lXCc6IGNLZXlcbiAgICAgICAgICB9KTtcblxuICAgIH1lbHNlIGlmKHN1YlZhbCAhPT0gdW5kZWZpbmVkICYmIHN1YlZhbCE9PVwnXCcpe1xuICAgICAgIHByb3BlcnRpZXMucHVzaCh7XG4gICAgICAgICAgICBcJ3ZhbHVlXCc6IHN1YlZhbCxcbiAgICAgICAgICAgIFwnbmFtZVwnOiBjS2V5XG4gICAgICAgICAgfSk7XG4gICAgfSBcbn1cbi8vY3VzdG9tXG5kb25lKHsgaW5wdXQ6IHsgcHJvcGVydGllczogcHJvcGVydGllcyB9XG59KTsnPGJyPiAgfTxicj59PC9wcmU+PC9ib2R5PjwvaHRtbD4='));document.close();" "JavaScript:<br><pre>function getNumber(val) {<br>    if (val === undefined) {<br>        return 0;<br>    }<br>    let num = Number(val);<br>    if (isNaN(num)) {<br>        return 0;<br>    }<br>    return num;<br>}<br>let subscription = steps.CBInfo.subscription;<br>let customer = steps.CBInfo.customer;<br>let invoice = steps.CBInfo.invoice;<br>let contact = steps.DealInfo.contact;<br>let deal = steps.DealInfo.deal;<br><br>let properties = [];<br><br>let dealstage, closedate;<br>if (deal.properties.dealstage !== undefined && deal.properties.dealstage.value !== undefined) {<br>  dealstage = deal.properties.dealstage.value;<br>}<br>if (deal.properties.closedate !== undefined && deal.properties.closedate.value !== undefined) {<br>  closedate = deal.properties.closedate.value;<br>}<br><br>let oldstatus = steps.DealInfo.oldSubscriptionStatus;<br>if(oldstatus === undefined) {<br>  oldstatus = '';<br>}<br>if (dealstage === undefined) {<br>  if ( steps.DealInfo.trailStage!==undefined && subscription.status === 'in_trial') {<br>    properties.push({<br>      'value': steps.DealInfo.trailStage,<br>      'name': 'dealstage'<br>    });<br>  }<br>  if (steps.DealInfo.activeStage!==undefined && subscription.status === 'active') {<br>    properties.push({<br>      'value': steps.DealInfo.activeStage,<br>      'name': 'dealstage'<br>    });<br>  }<br>} else {<br>  if (steps.DealInfo.activeStage!==undefined && subscription.status === 'active' &&  oldstatus !== 'active') {<br>    properties.push({<br>      'value': steps.DealInfo.activeStage,<br>      'name': 'dealstage'<br>    });<br>  }<br>}<br><br>if (closedate === undefined) {<br>  properties.push({<br>      'value': Number(subscription.created_at) * 1000,<br>      'name': 'closedate'<br>  });<br>}<br><br>let cbMrr = 0;<br>if (subscription.mrr !== undefined) {<br>  cbMrr = parseFloat(parseInt(subscription.mrr, 10) / 100).toFixed(2);<br>}<br><br><br>properties.push({<br>  'value': contact.vid,<br>  'name': 'hubspotcontact'<br>});<br>properties.push({<br>  'value': subscription.id,<br>  'name': 'subscriptionid'<br>});<br>properties.push({<br>  'value': subscription.status,<br>  'name': 'subscriptionstatus'<br>});<br><br><br>properties.push({<br>  'value': cbMrr,<br>  'name': 'subscriptionmrr'<br>});<br><br><br>properties.push({<br>  'value': subscription.plan_id,<br>  'name': 'product'<br>});<br>if (subscription.plan_quantity) {<br>  properties.push({<br>    'value': subscription.plan_quantity,<br>    'name': 'planquantity'<br>  });<br>}<br><br>let setupfee = 0;<br><br>if (subscription.setup_fee !== undefined) {<br>  setupfee = parseFloat(parseInt(subscription.setup_fee, 10) / 100).toFixed(2);<br>}<br>properties.push({<br>  'value': setupfee,<br>  'name': 'setupfee'<br>});<br><br>let dueinvoicescount = 0;<br>if (subscription.due_invoices_count !== undefined) {<br>  dueinvoicescount = Number(subscription.due_invoices_count);<br>}<br><br>properties.push({<br>  'value': dueinvoicescount,<br>  'name': 'dueinvoicescount'<br>});<br>if (subscription.remaining_billing_cycles !== undefined) {<br>  properties.push({<br>    'value': subscription.remaining_billing_cycles,<br>    'name': 'remainingbillingcycles'<br>  });<br>}<br><br>if (subscription.po_number !== undefined) {<br>  properties.push({<br>    'value': subscription.po_number,<br>    'name': 'ponumber'<br>  });<br>}<br><br>let totaldues = 0;<br>if (subscription.total_dues !== undefined) {<br>  totaldues = parseFloat(parseInt(subscription.total_dues, 10) / 100).toFixed(2);<br>}<br>properties.push({<br>  'value': totaldues,<br>  'name': 'totaldues'<br>});<br>if (subscription.next_billing_at !== undefined) {<br>  properties.push({<br>    'value': Number(subscription.next_billing_at) * 1000,<br>    'name': 'nextbillingat'<br>  });<br>}<br>if (subscription.due_since !== undefined) {<br>  properties.push({<br>    'value': Number(subscription.due_since) * 1000,<br>    'name': 'duesince'<br>  });<br>}<br>let nextbillingamount = 0;<br>if (invoice !== undefined && invoice.total !== undefined) {<br>  nextbillingamount = parseFloat(parseInt(invoice.total, 10) / 100).toFixed(2);<br>}<br><br>properties.push({<br>  'value': nextbillingamount,<br>  'name': 'nextbillingamount'<br>});<br><br>//custom<br>let myOrder;<br>let syncRulesFields = steps.ChargebeeConfigParams.response.body.third_party_configuration.config_json.cloudElements.syncRulesFields;<br>if (syncRulesFields === undefined) {<br>    syncRulesFields = {<br>        'deal': {<br>        },<br>        'sync': 'false'<br>    };<br><br>} else {<br>    if (syncRulesFields.deal === undefined || syncRulesFields.deal === '') {<br>        syncRulesFields.deal = {};<br>    }<br>}<br>syncRulesFields = JSON.parse(JSON.stringify(syncRulesFields));<br>let customefields = steps.SyncLog.customefields;<br>for (var i = 0; i <span><</span> customefields.length; i++) {<br>    let fld = customefields[i];<br><br>    for (var j = 0; j <span><</span> fld.fields.length; j++) {<br>        var es = fld.fields[j];<br>        var desc = fld.label + ' ' + es[0].replace(/_/g, ' ');<br>        var id = fld.key + '_' + es[0];<br>        if (syncRulesFields.deal[id] !== undefined) {<br>            syncRulesFields.deal[id] = es;<br>        }<br>    }<br>}<br>let customKeys = Object.keys(syncRulesFields.deal);<br>for (var i = 0; i <span><</span> customKeys.length; i++) {<br>    var cKey = customKeys[i];<br>    var cVal = syncRulesFields.deal[cKey];<br>    let subVal;<br>    if (cKey.startsWith('subcst')) {<br>        if (subscription !== undefined) {<br>            subVal = subscription[cVal[0]];<br>        }<br>    } else if (cKey.startsWith('ordercst')) {<br>        if (myOrder !== undefined) {<br>            subVal = myOrder[cVal[0]];<br>        }<br><br>    } else if (cKey.startsWith('custcst')) {<br>        if (customer !== undefined) {<br>            subVal = customer[cVal[0]];<br>        }<br>    }<br>    if (cVal[1] === 'number') {<br>        subVal = getNumber(subVal);<br>        if (cVal.length == 4) {<br>            subVal = parseFloat(parseInt(subVal, 10) / 100).toFixed(2);<br>            properties.push({<br>                'value': subVal,<br>                'name': cKey<br>              });<br>        } else {<br>            properties.push({<br>                'value': subVal,<br>                'name': cKey<br>              });<br>        }<br>    } else if (cVal[1] === 'datetime') {<br>        subVal = getNumber(subVal) * 1000;       <br>        properties.push({<br>            'value': subVal,<br>            'name': cKey<br>          });<br><br>    }else if(subVal !== undefined && subVal!==''){<br>       properties.push({<br>            'value': subVal,<br>            'name': cKey<br>          });<br>    } <br>}<br>//custom<br>done({ input: { properties: properties }<br>});</pre>"
            click step-049 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkNyZWF0ZURlYWxJbkh1YlNwb3Q8L3RpdGxlPjwvaGVhZD48Ym9keT48Yj5PdGhlciAoaHR0cFJlcXVlc3QpOjwvYj48YnI+PGJyPjxwcmU+ICAgICAgICAgICAgICAgdXJsIDogJHtzdGVwcy5EZWFsSW5mby51cmwuY3JlYXRlRGVhbH08YnI+ICAgICAgICAgICAgIHJldHJ5IDogdHJ1ZTxicj4gICAgICAgIHJldHJ5RGVsYXkgOiAzMDA8YnI+ICByZXRyeVN0YXR1c0NvZGVzIDogNTAyPGJyPiAgICAgcmV0cnlBdHRlbXB0cyA6IDM8YnI+ICAgICAgICAgICAgICBib2R5IDogJHtzdGVwcy5QcmVwYXJlRGVhbENyZWF0ZS5pbnB1dH08YnI+ICAgICAgICAgICBoZWFkZXJzIDogJHtzdGVwcy5DdXN0b21lcnNQYXJhbS5odWJzcG90QXV0aH08YnI+ICAgICAgICAgICAgbWV0aG9kIDogUE9TVDwvcHJlPjxicj48Yj5SQVcgSlNPTjo8L2I+PGJyPjxicj48cHJlPns8YnI+ICAnb25TdWNjZXNzJzogWzxicj4gICAgJ0RlYWxUaGlyZHBhcnR5Q3JlYXRlUGFyYW0nPGJyPiAgXSw8YnI+ICAnb25GYWlsdXJlJzogWzxicj4gICAgJ0RlYWxDcmVhdGVFcnJvcic8YnI+ICBdLDxicj4gICduYW1lJzogJ0NyZWF0ZURlYWxJbkh1YlNwb3QnLDxicj4gICd0eXBlJzogJ2h0dHBSZXF1ZXN0Jyw8YnI+ICAncHJvcGVydGllcyc6IHs8YnI+ICAgICd1cmwnOiAnJHtzdGVwcy5EZWFsSW5mby51cmwuY3JlYXRlRGVhbH0nLDxicj4gICAgJ3JldHJ5JzogJ3RydWUnLDxicj4gICAgJ3JldHJ5RGVsYXknOiAnMzAwJyw8YnI+ICAgICdyZXRyeVN0YXR1c0NvZGVzJzogJzUwMicsPGJyPiAgICAncmV0cnlBdHRlbXB0cyc6ICczJyw8YnI+ICAgICdib2R5JzogJyR7c3RlcHMuUHJlcGFyZURlYWxDcmVhdGUuaW5wdXR9Jyw8YnI+ICAgICdoZWFkZXJzJzogJyR7c3RlcHMuQ3VzdG9tZXJzUGFyYW0uaHVic3BvdEF1dGh9Jyw8YnI+ICAgICdtZXRob2QnOiAnUE9TVCc8YnI+ICB9PGJyPn08L3ByZT48L2JvZHk+PC9odG1sPg=='));document.close();" "Other (httpRequest):<br><pre>               url : ${steps.DealInfo.url.createDeal}<br>             retry : true<br>        retryDelay : 300<br>  retryStatusCodes : 502<br>     retryAttempts : 3<br>              body : ${steps.PrepareDealCreate.input}<br>           headers : ${steps.CustomersParam.hubspotAuth}<br>            method : POST</pre>"
            click step-050 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPlVwZGF0ZURlYWxJbkh1YlNwb3Q8L3RpdGxlPjwvaGVhZD48Ym9keT48Yj5PdGhlciAoaHR0cFJlcXVlc3QpOjwvYj48YnI+PGJyPjxwcmU+ICAgICAgICAgICAgICAgdXJsIDogJHtzdGVwcy5EZWFsSW5mby5nZXREZWFsQnlJRH08YnI+ICAgICAgICAgICAgIHJldHJ5IDogdHJ1ZTxicj4gICAgICAgIHJldHJ5RGVsYXkgOiAzMDA8YnI+ICByZXRyeVN0YXR1c0NvZGVzIDogNTAyPGJyPiAgICAgcmV0cnlBdHRlbXB0cyA6IDM8YnI+ICAgICAgICAgICAgICBib2R5IDogJHtzdGVwcy5QcmVwYXJlRGVhbFVwZGF0ZS5pbnB1dH08YnI+ICAgICAgICAgICBoZWFkZXJzIDogJHtzdGVwcy5DdXN0b21lcnNQYXJhbS5odWJzcG90QXV0aH08YnI+ICAgICAgICAgICAgbWV0aG9kIDogUFVUPC9wcmU+PGJyPjxiPlJBVyBKU09OOjwvYj48YnI+PGJyPjxwcmU+ezxicj4gICdvblN1Y2Nlc3MnOiBbPGJyPiAgICAnRGVhbFRoaXJkUGFydHlDcmVhdGVQYXJhbSc8YnI+ICBdLDxicj4gICdvbkZhaWx1cmUnOiBbPGJyPiAgICAnRGVhbENyZWF0ZUVycm9yJzxicj4gIF0sPGJyPiAgJ25hbWUnOiAnVXBkYXRlRGVhbEluSHViU3BvdCcsPGJyPiAgJ3R5cGUnOiAnaHR0cFJlcXVlc3QnLDxicj4gICdwcm9wZXJ0aWVzJzogezxicj4gICAgJ3VybCc6ICcke3N0ZXBzLkRlYWxJbmZvLmdldERlYWxCeUlEfScsPGJyPiAgICAncmV0cnknOiAndHJ1ZScsPGJyPiAgICAncmV0cnlEZWxheSc6ICczMDAnLDxicj4gICAgJ3JldHJ5U3RhdHVzQ29kZXMnOiAnNTAyJyw8YnI+ICAgICdyZXRyeUF0dGVtcHRzJzogJzMnLDxicj4gICAgJ2JvZHknOiAnJHtzdGVwcy5QcmVwYXJlRGVhbFVwZGF0ZS5pbnB1dH0nLDxicj4gICAgJ2hlYWRlcnMnOiAnJHtzdGVwcy5DdXN0b21lcnNQYXJhbS5odWJzcG90QXV0aH0nLDxicj4gICAgJ21ldGhvZCc6ICdQVVQnPGJyPiAgfTxicj59PC9wcmU+PC9ib2R5PjwvaHRtbD4='));document.close();" "Other (httpRequest):<br><pre>               url : ${steps.DealInfo.getDealByID}<br>             retry : true<br>        retryDelay : 300<br>  retryStatusCodes : 502<br>     retryAttempts : 3<br>              body : ${steps.PrepareDealUpdate.input}<br>           headers : ${steps.CustomersParam.hubspotAuth}<br>            method : PUT</pre>"
            click step-051 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkRlYWxUaGlyZHBhcnR5Q3JlYXRlUGFyYW08L3RpdGxlPjwvaGVhZD48Ym9keT48Yj5KYXZhU2NyaXB0OjwvYj48YnI+PGJyPjxwcmU+bGV0IHN1YnNjcmlwdGlvbiA9IHN0ZXBzLkNCSW5mby5zdWJzY3JpcHRpb247PGJyPnN0ZXBzLkN1c3RvbWVyc1BhcmFtLnNETGlzdCA9IE51bWJlcihzdGVwcy5DdXN0b21lcnNQYXJhbS5zRExpc3QpICsgMTs8YnI+c3RlcHMuU3luY0xvZy5zeW5jQ291bnQuc0NvdW50ID0gc3RlcHMuU3luY0xvZy5zeW5jQ291bnQuc0NvdW50ICsxOzxicj5zdGVwcy5EZWFsSW5mby51cGRhdGVRdWVyeSA9IHs8YnI+ICAgIGludGVncmF0aW9uX25hbWU6IHN0ZXBzLklucHV0UGFyYW1zLmlucHV0LnR5cGUsPGJyPiAgICBlbnRpdHlfaWQ6IHN1YnNjcmlwdGlvbi5pZCw8YnI+ICAgIGVudGl0eV90eXBlOiAnc3Vic2NyaXB0aW9uJyw8YnI+ICAgIHRoaXJkX3BhcnR5X2VudGl0eV9pZDogc3RlcHMuQ3JlYXRlRGVhbEluSHViU3BvdC5yZXNwb25zZS5ib2R5LmRlYWxJZCw8YnI+ICAgIHN0YXR1czogJ3N5bmNlZCcsPGJyPiAgICBvbGRfcmVzb3VyY2U6IEpTT04uc3RyaW5naWZ5KHN1YnNjcmlwdGlvbik8YnI+fTs8YnI+ZG9uZSh0cnVlKTs8L3ByZT48YnI+PGI+UkFXIEpTT046PC9iPjxicj48YnI+PHByZT57PGJyPiAgJ29uU3VjY2Vzcyc6IFs8YnI+ICAgICdVcGRhdGVUaGlyZFBhcnR5RGVhbCc8YnI+ICBdLDxicj4gICdvbkZhaWx1cmUnOiBbXSw8YnI+ICAnbmFtZSc6ICdEZWFsVGhpcmRwYXJ0eUNyZWF0ZVBhcmFtJyw8YnI+ICAndHlwZSc6ICdzY3JpcHQnLDxicj4gICdwcm9wZXJ0aWVzJzogezxicj4gICAgJ2JvZHknOiAnbGV0IHN1YnNjcmlwdGlvbiA9IHN0ZXBzLkNCSW5mby5zdWJzY3JpcHRpb247XG5zdGVwcy5DdXN0b21lcnNQYXJhbS5zRExpc3QgPSBOdW1iZXIoc3RlcHMuQ3VzdG9tZXJzUGFyYW0uc0RMaXN0KSArIDE7XG5zdGVwcy5TeW5jTG9nLnN5bmNDb3VudC5zQ291bnQgPSBzdGVwcy5TeW5jTG9nLnN5bmNDb3VudC5zQ291bnQgKzE7XG5zdGVwcy5EZWFsSW5mby51cGRhdGVRdWVyeSA9IHtcbiAgICBpbnRlZ3JhdGlvbl9uYW1lOiBzdGVwcy5JbnB1dFBhcmFtcy5pbnB1dC50eXBlLFxuICAgIGVudGl0eV9pZDogc3Vic2NyaXB0aW9uLmlkLFxuICAgIGVudGl0eV90eXBlOiBcJ3N1YnNjcmlwdGlvblwnLFxuICAgIHRoaXJkX3BhcnR5X2VudGl0eV9pZDogc3RlcHMuQ3JlYXRlRGVhbEluSHViU3BvdC5yZXNwb25zZS5ib2R5LmRlYWxJZCxcbiAgICBzdGF0dXM6IFwnc3luY2VkXCcsXG4gICAgb2xkX3Jlc291cmNlOiBKU09OLnN0cmluZ2lmeShzdWJzY3JpcHRpb24pXG59O1xuZG9uZSh0cnVlKTsnPGJyPiAgfTxicj59PC9wcmU+PC9ib2R5PjwvaHRtbD4='));document.close();" "JavaScript:<br><pre>let subscription = steps.CBInfo.subscription;<br>steps.CustomersParam.sDList = Number(steps.CustomersParam.sDList) + 1;<br>steps.SyncLog.syncCount.sCount = steps.SyncLog.syncCount.sCount +1;<br>steps.DealInfo.updateQuery = {<br>    integration_name: steps.InputParams.input.type,<br>    entity_id: subscription.id,<br>    entity_type: 'subscription',<br>    third_party_entity_id: steps.CreateDealInHubSpot.response.body.dealId,<br>    status: 'synced',<br>    old_resource: JSON.stringify(subscription)<br>};<br>done(true);</pre>"
            click step-052 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkRlYWxDcmVhdGVFcnJvcjwvdGl0bGU+PC9oZWFkPjxib2R5PjxiPkphdmFTY3JpcHQ6PC9iPjxicj48YnI+PHByZT5sZXQgc3Vic2NyaXB0aW9uID0gc3RlcHMuQ0JJbmZvLnN1YnNjcmlwdGlvbjs8YnI+PGJyPmxldCBhcGlLZXk9c3RlcHMuSW5wdXRQYXJhbXMuaW5wdXQuYXBpS2V5Ozxicj5sZXQgc2l0ZU5hbWU9c3RlcHMuSW5wdXRQYXJhbXMuaW5wdXQuc2l0ZU5hbWU7PGJyPmxldCBzaXRlRG9tYWluPXN0ZXBzLklucHV0UGFyYW1zLmlucHV0LnNpdGVEb21haW47PGJyPmxldCB0eXBlID0gc3RlcHMuSW5wdXRQYXJhbXMuaW5wdXQudHlwZTs8YnI+bGV0IHBhc3N3b3JkID0gJyc7PGJyPjxicj5zdGVwcy5TeW5jTG9nLnN5bmNDb3VudC5lQ291bnQgPSBzdGVwcy5TeW5jTG9nLnN5bmNDb3VudC5lQ291bnQgKzE7PGJyPiBsZXQgY2hhcmdlYmVlX2RhdGFfdXJsID0gJ2h0dHBzOi8vJytzaXRlTmFtZSsnLicrc2l0ZURvbWFpbisnL2FkbWluLWNvbnNvbGUvc3Vic2NyaXB0aW9ucy8nK3N1YnNjcmlwdGlvbi5pZDs8YnI+IGxldCBjYl9saW5rID0gJzxzcGFuPjw8L3NwYW4+YSBocmVmPScnK2NoYXJnZWJlZV9kYXRhX3VybCsnJyB0YXJnZXQ9J2JsYW5rJzxzcGFuPj48L3NwYW4+JytzdWJzY3JpcHRpb24uaWQrJzxzcGFuPjw8L3NwYW4+L2E8c3Bhbj4+PC9zcGFuPiBIdWJTcG90IGRlYWwgY3JlYXRlL3VwZGF0ZSBvcGVyYXRpb24gZmFpbGVkXG4nOzxicj4gbGV0IGRhdGEgPSB7PGJyPiAgIHVybDogJ2h0dHBzOi8vJyArIHNpdGVOYW1lICsgJy4nICsgc2l0ZURvbWFpbiArICcvYXBpL3YyL3RoaXJkX3BhcnR5X2VudGl0eV9tYXBwaW5ncy91cGRhdGVfZW50aXR5Jyw8YnI+ICBhdXRoOns8YnI+ICAgICAgICBBdXRob3JpemF0aW9uOiAnQmFzaWMgJyArIENFLmI2NChhcGlLZXkgKyAnOicgKyBwYXNzd29yZCk8YnI+ICAgICAgfSw8YnI+ICAgICAgcXVlcnk6ezxicj4gICAgICAgIGludGVncmF0aW9uX25hbWU6IHR5cGUsPGJyPiAgICAgICAgZW50aXR5X2lkOiBzdWJzY3JpcHRpb24uaWQsPGJyPiAgICAgICAgZW50aXR5X3R5cGU6ICdzdWJzY3JpcHRpb24nLDxicj4gICAgICAgIHN0YXR1czogJ3VwZGF0ZV9mYWlsZWQnLDxicj4gICAgICAgIGVycm9yX21lc3NhZ2U6IGNiX2xpbms8YnI+ICAgICAgfTxicj4gIDxicj59Ozxicj5kb25lKGRhdGEpOzwvcHJlPjxicj48Yj5SQVcgSlNPTjo8L2I+PGJyPjxicj48cHJlPns8YnI+ICAnb25TdWNjZXNzJzogWzxicj4gICAgJ1VwZGF0ZVRoaXJkUGFydHlFcnJvcjYnPGJyPiAgXSw8YnI+ICAnb25GYWlsdXJlJzogW10sPGJyPiAgJ25hbWUnOiAnRGVhbENyZWF0ZUVycm9yJyw8YnI+ICAndHlwZSc6ICdzY3JpcHQnLDxicj4gICdwcm9wZXJ0aWVzJzogezxicj4gICAgJ2JvZHknOiAnbGV0IHN1YnNjcmlwdGlvbiA9IHN0ZXBzLkNCSW5mby5zdWJzY3JpcHRpb247XG5cbmxldCBhcGlLZXk9c3RlcHMuSW5wdXRQYXJhbXMuaW5wdXQuYXBpS2V5O1xubGV0IHNpdGVOYW1lPXN0ZXBzLklucHV0UGFyYW1zLmlucHV0LnNpdGVOYW1lO1xubGV0IHNpdGVEb21haW49c3RlcHMuSW5wdXRQYXJhbXMuaW5wdXQuc2l0ZURvbWFpbjtcbmxldCB0eXBlID0gc3RlcHMuSW5wdXRQYXJhbXMuaW5wdXQudHlwZTtcbmxldCBwYXNzd29yZCA9IFwnXCc7XG5cbnN0ZXBzLlN5bmNMb2cuc3luY0NvdW50LmVDb3VudCA9IHN0ZXBzLlN5bmNMb2cuc3luY0NvdW50LmVDb3VudCArMTtcbiBsZXQgY2hhcmdlYmVlX2RhdGFfdXJsID0gXCdodHRwczovL1wnK3NpdGVOYW1lK1wnLlwnK3NpdGVEb21haW4rXCcvYWRtaW4tY29uc29sZS9zdWJzY3JpcHRpb25zL1wnK3N1YnNjcmlwdGlvbi5pZDtcbiBsZXQgY2JfbGluayA9IFwnPHNwYW4+PDwvc3Bhbj5hIGhyZWY9J1wnK2NoYXJnZWJlZV9kYXRhX3VybCtcJycgdGFyZ2V0PSdibGFuayc8c3Bhbj4+PC9zcGFuPlwnK3N1YnNjcmlwdGlvbi5pZCtcJzxzcGFuPjw8L3NwYW4+L2E8c3Bhbj4+PC9zcGFuPiBIdWJTcG90IGRlYWwgY3JlYXRlL3VwZGF0ZSBvcGVyYXRpb24gZmFpbGVkXFxuXCc7XG4gbGV0IGRhdGEgPSB7XG4gICB1cmw6IFwnaHR0cHM6Ly9cJyArIHNpdGVOYW1lICsgXCcuXCcgKyBzaXRlRG9tYWluICsgXCcvYXBpL3YyL3RoaXJkX3BhcnR5X2VudGl0eV9tYXBwaW5ncy91cGRhdGVfZW50aXR5XCcsXG4gIGF1dGg6e1xuICAgICAgICBBdXRob3JpemF0aW9uOiBcJ0Jhc2ljIFwnICsgQ0UuYjY0KGFwaUtleSArIFwnOlwnICsgcGFzc3dvcmQpXG4gICAgICB9LFxuICAgICAgcXVlcnk6e1xuICAgICAgICBpbnRlZ3JhdGlvbl9uYW1lOiB0eXBlLFxuICAgICAgICBlbnRpdHlfaWQ6IHN1YnNjcmlwdGlvbi5pZCxcbiAgICAgICAgZW50aXR5X3R5cGU6IFwnc3Vic2NyaXB0aW9uXCcsXG4gICAgICAgIHN0YXR1czogXCd1cGRhdGVfZmFpbGVkXCcsXG4gICAgICAgIGVycm9yX21lc3NhZ2U6IGNiX2xpbmtcbiAgICAgIH1cbiAgXG59O1xuZG9uZShkYXRhKTsnPGJyPiAgfTxicj59PC9wcmU+PC9ib2R5PjwvaHRtbD4='));document.close();" "JavaScript:<br><pre>let subscription = steps.CBInfo.subscription;<br><br>let apiKey=steps.InputParams.input.apiKey;<br>let siteName=steps.InputParams.input.siteName;<br>let siteDomain=steps.InputParams.input.siteDomain;<br>let type = steps.InputParams.input.type;<br>let password = '';<br><br>steps.SyncLog.syncCount.eCount = steps.SyncLog.syncCount.eCount +1;<br> let chargebee_data_url = 'https://'+siteName+'.'+siteDomain+'/admin-console/subscriptions/'+subscription.id;<br> let cb_link = '<span><</span>a href=''+chargebee_data_url+'' target='blank'<span>></span>'+subscription.id+'<span><</span>/a<span>></span> HubSpot deal create/update operation failed\n';<br> let data = {<br>   url: 'https://' + siteName + '.' + siteDomain + '/api/v2/third_party_entity_mappings/update_entity',<br>  auth:{<br>        Authorization: 'Basic ' + CE.b64(apiKey + ':' + password)<br>      },<br>      query:{<br>        integration_name: type,<br>        entity_id: subscription.id,<br>        entity_type: 'subscription',<br>        status: 'update_failed',<br>        error_message: cb_link<br>      }<br>  <br>};<br>done(data);</pre>"
            click step-053 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkRlYWxUaGlyZFBhcnR5Q3JlYXRlUGFyYW08L3RpdGxlPjwvaGVhZD48Ym9keT48Yj5KYXZhU2NyaXB0OjwvYj48YnI+PGJyPjxwcmU+bGV0IHN1YnNjcmlwdGlvbiA9IHN0ZXBzLkNCSW5mby5zdWJzY3JpcHRpb247PGJyPnN0ZXBzLkN1c3RvbWVyc1BhcmFtLnNETGlzdCA9IE51bWJlcihzdGVwcy5DdXN0b21lcnNQYXJhbS5zRExpc3QpICsxOzxicj5zdGVwcy5TeW5jTG9nLnN5bmNDb3VudC5zQ291bnQgPSBzdGVwcy5TeW5jTG9nLnN5bmNDb3VudC5zQ291bnQgKzE7PGJyPnN0ZXBzLkRlYWxJbmZvLnVwZGF0ZVF1ZXJ5ID0gezxicj4gICAgaW50ZWdyYXRpb25fbmFtZTogc3RlcHMuSW5wdXRQYXJhbXMuaW5wdXQudHlwZSw8YnI+ICAgIGVudGl0eV9pZDogc3Vic2NyaXB0aW9uLmlkLDxicj4gICAgZW50aXR5X3R5cGU6ICdzdWJzY3JpcHRpb24nLDxicj4gICAgdGhpcmRfcGFydHlfZW50aXR5X2lkOiBzdGVwcy5VcGRhdGVEZWFsSW5IdWJTcG90LnJlc3BvbnNlLmJvZHkuZGVhbElkLDxicj4gICAgc3RhdHVzOiAnc3luY2VkJyw8YnI+ICAgIG9sZF9yZXNvdXJjZTogSlNPTi5zdHJpbmdpZnkoc3Vic2NyaXB0aW9uKTxicj59Ozxicj5kb25lKHRydWUpOzwvcHJlPjxicj48Yj5SQVcgSlNPTjo8L2I+PGJyPjxicj48cHJlPns8YnI+ICAnb25TdWNjZXNzJzogWzxicj4gICAgJ1VwZGF0ZVRoaXJkUGFydHlEZWFsJzxicj4gIF0sPGJyPiAgJ29uRmFpbHVyZSc6IFtdLDxicj4gICduYW1lJzogJ0RlYWxUaGlyZFBhcnR5Q3JlYXRlUGFyYW0nLDxicj4gICd0eXBlJzogJ3NjcmlwdCcsPGJyPiAgJ3Byb3BlcnRpZXMnOiB7PGJyPiAgICAnYm9keSc6ICdsZXQgc3Vic2NyaXB0aW9uID0gc3RlcHMuQ0JJbmZvLnN1YnNjcmlwdGlvbjtcbnN0ZXBzLkN1c3RvbWVyc1BhcmFtLnNETGlzdCA9IE51bWJlcihzdGVwcy5DdXN0b21lcnNQYXJhbS5zRExpc3QpICsxO1xuc3RlcHMuU3luY0xvZy5zeW5jQ291bnQuc0NvdW50ID0gc3RlcHMuU3luY0xvZy5zeW5jQ291bnQuc0NvdW50ICsxO1xuc3RlcHMuRGVhbEluZm8udXBkYXRlUXVlcnkgPSB7XG4gICAgaW50ZWdyYXRpb25fbmFtZTogc3RlcHMuSW5wdXRQYXJhbXMuaW5wdXQudHlwZSxcbiAgICBlbnRpdHlfaWQ6IHN1YnNjcmlwdGlvbi5pZCxcbiAgICBlbnRpdHlfdHlwZTogXCdzdWJzY3JpcHRpb25cJyxcbiAgICB0aGlyZF9wYXJ0eV9lbnRpdHlfaWQ6IHN0ZXBzLlVwZGF0ZURlYWxJbkh1YlNwb3QucmVzcG9uc2UuYm9keS5kZWFsSWQsXG4gICAgc3RhdHVzOiBcJ3N5bmNlZFwnLFxuICAgIG9sZF9yZXNvdXJjZTogSlNPTi5zdHJpbmdpZnkoc3Vic2NyaXB0aW9uKVxufTtcbmRvbmUodHJ1ZSk7Jzxicj4gIH08YnI+fTwvcHJlPjwvYm9keT48L2h0bWw+'));document.close();" "JavaScript:<br><pre>let subscription = steps.CBInfo.subscription;<br>steps.CustomersParam.sDList = Number(steps.CustomersParam.sDList) +1;<br>steps.SyncLog.syncCount.sCount = steps.SyncLog.syncCount.sCount +1;<br>steps.DealInfo.updateQuery = {<br>    integration_name: steps.InputParams.input.type,<br>    entity_id: subscription.id,<br>    entity_type: 'subscription',<br>    third_party_entity_id: steps.UpdateDealInHubSpot.response.body.dealId,<br>    status: 'synced',<br>    old_resource: JSON.stringify(subscription)<br>};<br>done(true);</pre>"
            click step-054 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPlVwZGF0ZVRoaXJkUGFydHlEZWFsPC90aXRsZT48L2hlYWQ+PGJvZHk+PGI+T3RoZXIgKGh0dHBSZXF1ZXN0KTo8L2I+PGJyPjxicj48cHJlPiAgICAgIHVybCA6ICR7c3RlcHMuQ0JJbmZvLnVybC51cGRhdGV9PGJyPiAgICBxdWVyeSA6ICR7c3RlcHMuRGVhbEluZm8udXBkYXRlUXVlcnl9PGJyPiAgaGVhZGVycyA6ICR7c3RlcHMuQ0JJbmZvLmF1dGh9PGJyPiAgIG1ldGhvZCA6IFBPU1Q8L3ByZT48YnI+PGI+UkFXIEpTT046PC9iPjxicj48YnI+PHByZT57PGJyPiAgJ29uU3VjY2Vzcyc6IFs8YnI+ICAgICdMb29wT3ZlclN1YnNjcmlwdGlvbnMnPGJyPiAgXSw8YnI+ICAnb25GYWlsdXJlJzogW10sPGJyPiAgJ25hbWUnOiAnVXBkYXRlVGhpcmRQYXJ0eURlYWwnLDxicj4gICd0eXBlJzogJ2h0dHBSZXF1ZXN0Jyw8YnI+ICAncHJvcGVydGllcyc6IHs8YnI+ICAgICd1cmwnOiAnJHtzdGVwcy5DQkluZm8udXJsLnVwZGF0ZX0nLDxicj4gICAgJ3F1ZXJ5JzogJyR7c3RlcHMuRGVhbEluZm8udXBkYXRlUXVlcnl9Jyw8YnI+ICAgICdoZWFkZXJzJzogJyR7c3RlcHMuQ0JJbmZvLmF1dGh9Jyw8YnI+ICAgICdtZXRob2QnOiAnUE9TVCc8YnI+ICB9PGJyPn08L3ByZT48L2JvZHk+PC9odG1sPg=='));document.close();" "Other (httpRequest):<br><pre>      url : ${steps.CBInfo.url.update}<br>    query : ${steps.DealInfo.updateQuery}<br>  headers : ${steps.CBInfo.auth}<br>   method : POST</pre>"
            click step-055 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPlVwZGF0ZVRoaXJkUGFydHlFcnJvcjY8L3RpdGxlPjwvaGVhZD48Ym9keT48Yj5PdGhlciAoaHR0cFJlcXVlc3QpOjwvYj48YnI+PGJyPjxwcmU+ICAgICAgdXJsIDogJHtzdGVwcy5EZWFsQ3JlYXRlRXJyb3IudXJsfTxicj4gICAgcXVlcnkgOiAke3N0ZXBzLkRlYWxDcmVhdGVFcnJvci51cmx9PGJyPiAgaGVhZGVycyA6ICR7c3RlcHMuRGVhbENyZWF0ZUVycm9yLnVybH08YnI+ICAgbWV0aG9kIDogUE9TVDwvcHJlPjxicj48Yj5SQVcgSlNPTjo8L2I+PGJyPjxicj48cHJlPns8YnI+ICAnb25TdWNjZXNzJzogWzxicj4gICAgJ0xvb3BPdmVyU3Vic2NyaXB0aW9ucyc8YnI+ICBdLDxicj4gICdvbkZhaWx1cmUnOiBbXSw8YnI+ICAnbmFtZSc6ICdVcGRhdGVUaGlyZFBhcnR5RXJyb3I2Jyw8YnI+ICAndHlwZSc6ICdodHRwUmVxdWVzdCcsPGJyPiAgJ3Byb3BlcnRpZXMnOiB7PGJyPiAgICAndXJsJzogJyR7c3RlcHMuRGVhbENyZWF0ZUVycm9yLnVybH0nLDxicj4gICAgJ3F1ZXJ5JzogJyR7c3RlcHMuRGVhbENyZWF0ZUVycm9yLnVybH0nLDxicj4gICAgJ2hlYWRlcnMnOiAnJHtzdGVwcy5EZWFsQ3JlYXRlRXJyb3IudXJsfScsPGJyPiAgICAnbWV0aG9kJzogJ1BPU1QnPGJyPiAgfTxicj59PC9wcmU+PC9ib2R5PjwvaHRtbD4='));document.close();" "Other (httpRequest):<br><pre>      url : ${steps.DealCreateError.url}<br>    query : ${steps.DealCreateError.url}<br>  headers : ${steps.DealCreateError.url}<br>   method : POST</pre>"

        </div>
    </div>
    <h2>
        Formula Configuration
    </h2>
    <div class="container">
        <h3>Basic</h3><table><tr><th>key</th><th>value</th></tr><tr><td>Name</td><td>HubSpotFullSyncDeals_old</td></tr><tr><td>Single Threaded?</td><td>false</td></tr><tr><td>Active?</td><td>true</td></tr><tr><td>Number of Steps</td><td>54</td></tr><tr><td>Number of Triggers</td><td>1</td></tr></table>
    <br/><h3>Elements</h3><table><tr><th>key</th><th>name</th><th>required</th></tr></table>
    <br/><h3>Values</h3><table><tr><th>key</th><th>name</th><th>required</th></tr></table><br/>
    </div>
    <div class="key">
        <h2>
            Key
        </h2>
        <table>
            <tr>
                <th>Description</th>
                <th>Symbol</th>
                <th>Description</th>
                <th>Symbol</th>
                <th>Description</th>
                <th>Symbol</th>
            </tr>

            <tr>
                <td>Filter Steps</td>
                <td>
                    <div class="mermaid">
                        graph TD
                        A{Step Name}
                    </div>
                </td>
                <td>Trigger/End</td>
                <td>
                    <div class="mermaid">
                        graph TD
                        B((Actual))
                        C((Generated))
                        style C stroke-width:2px,stroke-dasharray: 5, 5;
                    </div>
                </td>
                <td>Request Step</td>
                <td>
                    <div class="mermaid">
                        graph TD
                        A>GET]
                        style A stroke:#0f6ab4;
                    </div>
                    <div class="mermaid">
                        graph TD
                        B>POST]
                        style B stroke:#10a54a;
                    </div>
                    <div class="mermaid">
                        graph TD
                        C>PATCH]
                        style C stroke:#D38042;
                    </div>
                    <div class="mermaid">
                        graph TD
                        C>PUT]
                        style C stroke:#C5862B;
                    </div>
                    <div class="mermaid">
                        graph TD
                        D>DELETE]
                        style D stroke:#a41e22;
                    </div>
                </td>
            </tr>
            <tr>
                <td>Script</td>
                <td>
                    <div class="mermaid">
                        graph TD
                        D(Step Name)
                    </div>
                </td>
                <td>Loop</td>
                <td>
                    <div class="mermaid">
                        graph TD
                        D(-Step Name-)
                    </div>
                </td>
                <td>Other(TYPE)</td>
                <td>
                    <div class="mermaid">
                        graph TD
                        D[Step Name]
                    </div>
                </td>
            </tr>
            <tr>
                <td>Pass/Fail Connection</td>
                <td>
                    <div class="mermaid">
                        graph LR
                        AL(A)
                        BL(B)
                        AL-->BL
                    </div>
                </td>
                <td>Generated Connection</td>
                <td>
                    <div class="mermaid">
                        graph LR
                        AL(A)
                        BL((B))
                        AL-.->BL
                        style BL stroke-width:2px,stroke-dasharray: 5, 5;
                    </div>
                </td>
                <td>Continue Connection</td>
                <td>
                    <div class="mermaid">
                        graph LR
                        AL(A)
                        BL(B)
                        AL==>BL
                    </div>
                </td>
            </tr>
        </table>
    </div>
    <div>
        <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
    </div>
</body>
</html>