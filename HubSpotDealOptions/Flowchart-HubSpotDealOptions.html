<!DOCTYPE html>
<html lang="en">
<head>
    <title>HubSpotDealOptions</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/mermaid/6.0.0/mermaid.css" rel="stylesheet" type="text/css"/>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/6.0.0/mermaid.min.js"></script>
    <script>mermaid.initialize({startOnLoad:true});</script>
    <script>
        var callback = function(){}
    </script>
    <style>
        div.mermaidTooltip {
                    margin-left: 50px;
                    text-align: left;
                    max-width: none;
                }
        .node rect,
        .node circle,
        .node ellipse,
        .node polygon {
                    fill: #ffffff;
                    stroke: rgb(200,200,200);
                    stroke-width: 2px;
                }
        .mermaid .label {
                  max-width: 50px;
                }
        table, th, td {
                    border: 1px solid black;
                }
        table {
                    border-spacing: 5px;
                    border-radius: 5px;
                    margin: auto;
                }
        th, td {
                    padding-left: 15px;
                    padding-right: 15px;
                    border-radius: 5px;
                }
        th {
                    color: blue;
                }
        td {
                    width: 180px;
                    text-align: center;
                    background-color: rgb(237, 241, 242);
                }
        h2 {
                    text-align: center;
                    border: 1px solid black;
                    border-radius: 5px;
                    padding: 1em;
                }
        .container {
                    text-align: center;
                    background-color: rgb(237, 241, 242);
                    font-size: 11px;
                    font-weight: 900;
                }
        body {
                    font-family: 'Arial';
                }
        .edgeLabel {
                    font-size: 9px;
                }
    </style>
</head>
<body>
    <h2>
        HubSpotDealOptions
    </h2>
    <div class="container">
        <div class="mermaid">
            graph TD

                step-000((Trigger))
            step-001(Props)
            step-002[dealOptionsInitParams]
            step-003{IsOptionsInitialized}
            step-004[GetCBConfigApi]
            step-005(sendErrorResponse)
            step-006((END))
            step-007{IsSucceeded}
            step-008(HPipeLineParam)
            step-009[GetPipeLines]
            step-010(Stages)
            step-011(Success)

                step-000== continue ==>step-001
            step-001-- success -->step-002
            step-002-- success -->step-003
            step-003-- success -->step-004
            step-003-- failure -->step-005
            step-004-- success -->step-007
            step-004-- failure -->step-005
            step-005-. done .->step-006
            step-007-- success -->step-008
            step-007-- failure -->step-005
            step-008-- success -->step-009
            step-009-- success -->step-010
            step-010-- success -->step-011
            step-010-- failure -->step-005
            step-011-- failure -->step-005

                style step-006 stroke-width:3px,stroke-dasharray: 5, 5;

                click step-000 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPnRyaWdnZXI8L3RpdGxlPjwvaGVhZD48Ym9keT48Yj5UcmlnZ2VyIEVsZW1lbnQ6PC9iPjxicj48YnI+PHByZT4gICB0eXBlIDogbWFudWFsPGJyPiAgYXN5bmMgOiB0cnVlPC9wcmU+PGJyPjxiPlJBVyBKU09OOjwvYj48YnI+PGJyPjxwcmU+ezxicj4gICdvblN1Y2Nlc3MnOiBbPGJyPiAgICAnUHJvcHMnPGJyPiAgXSw8YnI+ICAnb25GYWlsdXJlJzogW10sPGJyPiAgJ3R5cGUnOiAnbWFudWFsJyw8YnI+ICAnYXN5bmMnOiB0cnVlLDxicj4gICduYW1lJzogJ3RyaWdnZXInLDxicj4gICdwcm9wZXJ0aWVzJzoge308YnI+fTwvcHJlPjwvYm9keT48L2h0bWw+'));document.close();" "Trigger Element:<br><pre>   type : manual<br>  async : true</pre>"
            click step-001 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPlByb3BzPC90aXRsZT48L2hlYWQ+PGJvZHk+PGI+SmF2YVNjcmlwdDo8L2I+PGJyPjxicj48cHJlPmRvbmUodHJpZ2dlci5hcmdzKTs8L3ByZT48YnI+PGI+UkFXIEpTT046PC9iPjxicj48YnI+PHByZT57PGJyPiAgJ29uU3VjY2Vzcyc6IFs8YnI+ICAgICdkZWFsT3B0aW9uc0luaXRQYXJhbXMnPGJyPiAgXSw8YnI+ICAnb25GYWlsdXJlJzogW10sPGJyPiAgJ25hbWUnOiAnUHJvcHMnLDxicj4gICd0eXBlJzogJ3NjcmlwdCcsPGJyPiAgJ3Byb3BlcnRpZXMnOiB7PGJyPiAgICAnYm9keSc6ICdkb25lKHRyaWdnZXIuYXJncyk7Jzxicj4gIH08YnI+fTwvcHJlPjwvYm9keT48L2h0bWw+'));document.close();" "JavaScript:<br><pre>done(trigger.args);</pre>"
            click step-002 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPmRlYWxPcHRpb25zSW5pdFBhcmFtczwvdGl0bGU+PC9oZWFkPjxib2R5PjxiPk90aGVyIChmb3JtdWxhKTo8L2I+PGJyPjxicj48cHJlPiAgZm9ybXVsYUlkIDogMzE0NzM8L3ByZT48YnI+PGI+UkFXIEpTT046PC9iPjxicj48YnI+PHByZT57PGJyPiAgJ29uU3VjY2Vzcyc6IFs8YnI+ICAgICdJc09wdGlvbnNJbml0aWFsaXplZCc8YnI+ICBdLDxicj4gICdvbkZhaWx1cmUnOiBbXSw8YnI+ICAnbmFtZSc6ICdkZWFsT3B0aW9uc0luaXRQYXJhbXMnLDxicj4gICd0eXBlJzogJ2Zvcm11bGEnLDxicj4gICdwcm9wZXJ0aWVzJzogezxicj4gICAgJ2Zvcm11bGFJZCc6ICczMTQ3Myc8YnI+ICB9PGJyPn08L3ByZT48L2JvZHk+PC9odG1sPg=='));document.close();" "Other (formula):<br><pre>  formulaId : 31473</pre>"
            click step-003 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPklzT3B0aW9uc0luaXRpYWxpemVkPC90aXRsZT48L2hlYWQ+PGJvZHk+PGI+SmF2YVNjcmlwdDo8L2I+PGJyPjxicj48cHJlPmRvbmUoc3RlcHMuZGVhbE9wdGlvbnNJbml0UGFyYW1zWydlcnJvciddID09PSB1bmRlZmluZWQpPC9wcmU+PGJyPjxiPlJBVyBKU09OOjwvYj48YnI+PGJyPjxwcmU+ezxicj4gICdvblN1Y2Nlc3MnOiBbPGJyPiAgICAnR2V0Q0JDb25maWdBcGknPGJyPiAgXSw8YnI+ICAnb25GYWlsdXJlJzogWzxicj4gICAgJ3NlbmRFcnJvclJlc3BvbnNlJzxicj4gIF0sPGJyPiAgJ25hbWUnOiAnSXNPcHRpb25zSW5pdGlhbGl6ZWQnLDxicj4gICd0eXBlJzogJ2ZpbHRlcicsPGJyPiAgJ3Byb3BlcnRpZXMnOiB7PGJyPiAgICAnYm9keSc6ICdkb25lKHN0ZXBzLmRlYWxPcHRpb25zSW5pdFBhcmFtc1snZXJyb3InXSA9PT0gdW5kZWZpbmVkKSc8YnI+ICB9PGJyPn08L3ByZT48L2JvZHk+PC9odG1sPg=='));document.close();" "JavaScript:<br><pre>done(steps.dealOptionsInitParams['error'] === undefined)</pre>"
            click step-004 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkdldENCQ29uZmlnQXBpPC90aXRsZT48L2hlYWQ+PGJvZHk+PGI+T3RoZXIgKGZvcm11bGEpOjwvYj48YnI+PGJyPjxwcmU+ICBmb3JtdWxhSWQgOiAzMTMzMDxicj4gICAgICAgYXJncyA6ICR7c3RlcHMuZGVhbE9wdGlvbnNJbml0UGFyYW1zLmdldENCUmVxfTwvcHJlPjxicj48Yj5SQVcgSlNPTjo8L2I+PGJyPjxicj48cHJlPns8YnI+ICAnb25TdWNjZXNzJzogWzxicj4gICAgJ0lzU3VjY2VlZGVkJzxicj4gIF0sPGJyPiAgJ29uRmFpbHVyZSc6IFs8YnI+ICAgICdzZW5kRXJyb3JSZXNwb25zZSc8YnI+ICBdLDxicj4gICduYW1lJzogJ0dldENCQ29uZmlnQXBpJyw8YnI+ICAndHlwZSc6ICdmb3JtdWxhJyw8YnI+ICAncHJvcGVydGllcyc6IHs8YnI+ICAgICdmb3JtdWxhSWQnOiAnMzEzMzAnLDxicj4gICAgJ2FyZ3MnOiAnJHtzdGVwcy5kZWFsT3B0aW9uc0luaXRQYXJhbXMuZ2V0Q0JSZXF9Jzxicj4gIH08YnI+fTwvcHJlPjwvYm9keT48L2h0bWw+'));document.close();" "Other (formula):<br><pre>  formulaId : 31330<br>       args : ${steps.dealOptionsInitParams.getCBReq}</pre>"
            click step-005 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPnNlbmRFcnJvclJlc3BvbnNlPC90aXRsZT48L2hlYWQ+PGJvZHk+PGI+SmF2YVNjcmlwdDo8L2I+PGJyPjxicj48cHJlPmxldCBjYXJkID0gezxicj4gICAgY2FyZHM6IFs8YnI+ICAgICAgICB7PGJyPiAgICAgICAgICAgICdjYXJkJzogezxicj4gICAgICAgICAgICAgICAgJ3R5cGUnOiAnQUNUSU9OJyw8YnI+ICAgICAgICAgICAgICAgICdoZWFkaW5nJzogJ0VSUk9SJyw8YnI+ICAgICAgICAgICAgICAgICdzdWJIZWFkaW5nJzogJ0FuIGlzc3VlIHdhcyBlbmNvdW50ZXJlZCB3aGlsZSBjb25maWd1cmluZyBSdWxlcyBmb3IgZGVhbHMuUGxlYXNlIHJldHJ5IHdpdGggZGlmZmVyZW50IG9wdGlvbiBvciBpZiB0aGUgaXNzdWUgc3RpbGwgcGVyc2lzdHMsIGNvbnRhY3Qgc3VwcG9ydCc8YnI+ICAgICAgICAgICAgfSw8YnI+ICAgICAgICAgICAgJ2lzQ2FyZERvbmUnOiB0cnVlLDxicj4gICAgICAgICAgICAnaWQnOiAnY2hlY2syJzxicj4gICAgICAgIH08YnI+ICAgICAgICBdPGJyPn07PGJyPjxicj5kb25lKHs8YnI+IHN0YXR1c0NvZGU6IDIwMCw8YnI+IHJlc3VsdDogY2FyZDxicj59KTwvcHJlPjxicj48Yj5SQVcgSlNPTjo8L2I+PGJyPjxicj48cHJlPns8YnI+ICAnb25TdWNjZXNzJzogW10sPGJyPiAgJ29uRmFpbHVyZSc6IFtdLDxicj4gICduYW1lJzogJ3NlbmRFcnJvclJlc3BvbnNlJyw8YnI+ICAndHlwZSc6ICdzY3JpcHQnLDxicj4gICdwcm9wZXJ0aWVzJzogezxicj4gICAgJ2JvZHknOiAnbGV0IGNhcmQgPSB7XG4gICAgY2FyZHM6IFtcbiAgICAgICAge1xuICAgICAgICAgICAgXCdjYXJkXCc6IHtcbiAgICAgICAgICAgICAgICBcJ3R5cGVcJzogXCdBQ1RJT05cJyxcbiAgICAgICAgICAgICAgICBcJ2hlYWRpbmdcJzogXCdFUlJPUlwnLFxuICAgICAgICAgICAgICAgIFwnc3ViSGVhZGluZ1wnOiBcJ0FuIGlzc3VlIHdhcyBlbmNvdW50ZXJlZCB3aGlsZSBjb25maWd1cmluZyBSdWxlcyBmb3IgZGVhbHMuUGxlYXNlIHJldHJ5IHdpdGggZGlmZmVyZW50IG9wdGlvbiBvciBpZiB0aGUgaXNzdWUgc3RpbGwgcGVyc2lzdHMsIGNvbnRhY3Qgc3VwcG9ydFwnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCdpc0NhcmREb25lXCc6IHRydWUsXG4gICAgICAgICAgICBcJ2lkXCc6IFwnY2hlY2syXCdcbiAgICAgICAgfVxuICAgICAgICBdXG59O1xuXG5kb25lKHtcbiBzdGF0dXNDb2RlOiAyMDAsXG4gcmVzdWx0OiBjYXJkXG59KSc8YnI+ICB9PGJyPn08L3ByZT48L2JvZHk+PC9odG1sPg=='));document.close();" "JavaScript:<br><pre>let card = {<br>    cards: [<br>        {<br>            'card': {<br>                'type': 'ACTION',<br>                'heading': 'ERROR',<br>                'subHeading': 'An issue was encountered while configuring Rules for deals.Please retry with different option or if the issue still persists, contact support'<br>            },<br>            'isCardDone': true,<br>            'id': 'check2'<br>        }<br>        ]<br>};<br><br>done({<br> statusCode: 200,<br> result: card<br>})</pre>"
            click step-007 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPklzU3VjY2VlZGVkPC90aXRsZT48L2hlYWQ+PGJvZHk+PGI+SmF2YVNjcmlwdDo8L2I+PGJyPjxicj48cHJlPmRvbmUoc3RlcHMuR2V0Q0JDb25maWdBcGkuY2Jfc3RhdHVzID09PSAnc3VjY2VzcycpOzwvcHJlPjxicj48Yj5SQVcgSlNPTjo8L2I+PGJyPjxicj48cHJlPns8YnI+ICAnb25TdWNjZXNzJzogWzxicj4gICAgJ0hQaXBlTGluZVBhcmFtJzxicj4gIF0sPGJyPiAgJ29uRmFpbHVyZSc6IFs8YnI+ICAgICdzZW5kRXJyb3JSZXNwb25zZSc8YnI+ICBdLDxicj4gICduYW1lJzogJ0lzU3VjY2VlZGVkJyw8YnI+ICAndHlwZSc6ICdmaWx0ZXInLDxicj4gICdwcm9wZXJ0aWVzJzogezxicj4gICAgJ2JvZHknOiAnZG9uZShzdGVwcy5HZXRDQkNvbmZpZ0FwaS5jYl9zdGF0dXMgPT09IFwnc3VjY2Vzc1wnKTsnPGJyPiAgfTxicj59PC9wcmU+PC9ib2R5PjwvaHRtbD4='));document.close();" "JavaScript:<br><pre>done(steps.GetCBConfigApi.cb_status === 'success');</pre>"
            click step-008 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkhQaXBlTGluZVBhcmFtPC90aXRsZT48L2hlYWQ+PGJvZHk+PGI+SmF2YVNjcmlwdDo8L2I+PGJyPjxicj48cHJlPmxldCBkYXRhID0gezxicj4gIHVybDonaHR0cHM6Ly9hcGkuaHViYXBpLmNvbS9jcm0tcGlwZWxpbmVzL3YxL3BpcGVsaW5lcy9kZWFscycsPGJyPiAgaHVic3BvdEF1dGg6IHs8YnI+ICAgICAgJ0F1dGhvcml6YXRpb24nOidCZWFyZXIgJytzdGVwcy5HZXRDQkNvbmZpZ0FwaS5kYXRhLnRoaXJkX3BhcnR5X2NvbmZpZ3VyYXRpb24uY29uZmlnX2pzb24uY2xvdWRFbGVtZW50cy50aGlyZFBhcnR5LmFjY2Vzc1Rva2VuLDxicj4gICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbic8YnI+ICAgIH0sPGJyPn07PGJyPmRvbmUoZGF0YSk7PC9wcmU+PGJyPjxiPlJBVyBKU09OOjwvYj48YnI+PGJyPjxwcmU+ezxicj4gICdvblN1Y2Nlc3MnOiBbPGJyPiAgICAnR2V0UGlwZUxpbmVzJzxicj4gIF0sPGJyPiAgJ29uRmFpbHVyZSc6IFtdLDxicj4gICduYW1lJzogJ0hQaXBlTGluZVBhcmFtJyw8YnI+ICAndHlwZSc6ICdzY3JpcHQnLDxicj4gICdwcm9wZXJ0aWVzJzogezxicj4gICAgJ2JvZHknOiAnbGV0IGRhdGEgPSB7XG4gIHVybDpcJ2h0dHBzOi8vYXBpLmh1YmFwaS5jb20vY3JtLXBpcGVsaW5lcy92MS9waXBlbGluZXMvZGVhbHNcJyxcbiAgaHVic3BvdEF1dGg6IHtcbiAgICAgIFwnQXV0aG9yaXphdGlvblwnOlwnQmVhcmVyIFwnK3N0ZXBzLkdldENCQ29uZmlnQXBpLmRhdGEudGhpcmRfcGFydHlfY29uZmlndXJhdGlvbi5jb25maWdfanNvbi5jbG91ZEVsZW1lbnRzLnRoaXJkUGFydHkuYWNjZXNzVG9rZW4sXG4gICAgICAgQWNjZXB0OiBcJ2FwcGxpY2F0aW9uL2pzb25cJ1xuICAgIH0sXG59O1xuZG9uZShkYXRhKTsnPGJyPiAgfTxicj59PC9wcmU+PC9ib2R5PjwvaHRtbD4='));document.close();" "JavaScript:<br><pre>let data = {<br>  url:'https://api.hubapi.com/crm-pipelines/v1/pipelines/deals',<br>  hubspotAuth: {<br>      'Authorization':'Bearer '+steps.GetCBConfigApi.data.third_party_configuration.config_json.cloudElements.thirdParty.accessToken,<br>       Accept: 'application/json'<br>    },<br>};<br>done(data);</pre>"
            click step-009 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkdldFBpcGVMaW5lczwvdGl0bGU+PC9oZWFkPjxib2R5PjxiPk90aGVyIChodHRwUmVxdWVzdCk6PC9iPjxicj48YnI+PHByZT4gICAgICB1cmwgOiAke3N0ZXBzLkhQaXBlTGluZVBhcmFtLnVybH08YnI+ICBoZWFkZXJzIDogJHtzdGVwcy5IUGlwZUxpbmVQYXJhbS5odWJzcG90QXV0aH08YnI+ICAgbWV0aG9kIDogR0VUPC9wcmU+PGJyPjxiPlJBVyBKU09OOjwvYj48YnI+PGJyPjxwcmU+ezxicj4gICdvblN1Y2Nlc3MnOiBbPGJyPiAgICAnU3RhZ2VzJzxicj4gIF0sPGJyPiAgJ29uRmFpbHVyZSc6IFtdLDxicj4gICduYW1lJzogJ0dldFBpcGVMaW5lcycsPGJyPiAgJ3R5cGUnOiAnaHR0cFJlcXVlc3QnLDxicj4gICdwcm9wZXJ0aWVzJzogezxicj4gICAgJ3VybCc6ICcke3N0ZXBzLkhQaXBlTGluZVBhcmFtLnVybH0nLDxicj4gICAgJ2hlYWRlcnMnOiAnJHtzdGVwcy5IUGlwZUxpbmVQYXJhbS5odWJzcG90QXV0aH0nLDxicj4gICAgJ21ldGhvZCc6ICdHRVQnPGJyPiAgfTxicj59PC9wcmU+PC9ib2R5PjwvaHRtbD4='));document.close();" "Other (httpRequest):<br><pre>      url : ${steps.HPipeLineParam.url}<br>  headers : ${steps.HPipeLineParam.hubspotAuth}<br>   method : GET</pre>"
            click step-010 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPlN0YWdlczwvdGl0bGU+PC9oZWFkPjxib2R5PjxiPkphdmFTY3JpcHQ6PC9iPjxicj48YnI+PHByZT5sZXQgcGlwczs8YnI+bGV0IG1heFNpemUgPSAyNTs8YnI+aWYoc3RlcHMuR2V0UGlwZUxpbmVzICE9PSB1bmRlZmluZWQpIHs8YnI+ICBwaXBzID0gc3RlcHMuR2V0UGlwZUxpbmVzLnJlc3BvbnNlLmJvZHk7PGJyPn08YnI+bGV0IHBpcGVsaW5lID1bXTs8YnI+bGV0IHN0YWdlID0ge307PGJyPmlmKHBpcHMgIT09IHVuZGVmaW5lZCAmJiBwaXBzLnJlc3VsdHMgIT09IHVuZGVmaW5lZCkgezxicj4gIGZvcih2YXIgaT0wO2k8c3Bhbj48PC9zcGFuPnBpcHMucmVzdWx0cy5sZW5ndGg7aSsrKSB7PGJyPiAgICB2YXIgcGlwaUxpbmVJZCA9IHBpcHMucmVzdWx0c1tpXS5waXBlbGluZUlkOzxicj4gICAgdmFyIHBpcGlMaW5lVmFsdWUgPSBwaXBzLnJlc3VsdHNbaV0ubGFiZWw7PGJyPiAgICAgaWYocGlwaUxpbmVWYWx1ZS5sZW5ndGggPHNwYW4+Pjwvc3Bhbj5tYXhTaXplKSB7PGJyPiAgICAgIHBpcGlMaW5lVmFsdWUgPSBwaXBpTGluZVZhbHVlLnN1YnN0cmluZygwLG1heFNpemUpICsnLi4nOzxicj4gICAgfTxicj4gICAgdmFyIHBzdGFnZXMgPSBwaXBzLnJlc3VsdHNbaV0uc3RhZ2VzOzxicj4gICAgcGlwZWxpbmUucHVzaCh7J3ZhbHVlJzpwaXBpTGluZUlkLDxicj4gICAgICAnZGlzcCc6cGlwaUxpbmVWYWx1ZSAgICB9KTs8YnI+ICAgIDxicj4gICAgPGJyPiAgICB2YXIgc3RhZyA9IHt9Ozxicj4gICAgZm9yKHZhciBqPTA7ajxzcGFuPjw8L3NwYW4+cHN0YWdlcy5sZW5ndGg7aisrKSB7PGJyPiAgICAgICB2YXIgc3RhZ2VWYWx1ZSA9IHBzdGFnZXNbal0ubGFiZWw7PGJyPiAgICAgICBpZihzdGFnZVZhbHVlLmxlbmd0aCA8c3Bhbj4+PC9zcGFuPm1heFNpemUpIHs8YnI+ICAgICAgc3RhZ2VWYWx1ZSA9IHN0YWdlVmFsdWUuc3Vic3RyaW5nKDAsbWF4U2l6ZSkgKycuLic7PGJyPiAgICB9PGJyPiAgICAgIHN0YWdbcHN0YWdlc1tqXS5zdGFnZUlkXSA9IHN0YWdlVmFsdWU7PGJyPiAgICB9PGJyPiAgICBzdGFnZVtwaXBpTGluZUlkXSA9IHN0YWc7PGJyPiAgfTxicj59PGJyPmRvbmUoe3BpcGVsaW5lOnBpcGVsaW5lLHN0YWdlOnN0YWdlfSk7PC9wcmU+PGJyPjxiPlJBVyBKU09OOjwvYj48YnI+PGJyPjxwcmU+ezxicj4gICdvblN1Y2Nlc3MnOiBbPGJyPiAgICAnU3VjY2Vzcyc8YnI+ICBdLDxicj4gICdvbkZhaWx1cmUnOiBbPGJyPiAgICAnc2VuZEVycm9yUmVzcG9uc2UnPGJyPiAgXSw8YnI+ICAnbmFtZSc6ICdTdGFnZXMnLDxicj4gICd0eXBlJzogJ3NjcmlwdCcsPGJyPiAgJ3Byb3BlcnRpZXMnOiB7PGJyPiAgICAnYm9keSc6ICdsZXQgcGlwcztcbmxldCBtYXhTaXplID0gMjU7XG5pZihzdGVwcy5HZXRQaXBlTGluZXMgIT09IHVuZGVmaW5lZCkge1xuICBwaXBzID0gc3RlcHMuR2V0UGlwZUxpbmVzLnJlc3BvbnNlLmJvZHk7XG59XG5sZXQgcGlwZWxpbmUgPVtdO1xubGV0IHN0YWdlID0ge307XG5pZihwaXBzICE9PSB1bmRlZmluZWQgJiYgcGlwcy5yZXN1bHRzICE9PSB1bmRlZmluZWQpIHtcbiAgZm9yKHZhciBpPTA7aTxzcGFuPjw8L3NwYW4+cGlwcy5yZXN1bHRzLmxlbmd0aDtpKyspIHtcbiAgICB2YXIgcGlwaUxpbmVJZCA9IHBpcHMucmVzdWx0c1tpXS5waXBlbGluZUlkO1xuICAgIHZhciBwaXBpTGluZVZhbHVlID0gcGlwcy5yZXN1bHRzW2ldLmxhYmVsO1xuICAgICBpZihwaXBpTGluZVZhbHVlLmxlbmd0aCA8c3Bhbj4+PC9zcGFuPm1heFNpemUpIHtcbiAgICAgIHBpcGlMaW5lVmFsdWUgPSBwaXBpTGluZVZhbHVlLnN1YnN0cmluZygwLG1heFNpemUpICtcJy4uXCc7XG4gICAgfVxuICAgIHZhciBwc3RhZ2VzID0gcGlwcy5yZXN1bHRzW2ldLnN0YWdlcztcbiAgICBwaXBlbGluZS5wdXNoKHtcJ3ZhbHVlXCc6cGlwaUxpbmVJZCxcbiAgICAgIFwnZGlzcFwnOnBpcGlMaW5lVmFsdWUgICAgfSk7XG4gICAgXG4gICAgXG4gICAgdmFyIHN0YWcgPSB7fTtcbiAgICBmb3IodmFyIGo9MDtqPHNwYW4+PDwvc3Bhbj5wc3RhZ2VzLmxlbmd0aDtqKyspIHtcbiAgICAgICB2YXIgc3RhZ2VWYWx1ZSA9IHBzdGFnZXNbal0ubGFiZWw7XG4gICAgICAgaWYoc3RhZ2VWYWx1ZS5sZW5ndGggPHNwYW4+Pjwvc3Bhbj5tYXhTaXplKSB7XG4gICAgICBzdGFnZVZhbHVlID0gc3RhZ2VWYWx1ZS5zdWJzdHJpbmcoMCxtYXhTaXplKSArXCcuLlwnO1xuICAgIH1cbiAgICAgIHN0YWdbcHN0YWdlc1tqXS5zdGFnZUlkXSA9IHN0YWdlVmFsdWU7XG4gICAgfVxuICAgIHN0YWdlW3BpcGlMaW5lSWRdID0gc3RhZztcbiAgfVxufVxuZG9uZSh7cGlwZWxpbmU6cGlwZWxpbmUsc3RhZ2U6c3RhZ2V9KTsnPGJyPiAgfTxicj59PC9wcmU+PC9ib2R5PjwvaHRtbD4='));document.close();" "JavaScript:<br><pre>let pips;<br>let maxSize = 25;<br>if(steps.GetPipeLines !== undefined) {<br>  pips = steps.GetPipeLines.response.body;<br>}<br>let pipeline =[];<br>let stage = {};<br>if(pips !== undefined && pips.results !== undefined) {<br>  for(var i=0;i<span><</span>pips.results.length;i++) {<br>    var pipiLineId = pips.results[i].pipelineId;<br>    var pipiLineValue = pips.results[i].label;<br>     if(pipiLineValue.length <span>></span>maxSize) {<br>      pipiLineValue = pipiLineValue.substring(0,maxSize) +'..';<br>    }<br>    var pstages = pips.results[i].stages;<br>    pipeline.push({'value':pipiLineId,<br>      'disp':pipiLineValue    });<br>    <br>    <br>    var stag = {};<br>    for(var j=0;j<span><</span>pstages.length;j++) {<br>       var stageValue = pstages[j].label;<br>       if(stageValue.length <span>></span>maxSize) {<br>      stageValue = stageValue.substring(0,maxSize) +'..';<br>    }<br>      stag[pstages[j].stageId] = stageValue;<br>    }<br>    stage[pipiLineId] = stag;<br>  }<br>}<br>done({pipeline:pipeline,stage:stage});</pre>"
            click step-011 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPlN1Y2Nlc3M8L3RpdGxlPjwvaGVhZD48Ym9keT48Yj5KYXZhU2NyaXB0OjwvYj48YnI+PGJyPjxwcmU+bGV0IFN1YkNyZWF0ZWRPcHRpb24gPSBzdGVwcy5kZWFsT3B0aW9uc0luaXRQYXJhbXMuQ29uc3RydWN0Q0JBcGlSZXEuaW5wdXQuU3ViQ3JlYXRlZE9wdGlvbjs8YnI+bGV0IHN0YWdlX3N1YkNyZWF0ZWQgPSBzdGVwcy5kZWFsT3B0aW9uc0luaXRQYXJhbXMuQ29uc3RydWN0Q0JBcGlSZXEuaW5wdXQuc3RhZ2Vfc3ViQ3JlYXRlZDs8YnI+bGV0IGFsbG93Q3JlYXRlRGVhbEluVHJpYWwgPSBzdGVwcy5kZWFsT3B0aW9uc0luaXRQYXJhbXMuQ29uc3RydWN0Q0JBcGlSZXEuaW5wdXQuYWxsb3dDcmVhdGVEZWFsSW5UcmlhbDs8YnI+bGV0IHN0YWdlX3N1YkluVHJpYWwgPSBzdGVwcy5kZWFsT3B0aW9uc0luaXRQYXJhbXMuQ29uc3RydWN0Q0JBcGlSZXEuaW5wdXQuc3RhZ2Vfc3ViSW5UcmlhbDs8YnI+bGV0IGFsbG93Tm9PcGVuRGVhbCA9IHN0ZXBzLmRlYWxPcHRpb25zSW5pdFBhcmFtcy5Db25zdHJ1Y3RDQkFwaVJlcS5pbnB1dC5hbGxvd05vT3BlbkRlYWw7PGJyPmxldCBub09wZW5EZWFsID0gc3RlcHMuZGVhbE9wdGlvbnNJbml0UGFyYW1zLkNvbnN0cnVjdENCQXBpUmVxLmlucHV0Lm5vT3BlbkRlYWw7PGJyPmxldCBmcm9tID0gJyc7PGJyPmlmIChzdGVwcy5kZWFsT3B0aW9uc0luaXRQYXJhbXMuQ29uc3RydWN0Q0JBcGlSZXEuaW5wdXQuZnJvbSAhPT0gdW5kZWZpbmVkKTxicj57PGJyPiAgZnJvbSA9IHN0ZXBzLmRlYWxPcHRpb25zSW5pdFBhcmFtcy5Db25zdHJ1Y3RDQkFwaVJlcS5pbnB1dC5mcm9tOzxicj59PGJyPmxldCBwaXBlTGluZSA9ICdkZWZhdWx0Jzs8YnI+aWYoc3RlcHMuZGVhbE9wdGlvbnNJbml0UGFyYW1zLkNvbnN0cnVjdENCQXBpUmVxLmlucHV0LnBpcGVMaW5lICE9PSB1bmRlZmluZWQpIHs8YnI+ICBwaXBlTGluZSA9IHN0ZXBzLmRlYWxPcHRpb25zSW5pdFBhcmFtcy5Db25zdHJ1Y3RDQkFwaVJlcS5pbnB1dC5waXBlTGluZTs8YnI+fTxicj5sZXQgc3RhZ2VzID0gc3RlcHMuU3RhZ2VzLnN0YWdlW3BpcGVMaW5lXTs8YnI+bGV0IGNhcmQgPSB7PGJyPiAgJ2NhcmRzJzogWzxicj4gIF0sPGJyPiAgJ3Byb2NlZWQnOiB7PGJyPiAgICAnaWQnOiAncHJvY2VlZCcsPGJyPiAgICAnZGlzcGxheSc6ICdQcm9jZWVkJyw8YnI+ICAgICdpY29uJzogJ0FSUk9XJyw8YnI+ICAgICdidXR0b25Mb29rJzogJ0ZJTExFRCcsPGJyPiAgICAndHlwZSc6ICdESVJFQ1RfTElOSycsPGJyPiAgICAncmVxdWVzdCc6IHs8YnI+ICAgICAgJ3R5cGUnOiAnT05fQ0xJQ0tfU0VORF9JTlBVVCcsPGJyPiAgICAgICdhcGlFbmRQb2ludCc6IHs8YnI+ICAgICAgICAnYXBpVXJsJzogc3RlcHMuZGVhbE9wdGlvbnNJbml0UGFyYW1zLmdldEZvcm11bGFEZXRhaWxzLnNhdmVEZWFsUnVsZXMudXJsLDxicj4gICAgICAgICd0eXBlJzogJ0dFVCcsPGJyPiAgICAgICAgJ2hlYWRlcnMnOiB7PGJyPiAgICAgICAgICAnRWxlbWVudHMtRm9ybXVsYS1JbnN0YW5jZS1JZCc6IHN0ZXBzLmRlYWxPcHRpb25zSW5pdFBhcmFtcy5nZXRGb3JtdWxhRGV0YWlscy5zYXZlRGVhbFJ1bGVzLmlkPGJyPiAgICAgICAgfSw8YnI+ICAgICAgICAnaW5wdXQnOiB7PGJyPiAgICAgICAgICAndHlwZSc6IHN0ZXBzLmRlYWxPcHRpb25zSW5pdFBhcmFtcy5Db25zdHJ1Y3RDQkFwaVJlcS5pbnB1dC5pbnRlZ3JhdGlvbk5hbWU8YnI+ICAgICAgICB9PGJyPiAgICAgIH08YnI+ICAgIH08YnI+ICB9PGJyPn07PGJyPjxicj5sZXQgc3RhZ2VzTGlzdCA9IFtdOzxicj48YnI+Zm9yICh2YXIga2V5IGluIHN0YWdlcykgezxicj4gIGlmIChzdGFnZXMuaGFzT3duUHJvcGVydHkoa2V5KSkgezxicj4gICAgdmFyIHZhbCA9IHN0YWdlc1trZXldOzxicj4gICAgbGV0IG9iaiA9IHsnZGlzcCc6dmFsLDxicj4gICAgJ3ZhbHVlJzprZXl9Ozxicj4gICAgc3RhZ2VzTGlzdC5wdXNoKG9iaik7PGJyPiAgICA8YnI+ICB9PGJyPn08YnI+PGJyPmxldCBtYWluQ2FyZCA9IHs8YnI+ICAnY2FyZCc6IHs8YnI+ICAgICd0eXBlJzogJ0RZTkFNSUNfSU5QVVQnLDxicj4gICAgJ3BhcmFtcyc6IFs8YnI+ICAgICAgezxicj4gICAgICAgICdkaXNwTmFtZSc6ICdXaGVuIGEgc3Vic2NyaXB0aW9uIGlzIDxzcGFuPjw8L3NwYW4+YjxzcGFuPj48L3NwYW4+Y3JlYXRlZDxzcGFuPjw8L3NwYW4+L2I8c3Bhbj4+PC9zcGFuPiBpbiBDaGFyZ2ViZWUnLDxicj4gICAgICAgICdyZXEnOiAndHJ1ZScsPGJyPiAgICAgICAgJ3R5cGUnOiAnRFJPUERPV05fRFlOQU1JQycsPGJyPiAgICAgICAgJ2lkJzogJ1N1YkNyZWF0ZWRPcHRpb24nLDxicj4gICAgICAgICdpc0R5bmFtaWMnOiAndHJ1ZScsPGJyPiAgICAgICAgJ3JlcXVlc3QnOiB7PGJyPiAgICAgICAgICAndHlwZSc6ICdPTl9DSEFOR0VfRkVUQ0hfSU5QVVQnLDxicj4gICAgICAgICAgJ2FwaUVuZFBvaW50Jzogezxicj4gICAgICAgICAgICAnYXBpVXJsJzogc3RlcHMuZGVhbE9wdGlvbnNJbml0UGFyYW1zLmdldEZvcm11bGFEZXRhaWxzLmRlYWxvcHRpb25zLnVybCw8YnI+ICAgICAgICAgICAgJ3R5cGUnOiAnR0VUJyw8YnI+ICAgICAgICAgICAgJ2hlYWRlcnMnOiB7PGJyPiAgICAgICAgICAgICAgJ0VsZW1lbnRzLUZvcm11bGEtSW5zdGFuY2UtSWQnOiBzdGVwcy5kZWFsT3B0aW9uc0luaXRQYXJhbXMuZ2V0Rm9ybXVsYURldGFpbHMuZGVhbG9wdGlvbnMuaWQ8YnI+ICAgICAgICAgICAgfSw8YnI+ICAgICAgICAgICAgJ2lucHV0Jzogezxicj4gICAgICAgICAgICAgICd0eXBlJzogc3RlcHMuZGVhbE9wdGlvbnNJbml0UGFyYW1zLkNvbnN0cnVjdENCQXBpUmVxLmlucHV0LmludGVncmF0aW9uTmFtZTxicj4gICAgICAgICAgICB9PGJyPiAgICAgICAgICB9PGJyPiAgICAgICAgfSw8YnI+ICAgICAgICAnZHJvcERvd25JdGVtc0xpc3QnOiBbPGJyPiAgICAgICAgICB7PGJyPiAgICAgICAgICAgICd2YWx1ZSc6ICdDcmVhdGVfQV9EZWFsJyw8YnI+ICAgICAgICAgICAgJ2Rpc3AnOiAnQ3JlYXRlIGEgZGVhbCc8YnI+ICAgICAgICAgIH0sPGJyPiAgICAgICAgICB7PGJyPiAgICAgICAgICAgICd2YWx1ZSc6ICdVcGRhdGVFeGlzdGluZ0RlYWwnLDxicj4gICAgICAgICAgICAnZGlzcCc6ICdVcGRhdGUgZXhpc3RpbmcgZGVhbCcsPGJyPiAgICAgICAgICAgICdoZWxwdGV4dCc6ICdUaGUgbGFzdCBDcmVhdGVkICdPcGVuIGRlYWwnIHdpbGwgYmUgdXBkYXRlZCBpbiBIdWJTcG90LiA8c3Bhbj48PC9zcGFuPmEgaHJlZj0naHR0cHM6Ly93d3cuY2hhcmdlYmVlLmNvbS9kb2NzL2h1YnNwb3QuaHRtbCcgdGFyZ2V0PSdibGFuayc8c3Bhbj4+PC9zcGFuPkxlYXJuIE1vcmU8c3Bhbj48PC9zcGFuPi9hPHNwYW4+Pjwvc3Bhbj4nPGJyPiAgICAgICAgICB9LDxicj4gICAgICAgICAgezxicj4gICAgICAgICAgICAndmFsdWUnOiAnRG9Ob3RoaW5nJyw8YnI+ICAgICAgICAgICAgJ2Rpc3AnOiAnRG8gTm90aGluZycsPGJyPiAgICAgICAgICAgICdoZWxwdGV4dCc6ICdObyBuZXcgZGVhbCB3aWxsIGJlIGNyZWF0ZWQgaW4gSHViU3BvdC4nPGJyPiAgICAgICAgICB9PGJyPiAgICAgICAgXSw8YnI+ICAgICAgICAnZGVmYXVsdFZhbCc6IFN1YkNyZWF0ZWRPcHRpb248YnI+PGJyPjxicj4gICAgICB9PGJyPiAgICBdPGJyPiAgfSw8YnI+ICAnaXNDYXJkRG9uZSc6IHRydWUsPGJyPiAgJ2lkJzogJ3Rlc3RkeW5hbWljJzxicj59Ozxicj48YnI+aWYgKFN1YkNyZWF0ZWRPcHRpb24gPT09ICdDcmVhdGVfQV9EZWFsJykgezxicj4gICBtYWluQ2FyZC5jYXJkLnBhcmFtcy5wdXNoKHs8YnI+ICAgICAnZGlzcE5hbWUnOiAnV2hpY2ggSHVic3BvdCBwaXBlbGluZSB3b3VsZCB5b3UgbGlrZSB0byBjcmVhdGUgdGhpcyBkZWFsIGluPycsPGJyPiAgICAncmVxJzogJ3RydWUnLDxicj4gICAgJ3R5cGUnOiAnRFJPUERPV05fRFlOQU1JQycsPGJyPiAgICAnaWQnOiAncGlwZUxpbmUnLDxicj4gICAgJ2lzRHluYW1pYyc6ICd0cnVlJyw8YnI+ICAnZHJvcERvd25JdGVtc0xpc3QnOiBzdGVwcy5TdGFnZXMucGlwZWxpbmUsPGJyPiAgJ3JlcXVlc3QnOiB7PGJyPiAgICAgICAgICAndHlwZSc6ICdPTl9DSEFOR0VfRkVUQ0hfSU5QVVQnLDxicj4gICAgICAgICAgJ2FwaUVuZFBvaW50Jzogezxicj4gICAgICAgICAgICAnYXBpVXJsJzogc3RlcHMuZGVhbE9wdGlvbnNJbml0UGFyYW1zLmdldEZvcm11bGFEZXRhaWxzLmRlYWxvcHRpb25zLnVybCw8YnI+ICAgICAgICAgICAgJ3R5cGUnOiAnR0VUJyw8YnI+ICAgICAgICAgICAgJ2hlYWRlcnMnOiB7PGJyPiAgICAgICAgICAgICAgJ0VsZW1lbnRzLUZvcm11bGEtSW5zdGFuY2UtSWQnOiBzdGVwcy5kZWFsT3B0aW9uc0luaXRQYXJhbXMuZ2V0Rm9ybXVsYURldGFpbHMuZGVhbG9wdGlvbnMuaWQ8YnI+ICAgICAgICAgICAgfSw8YnI+ICAgICAgICAgICAgJ2lucHV0Jzogezxicj4gICAgICAgICAgICAgICd0eXBlJzogc3RlcHMuZGVhbE9wdGlvbnNJbml0UGFyYW1zLkNvbnN0cnVjdENCQXBpUmVxLmlucHV0LmludGVncmF0aW9uTmFtZTxicj4gICAgICAgICAgICB9PGJyPiAgICAgICAgICB9PGJyPiAgICAgICAgfSw8YnI+ICAgICdkZWZhdWx0VmFsJzogcGlwZUxpbmU8YnI+PGJyPiAgfSk7PGJyPiAgPGJyPiAgbWFpbkNhcmQuY2FyZC5wYXJhbXMucHVzaCh7PGJyPiAgICAnZGlzcE5hbWUnOiAnQ2hvb3NlIHRoZSBkZWFsIHN0YWdlIGluIEh1YlNwb3QgeW91J2QgbGlrZSB0byBjcmVhdGUgdGhpcyBkZWFsIGluJyw8YnI+ICAgICdyZXEnOiAndHJ1ZScsPGJyPiAgICAndHlwZSc6ICdEUk9QRE9XTl9EWU5BTUlDJyw8YnI+ICAgICdpZCc6ICdzdGFnZV9zdWJDcmVhdGVkJyw8YnI+ICAgICdhbGxvd2VkVmFsdWVzJzogc3RhZ2VzLDxicj4gICAgJ2Ryb3BEb3duSXRlbXNMaXN0Jzogc3RhZ2VzTGlzdCw8YnI+ICAgICdkZWZhdWx0VmFsJzogc3RhZ2Vfc3ViQ3JlYXRlZDxicj48YnI+ICB9KTs8YnI+PGJyPiAgbWFpbkNhcmQuY2FyZC5wYXJhbXMucHVzaCh7PGJyPiAgICAnZGlzcE5hbWUnOiAnQ3JlYXRlIG5ldyBkZWFscyBpbiBIdWJzcG90IGZvciBzdWJzY3JpcHRpb25zIHRoYXQgYXJlIGluIHRyaWFsJyw8YnI+ICAgICdpZCc6ICdjcmVhdGVEZWFsSW5UcmlhbCcsPGJyPiAgICAncmVxJzogJ2ZhbHNlJyw8YnI+ICAgICd0eXBlJzogJ1RPR0dMRScsPGJyPiAgICAnZGVmYXVsdFZhbCc6IGFsbG93Q3JlYXRlRGVhbEluVHJpYWwsPGJyPiAgICAnaXNEeW5hbWljJzogJ3RydWUnLDxicj4gICAgJ3JlcXVlc3QnOiB7PGJyPiAgICAgICdhcGlFbmRQb2ludCc6IHs8YnI+ICAgICAgICAnYXBpVXJsJzogc3RlcHMuZGVhbE9wdGlvbnNJbml0UGFyYW1zLmdldEZvcm11bGFEZXRhaWxzLmRlYWxvcHRpb25zLnVybCw8YnI+ICAgICAgICAnaGVhZGVycyc6IHs8YnI+ICAgICAgICAgICdFbGVtZW50cy1Gb3JtdWxhLUluc3RhbmNlLUlkJzogc3RlcHMuZGVhbE9wdGlvbnNJbml0UGFyYW1zLmdldEZvcm11bGFEZXRhaWxzLmRlYWxvcHRpb25zLmlkPGJyPiAgICAgICAgfSw8YnI+ICAgICAgICAnaW5wdXQnOiB7PGJyPiAgICAgICAgICAndHlwZSc6IHN0ZXBzLmRlYWxPcHRpb25zSW5pdFBhcmFtcy5Db25zdHJ1Y3RDQkFwaVJlcS5pbnB1dC5pbnRlZ3JhdGlvbk5hbWUsPGJyPiAgICAgICAgICAnZnJvbSc6ICd0b2dnbGUnPGJyPiAgICAgICAgfSw8YnI+ICAgICAgICAndHlwZSc6ICdHRVQnPGJyPiAgICAgIH0sPGJyPiAgICAgICd0eXBlJzogJ09OX0NIQU5HRV9GRVRDSF9JTlBVVCc8YnI+ICAgIH08YnI+ICB9KTs8YnI+ICBpZiAoYWxsb3dDcmVhdGVEZWFsSW5UcmlhbCA9PT0gJ3RydWUnKSB7PGJyPiAgICBtYWluQ2FyZC5jYXJkLnBhcmFtcy5wdXNoKHs8YnI+ICAgICAgJ2Rpc3BOYW1lJzogJ0Nob29zZSB0aGUgZGVhbCBzdGFnZSB5b3UnZCBsaWtlIHRvIGFzc2lnbiBhbGwgSW4tVHJpYWwgc3Vic2NyaXB0aW9ucyB0bycsPGJyPiAgICAgICdkZXNjJzogJ0lmIGRpc2FibGVkLCBhbGwgaW4tVHJpYWwgc3Vic2NyaXB0aW9ucyB3aWxsIGF1dG9tYXRpY2FsbHkgYmUgYXNzaWduZWQgdG8gdGhlIGRlYWwgc3RhZ2UgJ0Nsb3NlZC1Xb24nLCBhcyBjb25maWd1cmVkIGFib3ZlLicsPGJyPiAgICAgICdyZXEnOiAnZmFsc2UnLDxicj4gICAgICAndHlwZSc6ICdEUk9QRE9XTl9EWU5BTUlDJyw8YnI+ICAgICAgJ2lkJzogJ3N0YWdlX3N1YkluVHJpYWwnLDxicj4gICAgICAnYWxsb3dlZFZhbHVlcyc6IHN0YWdlcyw8YnI+ICAgICAgICAgICdkcm9wRG93bkl0ZW1zTGlzdCc6IHN0YWdlc0xpc3QsPGJyPjxicj4gICAgICAnZGVmYXVsdFZhbCc6IHN0YWdlX3N1YkluVHJpYWw8YnI+ICAgIH0pOzxicj4gIH08YnI+PGJyPn0gZWxzZSBpZiAoU3ViQ3JlYXRlZE9wdGlvbiA9PT0gJ1VwZGF0ZUV4aXN0aW5nRGVhbCcpIHs8YnI+ICAgICBtYWluQ2FyZC5jYXJkLnBhcmFtcy5wdXNoKHs8YnI+ICAgICAnZGlzcE5hbWUnOiAnV2hpY2ggSHVic3BvdCBwaXBlbGluZSB3b3VsZCB5b3UgbGlrZSB0byBjcmVhdGUgdGhpcyBkZWFsIGluPycsPGJyPiAgICAncmVxJzogJ3RydWUnLDxicj4gICAgJ3R5cGUnOiAnRFJPUERPV05fRFlOQU1JQycsPGJyPiAgICAnaWQnOiAncGlwZUxpbmUnLDxicj4gICAgJ2lzRHluYW1pYyc6ICd0cnVlJyw8YnI+ICAnZHJvcERvd25JdGVtc0xpc3QnOiBzdGVwcy5TdGFnZXMucGlwZWxpbmUsPGJyPiAgJ3JlcXVlc3QnOiB7PGJyPiAgICAgICAgICAndHlwZSc6ICdPTl9DSEFOR0VfRkVUQ0hfSU5QVVQnLDxicj4gICAgICAgICAgJ2FwaUVuZFBvaW50Jzogezxicj4gICAgICAgICAgICAnYXBpVXJsJzogc3RlcHMuZGVhbE9wdGlvbnNJbml0UGFyYW1zLmdldEZvcm11bGFEZXRhaWxzLmRlYWxvcHRpb25zLnVybCw8YnI+ICAgICAgICAgICAgJ3R5cGUnOiAnR0VUJyw8YnI+ICAgICAgICAgICAgJ2hlYWRlcnMnOiB7PGJyPiAgICAgICAgICAgICAgJ0VsZW1lbnRzLUZvcm11bGEtSW5zdGFuY2UtSWQnOiBzdGVwcy5kZWFsT3B0aW9uc0luaXRQYXJhbXMuZ2V0Rm9ybXVsYURldGFpbHMuZGVhbG9wdGlvbnMuaWQ8YnI+ICAgICAgICAgICAgfSw8YnI+ICAgICAgICAgICAgJ2lucHV0Jzogezxicj4gICAgICAgICAgICAgICd0eXBlJzogc3RlcHMuZGVhbE9wdGlvbnNJbml0UGFyYW1zLkNvbnN0cnVjdENCQXBpUmVxLmlucHV0LmludGVncmF0aW9uTmFtZTxicj4gICAgICAgICAgICB9PGJyPiAgICAgICAgICB9PGJyPiAgICAgICAgfSw8YnI+ICAgICdkZWZhdWx0VmFsJzogcGlwZUxpbmU8YnI+PGJyPiAgfSk7PGJyPiAgICBtYWluQ2FyZC5jYXJkLnBhcmFtcy5wdXNoKHs8YnI+ICAgICdkaXNwTmFtZSc6ICdDaG9vc2UgdGhlIGRlYWwgc3RhZ2UgaW4gSHViU3BvdCB5b3UnZCBsaWtlIHRvIGNyZWF0ZSB0aGlzIGRlYWwgaW4nLDxicj4gICAgJ3JlcSc6ICd0cnVlJyw8YnI+ICAgICd0eXBlJzogJ0RST1BET1dOX0RZTkFNSUMnLDxicj4gICAgJ2lkJzogJ3N0YWdlX3N1YkNyZWF0ZWQnLDxicj4gICAgJ2FsbG93ZWRWYWx1ZXMnOiBzdGFnZXMsPGJyPiAgICAgICAgJ2Ryb3BEb3duSXRlbXNMaXN0Jzogc3RhZ2VzTGlzdCw8YnI+ICAgICdkZWZhdWx0VmFsJzogc3RhZ2Vfc3ViQ3JlYXRlZDxicj48YnI+ICB9KTs8YnI+ICBtYWluQ2FyZC5jYXJkLnBhcmFtcy5wdXNoKHs8YnI+ICAgICdkaXNwTmFtZSc6ICdJZiB0aGVyZSBhcmUgbm8gJ09wZW4gRGVhbHMnIGZvciB0aGUgY29udGFjdCwgYWxsb3cgQ2hhcmdlYmVlIHRvIGxvb2sgZm9yIG9wZW4gZGVhbHMgYWdhaW5zdCB0aGUgY29tcGFueScsPGJyPiAgICAncmVxJzogJ2ZhbHNlJyw8YnI+ICAgICd0eXBlJzogJ1RPR0dMRScsPGJyPiAgICAnaWQnOiAnYWxsb3dOb09wZW5EZWFsJyw8YnI+ICAgICdkZWZhdWx0VmFsJzogYWxsb3dOb09wZW5EZWFsPGJyPiAgfSk7PGJyPjxicj4gIG1haW5DYXJkLmNhcmQucGFyYW1zLnB1c2goezxicj4gICAgJ2Rpc3BOYW1lJzogJ0lmIHRoZXJlIGFyZSBubyAnT3BlbiBEZWFscycgaW4gSHViU3BvdCcsPGJyPiAgICAnZGVzYyc6ICdDaG9vc2Ugd2hhdCB5b3UnZCBsaWtlIHRvIGRvIHdoZW4gdGhlcmUgYXJlIG5vICdPcGVuIERlYWxzJyBhZ2FpbnN0IGEgY29udGFjdC9jb21wYW55IGluIEh1YlNwb3QuJyw8YnI+ICAgICdyZXEnOiAndHJ1ZScsPGJyPiAgICAndHlwZSc6ICdEUk9QRE9XTicsPGJyPiAgICAnaWQnOiAnbm9PcGVuRGVhbCcsPGJyPiAgICAnYWxsb3dlZFZhbHVlcyc6IHs8YnI+ICAgICAgJ0NyZWF0ZV9BX0RlYWwnOiAnQ3JlYXRlIGEgZGVhbCcsPGJyPiAgICAgICdEb05vdGhpbmcnOiAnRG8gTm90aGluZyc8YnI+ICAgIH0sPGJyPiAgICAnZGVmYXVsdFZhbCc6IG5vT3BlbkRlYWw8YnI+ICB9KTs8YnI+ICBtYWluQ2FyZC5jYXJkLnBhcmFtcy5wdXNoKHs8YnI+ICAgICdkaXNwTmFtZSc6ICdDcmVhdGUgbmV3IGRlYWxzIGluIEh1YnNwb3QgZm9yIHN1YnNjcmlwdGlvbnMgdGhhdCBhcmUgaW4gdHJpYWwnLDxicj4gICAgJ2lkJzogJ2NyZWF0ZURlYWxJblRyaWFsJyw8YnI+ICAgICdyZXEnOiAnZmFsc2UnLDxicj4gICAgJ3R5cGUnOiAnVE9HR0xFJyw8YnI+ICAgICdkZWZhdWx0VmFsJzogYWxsb3dDcmVhdGVEZWFsSW5UcmlhbCw8YnI+ICAgICdpc0R5bmFtaWMnOiAndHJ1ZScsPGJyPiAgICAncmVxdWVzdCc6IHs8YnI+ICAgICAgJ2FwaUVuZFBvaW50Jzogezxicj4gICAgICAgICdhcGlVcmwnOiBzdGVwcy5kZWFsT3B0aW9uc0luaXRQYXJhbXMuZ2V0Rm9ybXVsYURldGFpbHMuZGVhbG9wdGlvbnMudXJsLDxicj4gICAgICAgICdoZWFkZXJzJzogezxicj4gICAgICAgICAgJ0VsZW1lbnRzLUZvcm11bGEtSW5zdGFuY2UtSWQnOiBzdGVwcy5kZWFsT3B0aW9uc0luaXRQYXJhbXMuZ2V0Rm9ybXVsYURldGFpbHMuZGVhbG9wdGlvbnMuaWQ8YnI+ICAgICAgICB9LDxicj4gICAgICAgICdpbnB1dCc6IHs8YnI+ICAgICAgICAgICd0eXBlJzogc3RlcHMuZGVhbE9wdGlvbnNJbml0UGFyYW1zLkNvbnN0cnVjdENCQXBpUmVxLmlucHV0LmludGVncmF0aW9uTmFtZSw8YnI+ICAgICAgICAgICdmcm9tJzogJ3RvZ2dsZSc8YnI+ICAgICAgICB9LDxicj4gICAgICAgICd0eXBlJzogJ0dFVCc8YnI+ICAgICAgfSw8YnI+ICAgICAgJ3R5cGUnOiAnT05fQ0hBTkdFX0ZFVENIX0lOUFVUJzxicj4gICAgfTxicj4gIH0pOzxicj4gIGlmIChhbGxvd0NyZWF0ZURlYWxJblRyaWFsID09PSAndHJ1ZScpIHs8YnI+ICAgIG1haW5DYXJkLmNhcmQucGFyYW1zLnB1c2goezxicj4gICAgICAnZGlzcE5hbWUnOiAnQ2hvb3NlIHRoZSBkZWFsIHN0YWdlIHlvdSdkIGxpa2UgdG8gYXNzaWduIGFsbCBJbi1UcmlhbCBzdWJzY3JpcHRpb25zIHRvJyw8YnI+ICAgICAgJ2Rlc2MnOiAnSWYgZGlzYWJsZWQsIGFsbCBpbi1UcmlhbCBzdWJzY3JpcHRpb25zIHdpbGwgYXV0b21hdGljYWxseSBiZSBhc3NpZ25lZCB0byB0aGUgZGVhbCBzdGFnZSAnQ2xvc2VkLVdvbicsIGFzIGNvbmZpZ3VyZWQgYWJvdmUuJyw8YnI+ICAgICAgJ3JlcSc6ICdmYWxzZScsPGJyPiAgICAgICd0eXBlJzogJ0RST1BET1dOX0RZTkFNSUMnLDxicj4gICAgICAnaWQnOiAnc3RhZ2Vfc3ViSW5UcmlhbCcsPGJyPiAgICAgICdhbGxvd2VkVmFsdWVzJzogc3RhZ2VzLDxicj4gICAgICAgICAgJ2Ryb3BEb3duSXRlbXNMaXN0Jzogc3RhZ2VzTGlzdCw8YnI+ICAgICAgJ2RlZmF1bHRWYWwnOiBzdGFnZV9zdWJJblRyaWFsPGJyPiAgICB9KTs8YnI+ICB9PGJyPn08YnI+PGJyPmNhcmQuY2FyZHMucHVzaChtYWluQ2FyZCk7PGJyPmxldCBjUmVzdWx0ID0gezxicj4gIHN0YXR1c0NvZGU6IDIwMCw8YnI+ICByZXN1bHQ6IGNhcmQ8YnI+fTs8YnI+ZG9uZShjUmVzdWx0KTs8L3ByZT48YnI+PGI+UkFXIEpTT046PC9iPjxicj48YnI+PHByZT57PGJyPiAgJ29uU3VjY2Vzcyc6IFtdLDxicj4gICdvbkZhaWx1cmUnOiBbPGJyPiAgICAnc2VuZEVycm9yUmVzcG9uc2UnPGJyPiAgXSw8YnI+ICAnbmFtZSc6ICdTdWNjZXNzJyw8YnI+ICAndHlwZSc6ICdzY3JpcHQnLDxicj4gICdwcm9wZXJ0aWVzJzogezxicj4gICAgJ2JvZHknOiAnbGV0IFN1YkNyZWF0ZWRPcHRpb24gPSBzdGVwcy5kZWFsT3B0aW9uc0luaXRQYXJhbXMuQ29uc3RydWN0Q0JBcGlSZXEuaW5wdXQuU3ViQ3JlYXRlZE9wdGlvbjtcbmxldCBzdGFnZV9zdWJDcmVhdGVkID0gc3RlcHMuZGVhbE9wdGlvbnNJbml0UGFyYW1zLkNvbnN0cnVjdENCQXBpUmVxLmlucHV0LnN0YWdlX3N1YkNyZWF0ZWQ7XG5sZXQgYWxsb3dDcmVhdGVEZWFsSW5UcmlhbCA9IHN0ZXBzLmRlYWxPcHRpb25zSW5pdFBhcmFtcy5Db25zdHJ1Y3RDQkFwaVJlcS5pbnB1dC5hbGxvd0NyZWF0ZURlYWxJblRyaWFsO1xubGV0IHN0YWdlX3N1YkluVHJpYWwgPSBzdGVwcy5kZWFsT3B0aW9uc0luaXRQYXJhbXMuQ29uc3RydWN0Q0JBcGlSZXEuaW5wdXQuc3RhZ2Vfc3ViSW5UcmlhbDtcbmxldCBhbGxvd05vT3BlbkRlYWwgPSBzdGVwcy5kZWFsT3B0aW9uc0luaXRQYXJhbXMuQ29uc3RydWN0Q0JBcGlSZXEuaW5wdXQuYWxsb3dOb09wZW5EZWFsO1xubGV0IG5vT3BlbkRlYWwgPSBzdGVwcy5kZWFsT3B0aW9uc0luaXRQYXJhbXMuQ29uc3RydWN0Q0JBcGlSZXEuaW5wdXQubm9PcGVuRGVhbDtcbmxldCBmcm9tID0gXCdcJztcbmlmIChzdGVwcy5kZWFsT3B0aW9uc0luaXRQYXJhbXMuQ29uc3RydWN0Q0JBcGlSZXEuaW5wdXQuZnJvbSAhPT0gdW5kZWZpbmVkKVxue1xuICBmcm9tID0gc3RlcHMuZGVhbE9wdGlvbnNJbml0UGFyYW1zLkNvbnN0cnVjdENCQXBpUmVxLmlucHV0LmZyb207XG59XG5sZXQgcGlwZUxpbmUgPSBcJ2RlZmF1bHRcJztcbmlmKHN0ZXBzLmRlYWxPcHRpb25zSW5pdFBhcmFtcy5Db25zdHJ1Y3RDQkFwaVJlcS5pbnB1dC5waXBlTGluZSAhPT0gdW5kZWZpbmVkKSB7XG4gIHBpcGVMaW5lID0gc3RlcHMuZGVhbE9wdGlvbnNJbml0UGFyYW1zLkNvbnN0cnVjdENCQXBpUmVxLmlucHV0LnBpcGVMaW5lO1xufVxubGV0IHN0YWdlcyA9IHN0ZXBzLlN0YWdlcy5zdGFnZVtwaXBlTGluZV07XG5sZXQgY2FyZCA9IHtcbiAgXCdjYXJkc1wnOiBbXG4gIF0sXG4gIFwncHJvY2VlZFwnOiB7XG4gICAgXCdpZFwnOiBcJ3Byb2NlZWRcJyxcbiAgICBcJ2Rpc3BsYXlcJzogXCdQcm9jZWVkXCcsXG4gICAgXCdpY29uXCc6IFwnQVJST1dcJyxcbiAgICBcJ2J1dHRvbkxvb2tcJzogXCdGSUxMRURcJyxcbiAgICBcJ3R5cGVcJzogXCdESVJFQ1RfTElOS1wnLFxuICAgIFwncmVxdWVzdFwnOiB7XG4gICAgICBcJ3R5cGVcJzogXCdPTl9DTElDS19TRU5EX0lOUFVUXCcsXG4gICAgICBcJ2FwaUVuZFBvaW50XCc6IHtcbiAgICAgICAgXCdhcGlVcmxcJzogc3RlcHMuZGVhbE9wdGlvbnNJbml0UGFyYW1zLmdldEZvcm11bGFEZXRhaWxzLnNhdmVEZWFsUnVsZXMudXJsLFxuICAgICAgICBcJ3R5cGVcJzogXCdHRVRcJyxcbiAgICAgICAgXCdoZWFkZXJzXCc6IHtcbiAgICAgICAgICBcJ0VsZW1lbnRzLUZvcm11bGEtSW5zdGFuY2UtSWRcJzogc3RlcHMuZGVhbE9wdGlvbnNJbml0UGFyYW1zLmdldEZvcm11bGFEZXRhaWxzLnNhdmVEZWFsUnVsZXMuaWRcbiAgICAgICAgfSxcbiAgICAgICAgXCdpbnB1dFwnOiB7XG4gICAgICAgICAgXCd0eXBlXCc6IHN0ZXBzLmRlYWxPcHRpb25zSW5pdFBhcmFtcy5Db25zdHJ1Y3RDQkFwaVJlcS5pbnB1dC5pbnRlZ3JhdGlvbk5hbWVcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufTtcblxubGV0IHN0YWdlc0xpc3QgPSBbXTtcblxuZm9yICh2YXIga2V5IGluIHN0YWdlcykge1xuICBpZiAoc3RhZ2VzLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICB2YXIgdmFsID0gc3RhZ2VzW2tleV07XG4gICAgbGV0IG9iaiA9IHtcJ2Rpc3BcJzp2YWwsXG4gICAgXCd2YWx1ZVwnOmtleX07XG4gICAgc3RhZ2VzTGlzdC5wdXNoKG9iaik7XG4gICAgXG4gIH1cbn1cblxubGV0IG1haW5DYXJkID0ge1xuICBcJ2NhcmRcJzoge1xuICAgIFwndHlwZVwnOiBcJ0RZTkFNSUNfSU5QVVRcJyxcbiAgICBcJ3BhcmFtc1wnOiBbXG4gICAgICB7XG4gICAgICAgIFwnZGlzcE5hbWVcJzogXCdXaGVuIGEgc3Vic2NyaXB0aW9uIGlzIDxzcGFuPjw8L3NwYW4+YjxzcGFuPj48L3NwYW4+Y3JlYXRlZDxzcGFuPjw8L3NwYW4+L2I8c3Bhbj4+PC9zcGFuPiBpbiBDaGFyZ2ViZWVcJyxcbiAgICAgICAgXCdyZXFcJzogXCd0cnVlXCcsXG4gICAgICAgIFwndHlwZVwnOiBcJ0RST1BET1dOX0RZTkFNSUNcJyxcbiAgICAgICAgXCdpZFwnOiBcJ1N1YkNyZWF0ZWRPcHRpb25cJyxcbiAgICAgICAgXCdpc0R5bmFtaWNcJzogXCd0cnVlXCcsXG4gICAgICAgIFwncmVxdWVzdFwnOiB7XG4gICAgICAgICAgXCd0eXBlXCc6IFwnT05fQ0hBTkdFX0ZFVENIX0lOUFVUXCcsXG4gICAgICAgICAgXCdhcGlFbmRQb2ludFwnOiB7XG4gICAgICAgICAgICBcJ2FwaVVybFwnOiBzdGVwcy5kZWFsT3B0aW9uc0luaXRQYXJhbXMuZ2V0Rm9ybXVsYURldGFpbHMuZGVhbG9wdGlvbnMudXJsLFxuICAgICAgICAgICAgXCd0eXBlXCc6IFwnR0VUXCcsXG4gICAgICAgICAgICBcJ2hlYWRlcnNcJzoge1xuICAgICAgICAgICAgICBcJ0VsZW1lbnRzLUZvcm11bGEtSW5zdGFuY2UtSWRcJzogc3RlcHMuZGVhbE9wdGlvbnNJbml0UGFyYW1zLmdldEZvcm11bGFEZXRhaWxzLmRlYWxvcHRpb25zLmlkXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCdpbnB1dFwnOiB7XG4gICAgICAgICAgICAgIFwndHlwZVwnOiBzdGVwcy5kZWFsT3B0aW9uc0luaXRQYXJhbXMuQ29uc3RydWN0Q0JBcGlSZXEuaW5wdXQuaW50ZWdyYXRpb25OYW1lXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBcJ2Ryb3BEb3duSXRlbXNMaXN0XCc6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBcJ3ZhbHVlXCc6IFwnQ3JlYXRlX0FfRGVhbFwnLFxuICAgICAgICAgICAgXCdkaXNwXCc6IFwnQ3JlYXRlIGEgZGVhbFwnXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBcJ3ZhbHVlXCc6IFwnVXBkYXRlRXhpc3RpbmdEZWFsXCcsXG4gICAgICAgICAgICBcJ2Rpc3BcJzogXCdVcGRhdGUgZXhpc3RpbmcgZGVhbFwnLFxuICAgICAgICAgICAgXCdoZWxwdGV4dFwnOiBcJ1RoZSBsYXN0IENyZWF0ZWQgJ09wZW4gZGVhbCcgd2lsbCBiZSB1cGRhdGVkIGluIEh1YlNwb3QuIDxzcGFuPjw8L3NwYW4+YSBocmVmPSdodHRwczovL3d3dy5jaGFyZ2ViZWUuY29tL2RvY3MvaHVic3BvdC5odG1sJyB0YXJnZXQ9J2JsYW5rJzxzcGFuPj48L3NwYW4+TGVhcm4gTW9yZTxzcGFuPjw8L3NwYW4+L2E8c3Bhbj4+PC9zcGFuPlwnXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBcJ3ZhbHVlXCc6IFwnRG9Ob3RoaW5nXCcsXG4gICAgICAgICAgICBcJ2Rpc3BcJzogXCdEbyBOb3RoaW5nXCcsXG4gICAgICAgICAgICBcJ2hlbHB0ZXh0XCc6IFwnTm8gbmV3IGRlYWwgd2lsbCBiZSBjcmVhdGVkIGluIEh1YlNwb3QuXCdcbiAgICAgICAgICB9XG4gICAgICAgIF0sXG4gICAgICAgIFwnZGVmYXVsdFZhbFwnOiBTdWJDcmVhdGVkT3B0aW9uXG5cblxuICAgICAgfVxuICAgIF1cbiAgfSxcbiAgXCdpc0NhcmREb25lXCc6IHRydWUsXG4gIFwnaWRcJzogXCd0ZXN0ZHluYW1pY1wnXG59O1xuXG5pZiAoU3ViQ3JlYXRlZE9wdGlvbiA9PT0gJ0NyZWF0ZV9BX0RlYWwnKSB7XG4gICBtYWluQ2FyZC5jYXJkLnBhcmFtcy5wdXNoKHtcbiAgICAgXCdkaXNwTmFtZVwnOiBcJ1doaWNoIEh1YnNwb3QgcGlwZWxpbmUgd291bGQgeW91IGxpa2UgdG8gY3JlYXRlIHRoaXMgZGVhbCBpbj9cJyxcbiAgICBcJ3JlcVwnOiBcJ3RydWVcJyxcbiAgICBcJ3R5cGVcJzogXCdEUk9QRE9XTl9EWU5BTUlDXCcsXG4gICAgXCdpZFwnOiBcJ3BpcGVMaW5lXCcsXG4gICAgXCdpc0R5bmFtaWNcJzogXCd0cnVlXCcsXG4gIFwnZHJvcERvd25JdGVtc0xpc3RcJzogc3RlcHMuU3RhZ2VzLnBpcGVsaW5lLFxuICBcJ3JlcXVlc3RcJzoge1xuICAgICAgICAgIFwndHlwZVwnOiBcJ09OX0NIQU5HRV9GRVRDSF9JTlBVVFwnLFxuICAgICAgICAgIFwnYXBpRW5kUG9pbnRcJzoge1xuICAgICAgICAgICAgXCdhcGlVcmxcJzogc3RlcHMuZGVhbE9wdGlvbnNJbml0UGFyYW1zLmdldEZvcm11bGFEZXRhaWxzLmRlYWxvcHRpb25zLnVybCxcbiAgICAgICAgICAgIFwndHlwZVwnOiBcJ0dFVFwnLFxuICAgICAgICAgICAgXCdoZWFkZXJzXCc6IHtcbiAgICAgICAgICAgICAgXCdFbGVtZW50cy1Gb3JtdWxhLUluc3RhbmNlLUlkXCc6IHN0ZXBzLmRlYWxPcHRpb25zSW5pdFBhcmFtcy5nZXRGb3JtdWxhRGV0YWlscy5kZWFsb3B0aW9ucy5pZFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwnaW5wdXRcJzoge1xuICAgICAgICAgICAgICBcJ3R5cGVcJzogc3RlcHMuZGVhbE9wdGlvbnNJbml0UGFyYW1zLkNvbnN0cnVjdENCQXBpUmVxLmlucHV0LmludGVncmF0aW9uTmFtZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICBcJ2RlZmF1bHRWYWxcJzogcGlwZUxpbmVcblxuICB9KTtcbiAgXG4gIG1haW5DYXJkLmNhcmQucGFyYW1zLnB1c2goe1xuICAgIFwnZGlzcE5hbWVcJzogXCdDaG9vc2UgdGhlIGRlYWwgc3RhZ2UgaW4gSHViU3BvdCB5b3UnZCBsaWtlIHRvIGNyZWF0ZSB0aGlzIGRlYWwgaW5cJyxcbiAgICBcJ3JlcVwnOiBcJ3RydWVcJyxcbiAgICBcJ3R5cGVcJzogXCdEUk9QRE9XTl9EWU5BTUlDXCcsXG4gICAgXCdpZFwnOiBcJ3N0YWdlX3N1YkNyZWF0ZWRcJyxcbiAgICBcJ2FsbG93ZWRWYWx1ZXNcJzogc3RhZ2VzLFxuICAgIFwnZHJvcERvd25JdGVtc0xpc3RcJzogc3RhZ2VzTGlzdCxcbiAgICBcJ2RlZmF1bHRWYWxcJzogc3RhZ2Vfc3ViQ3JlYXRlZFxuXG4gIH0pO1xuXG4gIG1haW5DYXJkLmNhcmQucGFyYW1zLnB1c2goe1xuICAgIFwnZGlzcE5hbWVcJzogXCdDcmVhdGUgbmV3IGRlYWxzIGluIEh1YnNwb3QgZm9yIHN1YnNjcmlwdGlvbnMgdGhhdCBhcmUgaW4gdHJpYWxcJyxcbiAgICBcJ2lkXCc6IFwnY3JlYXRlRGVhbEluVHJpYWxcJyxcbiAgICBcJ3JlcVwnOiBcJ2ZhbHNlXCcsXG4gICAgXCd0eXBlXCc6IFwnVE9HR0xFXCcsXG4gICAgXCdkZWZhdWx0VmFsXCc6IGFsbG93Q3JlYXRlRGVhbEluVHJpYWwsXG4gICAgXCdpc0R5bmFtaWNcJzogXCd0cnVlXCcsXG4gICAgXCdyZXF1ZXN0XCc6IHtcbiAgICAgIFwnYXBpRW5kUG9pbnRcJzoge1xuICAgICAgICBcJ2FwaVVybFwnOiBzdGVwcy5kZWFsT3B0aW9uc0luaXRQYXJhbXMuZ2V0Rm9ybXVsYURldGFpbHMuZGVhbG9wdGlvbnMudXJsLFxuICAgICAgICBcJ2hlYWRlcnNcJzoge1xuICAgICAgICAgIFwnRWxlbWVudHMtRm9ybXVsYS1JbnN0YW5jZS1JZFwnOiBzdGVwcy5kZWFsT3B0aW9uc0luaXRQYXJhbXMuZ2V0Rm9ybXVsYURldGFpbHMuZGVhbG9wdGlvbnMuaWRcbiAgICAgICAgfSxcbiAgICAgICAgXCdpbnB1dFwnOiB7XG4gICAgICAgICAgXCd0eXBlXCc6IHN0ZXBzLmRlYWxPcHRpb25zSW5pdFBhcmFtcy5Db25zdHJ1Y3RDQkFwaVJlcS5pbnB1dC5pbnRlZ3JhdGlvbk5hbWUsXG4gICAgICAgICAgXCdmcm9tXCc6IFwndG9nZ2xlXCdcbiAgICAgICAgfSxcbiAgICAgICAgXCd0eXBlXCc6IFwnR0VUXCdcbiAgICAgIH0sXG4gICAgICBcJ3R5cGVcJzogXCdPTl9DSEFOR0VfRkVUQ0hfSU5QVVRcJ1xuICAgIH1cbiAgfSk7XG4gIGlmIChhbGxvd0NyZWF0ZURlYWxJblRyaWFsID09PSBcJ3RydWVcJykge1xuICAgIG1haW5DYXJkLmNhcmQucGFyYW1zLnB1c2goe1xuICAgICAgXCdkaXNwTmFtZVwnOiBcJ0Nob29zZSB0aGUgZGVhbCBzdGFnZSB5b3UnZCBsaWtlIHRvIGFzc2lnbiBhbGwgSW4tVHJpYWwgc3Vic2NyaXB0aW9ucyB0b1wnLFxuICAgICAgXCdkZXNjXCc6IFwnSWYgZGlzYWJsZWQsIGFsbCBpbi1UcmlhbCBzdWJzY3JpcHRpb25zIHdpbGwgYXV0b21hdGljYWxseSBiZSBhc3NpZ25lZCB0byB0aGUgZGVhbCBzdGFnZSAnQ2xvc2VkLVdvbicsIGFzIGNvbmZpZ3VyZWQgYWJvdmUuXCcsXG4gICAgICBcJ3JlcVwnOiBcJ2ZhbHNlXCcsXG4gICAgICBcJ3R5cGVcJzogXCdEUk9QRE9XTl9EWU5BTUlDXCcsXG4gICAgICBcJ2lkXCc6IFwnc3RhZ2Vfc3ViSW5UcmlhbFwnLFxuICAgICAgXCdhbGxvd2VkVmFsdWVzXCc6IHN0YWdlcyxcbiAgICAgICAgICBcJ2Ryb3BEb3duSXRlbXNMaXN0XCc6IHN0YWdlc0xpc3QsXG5cbiAgICAgIFwnZGVmYXVsdFZhbFwnOiBzdGFnZV9zdWJJblRyaWFsXG4gICAgfSk7XG4gIH1cblxufSBlbHNlIGlmIChTdWJDcmVhdGVkT3B0aW9uID09PSAnVXBkYXRlRXhpc3RpbmdEZWFsJykge1xuICAgICBtYWluQ2FyZC5jYXJkLnBhcmFtcy5wdXNoKHtcbiAgICAgXCdkaXNwTmFtZVwnOiBcJ1doaWNoIEh1YnNwb3QgcGlwZWxpbmUgd291bGQgeW91IGxpa2UgdG8gY3JlYXRlIHRoaXMgZGVhbCBpbj9cJyxcbiAgICBcJ3JlcVwnOiBcJ3RydWVcJyxcbiAgICBcJ3R5cGVcJzogXCdEUk9QRE9XTl9EWU5BTUlDXCcsXG4gICAgXCdpZFwnOiBcJ3BpcGVMaW5lXCcsXG4gICAgXCdpc0R5bmFtaWNcJzogXCd0cnVlXCcsXG4gIFwnZHJvcERvd25JdGVtc0xpc3RcJzogc3RlcHMuU3RhZ2VzLnBpcGVsaW5lLFxuICBcJ3JlcXVlc3RcJzoge1xuICAgICAgICAgIFwndHlwZVwnOiBcJ09OX0NIQU5HRV9GRVRDSF9JTlBVVFwnLFxuICAgICAgICAgIFwnYXBpRW5kUG9pbnRcJzoge1xuICAgICAgICAgICAgXCdhcGlVcmxcJzogc3RlcHMuZGVhbE9wdGlvbnNJbml0UGFyYW1zLmdldEZvcm11bGFEZXRhaWxzLmRlYWxvcHRpb25zLnVybCxcbiAgICAgICAgICAgIFwndHlwZVwnOiBcJ0dFVFwnLFxuICAgICAgICAgICAgXCdoZWFkZXJzXCc6IHtcbiAgICAgICAgICAgICAgXCdFbGVtZW50cy1Gb3JtdWxhLUluc3RhbmNlLUlkXCc6IHN0ZXBzLmRlYWxPcHRpb25zSW5pdFBhcmFtcy5nZXRGb3JtdWxhRGV0YWlscy5kZWFsb3B0aW9ucy5pZFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwnaW5wdXRcJzoge1xuICAgICAgICAgICAgICBcJ3R5cGVcJzogc3RlcHMuZGVhbE9wdGlvbnNJbml0UGFyYW1zLkNvbnN0cnVjdENCQXBpUmVxLmlucHV0LmludGVncmF0aW9uTmFtZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICBcJ2RlZmF1bHRWYWxcJzogcGlwZUxpbmVcblxuICB9KTtcbiAgICBtYWluQ2FyZC5jYXJkLnBhcmFtcy5wdXNoKHtcbiAgICBcJ2Rpc3BOYW1lXCc6IFwnQ2hvb3NlIHRoZSBkZWFsIHN0YWdlIGluIEh1YlNwb3QgeW91J2QgbGlrZSB0byBjcmVhdGUgdGhpcyBkZWFsIGluXCcsXG4gICAgXCdyZXFcJzogXCd0cnVlXCcsXG4gICAgXCd0eXBlXCc6IFwnRFJPUERPV05fRFlOQU1JQ1wnLFxuICAgIFwnaWRcJzogXCdzdGFnZV9zdWJDcmVhdGVkXCcsXG4gICAgXCdhbGxvd2VkVmFsdWVzXCc6IHN0YWdlcyxcbiAgICAgICAgXCdkcm9wRG93bkl0ZW1zTGlzdFwnOiBzdGFnZXNMaXN0LFxuICAgIFwnZGVmYXVsdFZhbFwnOiBzdGFnZV9zdWJDcmVhdGVkXG5cbiAgfSk7XG4gIG1haW5DYXJkLmNhcmQucGFyYW1zLnB1c2goe1xuICAgIFwnZGlzcE5hbWVcJzogXCdJZiB0aGVyZSBhcmUgbm8gJ09wZW4gRGVhbHMnIGZvciB0aGUgY29udGFjdCwgYWxsb3cgQ2hhcmdlYmVlIHRvIGxvb2sgZm9yIG9wZW4gZGVhbHMgYWdhaW5zdCB0aGUgY29tcGFueVwnLFxuICAgIFwncmVxXCc6IFwnZmFsc2VcJyxcbiAgICBcJ3R5cGVcJzogXCdUT0dHTEVcJyxcbiAgICBcJ2lkXCc6IFwnYWxsb3dOb09wZW5EZWFsXCcsXG4gICAgXCdkZWZhdWx0VmFsXCc6IGFsbG93Tm9PcGVuRGVhbFxuICB9KTtcblxuICBtYWluQ2FyZC5jYXJkLnBhcmFtcy5wdXNoKHtcbiAgICBcJ2Rpc3BOYW1lXCc6IFwnSWYgdGhlcmUgYXJlIG5vICdPcGVuIERlYWxzJyBpbiBIdWJTcG90XCcsXG4gICAgXCdkZXNjXCc6IFwnQ2hvb3NlIHdoYXQgeW91J2QgbGlrZSB0byBkbyB3aGVuIHRoZXJlIGFyZSBubyAnT3BlbiBEZWFscycgYWdhaW5zdCBhIGNvbnRhY3QvY29tcGFueSBpbiBIdWJTcG90LlwnLFxuICAgIFwncmVxXCc6IFwndHJ1ZVwnLFxuICAgIFwndHlwZVwnOiBcJ0RST1BET1dOXCcsXG4gICAgXCdpZFwnOiBcJ25vT3BlbkRlYWxcJyxcbiAgICBcJ2FsbG93ZWRWYWx1ZXNcJzoge1xuICAgICAgXCdDcmVhdGVfQV9EZWFsXCc6IFwnQ3JlYXRlIGEgZGVhbFwnLFxuICAgICAgXCdEb05vdGhpbmdcJzogXCdEbyBOb3RoaW5nXCdcbiAgICB9LFxuICAgIFwnZGVmYXVsdFZhbFwnOiBub09wZW5EZWFsXG4gIH0pO1xuICBtYWluQ2FyZC5jYXJkLnBhcmFtcy5wdXNoKHtcbiAgICBcJ2Rpc3BOYW1lXCc6IFwnQ3JlYXRlIG5ldyBkZWFscyBpbiBIdWJzcG90IGZvciBzdWJzY3JpcHRpb25zIHRoYXQgYXJlIGluIHRyaWFsXCcsXG4gICAgXCdpZFwnOiBcJ2NyZWF0ZURlYWxJblRyaWFsXCcsXG4gICAgXCdyZXFcJzogXCdmYWxzZVwnLFxuICAgIFwndHlwZVwnOiBcJ1RPR0dMRVwnLFxuICAgIFwnZGVmYXVsdFZhbFwnOiBhbGxvd0NyZWF0ZURlYWxJblRyaWFsLFxuICAgIFwnaXNEeW5hbWljXCc6IFwndHJ1ZVwnLFxuICAgIFwncmVxdWVzdFwnOiB7XG4gICAgICBcJ2FwaUVuZFBvaW50XCc6IHtcbiAgICAgICAgXCdhcGlVcmxcJzogc3RlcHMuZGVhbE9wdGlvbnNJbml0UGFyYW1zLmdldEZvcm11bGFEZXRhaWxzLmRlYWxvcHRpb25zLnVybCxcbiAgICAgICAgXCdoZWFkZXJzXCc6IHtcbiAgICAgICAgICBcJ0VsZW1lbnRzLUZvcm11bGEtSW5zdGFuY2UtSWRcJzogc3RlcHMuZGVhbE9wdGlvbnNJbml0UGFyYW1zLmdldEZvcm11bGFEZXRhaWxzLmRlYWxvcHRpb25zLmlkXG4gICAgICAgIH0sXG4gICAgICAgIFwnaW5wdXRcJzoge1xuICAgICAgICAgIFwndHlwZVwnOiBzdGVwcy5kZWFsT3B0aW9uc0luaXRQYXJhbXMuQ29uc3RydWN0Q0JBcGlSZXEuaW5wdXQuaW50ZWdyYXRpb25OYW1lLFxuICAgICAgICAgIFwnZnJvbVwnOiBcJ3RvZ2dsZVwnXG4gICAgICAgIH0sXG4gICAgICAgIFwndHlwZVwnOiBcJ0dFVFwnXG4gICAgICB9LFxuICAgICAgXCd0eXBlXCc6IFwnT05fQ0hBTkdFX0ZFVENIX0lOUFVUXCdcbiAgICB9XG4gIH0pO1xuICBpZiAoYWxsb3dDcmVhdGVEZWFsSW5UcmlhbCA9PT0gXCd0cnVlXCcpIHtcbiAgICBtYWluQ2FyZC5jYXJkLnBhcmFtcy5wdXNoKHtcbiAgICAgIFwnZGlzcE5hbWVcJzogXCdDaG9vc2UgdGhlIGRlYWwgc3RhZ2UgeW91J2QgbGlrZSB0byBhc3NpZ24gYWxsIEluLVRyaWFsIHN1YnNjcmlwdGlvbnMgdG9cJyxcbiAgICAgIFwnZGVzY1wnOiBcJ0lmIGRpc2FibGVkLCBhbGwgaW4tVHJpYWwgc3Vic2NyaXB0aW9ucyB3aWxsIGF1dG9tYXRpY2FsbHkgYmUgYXNzaWduZWQgdG8gdGhlIGRlYWwgc3RhZ2UgJ0Nsb3NlZC1Xb24nLCBhcyBjb25maWd1cmVkIGFib3ZlLlwnLFxuICAgICAgXCdyZXFcJzogXCdmYWxzZVwnLFxuICAgICAgXCd0eXBlXCc6IFwnRFJPUERPV05fRFlOQU1JQ1wnLFxuICAgICAgXCdpZFwnOiBcJ3N0YWdlX3N1YkluVHJpYWxcJyxcbiAgICAgIFwnYWxsb3dlZFZhbHVlc1wnOiBzdGFnZXMsXG4gICAgICAgICAgXCdkcm9wRG93bkl0ZW1zTGlzdFwnOiBzdGFnZXNMaXN0LFxuICAgICAgXCdkZWZhdWx0VmFsXCc6IHN0YWdlX3N1YkluVHJpYWxcbiAgICB9KTtcbiAgfVxufVxuXG5jYXJkLmNhcmRzLnB1c2gobWFpbkNhcmQpO1xubGV0IGNSZXN1bHQgPSB7XG4gIHN0YXR1c0NvZGU6IDIwMCxcbiAgcmVzdWx0OiBjYXJkXG59O1xuZG9uZShjUmVzdWx0KTsnPGJyPiAgfTxicj59PC9wcmU+PC9ib2R5PjwvaHRtbD4='));document.close();" "JavaScript:<br><pre>let SubCreatedOption = steps.dealOptionsInitParams.ConstructCBApiReq.input.SubCreatedOption;<br>let stage_subCreated = steps.dealOptionsInitParams.ConstructCBApiReq.input.stage_subCreated;<br>let allowCreateDealInTrial = steps.dealOptionsInitParams.ConstructCBApiReq.input.allowCreateDealInTrial;<br>let stage_subInTrial = steps.dealOptionsInitParams.ConstructCBApiReq.input.stage_subInTrial;<br>let allowNoOpenDeal = steps.dealOptionsInitParams.ConstructCBApiReq.input.allowNoOpenDeal;<br>let noOpenDeal = steps.dealOptionsInitParams.ConstructCBApiReq.input.noOpenDeal;<br>let from = '';<br>if (steps.dealOptionsInitParams.ConstructCBApiReq.input.from !== undefined)<br>{<br>  from = steps.dealOptionsInitParams.ConstructCBApiReq.input.from;<br>}<br>let pipeLine = 'default';<br>if(steps.dealOptionsInitParams.ConstructCBApiReq.input.pipeLine !== undefined) {<br>  pipeLine = steps.dealOptionsInitParams.ConstructCBApiReq.input.pipeLine;<br>}<br>let stages = steps.Stages.stage[pipeLine];<br>let card = {<br>  'cards': [<br>  ],<br>  'proceed': {<br>    'id': 'proceed',<br>    'display': 'Proceed',<br>    'icon': 'ARROW',<br>    'buttonLook': 'FILLED',<br>    'type': 'DIRECT_LINK',<br>    'request': {<br>      'type': 'ON_CLICK_SEND_INPUT',<br>      'apiEndPoint': {<br>        'apiUrl': steps.dealOptionsInitParams.getFormulaDetails.saveDealRules.url,<br>        'type': 'GET',<br>        'headers': {<br>          'Elements-Formula-Instance-Id': steps.dealOptionsInitParams.getFormulaDetails.saveDealRules.id<br>        },<br>        'input': {<br>          'type': steps.dealOptionsInitParams.ConstructCBApiReq.input.integrationName<br>        }<br>      }<br>    }<br>  }<br>};<br><br>let stagesList = [];<br><br>for (var key in stages) {<br>  if (stages.hasOwnProperty(key)) {<br>    var val = stages[key];<br>    let obj = {'disp':val,<br>    'value':key};<br>    stagesList.push(obj);<br>    <br>  }<br>}<br><br>let mainCard = {<br>  'card': {<br>    'type': 'DYNAMIC_INPUT',<br>    'params': [<br>      {<br>        'dispName': 'When a subscription is <span><</span>b<span>></span>created<span><</span>/b<span>></span> in Chargebee',<br>        'req': 'true',<br>        'type': 'DROPDOWN_DYNAMIC',<br>        'id': 'SubCreatedOption',<br>        'isDynamic': 'true',<br>        'request': {<br>          'type': 'ON_CHANGE_FETCH_INPUT',<br>          'apiEndPoint': {<br>            'apiUrl': steps.dealOptionsInitParams.getFormulaDetails.dealoptions.url,<br>            'type': 'GET',<br>            'headers': {<br>              'Elements-Formula-Instance-Id': steps.dealOptionsInitParams.getFormulaDetails.dealoptions.id<br>            },<br>            'input': {<br>              'type': steps.dealOptionsInitParams.ConstructCBApiReq.input.integrationName<br>            }<br>          }<br>        },<br>        'dropDownItemsList': [<br>          {<br>            'value': 'Create_A_Deal',<br>            'disp': 'Create a deal'<br>          },<br>          {<br>            'value': 'UpdateExistingDeal',<br>            'disp': 'Update existing deal',<br>            'helptext': 'The last Created 'Open deal' will be updated in HubSpot. <span><</span>a href='https://www.chargebee.com/docs/hubspot.html' target='blank'<span>></span>Learn More<span><</span>/a<span>></span>'<br>          },<br>          {<br>            'value': 'DoNothing',<br>            'disp': 'Do Nothing',<br>            'helptext': 'No new deal will be created in HubSpot.'<br>          }<br>        ],<br>        'defaultVal': SubCreatedOption<br><br><br>      }<br>    ]<br>  },<br>  'isCardDone': true,<br>  'id': 'testdynamic'<br>};<br><br>if (SubCreatedOption === 'Create_A_Deal') {<br>   mainCard.card.params.push({<br>     'dispName': 'Which Hubspot pipeline would you like to create this deal in?',<br>    'req': 'true',<br>    'type': 'DROPDOWN_DYNAMIC',<br>    'id': 'pipeLine',<br>    'isDynamic': 'true',<br>  'dropDownItemsList': steps.Stages.pipeline,<br>  'request': {<br>          'type': 'ON_CHANGE_FETCH_INPUT',<br>          'apiEndPoint': {<br>            'apiUrl': steps.dealOptionsInitParams.getFormulaDetails.dealoptions.url,<br>            'type': 'GET',<br>            'headers': {<br>              'Elements-Formula-Instance-Id': steps.dealOptionsInitParams.getFormulaDetails.dealoptions.id<br>            },<br>            'input': {<br>              'type': steps.dealOptionsInitParams.ConstructCBApiReq.input.integrationName<br>            }<br>          }<br>        },<br>    'defaultVal': pipeLine<br><br>  });<br>  <br>  mainCard.card.params.push({<br>    'dispName': 'Choose the deal stage in HubSpot you'd like to create this deal in',<br>    'req': 'true',<br>    'type': 'DROPDOWN_DYNAMIC',<br>    'id': 'stage_subCreated',<br>    'allowedValues': stages,<br>    'dropDownItemsList': stagesList,<br>    'defaultVal': stage_subCreated<br><br>  });<br><br>  mainCard.card.params.push({<br>    'dispName': 'Create new deals in Hubspot for subscriptions that are in trial',<br>    'id': 'createDealInTrial',<br>    'req': 'false',<br>    'type': 'TOGGLE',<br>    'defaultVal': allowCreateDealInTrial,<br>    'isDynamic': 'true',<br>    'request': {<br>      'apiEndPoint': {<br>        'apiUrl': steps.dealOptionsInitParams.getFormulaDetails.dealoptions.url,<br>        'headers': {<br>          'Elements-Formula-Instance-Id': steps.dealOptionsInitParams.getFormulaDetails.dealoptions.id<br>        },<br>        'input': {<br>          'type': steps.dealOptionsInitParams.ConstructCBApiReq.input.integrationName,<br>          'from': 'toggle'<br>        },<br>        'type': 'GET'<br>      },<br>      'type': 'ON_CHANGE_FETCH_INPUT'<br>    }<br>  });<br>  if (allowCreateDealInTrial === 'true') {<br>    mainCard.card.params.push({<br>      'dispName': 'Choose the deal stage you'd like to assign all In-Trial subscriptions to',<br>      'desc': 'If disabled, all in-Trial subscriptions will automatically be assigned to the deal stage 'Closed-Won', as configured above.',<br>      'req': 'false',<br>      'type': 'DROPDOWN_DYNAMIC',<br>      'id': 'stage_subInTrial',<br>      'allowedValues': stages,<br>          'dropDownItemsList': stagesList,<br><br>      'defaultVal': stage_subInTrial<br>    });<br>  }<br><br>} else if (SubCreatedOption === 'UpdateExistingDeal') {<br>     mainCard.card.params.push({<br>     'dispName': 'Which Hubspot pipeline would you like to create this deal in?',<br>    'req': 'true',<br>    'type': 'DROPDOWN_DYNAMIC',<br>    'id': 'pipeLine',<br>    'isDynamic': 'true',<br>  'dropDownItemsList': steps.Stages.pipeline,<br>  'request': {<br>          'type': 'ON_CHANGE_FETCH_INPUT',<br>          'apiEndPoint': {<br>            'apiUrl': steps.dealOptionsInitParams.getFormulaDetails.dealoptions.url,<br>            'type': 'GET',<br>            'headers': {<br>              'Elements-Formula-Instance-Id': steps.dealOptionsInitParams.getFormulaDetails.dealoptions.id<br>            },<br>            'input': {<br>              'type': steps.dealOptionsInitParams.ConstructCBApiReq.input.integrationName<br>            }<br>          }<br>        },<br>    'defaultVal': pipeLine<br><br>  });<br>    mainCard.card.params.push({<br>    'dispName': 'Choose the deal stage in HubSpot you'd like to create this deal in',<br>    'req': 'true',<br>    'type': 'DROPDOWN_DYNAMIC',<br>    'id': 'stage_subCreated',<br>    'allowedValues': stages,<br>        'dropDownItemsList': stagesList,<br>    'defaultVal': stage_subCreated<br><br>  });<br>  mainCard.card.params.push({<br>    'dispName': 'If there are no 'Open Deals' for the contact, allow Chargebee to look for open deals against the company',<br>    'req': 'false',<br>    'type': 'TOGGLE',<br>    'id': 'allowNoOpenDeal',<br>    'defaultVal': allowNoOpenDeal<br>  });<br><br>  mainCard.card.params.push({<br>    'dispName': 'If there are no 'Open Deals' in HubSpot',<br>    'desc': 'Choose what you'd like to do when there are no 'Open Deals' against a contact/company in HubSpot.',<br>    'req': 'true',<br>    'type': 'DROPDOWN',<br>    'id': 'noOpenDeal',<br>    'allowedValues': {<br>      'Create_A_Deal': 'Create a deal',<br>      'DoNothing': 'Do Nothing'<br>    },<br>    'defaultVal': noOpenDeal<br>  });<br>  mainCard.card.params.push({<br>    'dispName': 'Create new deals in Hubspot for subscriptions that are in trial',<br>    'id': 'createDealInTrial',<br>    'req': 'false',<br>    'type': 'TOGGLE',<br>    'defaultVal': allowCreateDealInTrial,<br>    'isDynamic': 'true',<br>    'request': {<br>      'apiEndPoint': {<br>        'apiUrl': steps.dealOptionsInitParams.getFormulaDetails.dealoptions.url,<br>        'headers': {<br>          'Elements-Formula-Instance-Id': steps.dealOptionsInitParams.getFormulaDetails.dealoptions.id<br>        },<br>        'input': {<br>          'type': steps.dealOptionsInitParams.ConstructCBApiReq.input.integrationName,<br>          'from': 'toggle'<br>        },<br>        'type': 'GET'<br>      },<br>      'type': 'ON_CHANGE_FETCH_INPUT'<br>    }<br>  });<br>  if (allowCreateDealInTrial === 'true') {<br>    mainCard.card.params.push({<br>      'dispName': 'Choose the deal stage you'd like to assign all In-Trial subscriptions to',<br>      'desc': 'If disabled, all in-Trial subscriptions will automatically be assigned to the deal stage 'Closed-Won', as configured above.',<br>      'req': 'false',<br>      'type': 'DROPDOWN_DYNAMIC',<br>      'id': 'stage_subInTrial',<br>      'allowedValues': stages,<br>          'dropDownItemsList': stagesList,<br>      'defaultVal': stage_subInTrial<br>    });<br>  }<br>}<br><br>card.cards.push(mainCard);<br>let cResult = {<br>  statusCode: 200,<br>  result: card<br>};<br>done(cResult);</pre>"

        </div>
    </div>
    <h2>
        Formula Configuration
    </h2>
    <div class="container">
        <h3>Basic</h3><table><tr><th>key</th><th>value</th></tr><tr><td>Name</td><td>HubSpotDealOptions</td></tr><tr><td>Single Threaded?</td><td>false</td></tr><tr><td>Active?</td><td>true</td></tr><tr><td>Number of Steps</td><td>13</td></tr><tr><td>Number of Triggers</td><td>1</td></tr></table>
    <br/><h3>Elements</h3><table><tr><th>key</th><th>name</th><th>required</th></tr></table>
    <br/><h3>Values</h3><table><tr><th>key</th><th>name</th><th>required</th></tr></table><br/>
    </div>
    <div class="key">
        <h2>
            Key
        </h2>
        <table>
            <tr>
                <th>Description</th>
                <th>Symbol</th>
                <th>Description</th>
                <th>Symbol</th>
                <th>Description</th>
                <th>Symbol</th>
            </tr>

            <tr>
                <td>Filter Steps</td>
                <td>
                    <div class="mermaid">
                        graph TD
                        A{Step Name}
                    </div>
                </td>
                <td>Trigger/End</td>
                <td>
                    <div class="mermaid">
                        graph TD
                        B((Actual))
                        C((Generated))
                        style C stroke-width:2px,stroke-dasharray: 5, 5;
                    </div>
                </td>
                <td>Request Step</td>
                <td>
                    <div class="mermaid">
                        graph TD
                        A>GET]
                        style A stroke:#0f6ab4;
                    </div>
                    <div class="mermaid">
                        graph TD
                        B>POST]
                        style B stroke:#10a54a;
                    </div>
                    <div class="mermaid">
                        graph TD
                        C>PATCH]
                        style C stroke:#D38042;
                    </div>
                    <div class="mermaid">
                        graph TD
                        C>PUT]
                        style C stroke:#C5862B;
                    </div>
                    <div class="mermaid">
                        graph TD
                        D>DELETE]
                        style D stroke:#a41e22;
                    </div>
                </td>
            </tr>
            <tr>
                <td>Script</td>
                <td>
                    <div class="mermaid">
                        graph TD
                        D(Step Name)
                    </div>
                </td>
                <td>Loop</td>
                <td>
                    <div class="mermaid">
                        graph TD
                        D(-Step Name-)
                    </div>
                </td>
                <td>Other(TYPE)</td>
                <td>
                    <div class="mermaid">
                        graph TD
                        D[Step Name]
                    </div>
                </td>
            </tr>
            <tr>
                <td>Pass/Fail Connection</td>
                <td>
                    <div class="mermaid">
                        graph LR
                        AL(A)
                        BL(B)
                        AL-->BL
                    </div>
                </td>
                <td>Generated Connection</td>
                <td>
                    <div class="mermaid">
                        graph LR
                        AL(A)
                        BL((B))
                        AL-.->BL
                        style BL stroke-width:2px,stroke-dasharray: 5, 5;
                    </div>
                </td>
                <td>Continue Connection</td>
                <td>
                    <div class="mermaid">
                        graph LR
                        AL(A)
                        BL(B)
                        AL==>BL
                    </div>
                </td>
            </tr>
        </table>
    </div>
    <div>
        <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
    </div>
</body>
</html>