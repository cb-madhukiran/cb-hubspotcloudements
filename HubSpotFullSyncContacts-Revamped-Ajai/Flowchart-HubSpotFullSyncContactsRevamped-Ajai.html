<!DOCTYPE html>
<html lang="en">
<head>
    <title>HubSpotFullSyncContacts-Revamped-Ajai</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/mermaid/6.0.0/mermaid.css" rel="stylesheet" type="text/css"/>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/6.0.0/mermaid.min.js"></script>
    <script>mermaid.initialize({startOnLoad:true});</script>
    <script>
        var callback = function(){}
    </script>
    <style>
        div.mermaidTooltip {
                    margin-left: 50px;
                    text-align: left;
                    max-width: none;
                }
        .node rect,
        .node circle,
        .node ellipse,
        .node polygon {
                    fill: #ffffff;
                    stroke: rgb(200,200,200);
                    stroke-width: 2px;
                }
        .mermaid .label {
                  max-width: 50px;
                }
        table, th, td {
                    border: 1px solid black;
                }
        table {
                    border-spacing: 5px;
                    border-radius: 5px;
                    margin: auto;
                }
        th, td {
                    padding-left: 15px;
                    padding-right: 15px;
                    border-radius: 5px;
                }
        th {
                    color: blue;
                }
        td {
                    width: 180px;
                    text-align: center;
                    background-color: rgb(237, 241, 242);
                }
        h2 {
                    text-align: center;
                    border: 1px solid black;
                    border-radius: 5px;
                    padding: 1em;
                }
        .container {
                    text-align: center;
                    background-color: rgb(237, 241, 242);
                    font-size: 11px;
                    font-weight: 900;
                }
        body {
                    font-family: 'Arial';
                }
        .edgeLabel {
                    font-size: 9px;
                }
    </style>
</head>
<body>
    <h2>
        HubSpotFullSyncContacts-Revamped-Ajai
    </h2>
    <div class="container">
        <div class="mermaid">
            graph TD

                step-000((Trigger))
            step-001(ContactInputParams)
            step-002(SyncLog)
            step-003[GetTpIntegConf]
            step-004{IsTpIntegConfFetched}
            step-005((END))
            step-006[GetCustomField]
            step-007{IsCustomFieldFetched}
            step-008((END))
            step-009(UpdateCustomFieldInfo)
            step-010[GetCBOrder]
            step-011(CustomersParam)
            step-012[SubscriptionBulkApiData]
            step-013(-LoopOverCustomer-)
            step-014{HasEmail}
            step-015(SyncDone)
            step-016((END))
            step-017(CBData)
            step-018(UpdateNoEmail)
            step-019(CBSubscriptionParam)
            step-020[UpdateTPMappingError]
            step-021(CusSubDetails)
            step-022{IsUpdateTPMappingDone}
            step-023((END))
            step-024(GetCustomerCbem)
            step-025{SyncOnlyActiveSubscrption}
            step-026{DoSyncOrder}
            step-027(OrderParam)
            step-028{HasContactInCBEM}
            step-029(GetOrderBeforeCBGet)
            step-030(GetHubspotContactByIdParam)
            step-031{GetHubspotContactByEmail}
            step-032(GetOrderAfterCBGet)
            step-033[GetHubspotContactById]
            step-034(GetHubspotContactByEmailParam)
            step-035(SearchHubspotContactParam)
            step-036(UpdateOrder)
            step-037{IsContactFound}
            step-038[GetHubspotContactByEMail]
            step-039[SearchHubspotContact]
            step-040(HubSpotInput)
            step-041{DoCreateContact}
            step-042(IsContactExist)
            step-043(HubData)
            step-044{IsError}
            step-045{IsHubSpotCreate}
            step-046(UpdateDuplicateEmail)
            step-047(PrepareCreateInput)
            step-048(PrepareUpdateInput)
            step-049[UpdateTPMappingError2]
            step-050(CreateHubspotContactParam)
            step-051(UpdateHubspotContactParam)
            step-052[CreateHubspotContact]
            step-053[UpdateHubspotContact]
            step-054{CreateHubSPotFilter}
            step-055{UpdateHubSpotFilter}
            step-056(UpdateTPAfterCreate)
            step-057(SyncCreateError)
            step-058(UpdateTPAfterUpdate)
            step-059(SyncUpdateError)
            step-060[UpdateTPMappings]
            step-061[UpdateTPMappingError3]
            step-062[UpdateTPMapping]
            step-063[UpdateTPMappingError4]
            step-064(LoopOverCustomer)
            step-065(LoopOverCustomer)
            step-066(LoopOverCustomer)
            step-067(LoopOverCustomer)
            step-068(LoopOverCustomer)
            step-069(LoopOverCustomer)
            step-070(LoopOverCustomer)
            step-071(LoopOverCustomer)
            step-072(LoopOverCustomer)

                step-000== continue ==>step-001
            step-001-- success -->step-002
            step-002-- success -->step-003
            step-003-- success -->step-004
            step-004-- success -->step-006
            step-004-. failure .->step-005
            step-006-- success -->step-007
            step-007-- success -->step-009
            step-007-. failure .->step-008
            step-009-- success -->step-010
            step-010-- success -->step-011
            step-011-- success -->step-012
            step-012-- success -->step-064
            step-013-- success -->step-014
            step-013-- failure -->step-015
            step-014-- success -->step-017
            step-014-- failure -->step-018
            step-015-. done .->step-016
            step-017-- success -->step-019
            step-018-- success -->step-020
            step-019-- success -->step-021
            step-020-- success -->step-022
            step-021-- success -->step-024
            step-022-- success -->step-065
            step-022-. failure .->step-023
            step-024-- success -->step-025
            step-025-- success -->step-026
            step-025-- failure -->step-066
            step-026-- success -->step-027
            step-026-- failure -->step-028
            step-027-- success -->step-029
            step-028-- success -->step-030
            step-028-- failure -->step-031
            step-029-- success -->step-032
            step-030-- success -->step-033
            step-031-- success -->step-034
            step-031-- failure -->step-035
            step-032-- success -->step-036
            step-033-- success -->step-037
            step-034-- success -->step-038
            step-035-- success -->step-039
            step-036-- success -->step-028
            step-037-- success -->step-040
            step-037-- failure -->step-034
            step-038-- success -->step-041
            step-039-- success -->step-042
            step-040-- success -->step-043
            step-041-- success -->step-040
            step-041-- failure -->step-044
            step-042-- success -->step-041
            step-043-- success -->step-045
            step-044-- success -->step-046
            step-044-- failure -->step-067
            step-045-- success -->step-047
            step-045-- failure -->step-048
            step-046-- success -->step-049
            step-047-- success -->step-050
            step-048-- success -->step-051
            step-049-- success -->step-068
            step-050-- success -->step-052
            step-051-- success -->step-053
            step-052-- success -->step-054
            step-053-- success -->step-055
            step-054-- success -->step-056
            step-054-- failure -->step-057
            step-055-- success -->step-058
            step-055-- failure -->step-059
            step-056-- success -->step-060
            step-057-- success -->step-061
            step-058-- success -->step-062
            step-059-- success -->step-063
            step-060-- success -->step-069
            step-061-- success -->step-070
            step-062-- success -->step-071
            step-063-- success -->step-072

                style step-005 stroke-width:3px,stroke-dasharray: 5, 5;
            style step-008 stroke-width:3px,stroke-dasharray: 5, 5;
            style step-013 fill:#dda7f9;
            style step-016 stroke-width:3px,stroke-dasharray: 5, 5;
            style step-023 stroke-width:3px,stroke-dasharray: 5, 5;
            style step-064 fill:#dda7f9,stroke-width:3px,stroke-dasharray: 5, 5;
            style step-065 fill:#dda7f9,stroke-width:3px,stroke-dasharray: 5, 5;
            style step-066 fill:#dda7f9,stroke-width:3px,stroke-dasharray: 5, 5;
            style step-067 fill:#dda7f9,stroke-width:3px,stroke-dasharray: 5, 5;
            style step-068 fill:#dda7f9,stroke-width:3px,stroke-dasharray: 5, 5;
            style step-069 fill:#dda7f9,stroke-width:3px,stroke-dasharray: 5, 5;
            style step-070 fill:#dda7f9,stroke-width:3px,stroke-dasharray: 5, 5;
            style step-071 fill:#dda7f9,stroke-width:3px,stroke-dasharray: 5, 5;
            style step-072 fill:#dda7f9,stroke-width:3px,stroke-dasharray: 5, 5;

                click step-000 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPnRyaWdnZXI8L3RpdGxlPjwvaGVhZD48Ym9keT48Yj5UcmlnZ2VyIEVsZW1lbnQ6PC9iPjxicj48YnI+PHByZT4gICB0eXBlIDogbWFudWFsPGJyPiAgYXN5bmMgOiB0cnVlPC9wcmU+PGJyPjxiPlJBVyBKU09OOjwvYj48YnI+PGJyPjxwcmU+ezxicj4gICdvblN1Y2Nlc3MnOiBbPGJyPiAgICAnQ29udGFjdElucHV0UGFyYW1zJzxicj4gIF0sPGJyPiAgJ29uRmFpbHVyZSc6IFtdLDxicj4gICd0eXBlJzogJ21hbnVhbCcsPGJyPiAgJ2FzeW5jJzogdHJ1ZSw8YnI+ICAnbmFtZSc6ICd0cmlnZ2VyJyw8YnI+ICAncHJvcGVydGllcyc6IHt9PGJyPn08L3ByZT48L2JvZHk+PC9odG1sPg=='));document.close();" "Trigger Element:<br><pre>   type : manual<br>  async : true</pre>"
            click step-001 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkNvbnRhY3RJbnB1dFBhcmFtczwvdGl0bGU+PC9oZWFkPjxib2R5PjxiPkphdmFTY3JpcHQ6PC9iPjxicj48YnI+PHByZT5sZXQgYXBpS2V5ID0gdHJpZ2dlci5hcmdzWydjYi1hcGkta2V5J107PGJyPmxldCBzaXRlTmFtZSA9IHRyaWdnZXIuYXJnc1snY2Itc2l0ZS1uYW1lJ107PGJyPmxldCB0eXBlID0gdHJpZ2dlci5hcmdzLnR5cGU7PGJyPmxldCBzaXRlRG9tYWluID0gdHJpZ2dlci5hcmdzWydjYi1kb21haW4nXTs8YnI+bGV0IGF1dG9TeW5jID0gdHJpZ2dlci5hcmdzLmF1dG9TeW5jOzxicj5sZXQgY3VzdG9tZXJzID0gdHJpZ2dlci5hcmdzLmN1c3RvbWVyczs8YnI+aWYoYXV0b1N5bmM9PT11bmRlZmluZWQpIHs8YnI+ICBhdXRvU3luYyA9IGZhbHNlOzxicj59PGJyPjxicj5pZihhdXRvU3luYz09PSd0cnVlJyB8fCBhdXRvU3luYyA9PT0gdHJ1ZSl7PGJyPiAgYXV0b1N5bmMgPSB0cnVlOzxicj59ZWxzZSB7PGJyPiAgYXV0b1N5bmMgPSBmYWxzZTs8YnI+fTxicj48YnI+bGV0IHBhc3N3b3JkID0gJyc7PGJyPjxicj5sZXQgY2JNYXBwZWRGaWVsZCA9ICdlbWFpbCc7IC8vV2lsbCBiZSBjaGFuZ2VkIGF0IFVwZGF0ZUN1c3RvbUZpZWxkSW5mbyBzdGVwIGJhc2VkIG9uIFRwSW50ZWdDb25mIHZhbHVlLCBkZWZhdWx0IGlzIGVtYWlsPGJyPmxldCBodWJTcG90TWFwcGVkRmllbGQgPSAnZW1haWwnOyAvL1dpbGwgYmUgY2hhbmdlZCBhdCBVcGRhdGVDdXN0b21GaWVsZEluZm8gc3RlcCBiYXNlZCBvbiBUcEludGVnQ29uZiB2YWx1ZSwgZGVmYXVsdCBpcyBlbWFpbDxicj48YnI+bGV0IGRhdGEgPSB7PGJyPiAgIGlucHV0OiB7PGJyPiAgICAgICAgYXBpS2V5OiBhcGlLZXksPGJyPiAgICAgICAgc2l0ZU5hbWU6IHNpdGVOYW1lLDxicj4gICAgICAgIHNpdGVEb21haW46IHNpdGVEb21haW4sPGJyPiAgICAgICAgYXV0b1N5bmM6IGF1dG9TeW5jLDxicj4gICAgICAgIHR5cGU6IHR5cGUsPGJyPiAgICAgICAgY2JNYXBwZWRGaWVsZDogY2JNYXBwZWRGaWVsZCw8YnI+ICAgICAgICBodWJTcG90TWFwcGVkRmllbGQ6IGh1YlNwb3RNYXBwZWRGaWVsZCw8YnI+ICAgICAgICBjdXN0b21lcnM6Y3VzdG9tZXJzPGJyPiAgICB9LDxicj4gICAgZ2V0Q3VzdG9tRmllbGQgOns8YnI+ICAgICAgICBhcGlLZXk6IGFwaUtleSw8YnI+ICAgICAgICBzaXRlTmFtZTogc2l0ZU5hbWUsPGJyPiAgICAgICAgc2l0ZURvbWFpbjogc2l0ZURvbWFpbiw8YnI+ICAgICAgICBhdXRvU3luYzogYXV0b1N5bmMsPGJyPiAgICAgICAgdHlwZTogdHlwZSw8YnI+ICAgICAgICBjdXN0b21lcnM6Y3VzdG9tZXJzLDxicj4gICAgICB1cmwgOiAnaHR0cHM6Ly8nICsgc2l0ZU5hbWUgKyAnLicgKyBzaXRlRG9tYWluICsgJy9hcGkvdjIvY3VzdG9tX2ZpZWxkX2NvbmZpZ3MnLDxicj4gICAgICAgaGVhZGVyczogezxicj4gICAgICAgICAgICBBdXRob3JpemF0aW9uOiAnQmFzaWMgJyArIENFLmI2NChhcGlLZXkgKyAnOicgKyBwYXNzd29yZCk8YnI+ICAgICAgICB9PGJyPiAgICB9LDxicj4gICAgZ2V0VHBJbnRlZ0NvbmYgOns8YnI+ICAgICAgICBhcGlLZXk6IGFwaUtleSw8YnI+ICAgICAgICBzaXRlTmFtZTogc2l0ZU5hbWUsPGJyPiAgICAgICAgc2l0ZURvbWFpbjogc2l0ZURvbWFpbiw8YnI+ICAgICAgICBhdXRvU3luYzogYXV0b1N5bmMsPGJyPiAgICAgICAgdHlwZTogdHlwZSw8YnI+ICAgICAgICBjdXN0b21lcnM6Y3VzdG9tZXJzLDxicj4gICAgICAgIC8vdXJsOiAnaHR0cHM6Ly8nICsgc2l0ZU5hbWUgKyAnLicgKyBzaXRlRG9tYWluICsgJy9hcGkvdjIvdGhpcmRfcGFydHlfY29uZmlndXJhdGlvbnMnLDxicj4gICAgICAgIHVybDogJ2h0dHBzOi8vJyArIHNpdGVOYW1lICsgJy5pbnRlZ3JhdGlvbnMuJyArIHNpdGVEb21haW4gKyAnL2FwaS90aGlyZF9wYXJ0eV9jb25maWd1cmF0aW9ucy90cG1ldGEnLDxicj4gICAgICAgIGhlYWRlcnM6IHs8YnI+ICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogJ0Jhc2ljICcgKyBDRS5iNjQoYXBpS2V5ICsgJzonICsgcGFzc3dvcmQpLDxicj4gICAgICAgICAgICBhcGlfa2V5IDogYXBpS2V5PGJyPiAgICAgICAgfSw8YnI+ICAgICAgICBxdWVyeTogezxicj4gICAgICAgICAgICBpbnRlZ3JhdGlvbl9uYW1lOiB0eXBlPGJyPiAgICAgICAgfTxicj4gICAgICAgIDxicj4gICAgfSw8YnI+ICAgIGdldFRwSW50ZWdTeW5jOns8YnI+ICAgICAgICBhcGlLZXk6IGFwaUtleSw8YnI+ICAgICAgICBzaXRlTmFtZTogc2l0ZU5hbWUsPGJyPiAgICAgICAgc2l0ZURvbWFpbjogc2l0ZURvbWFpbiw8YnI+ICAgICAgICBhdXRvU3luYzogYXV0b1N5bmMsPGJyPiAgICAgICAgdHlwZTogdHlwZSw8YnI+ICAgICAgICBjdXN0b21lcnM6Y3VzdG9tZXJzLDxicj4gICAgICAgIC8vdXJsOiAnaHR0cHM6Ly8nICsgc2l0ZU5hbWUgKyAnLicgKyBzaXRlRG9tYWluICsgJy9hcGkvdjIvdGhpcmRfcGFydHlfc3luY19kZXRhaWxzL3JldHJpZXZlX2xhdGVzdF9zeW5jJyw8YnI+ICAgICAgICB1cmw6ICdodHRwczovLycgKyBzaXRlTmFtZSArICcuaW50ZWdyYXRpb25zLicgKyBzaXRlRG9tYWluICsgJy9hcGkvdGhpcmRfcGFydHlfc3luY19kZXRhaWxzL3RwbWV0YT9pbnRlZ3JhdGlvbl9uYW1lPWh1YnNwb3QnLDxicj4gICAgICAgIGhlYWRlcnM6IHs8YnI+ICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogJ0Jhc2ljICcgKyBDRS5iNjQoYXBpS2V5ICsgJzonICsgcGFzc3dvcmQpLDxicj4gICAgICAgICAgICBhcGlfa2V5IDogYXBpS2V5PGJyPiAgICAgICAgfTxicj4gICAgfSw8YnI+ICAgIGNvbmZpZzogezxicj4gICAgICAgIHVybDogJ2h0dHBzOi8vJyArIHNpdGVOYW1lICsgJy4nICsgc2l0ZURvbWFpbiArICcvYXBpL3YyL3RoaXJkX3BhcnR5X2NvbmZpZ3VyYXRpb25zJyw8YnI+ICAgICAgICBzeW5jVXJsOiAnaHR0cHM6Ly8nICsgc2l0ZU5hbWUgKyAnLicgKyBzaXRlRG9tYWluICsgJy9hcGkvdjIvdGhpcmRfcGFydHlfc3luY19kZXRhaWxzL3JldHJpZXZlX2xhdGVzdF9zeW5jJyw8YnI+ICAgICAgICBjdXN0b21GaWVsZFVybDogJ2h0dHBzOi8vJyArIHNpdGVOYW1lICsgJy4nICsgc2l0ZURvbWFpbiArICcvYXBpL3YyL2N1c3RvbV9maWVsZF9jb25maWdzJyw8YnI+ICAgICAgICBhdXRoOiB7PGJyPiAgICAgICAgICAgIEF1dGhvcml6YXRpb246ICdCYXNpYyAnICsgQ0UuYjY0KGFwaUtleSArICc6JyArIHBhc3N3b3JkKTxicj4gICAgICAgIH0sPGJyPiAgICAgICAgcXVlcnk6IHs8YnI+ICAgICAgICAgICAgaW50ZWdyYXRpb25fbmFtZTogdHlwZTxicj4gICAgICAgIH08YnI+ICAgIH0sPGJyPiAgICB1cGRhdGU6IHs8YnI+ICAgICAgICB1cmw6ICdodHRwczovLycgKyBzaXRlTmFtZSArICcuaW50ZWdyYXRpb25zLicgKyBzaXRlRG9tYWluICsgJy9pbnRlZ3JhdGlvbnMvdXBkYXRlX3RwX2ludGVnX2NvbmYnLDxicj4gICAgICAgIGhlYWRlcnM6IHs8YnI+ICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyw8YnI+ICAgICAgICAgICAgJ2NhY2hlLWNvbnRyb2wnOiAnbm8tY2FjaGUnPGJyPiAgICAgICAgfSw8YnI+ICAgICAgICBib2R5OiB7PGJyPiAgICAgICAgICAgIGludGVncmF0aW9uX25hbWU6IHR5cGUsPGJyPiAgICAgICAgICAgIHNpdGVfbmFtZTogc2l0ZU5hbWUsPGJyPiAgICAgICAgICAgIGFwaV9rZXk6IGFwaUtleTxicj4gICAgICAgIH08YnI+ICAgIH0sPGJyPiAgICBvcmRlcjogezxicj4gICAgdXJsOiAnIGh0dHBzOi8vJyArIHNpdGVOYW1lICsgJy5pbnRlZ3JhdGlvbnMuJyArIHNpdGVEb21haW4gKyAnL2FwaS9vcmRlcl9lbmFibGVkL3RwbWV0YScsPGJyPiAgICBhdXRoOiB7PGJyPiAgICAgICdhcGlfa2V5JzogYXBpS2V5PGJyPiAgICB9LDxicj4gICAgcXVlcnk6IHs8YnI+ICAgICAgJ2ludGVncmF0aW9uX25hbWUnOiAnaHVic3BvdCc8YnI+ICAgIH08YnI+ICB9PGJyPn07PGJyPjxicj5kb25lKGRhdGEpOzwvcHJlPjxicj48Yj5SQVcgSlNPTjo8L2I+PGJyPjxicj48cHJlPns8YnI+ICAnb25TdWNjZXNzJzogWzxicj4gICAgJ1N5bmNMb2cnPGJyPiAgXSw8YnI+ICAnb25GYWlsdXJlJzogW10sPGJyPiAgJ25hbWUnOiAnQ29udGFjdElucHV0UGFyYW1zJyw8YnI+ICAndHlwZSc6ICdzY3JpcHQnLDxicj4gICdwcm9wZXJ0aWVzJzogezxicj4gICAgJ2JvZHknOiAnbGV0IGFwaUtleSA9IHRyaWdnZXIuYXJnc1snY2ItYXBpLWtleSddO1xubGV0IHNpdGVOYW1lID0gdHJpZ2dlci5hcmdzWydjYi1zaXRlLW5hbWUnXTtcbmxldCB0eXBlID0gdHJpZ2dlci5hcmdzLnR5cGU7XG5sZXQgc2l0ZURvbWFpbiA9IHRyaWdnZXIuYXJnc1snY2ItZG9tYWluJ107XG5sZXQgYXV0b1N5bmMgPSB0cmlnZ2VyLmFyZ3MuYXV0b1N5bmM7XG5sZXQgY3VzdG9tZXJzID0gdHJpZ2dlci5hcmdzLmN1c3RvbWVycztcbmlmKGF1dG9TeW5jPT09dW5kZWZpbmVkKSB7XG4gIGF1dG9TeW5jID0gZmFsc2U7XG59XG5cbmlmKGF1dG9TeW5jPT09XCd0cnVlXCcgfHwgYXV0b1N5bmMgPT09IHRydWUpe1xuICBhdXRvU3luYyA9IHRydWU7XG59ZWxzZSB7XG4gIGF1dG9TeW5jID0gZmFsc2U7XG59XG5cbmxldCBwYXNzd29yZCA9IFwnXCc7XG5cbmxldCBjYk1hcHBlZEZpZWxkID0gXCdlbWFpbFwnOyAvL1dpbGwgYmUgY2hhbmdlZCBhdCBVcGRhdGVDdXN0b21GaWVsZEluZm8gc3RlcCBiYXNlZCBvbiBUcEludGVnQ29uZiB2YWx1ZSwgZGVmYXVsdCBpcyBlbWFpbFxubGV0IGh1YlNwb3RNYXBwZWRGaWVsZCA9IFwnZW1haWxcJzsgLy9XaWxsIGJlIGNoYW5nZWQgYXQgVXBkYXRlQ3VzdG9tRmllbGRJbmZvIHN0ZXAgYmFzZWQgb24gVHBJbnRlZ0NvbmYgdmFsdWUsIGRlZmF1bHQgaXMgZW1haWxcblxubGV0IGRhdGEgPSB7XG4gICBpbnB1dDoge1xuICAgICAgICBhcGlLZXk6IGFwaUtleSxcbiAgICAgICAgc2l0ZU5hbWU6IHNpdGVOYW1lLFxuICAgICAgICBzaXRlRG9tYWluOiBzaXRlRG9tYWluLFxuICAgICAgICBhdXRvU3luYzogYXV0b1N5bmMsXG4gICAgICAgIHR5cGU6IHR5cGUsXG4gICAgICAgIGNiTWFwcGVkRmllbGQ6IGNiTWFwcGVkRmllbGQsXG4gICAgICAgIGh1YlNwb3RNYXBwZWRGaWVsZDogaHViU3BvdE1hcHBlZEZpZWxkLFxuICAgICAgICBjdXN0b21lcnM6Y3VzdG9tZXJzXG4gICAgfSxcbiAgICBnZXRDdXN0b21GaWVsZCA6e1xuICAgICAgICBhcGlLZXk6IGFwaUtleSxcbiAgICAgICAgc2l0ZU5hbWU6IHNpdGVOYW1lLFxuICAgICAgICBzaXRlRG9tYWluOiBzaXRlRG9tYWluLFxuICAgICAgICBhdXRvU3luYzogYXV0b1N5bmMsXG4gICAgICAgIHR5cGU6IHR5cGUsXG4gICAgICAgIGN1c3RvbWVyczpjdXN0b21lcnMsXG4gICAgICB1cmwgOiBcJ2h0dHBzOi8vXCcgKyBzaXRlTmFtZSArIFwnLlwnICsgc2l0ZURvbWFpbiArIFwnL2FwaS92Mi9jdXN0b21fZmllbGRfY29uZmlnc1wnLFxuICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIEF1dGhvcml6YXRpb246IFwnQmFzaWMgXCcgKyBDRS5iNjQoYXBpS2V5ICsgXCc6XCcgKyBwYXNzd29yZClcbiAgICAgICAgfVxuICAgIH0sXG4gICAgZ2V0VHBJbnRlZ0NvbmYgOntcbiAgICAgICAgYXBpS2V5OiBhcGlLZXksXG4gICAgICAgIHNpdGVOYW1lOiBzaXRlTmFtZSxcbiAgICAgICAgc2l0ZURvbWFpbjogc2l0ZURvbWFpbixcbiAgICAgICAgYXV0b1N5bmM6IGF1dG9TeW5jLFxuICAgICAgICB0eXBlOiB0eXBlLFxuICAgICAgICBjdXN0b21lcnM6Y3VzdG9tZXJzLFxuICAgICAgICAvL3VybDogXCdodHRwczovL1wnICsgc2l0ZU5hbWUgKyBcJy5cJyArIHNpdGVEb21haW4gKyBcJy9hcGkvdjIvdGhpcmRfcGFydHlfY29uZmlndXJhdGlvbnNcJyxcbiAgICAgICAgdXJsOiBcJ2h0dHBzOi8vXCcgKyBzaXRlTmFtZSArIFwnLmludGVncmF0aW9ucy5cJyArIHNpdGVEb21haW4gKyBcJy9hcGkvdGhpcmRfcGFydHlfY29uZmlndXJhdGlvbnMvdHBtZXRhXCcsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIEF1dGhvcml6YXRpb246IFwnQmFzaWMgXCcgKyBDRS5iNjQoYXBpS2V5ICsgXCc6XCcgKyBwYXNzd29yZCksXG4gICAgICAgICAgICBhcGlfa2V5IDogYXBpS2V5XG4gICAgICAgIH0sXG4gICAgICAgIHF1ZXJ5OiB7XG4gICAgICAgICAgICBpbnRlZ3JhdGlvbl9uYW1lOiB0eXBlXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgfSxcbiAgICBnZXRUcEludGVnU3luYzp7XG4gICAgICAgIGFwaUtleTogYXBpS2V5LFxuICAgICAgICBzaXRlTmFtZTogc2l0ZU5hbWUsXG4gICAgICAgIHNpdGVEb21haW46IHNpdGVEb21haW4sXG4gICAgICAgIGF1dG9TeW5jOiBhdXRvU3luYyxcbiAgICAgICAgdHlwZTogdHlwZSxcbiAgICAgICAgY3VzdG9tZXJzOmN1c3RvbWVycyxcbiAgICAgICAgLy91cmw6IFwnaHR0cHM6Ly9cJyArIHNpdGVOYW1lICsgXCcuXCcgKyBzaXRlRG9tYWluICsgXCcvYXBpL3YyL3RoaXJkX3BhcnR5X3N5bmNfZGV0YWlscy9yZXRyaWV2ZV9sYXRlc3Rfc3luY1wnLFxuICAgICAgICB1cmw6IFwnaHR0cHM6Ly9cJyArIHNpdGVOYW1lICsgXCcuaW50ZWdyYXRpb25zLlwnICsgc2l0ZURvbWFpbiArIFwnL2FwaS90aGlyZF9wYXJ0eV9zeW5jX2RldGFpbHMvdHBtZXRhP2ludGVncmF0aW9uX25hbWU9aHVic3BvdFwnLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICBBdXRob3JpemF0aW9uOiBcJ0Jhc2ljIFwnICsgQ0UuYjY0KGFwaUtleSArIFwnOlwnICsgcGFzc3dvcmQpLFxuICAgICAgICAgICAgYXBpX2tleSA6IGFwaUtleVxuICAgICAgICB9XG4gICAgfSxcbiAgICBjb25maWc6IHtcbiAgICAgICAgdXJsOiBcJ2h0dHBzOi8vXCcgKyBzaXRlTmFtZSArIFwnLlwnICsgc2l0ZURvbWFpbiArIFwnL2FwaS92Mi90aGlyZF9wYXJ0eV9jb25maWd1cmF0aW9uc1wnLFxuICAgICAgICBzeW5jVXJsOiBcJ2h0dHBzOi8vXCcgKyBzaXRlTmFtZSArIFwnLlwnICsgc2l0ZURvbWFpbiArIFwnL2FwaS92Mi90aGlyZF9wYXJ0eV9zeW5jX2RldGFpbHMvcmV0cmlldmVfbGF0ZXN0X3N5bmNcJyxcbiAgICAgICAgY3VzdG9tRmllbGRVcmw6IFwnaHR0cHM6Ly9cJyArIHNpdGVOYW1lICsgXCcuXCcgKyBzaXRlRG9tYWluICsgXCcvYXBpL3YyL2N1c3RvbV9maWVsZF9jb25maWdzXCcsXG4gICAgICAgIGF1dGg6IHtcbiAgICAgICAgICAgIEF1dGhvcml6YXRpb246IFwnQmFzaWMgXCcgKyBDRS5iNjQoYXBpS2V5ICsgXCc6XCcgKyBwYXNzd29yZClcbiAgICAgICAgfSxcbiAgICAgICAgcXVlcnk6IHtcbiAgICAgICAgICAgIGludGVncmF0aW9uX25hbWU6IHR5cGVcbiAgICAgICAgfVxuICAgIH0sXG4gICAgdXBkYXRlOiB7XG4gICAgICAgIHVybDogXCdodHRwczovL1wnICsgc2l0ZU5hbWUgKyBcJy5pbnRlZ3JhdGlvbnMuXCcgKyBzaXRlRG9tYWluICsgXCcvaW50ZWdyYXRpb25zL3VwZGF0ZV90cF9pbnRlZ19jb25mXCcsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIFwnQ29udGVudC1UeXBlXCc6IFwnYXBwbGljYXRpb24vanNvblwnLFxuICAgICAgICAgICAgXCdjYWNoZS1jb250cm9sXCc6IFwnbm8tY2FjaGVcJ1xuICAgICAgICB9LFxuICAgICAgICBib2R5OiB7XG4gICAgICAgICAgICBpbnRlZ3JhdGlvbl9uYW1lOiB0eXBlLFxuICAgICAgICAgICAgc2l0ZV9uYW1lOiBzaXRlTmFtZSxcbiAgICAgICAgICAgIGFwaV9rZXk6IGFwaUtleVxuICAgICAgICB9XG4gICAgfSxcbiAgICBvcmRlcjoge1xuICAgIHVybDogXCcgaHR0cHM6Ly9cJyArIHNpdGVOYW1lICsgXCcuaW50ZWdyYXRpb25zLlwnICsgc2l0ZURvbWFpbiArIFwnL2FwaS9vcmRlcl9lbmFibGVkL3RwbWV0YVwnLFxuICAgIGF1dGg6IHtcbiAgICAgIFwnYXBpX2tleVwnOiBhcGlLZXlcbiAgICB9LFxuICAgIHF1ZXJ5OiB7XG4gICAgICBcJ2ludGVncmF0aW9uX25hbWVcJzogXCdodWJzcG90XCdcbiAgICB9XG4gIH1cbn07XG5cbmRvbmUoZGF0YSk7Jzxicj4gIH08YnI+fTwvcHJlPjwvYm9keT48L2h0bWw+'));document.close();" "JavaScript:<br><pre>let apiKey = trigger.args['cb-api-key'];<br>let siteName = trigger.args['cb-site-name'];<br>let type = trigger.args.type;<br>let siteDomain = trigger.args['cb-domain'];<br>let autoSync = trigger.args.autoSync;<br>let customers = trigger.args.customers;<br>if(autoSync===undefined) {<br>  autoSync = false;<br>}<br><br>if(autoSync==='true' || autoSync === true){<br>  autoSync = true;<br>}else {<br>  autoSync = false;<br>}<br><br>let password = '';<br><br>let cbMappedField = 'email'; //Will be changed at UpdateCustomFieldInfo step based on TpIntegConf value, default is email<br>let hubSpotMappedField = 'email'; //Will be changed at UpdateCustomFieldInfo step based on TpIntegConf value, default is email<br><br>let data = {<br>   input: {<br>        apiKey: apiKey,<br>        siteName: siteName,<br>        siteDomain: siteDomain,<br>        autoSync: autoSync,<br>        type: type,<br>        cbMappedField: cbMappedField,<br>        hubSpotMappedField: hubSpotMappedField,<br>        customers:customers<br>    },<br>    getCustomField :{<br>        apiKey: apiKey,<br>        siteName: siteName,<br>        siteDomain: siteDomain,<br>        autoSync: autoSync,<br>        type: type,<br>        customers:customers,<br>      url : 'https://' + siteName + '.' + siteDomain + '/api/v2/custom_field_configs',<br>       headers: {<br>            Authorization: 'Basic ' + CE.b64(apiKey + ':' + password)<br>        }<br>    },<br>    getTpIntegConf :{<br>        apiKey: apiKey,<br>        siteName: siteName,<br>        siteDomain: siteDomain,<br>        autoSync: autoSync,<br>        type: type,<br>        customers:customers,<br>        //url: 'https://' + siteName + '.' + siteDomain + '/api/v2/third_party_configurations',<br>        url: 'https://' + siteName + '.integrations.' + siteDomain + '/api/third_party_configurations/tpmeta',<br>        headers: {<br>            Authorization: 'Basic ' + CE.b64(apiKey + ':' + password),<br>            api_key : apiKey<br>        },<br>        query: {<br>            integration_name: type<br>        }<br>        <br>    },<br>    getTpIntegSync:{<br>        apiKey: apiKey,<br>        siteName: siteName,<br>        siteDomain: siteDomain,<br>        autoSync: autoSync,<br>        type: type,<br>        customers:customers,<br>        //url: 'https://' + siteName + '.' + siteDomain + '/api/v2/third_party_sync_details/retrieve_latest_sync',<br>        url: 'https://' + siteName + '.integrations.' + siteDomain + '/api/third_party_sync_details/tpmeta?integration_name=hubspot',<br>        headers: {<br>            Authorization: 'Basic ' + CE.b64(apiKey + ':' + password),<br>            api_key : apiKey<br>        }<br>    },<br>    config: {<br>        url: 'https://' + siteName + '.' + siteDomain + '/api/v2/third_party_configurations',<br>        syncUrl: 'https://' + siteName + '.' + siteDomain + '/api/v2/third_party_sync_details/retrieve_latest_sync',<br>        customFieldUrl: 'https://' + siteName + '.' + siteDomain + '/api/v2/custom_field_configs',<br>        auth: {<br>            Authorization: 'Basic ' + CE.b64(apiKey + ':' + password)<br>        },<br>        query: {<br>            integration_name: type<br>        }<br>    },<br>    update: {<br>        url: 'https://' + siteName + '.integrations.' + siteDomain + '/integrations/update_tp_integ_conf',<br>        headers: {<br>            'Content-Type': 'application/json',<br>            'cache-control': 'no-cache'<br>        },<br>        body: {<br>            integration_name: type,<br>            site_name: siteName,<br>            api_key: apiKey<br>        }<br>    },<br>    order: {<br>    url: ' https://' + siteName + '.integrations.' + siteDomain + '/api/order_enabled/tpmeta',<br>    auth: {<br>      'api_key': apiKey<br>    },<br>    query: {<br>      'integration_name': 'hubspot'<br>    }<br>  }<br>};<br><br>done(data);</pre>"
            click step-002 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPlN5bmNMb2c8L3RpdGxlPjwvaGVhZD48Ym9keT48Yj5KYXZhU2NyaXB0OjwvYj48YnI+PGJyPjxwcmU+bGV0IGRhdGEgPSB7PGJyPiAgY3VzdG9tZWZpZWxkczogWzxicj4gICAgICAgICAgICB7PGJyPiAgICAgICAgICAgICAgICBsYWJlbDogJ1N1YnNjcmlwdGlvbicsPGJyPiAgICAgICAgICAgICAgICBrZXk6ICdzdWJjc3QnLDxicj4gICAgICAgICAgICAgICAgZmllbGRzOiBbPGJyPiAgICAgICAgICAgICAgICAgICAgWydjdXJyZW5jeV9jb2RlJywgJ3N0cmluZycsICd0ZXh0J10sPGJyPiAgICAgICAgICAgICAgICAgICAgIFsncGxhbl9xdWFudGl0eScsICdudW1iZXInLCAndGV4dCddLDxicj4gICAgICAgICAgICAgICAgICAgIFsncGxhbl91bml0X3ByaWNlJywgJ251bWJlcicsICd0ZXh0JywgJ2N1cnJlbmN5J10sPGJyPiAgICAgICAgICAgICAgICAgICAgWydwbGFuX2Ftb3VudCcsICdudW1iZXInLCAndGV4dCcsICdjdXJyZW5jeSddLDxicj4gICAgICAgICAgICAgICAgICAgIFsnYmlsbGluZ19wZXJpb2QnLCAnbnVtYmVyJywgJ3RleHQnXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ2JpbGxpbmdfcGVyaW9kX3VuaXQnLCAnc3RyaW5nJywgJ3RleHQnXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ3BsYW5fZnJlZV9xdWFudGl0eScsICdudW1iZXInLCAndGV4dCddLDxicj4gICAgICAgICAgICAgICAgICAgIFsnc3RhcnRfZGF0ZScsICdkYXRldGltZScsICdkYXRlJ10sPGJyPiAgICAgICAgICAgICAgICAgICAgWyd0cmlhbF9zdGFydCcsICdkYXRldGltZScsICdkYXRlJ10sPGJyPiAgICAgICAgICAgICAgICAgICAgWyd0cmlhbF9lbmQnLCAnZGF0ZXRpbWUnLCAnZGF0ZSddLDxicj4gICAgICAgICAgICAgICAgICAgIFsnY3VycmVudF90ZXJtX3N0YXJ0JywgJ2RhdGV0aW1lJywgJ2RhdGUnXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ2N1cnJlbnRfdGVybV9lbmQnLCAnZGF0ZXRpbWUnLCAnZGF0ZSddLDxicj4gICAgICAgICAgICAgICAgICAgIFsnY3JlYXRlZF9hdCcsICdkYXRldGltZScsICdkYXRlJ10sPGJyPiAgICAgICAgICAgICAgICAgICAgWydzdGFydGVkX2F0JywgJ2RhdGV0aW1lJywgJ2RhdGUnXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ2FjdGl2YXRlZF9hdCcsICdkYXRldGltZScsICdkYXRlJ10sPGJyPiAgICAgICAgICAgICAgICAgICAgWydnaWZ0X2lkJywgJ3N0cmluZycsICd0ZXh0J10sPGJyPiAgICAgICAgICAgICAgICAgICAgWydvdmVycmlkZV9yZWxhdGlvbnNoaXAnLCAnc3RyaW5nJywgJ3RleHQnXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ3BhdXNlX2RhdGUnLCAnZGF0ZXRpbWUnLCAnZGF0ZSddLDxicj4gICAgICAgICAgICAgICAgICAgIFsncmVzdW1lX2RhdGUnLCAnZGF0ZXRpbWUnLCAnZGF0ZSddLDxicj4gICAgICAgICAgICAgICAgICAgIFsnY2FuY2VsbGVkX2F0JywgJ2RhdGV0aW1lJywgJ2RhdGUnXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ2NhbmNlbF9yZWFzb24nLCAnc3RyaW5nJywgJ3RleHQnXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ2FmZmlsaWF0ZV90b2tlbicsICdzdHJpbmcnLCAndGV4dCddLDxicj4gICAgICAgICAgICAgICAgICAgIFsnY3JlYXRlZF9mcm9tX2lwJywgJ3N0cmluZycsICd0ZXh0J10sPGJyPiAgICAgICAgICAgICAgICAgICAgWydyZXNvdXJjZV92ZXJzaW9uJywgJ251bWJlcicsICd0ZXh0J10sPGJyPiAgICAgICAgICAgICAgICAgICAgWyd1cGRhdGVkX2F0JywgJ2RhdGV0aW1lJywgJ2RhdGUnXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ2hhc19zY2hlZHVsZWRfY2hhbmdlcycsICdzdHJpbmcnLCAndGV4dCddLDxicj4gICAgICAgICAgICAgICAgICAgIFsncGF5bWVudF9zb3VyY2VfaWQnLCAnc3RyaW5nJywgJ3RleHQnXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ2V4Y2hhbmdlX3JhdGUnLCAnbnVtYmVyJywgJ3RleHQnXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ2Jhc2VfY3VycmVuY3lfY29kZScsICdzdHJpbmcnLCAndGV4dCddPGJyPiAgICAgICAgICAgICAgICBdPGJyPiAgICAgICAgICAgIH0sPGJyPiAgICAgICAgICAgIHs8YnI+ICAgICAgICAgICAgICAgIGxhYmVsOiAnQ3VzdG9tZXInLDxicj4gICAgICAgICAgICAgICAga2V5OiAnY3VzdGNzdCcsPGJyPiAgICAgICAgICAgICAgICBmaWVsZHM6IFs8YnI+ICAgICAgICAgICAgICAgICAgICBbJ3ZhdF9udW1iZXInLCAnc3RyaW5nJywgJ3RleHQnXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ3ZhdF9udW1iZXJfdmFsaWRhdGVkX3RpbWUnLCAnZGF0ZXRpbWUnLCAnZGF0ZSddLDxicj4gICAgICAgICAgICAgICAgICAgIFsndmF0X251bWJlcl9zdGF0dXMnLCAnc3RyaW5nJywgJ3RleHQnXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ2FsbG93X2RpcmVjdF9kZWJpdCcsICdzdHJpbmcnLCAndGV4dCddLDxicj4gICAgICAgICAgICAgICAgICAgIFsnaXNfbG9jYXRpb25fdmFsaWQnLCAnc3RyaW5nJywgJ3RleHQnXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ2NyZWF0ZWRfYXQnLCAnZGF0ZXRpbWUnLCAnZGF0ZSddLDxicj4gICAgICAgICAgICAgICAgICAgIFsnY3JlYXRlZF9mcm9tX2lwJywgJ3N0cmluZycsICd0ZXh0J10sPGJyPiAgICAgICAgICAgICAgICAgICAgWyd0YXhhYmlsaXR5JywgJ3N0cmluZycsICd0ZXh0J10sPGJyPiAgICAgICAgICAgICAgICAgICAgWydlbnRpdHlfY29kZScsICdzdHJpbmcnLCAndGV4dCddLDxicj4gICAgICAgICAgICAgICAgICAgIFsnZXhlbXB0X251bWJlcicsICdzdHJpbmcnLCAndGV4dCddLDxicj4gICAgICAgICAgICAgICAgICAgIFsncmVzb3VyY2VfdmVyc2lvbicsICdudW1iZXInLCAndGV4dCddLDxicj4gICAgICAgICAgICAgICAgICAgIFsndXBkYXRlZF9hdCcsICdkYXRldGltZScsICdkYXRlJ10sPGJyPiAgICAgICAgICAgICAgICAgICAgWydsb2NhbGUnLCAnc3RyaW5nJywgJ3RleHQnXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ2NvbnNvbGlkYXRlZF9pbnZvaWNpbmcnLCAnc3RyaW5nJywgJ3RleHQnXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ2JpbGxpbmdfZGF0ZV9tb2RlJywgJ3N0cmluZycsICd0ZXh0J10sPGJyPiAgICAgICAgICAgICAgICAgICAgWydiaWxsaW5nX2RheV9vZl93ZWVrJywgJ3N0cmluZycsICd0ZXh0J10sPGJyPiAgICAgICAgICAgICAgICAgICAgWydiaWxsaW5nX2RheV9vZl93ZWVrX21vZGUnLCAnc3RyaW5nJywgJ3RleHQnXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ3BpaV9jbGVhcmVkJywgJ3N0cmluZycsICd0ZXh0J10sPGJyPiAgICAgICAgICAgICAgICAgICAgWydmcmF1ZF9mbGFnJywgJ3N0cmluZycsICd0ZXh0J10sPGJyPiAgICAgICAgICAgICAgICAgICAgWydwcmltYXJ5X3BheW1lbnRfc291cmNlX2lkJywgJ3N0cmluZycsICd0ZXh0J10sPGJyPiAgICAgICAgICAgICAgICAgICAgWydiYWNrdXBfcGF5bWVudF9zb3VyY2VfaWQnLCAnc3RyaW5nJywgJ3RleHQnXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ3Byb21vdGlvbmFsX2NyZWRpdHMnLCAnbnVtYmVyJywgJ3RleHQnLCAnY3VycmVuY3knXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ3VuYmlsbGVkX2NoYXJnZXMnLCAnbnVtYmVyJywgJ3RleHQnLCAnY3VycmVuY3knXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ3JlZnVuZGFibGVfY3JlZGl0cycsICdudW1iZXInLCAndGV4dCcsICdjdXJyZW5jeSddLDxicj4gICAgICAgICAgICAgICAgICAgIFsnZXhjZXNzX3BheW1lbnRzJywgJ251bWJlcicsICd0ZXh0JywgJ2N1cnJlbmN5J10sPGJyPiAgICAgICAgICAgICAgICAgICAgWydkZWxldGVkJywgJ3N0cmluZycsICd0ZXh0J10sPGJyPiAgICAgICAgICAgICAgICAgICAgWydyZWdpc3RlcmVkX2Zvcl9nc3QnLCAnc3RyaW5nJywgJ3RleHQnXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ2J1c2luZXNzX2N1c3RvbWVyX3dpdGhvdXRfdmF0X251bWJlcicsICdzdHJpbmcnLCAndGV4dCddLDxicj4gICAgICAgICAgICAgICAgICAgIFsnY3VzdG9tZXJfdHlwZScsICdzdHJpbmcnLCAndGV4dCddLDxicj4gICAgICAgICAgICAgICAgICAgIFsnY2xpZW50X3Byb2ZpbGVfaWQnLCAnc3RyaW5nJywgJ3RleHQnXSw8YnI+ICAgICAgICAgICAgICAgIF08YnI+ICAgICAgICAgICAgfSw8YnI+ICAgICAgICAgICAgezxicj4gICAgICAgICAgICAgICAgbGFiZWw6ICdPcmRlcicsPGJyPiAgICAgICAgICAgICAgICBrZXk6ICdvcmRlcmNzdCcsPGJyPiAgICAgICAgICAgICAgICBmaWVsZHM6IFs8YnI+ICAgICAgICAgICAgICAgICAgICBbJ2RvY3VtZW50X251bWJlcicsICdzdHJpbmcnLCAndGV4dCddLDxicj4gICAgICAgICAgICAgICAgICAgIFsnaW52b2ljZV9pZCcsICdzdHJpbmcnLCAndGV4dCddLDxicj4gICAgICAgICAgICAgICAgICAgIFsnY2FuY2VsbGF0aW9uX3JlYXNvbicsICdzdHJpbmcnLCAndGV4dCddLDxicj4gICAgICAgICAgICAgICAgICAgIFsncGF5bWVudF9zdGF0dXMnLCAnc3RyaW5nJywgJ3RleHQnXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ29yZGVyX3R5cGUnLCAnc3RyaW5nJywgJ3RleHQnXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ3ByaWNlX3R5cGUnLCAnc3RyaW5nJywgJ3RleHQnXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ3JlZmVyZW5jZV9pZCcsICdzdHJpbmcnLCAndGV4dCddLDxicj4gICAgICAgICAgICAgICAgICAgIFsnZnVsZmlsbG1lbnRfc3RhdHVzJywgJ3N0cmluZycsICd0ZXh0J10sPGJyPiAgICAgICAgICAgICAgICAgICAgWydzaGlwcGluZ19kYXRlJywgJ2RhdGV0aW1lJywgJ2RhdGUnXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ3RyYWNraW5nX2lkJywgJ3N0cmluZycsICd0ZXh0J10sPGJyPiAgICAgICAgICAgICAgICAgICAgWydiYXRjaF9pZCcsICdzdHJpbmcnLCAndGV4dCddLDxicj4gICAgICAgICAgICAgICAgICAgIFsnY3JlYXRlZF9ieScsICdzdHJpbmcnLCAndGV4dCddLDxicj4gICAgICAgICAgICAgICAgICAgIFsnc2hpcG1lbnRfY2FycmllcicsICdzdHJpbmcnLCAndGV4dCddLDxicj4gICAgICAgICAgICAgICAgICAgIFsnaW52b2ljZV9yb3VuZF9vZmZfYW1vdW50JywgJ251bWJlcicsICd0ZXh0JywgJ2N1cnJlbmN5J10sPGJyPiAgICAgICAgICAgICAgICAgICAgWyd0YXgnLCAnbnVtYmVyJywgJ3RleHQnLCAnY3VycmVuY3knXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ2Ftb3VudF9hZGp1c3RlZCcsICdudW1iZXInLCAndGV4dCcsICdjdXJyZW5jeSddLDxicj4gICAgICAgICAgICAgICAgICAgIFsncmVmdW5kYWJsZV9jcmVkaXRzX2lzc3VlZCcsICdudW1iZXInLCAndGV4dCcsICdjdXJyZW5jeSddLDxicj4gICAgICAgICAgICAgICAgICAgIFsncmVmdW5kYWJsZV9jcmVkaXRzJywgJ251bWJlcicsICd0ZXh0JywgJ2N1cnJlbmN5J10sPGJyPiAgICAgICAgICAgICAgICAgICAgWydyb3VuZGluZ19hZGp1c3RlbWVudCcsICdudW1iZXInLCAndGV4dCcsICdjdXJyZW5jeSddLDxicj4gICAgICAgICAgICAgICAgICAgIFsncGFpZF9vbicsICdkYXRldGltZScsICdkYXRlJ10sPGJyPiAgICAgICAgICAgICAgICAgICAgWydzaGlwcGluZ19jdXRfb2ZmX2RhdGUnLCAnZGF0ZXRpbWUnLCAnZGF0ZSddLDxicj4gICAgICAgICAgICAgICAgICAgIFsnY3JlYXRlZF9hdCcsICdkYXRldGltZScsICdkYXRlJ10sPGJyPiAgICAgICAgICAgICAgICAgICAgWydzdGF0dXNfdXBkYXRlX2F0JywgJ2RhdGV0aW1lJywgJ2RhdGUnXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ2RlbGl2ZXJlZF9hdCcsICdkYXRldGltZScsICdkYXRlJ10sPGJyPiAgICAgICAgICAgICAgICAgICAgWydzaGlwcGVkX2F0JywgJ2RhdGV0aW1lJywgJ2RhdGUnXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ3Jlc291cmNlX3ZlcnNpb24nLCAnbnVtYmVyJywgJ3RleHQnXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ3VwZGF0ZWRfYXQnLCAnZGF0ZXRpbWUnLCAnZGF0ZSddLDxicj4gICAgICAgICAgICAgICAgICAgIFsnY2FuY2VsbGVkX2F0JywgJ2RhdGV0aW1lJywgJ2RhdGUnXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ2Rpc2NvdW50JywgJ251bWJlcicsICd0ZXh0JywgJ2N1cnJlbmN5J10sPGJyPiAgICAgICAgICAgICAgICAgICAgWydzdWJfdG90YWwnLCAnbnVtYmVyJywgJ3RleHQnLCAnY3VycmVuY3knXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ3RvdGFsJywgJ251bWJlcicsICd0ZXh0JywgJ2N1cnJlbmN5J10sPGJyPiAgICAgICAgICAgICAgICAgICAgWydkZWxldGVkJywgJ3N0cmluZycsICd0ZXh0J10sPGJyPiAgICAgICAgICAgICAgICAgICAgWydjdXJyZW5jeV9jb2RlJywgJ3N0cmluZycsICd0ZXh0J10sPGJyPiAgICAgICAgICAgICAgICAgICAgWydpc19naWZ0ZWQnLCAnc3RyaW5nJywgJ3RleHQnXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ2dpZnRfaWQnLCAnc3RyaW5nJywgJ3RleHQnXTxicj4gICAgICAgICAgICAgICAgXTxicj4gICAgICAgICAgICB9LDxicj4gICAgICAgIF0sPGJyPiAgZWxpc3Q6W10sPGJyPiAgZW1hcDp7fSw8YnI+ICBzbGlzdDpbXSw8YnI+ICBzbWFwOnt9LDxicj4gIHN5bmNDb3VudDp7PGJyPiAgICBlQ291bnQ6MCw8YnI+ICAgIHNDb3VudDowPGJyPiAgfTxicj59Ozxicj5kb25lKGRhdGEpOzwvcHJlPjxicj48Yj5SQVcgSlNPTjo8L2I+PGJyPjxicj48cHJlPns8YnI+ICAnb25TdWNjZXNzJzogWzxicj4gICAgJ0dldFRwSW50ZWdDb25mJzxicj4gIF0sPGJyPiAgJ29uRmFpbHVyZSc6IFtdLDxicj4gICduYW1lJzogJ1N5bmNMb2cnLDxicj4gICd0eXBlJzogJ3NjcmlwdCcsPGJyPiAgJ3Byb3BlcnRpZXMnOiB7PGJyPiAgICAnYm9keSc6ICdsZXQgZGF0YSA9IHtcbiAgY3VzdG9tZWZpZWxkczogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGxhYmVsOiBcJ1N1YnNjcmlwdGlvblwnLFxuICAgICAgICAgICAgICAgIGtleTogXCdzdWJjc3RcJyxcbiAgICAgICAgICAgICAgICBmaWVsZHM6IFtcbiAgICAgICAgICAgICAgICAgICAgWydjdXJyZW5jeV9jb2RlJywgJ3N0cmluZycsICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgICBbJ3BsYW5fcXVhbnRpdHknLCAnbnVtYmVyJywgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydwbGFuX3VuaXRfcHJpY2UnLCAnbnVtYmVyJywgJ3RleHQnLCAnY3VycmVuY3knXSxcbiAgICAgICAgICAgICAgICAgICAgWydwbGFuX2Ftb3VudCcsICdudW1iZXInLCAndGV4dCcsICdjdXJyZW5jeSddLFxuICAgICAgICAgICAgICAgICAgICBbJ2JpbGxpbmdfcGVyaW9kJywgJ251bWJlcicsICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsnYmlsbGluZ19wZXJpb2RfdW5pdCcsICdzdHJpbmcnLCAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ3BsYW5fZnJlZV9xdWFudGl0eScsICdudW1iZXInLCAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ3N0YXJ0X2RhdGUnLCAnZGF0ZXRpbWUnLCAnZGF0ZSddLFxuICAgICAgICAgICAgICAgICAgICBbJ3RyaWFsX3N0YXJ0JywgJ2RhdGV0aW1lJywgJ2RhdGUnXSxcbiAgICAgICAgICAgICAgICAgICAgWyd0cmlhbF9lbmQnLCAnZGF0ZXRpbWUnLCAnZGF0ZSddLFxuICAgICAgICAgICAgICAgICAgICBbJ2N1cnJlbnRfdGVybV9zdGFydCcsICdkYXRldGltZScsICdkYXRlJ10sXG4gICAgICAgICAgICAgICAgICAgIFsnY3VycmVudF90ZXJtX2VuZCcsICdkYXRldGltZScsICdkYXRlJ10sXG4gICAgICAgICAgICAgICAgICAgIFsnY3JlYXRlZF9hdCcsICdkYXRldGltZScsICdkYXRlJ10sXG4gICAgICAgICAgICAgICAgICAgIFsnc3RhcnRlZF9hdCcsICdkYXRldGltZScsICdkYXRlJ10sXG4gICAgICAgICAgICAgICAgICAgIFsnYWN0aXZhdGVkX2F0JywgJ2RhdGV0aW1lJywgJ2RhdGUnXSxcbiAgICAgICAgICAgICAgICAgICAgWydnaWZ0X2lkJywgJ3N0cmluZycsICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsnb3ZlcnJpZGVfcmVsYXRpb25zaGlwJywgJ3N0cmluZycsICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsncGF1c2VfZGF0ZScsICdkYXRldGltZScsICdkYXRlJ10sXG4gICAgICAgICAgICAgICAgICAgIFsncmVzdW1lX2RhdGUnLCAnZGF0ZXRpbWUnLCAnZGF0ZSddLFxuICAgICAgICAgICAgICAgICAgICBbJ2NhbmNlbGxlZF9hdCcsICdkYXRldGltZScsICdkYXRlJ10sXG4gICAgICAgICAgICAgICAgICAgIFsnY2FuY2VsX3JlYXNvbicsICdzdHJpbmcnLCAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2FmZmlsaWF0ZV90b2tlbicsICdzdHJpbmcnLCAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2NyZWF0ZWRfZnJvbV9pcCcsICdzdHJpbmcnLCAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ3Jlc291cmNlX3ZlcnNpb24nLCAnbnVtYmVyJywgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWyd1cGRhdGVkX2F0JywgJ2RhdGV0aW1lJywgJ2RhdGUnXSxcbiAgICAgICAgICAgICAgICAgICAgWydoYXNfc2NoZWR1bGVkX2NoYW5nZXMnLCAnc3RyaW5nJywgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydwYXltZW50X3NvdXJjZV9pZCcsICdzdHJpbmcnLCAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2V4Y2hhbmdlX3JhdGUnLCAnbnVtYmVyJywgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydiYXNlX2N1cnJlbmN5X2NvZGUnLCAnc3RyaW5nJywgJ3RleHQnXVxuICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbGFiZWw6IFwnQ3VzdG9tZXJcJyxcbiAgICAgICAgICAgICAgICBrZXk6IFwnY3VzdGNzdFwnLFxuICAgICAgICAgICAgICAgIGZpZWxkczogW1xuICAgICAgICAgICAgICAgICAgICBbJ3ZhdF9udW1iZXInLCAnc3RyaW5nJywgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWyd2YXRfbnVtYmVyX3ZhbGlkYXRlZF90aW1lJywgJ2RhdGV0aW1lJywgJ2RhdGUnXSxcbiAgICAgICAgICAgICAgICAgICAgWyd2YXRfbnVtYmVyX3N0YXR1cycsICdzdHJpbmcnLCAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2FsbG93X2RpcmVjdF9kZWJpdCcsICdzdHJpbmcnLCAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2lzX2xvY2F0aW9uX3ZhbGlkJywgJ3N0cmluZycsICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsnY3JlYXRlZF9hdCcsICdkYXRldGltZScsICdkYXRlJ10sXG4gICAgICAgICAgICAgICAgICAgIFsnY3JlYXRlZF9mcm9tX2lwJywgJ3N0cmluZycsICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsndGF4YWJpbGl0eScsICdzdHJpbmcnLCAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2VudGl0eV9jb2RlJywgJ3N0cmluZycsICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsnZXhlbXB0X251bWJlcicsICdzdHJpbmcnLCAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ3Jlc291cmNlX3ZlcnNpb24nLCAnbnVtYmVyJywgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWyd1cGRhdGVkX2F0JywgJ2RhdGV0aW1lJywgJ2RhdGUnXSxcbiAgICAgICAgICAgICAgICAgICAgWydsb2NhbGUnLCAnc3RyaW5nJywgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydjb25zb2xpZGF0ZWRfaW52b2ljaW5nJywgJ3N0cmluZycsICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsnYmlsbGluZ19kYXRlX21vZGUnLCAnc3RyaW5nJywgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydiaWxsaW5nX2RheV9vZl93ZWVrJywgJ3N0cmluZycsICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsnYmlsbGluZ19kYXlfb2Zfd2Vla19tb2RlJywgJ3N0cmluZycsICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsncGlpX2NsZWFyZWQnLCAnc3RyaW5nJywgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydmcmF1ZF9mbGFnJywgJ3N0cmluZycsICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsncHJpbWFyeV9wYXltZW50X3NvdXJjZV9pZCcsICdzdHJpbmcnLCAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2JhY2t1cF9wYXltZW50X3NvdXJjZV9pZCcsICdzdHJpbmcnLCAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ3Byb21vdGlvbmFsX2NyZWRpdHMnLCAnbnVtYmVyJywgJ3RleHQnLCAnY3VycmVuY3knXSxcbiAgICAgICAgICAgICAgICAgICAgWyd1bmJpbGxlZF9jaGFyZ2VzJywgJ251bWJlcicsICd0ZXh0JywgJ2N1cnJlbmN5J10sXG4gICAgICAgICAgICAgICAgICAgIFsncmVmdW5kYWJsZV9jcmVkaXRzJywgJ251bWJlcicsICd0ZXh0JywgJ2N1cnJlbmN5J10sXG4gICAgICAgICAgICAgICAgICAgIFsnZXhjZXNzX3BheW1lbnRzJywgJ251bWJlcicsICd0ZXh0JywgJ2N1cnJlbmN5J10sXG4gICAgICAgICAgICAgICAgICAgIFsnZGVsZXRlZCcsICdzdHJpbmcnLCAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ3JlZ2lzdGVyZWRfZm9yX2dzdCcsICdzdHJpbmcnLCAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2J1c2luZXNzX2N1c3RvbWVyX3dpdGhvdXRfdmF0X251bWJlcicsICdzdHJpbmcnLCAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2N1c3RvbWVyX3R5cGUnLCAnc3RyaW5nJywgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydjbGllbnRfcHJvZmlsZV9pZCcsICdzdHJpbmcnLCAndGV4dCddLFxuICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbGFiZWw6IFwnT3JkZXJcJyxcbiAgICAgICAgICAgICAgICBrZXk6IFwnb3JkZXJjc3RcJyxcbiAgICAgICAgICAgICAgICBmaWVsZHM6IFtcbiAgICAgICAgICAgICAgICAgICAgWydkb2N1bWVudF9udW1iZXInLCAnc3RyaW5nJywgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydpbnZvaWNlX2lkJywgJ3N0cmluZycsICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsnY2FuY2VsbGF0aW9uX3JlYXNvbicsICdzdHJpbmcnLCAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ3BheW1lbnRfc3RhdHVzJywgJ3N0cmluZycsICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsnb3JkZXJfdHlwZScsICdzdHJpbmcnLCAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ3ByaWNlX3R5cGUnLCAnc3RyaW5nJywgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydyZWZlcmVuY2VfaWQnLCAnc3RyaW5nJywgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydmdWxmaWxsbWVudF9zdGF0dXMnLCAnc3RyaW5nJywgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydzaGlwcGluZ19kYXRlJywgJ2RhdGV0aW1lJywgJ2RhdGUnXSxcbiAgICAgICAgICAgICAgICAgICAgWyd0cmFja2luZ19pZCcsICdzdHJpbmcnLCAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2JhdGNoX2lkJywgJ3N0cmluZycsICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsnY3JlYXRlZF9ieScsICdzdHJpbmcnLCAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ3NoaXBtZW50X2NhcnJpZXInLCAnc3RyaW5nJywgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydpbnZvaWNlX3JvdW5kX29mZl9hbW91bnQnLCAnbnVtYmVyJywgJ3RleHQnLCAnY3VycmVuY3knXSxcbiAgICAgICAgICAgICAgICAgICAgWyd0YXgnLCAnbnVtYmVyJywgJ3RleHQnLCAnY3VycmVuY3knXSxcbiAgICAgICAgICAgICAgICAgICAgWydhbW91bnRfYWRqdXN0ZWQnLCAnbnVtYmVyJywgJ3RleHQnLCAnY3VycmVuY3knXSxcbiAgICAgICAgICAgICAgICAgICAgWydyZWZ1bmRhYmxlX2NyZWRpdHNfaXNzdWVkJywgJ251bWJlcicsICd0ZXh0JywgJ2N1cnJlbmN5J10sXG4gICAgICAgICAgICAgICAgICAgIFsncmVmdW5kYWJsZV9jcmVkaXRzJywgJ251bWJlcicsICd0ZXh0JywgJ2N1cnJlbmN5J10sXG4gICAgICAgICAgICAgICAgICAgIFsncm91bmRpbmdfYWRqdXN0ZW1lbnQnLCAnbnVtYmVyJywgJ3RleHQnLCAnY3VycmVuY3knXSxcbiAgICAgICAgICAgICAgICAgICAgWydwYWlkX29uJywgJ2RhdGV0aW1lJywgJ2RhdGUnXSxcbiAgICAgICAgICAgICAgICAgICAgWydzaGlwcGluZ19jdXRfb2ZmX2RhdGUnLCAnZGF0ZXRpbWUnLCAnZGF0ZSddLFxuICAgICAgICAgICAgICAgICAgICBbJ2NyZWF0ZWRfYXQnLCAnZGF0ZXRpbWUnLCAnZGF0ZSddLFxuICAgICAgICAgICAgICAgICAgICBbJ3N0YXR1c191cGRhdGVfYXQnLCAnZGF0ZXRpbWUnLCAnZGF0ZSddLFxuICAgICAgICAgICAgICAgICAgICBbJ2RlbGl2ZXJlZF9hdCcsICdkYXRldGltZScsICdkYXRlJ10sXG4gICAgICAgICAgICAgICAgICAgIFsnc2hpcHBlZF9hdCcsICdkYXRldGltZScsICdkYXRlJ10sXG4gICAgICAgICAgICAgICAgICAgIFsncmVzb3VyY2VfdmVyc2lvbicsICdudW1iZXInLCAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ3VwZGF0ZWRfYXQnLCAnZGF0ZXRpbWUnLCAnZGF0ZSddLFxuICAgICAgICAgICAgICAgICAgICBbJ2NhbmNlbGxlZF9hdCcsICdkYXRldGltZScsICdkYXRlJ10sXG4gICAgICAgICAgICAgICAgICAgIFsnZGlzY291bnQnLCAnbnVtYmVyJywgJ3RleHQnLCAnY3VycmVuY3knXSxcbiAgICAgICAgICAgICAgICAgICAgWydzdWJfdG90YWwnLCAnbnVtYmVyJywgJ3RleHQnLCAnY3VycmVuY3knXSxcbiAgICAgICAgICAgICAgICAgICAgWyd0b3RhbCcsICdudW1iZXInLCAndGV4dCcsICdjdXJyZW5jeSddLFxuICAgICAgICAgICAgICAgICAgICBbJ2RlbGV0ZWQnLCAnc3RyaW5nJywgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydjdXJyZW5jeV9jb2RlJywgJ3N0cmluZycsICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsnaXNfZ2lmdGVkJywgJ3N0cmluZycsICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsnZ2lmdF9pZCcsICdzdHJpbmcnLCAndGV4dCddXG4gICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgZWxpc3Q6W10sXG4gIGVtYXA6e30sXG4gIHNsaXN0OltdLFxuICBzbWFwOnt9LFxuICBzeW5jQ291bnQ6e1xuICAgIGVDb3VudDowLFxuICAgIHNDb3VudDowXG4gIH1cbn07XG5kb25lKGRhdGEpOyc8YnI+ICB9PGJyPn08L3ByZT48L2JvZHk+PC9odG1sPg=='));document.close();" "JavaScript:<br><pre>let data = {<br>  customefields: [<br>            {<br>                label: 'Subscription',<br>                key: 'subcst',<br>                fields: [<br>                    ['currency_code', 'string', 'text'],<br>                     ['plan_quantity', 'number', 'text'],<br>                    ['plan_unit_price', 'number', 'text', 'currency'],<br>                    ['plan_amount', 'number', 'text', 'currency'],<br>                    ['billing_period', 'number', 'text'],<br>                    ['billing_period_unit', 'string', 'text'],<br>                    ['plan_free_quantity', 'number', 'text'],<br>                    ['start_date', 'datetime', 'date'],<br>                    ['trial_start', 'datetime', 'date'],<br>                    ['trial_end', 'datetime', 'date'],<br>                    ['current_term_start', 'datetime', 'date'],<br>                    ['current_term_end', 'datetime', 'date'],<br>                    ['created_at', 'datetime', 'date'],<br>                    ['started_at', 'datetime', 'date'],<br>                    ['activated_at', 'datetime', 'date'],<br>                    ['gift_id', 'string', 'text'],<br>                    ['override_relationship', 'string', 'text'],<br>                    ['pause_date', 'datetime', 'date'],<br>                    ['resume_date', 'datetime', 'date'],<br>                    ['cancelled_at', 'datetime', 'date'],<br>                    ['cancel_reason', 'string', 'text'],<br>                    ['affiliate_token', 'string', 'text'],<br>                    ['created_from_ip', 'string', 'text'],<br>                    ['resource_version', 'number', 'text'],<br>                    ['updated_at', 'datetime', 'date'],<br>                    ['has_scheduled_changes', 'string', 'text'],<br>                    ['payment_source_id', 'string', 'text'],<br>                    ['exchange_rate', 'number', 'text'],<br>                    ['base_currency_code', 'string', 'text']<br>                ]<br>            },<br>            {<br>                label: 'Customer',<br>                key: 'custcst',<br>                fields: [<br>                    ['vat_number', 'string', 'text'],<br>                    ['vat_number_validated_time', 'datetime', 'date'],<br>                    ['vat_number_status', 'string', 'text'],<br>                    ['allow_direct_debit', 'string', 'text'],<br>                    ['is_location_valid', 'string', 'text'],<br>                    ['created_at', 'datetime', 'date'],<br>                    ['created_from_ip', 'string', 'text'],<br>                    ['taxability', 'string', 'text'],<br>                    ['entity_code', 'string', 'text'],<br>                    ['exempt_number', 'string', 'text'],<br>                    ['resource_version', 'number', 'text'],<br>                    ['updated_at', 'datetime', 'date'],<br>                    ['locale', 'string', 'text'],<br>                    ['consolidated_invoicing', 'string', 'text'],<br>                    ['billing_date_mode', 'string', 'text'],<br>                    ['billing_day_of_week', 'string', 'text'],<br>                    ['billing_day_of_week_mode', 'string', 'text'],<br>                    ['pii_cleared', 'string', 'text'],<br>                    ['fraud_flag', 'string', 'text'],<br>                    ['primary_payment_source_id', 'string', 'text'],<br>                    ['backup_payment_source_id', 'string', 'text'],<br>                    ['promotional_credits', 'number', 'text', 'currency'],<br>                    ['unbilled_charges', 'number', 'text', 'currency'],<br>                    ['refundable_credits', 'number', 'text', 'currency'],<br>                    ['excess_payments', 'number', 'text', 'currency'],<br>                    ['deleted', 'string', 'text'],<br>                    ['registered_for_gst', 'string', 'text'],<br>                    ['business_customer_without_vat_number', 'string', 'text'],<br>                    ['customer_type', 'string', 'text'],<br>                    ['client_profile_id', 'string', 'text'],<br>                ]<br>            },<br>            {<br>                label: 'Order',<br>                key: 'ordercst',<br>                fields: [<br>                    ['document_number', 'string', 'text'],<br>                    ['invoice_id', 'string', 'text'],<br>                    ['cancellation_reason', 'string', 'text'],<br>                    ['payment_status', 'string', 'text'],<br>                    ['order_type', 'string', 'text'],<br>                    ['price_type', 'string', 'text'],<br>                    ['reference_id', 'string', 'text'],<br>                    ['fulfillment_status', 'string', 'text'],<br>                    ['shipping_date', 'datetime', 'date'],<br>                    ['tracking_id', 'string', 'text'],<br>                    ['batch_id', 'string', 'text'],<br>                    ['created_by', 'string', 'text'],<br>                    ['shipment_carrier', 'string', 'text'],<br>                    ['invoice_round_off_amount', 'number', 'text', 'currency'],<br>                    ['tax', 'number', 'text', 'currency'],<br>                    ['amount_adjusted', 'number', 'text', 'currency'],<br>                    ['refundable_credits_issued', 'number', 'text', 'currency'],<br>                    ['refundable_credits', 'number', 'text', 'currency'],<br>                    ['rounding_adjustement', 'number', 'text', 'currency'],<br>                    ['paid_on', 'datetime', 'date'],<br>                    ['shipping_cut_off_date', 'datetime', 'date'],<br>                    ['created_at', 'datetime', 'date'],<br>                    ['status_update_at', 'datetime', 'date'],<br>                    ['delivered_at', 'datetime', 'date'],<br>                    ['shipped_at', 'datetime', 'date'],<br>                    ['resource_version', 'number', 'text'],<br>                    ['updated_at', 'datetime', 'date'],<br>                    ['cancelled_at', 'datetime', 'date'],<br>                    ['discount', 'number', 'text', 'currency'],<br>                    ['sub_total', 'number', 'text', 'currency'],<br>                    ['total', 'number', 'text', 'currency'],<br>                    ['deleted', 'string', 'text'],<br>                    ['currency_code', 'string', 'text'],<br>                    ['is_gifted', 'string', 'text'],<br>                    ['gift_id', 'string', 'text']<br>                ]<br>            },<br>        ],<br>  elist:[],<br>  emap:{},<br>  slist:[],<br>  smap:{},<br>  syncCount:{<br>    eCount:0,<br>    sCount:0<br>  }<br>};<br>done(data);</pre>"
            click step-003 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkdldFRwSW50ZWdDb25mPC90aXRsZT48L2hlYWQ+PGJvZHk+PGI+T3RoZXIgKGZvcm11bGEpOjwvYj48YnI+PGJyPjxwcmU+ICBmb3JtdWxhSWQgOiAzMTMzMDxicj4gICAgICAgYXJncyA6ICR7c3RlcHMuQ29udGFjdElucHV0UGFyYW1zLmdldFRwSW50ZWdDb25mfTwvcHJlPjxicj48Yj5SQVcgSlNPTjo8L2I+PGJyPjxicj48cHJlPns8YnI+ICAnb25TdWNjZXNzJzogWzxicj4gICAgJ0lzVHBJbnRlZ0NvbmZGZXRjaGVkJzxicj4gIF0sPGJyPiAgJ29uRmFpbHVyZSc6IFtdLDxicj4gICduYW1lJzogJ0dldFRwSW50ZWdDb25mJyw8YnI+ICAndHlwZSc6ICdmb3JtdWxhJyw8YnI+ICAncHJvcGVydGllcyc6IHs8YnI+ICAgICdmb3JtdWxhSWQnOiAnMzEzMzAnLDxicj4gICAgJ2FyZ3MnOiAnJHtzdGVwcy5Db250YWN0SW5wdXRQYXJhbXMuZ2V0VHBJbnRlZ0NvbmZ9Jzxicj4gIH08YnI+fTwvcHJlPjwvYm9keT48L2h0bWw+'));document.close();" "Other (formula):<br><pre>  formulaId : 31330<br>       args : ${steps.ContactInputParams.getTpIntegConf}</pre>"
            click step-004 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPklzVHBJbnRlZ0NvbmZGZXRjaGVkPC90aXRsZT48L2hlYWQ+PGJvZHk+PGI+SmF2YVNjcmlwdDo8L2I+PGJyPjxicj48cHJlPmlmKHN0ZXBzLkdldFRwSW50ZWdDb25mLmNiX3N0YXR1cyA9PSAnc3VjY2VzcycpPGJyPiAgZG9uZSh0cnVlKTs8YnI+ZWxzZTxicj4gIGRvbmUoZmFsc2UpOzwvcHJlPjxicj48Yj5SQVcgSlNPTjo8L2I+PGJyPjxicj48cHJlPns8YnI+ICAnb25TdWNjZXNzJzogWzxicj4gICAgJ0dldEN1c3RvbUZpZWxkJzxicj4gIF0sPGJyPiAgJ29uRmFpbHVyZSc6IFtdLDxicj4gICduYW1lJzogJ0lzVHBJbnRlZ0NvbmZGZXRjaGVkJyw8YnI+ICAndHlwZSc6ICdmaWx0ZXInLDxicj4gICdwcm9wZXJ0aWVzJzogezxicj4gICAgJ2JvZHknOiAnaWYoc3RlcHMuR2V0VHBJbnRlZ0NvbmYuY2Jfc3RhdHVzID09IFwnc3VjY2Vzc1wnKVxuICBkb25lKHRydWUpO1xuZWxzZVxuICBkb25lKGZhbHNlKTsnPGJyPiAgfTxicj59PC9wcmU+PC9ib2R5PjwvaHRtbD4='));document.close();" "JavaScript:<br><pre>if(steps.GetTpIntegConf.cb_status == 'success')<br>  done(true);<br>else<br>  done(false);</pre>"
            click step-006 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkdldEN1c3RvbUZpZWxkPC90aXRsZT48L2hlYWQ+PGJvZHk+PGI+T3RoZXIgKGZvcm11bGEpOjwvYj48YnI+PGJyPjxwcmU+ICBmb3JtdWxhSWQgOiAzMTMzMDxicj4gICAgICAgYXJncyA6ICR7c3RlcHMuQ29udGFjdElucHV0UGFyYW1zLmdldEN1c3RvbUZpZWxkfTwvcHJlPjxicj48Yj5SQVcgSlNPTjo8L2I+PGJyPjxicj48cHJlPns8YnI+ICAnb25TdWNjZXNzJzogWzxicj4gICAgJ0lzQ3VzdG9tRmllbGRGZXRjaGVkJzxicj4gIF0sPGJyPiAgJ29uRmFpbHVyZSc6IFtdLDxicj4gICduYW1lJzogJ0dldEN1c3RvbUZpZWxkJyw8YnI+ICAndHlwZSc6ICdmb3JtdWxhJyw8YnI+ICAncHJvcGVydGllcyc6IHs8YnI+ICAgICdmb3JtdWxhSWQnOiAnMzEzMzAnLDxicj4gICAgJ2FyZ3MnOiAnJHtzdGVwcy5Db250YWN0SW5wdXRQYXJhbXMuZ2V0Q3VzdG9tRmllbGR9Jzxicj4gIH08YnI+fTwvcHJlPjwvYm9keT48L2h0bWw+'));document.close();" "Other (formula):<br><pre>  formulaId : 31330<br>       args : ${steps.ContactInputParams.getCustomField}</pre>"
            click step-007 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPklzQ3VzdG9tRmllbGRGZXRjaGVkPC90aXRsZT48L2hlYWQ+PGJvZHk+PGI+SmF2YVNjcmlwdDo8L2I+PGJyPjxicj48cHJlPmlmKHN0ZXBzLkdldEN1c3RvbUZpZWxkLmNiX3N0YXR1cyA9PSAnc3VjY2VzcycpPGJyPiAgZG9uZSh0cnVlKTs8YnI+ZWxzZTxicj4gIGRvbmUoZmFsc2UpOzwvcHJlPjxicj48Yj5SQVcgSlNPTjo8L2I+PGJyPjxicj48cHJlPns8YnI+ICAnb25TdWNjZXNzJzogWzxicj4gICAgJ1VwZGF0ZUN1c3RvbUZpZWxkSW5mbyc8YnI+ICBdLDxicj4gICdvbkZhaWx1cmUnOiBbXSw8YnI+ICAnbmFtZSc6ICdJc0N1c3RvbUZpZWxkRmV0Y2hlZCcsPGJyPiAgJ3R5cGUnOiAnZmlsdGVyJyw8YnI+ICAncHJvcGVydGllcyc6IHs8YnI+ICAgICdib2R5JzogJ2lmKHN0ZXBzLkdldEN1c3RvbUZpZWxkLmNiX3N0YXR1cyA9PSBcJ3N1Y2Nlc3NcJylcbiAgZG9uZSh0cnVlKTtcbmVsc2VcbiAgZG9uZShmYWxzZSk7Jzxicj4gIH08YnI+fTwvcHJlPjwvYm9keT48L2h0bWw+'));document.close();" "JavaScript:<br><pre>if(steps.GetCustomField.cb_status == 'success')<br>  done(true);<br>else<br>  done(false);</pre>"
            click step-009 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPlVwZGF0ZUN1c3RvbUZpZWxkSW5mbzwvdGl0bGU+PC9oZWFkPjxib2R5PjxiPkphdmFTY3JpcHQ6PC9iPjxicj48YnI+PHByZT4vKiBTZXQgdGhlIG1hcHBlZCBmaWVsZHMgKi88YnI+PGJyPnN0ZXBzLkNvbnRhY3RJbnB1dFBhcmFtcy5pbnB1dC5jYk1hcHBlZEZpZWxkID0gKHN0ZXBzLkdldFRwSW50ZWdDb25mLmRhdGEuY29uZmlnX2pzb24uY2xvdWRFbGVtZW50cy5zeW5jUnVsZXNDb250YWN0cy5NYXBwZWRGaWVsZENoYXJnZWJlZSAhPT0gdW5kZWZpbmVkKSA/IHN0ZXBzLkdldFRwSW50ZWdDb25mLmRhdGEuY29uZmlnX2pzb24uY2xvdWRFbGVtZW50cy5zeW5jUnVsZXNDb250YWN0cy5NYXBwZWRGaWVsZENoYXJnZWJlZSA6IHN0ZXBzLkNvbnRhY3RJbnB1dFBhcmFtcy5pbnB1dC5jYk1hcHBlZEZpZWxkOzxicj48YnI+c3RlcHMuQ29udGFjdElucHV0UGFyYW1zLmlucHV0Lmh1YlNwb3RNYXBwZWRGaWVsZCA9IChzdGVwcy5HZXRUcEludGVnQ29uZi5kYXRhLmNvbmZpZ19qc29uLmNsb3VkRWxlbWVudHMuc3luY1J1bGVzQ29udGFjdHMuTWFwcGVkRmllbGRIdWJzcG90ICE9PSB1bmRlZmluZWQpID8gc3RlcHMuR2V0VHBJbnRlZ0NvbmYuZGF0YS5jb25maWdfanNvbi5jbG91ZEVsZW1lbnRzLnN5bmNSdWxlc0NvbnRhY3RzLk1hcHBlZEZpZWxkSHVic3BvdCA6IHN0ZXBzLkNvbnRhY3RJbnB1dFBhcmFtcy5pbnB1dC5odWJTcG90TWFwcGVkRmllbGQ7PGJyPjxicj4vKiAtLS0tLS0tLSAqLzxicj48YnI+bGV0IGN1c3RvbWVmaWVsZHMgPSBzdGVwcy5TeW5jTG9nLmN1c3RvbWVmaWVsZHM7PGJyPmxldCBsaXN0ID0gc3RlcHMuR2V0Q3VzdG9tRmllbGQuZGF0YTs8YnI+aWYobGlzdCE9PXVuZGVmaW5lZCAmJiBsaXN0Lmxpc3QhPT11bmRlZmluZWQgJiYgbGlzdC5saXN0Lmxlbmd0aDxzcGFuPj48L3NwYW4+MCkgezxicj4gIGxpc3QgPSBsaXN0Lmxpc3Q7PGJyPn08YnI+aWYobGlzdCE9PXVuZGVmaW5lZCl7PGJyPiAgbGV0IGxpc3RNYXAgPSB7fTs8YnI+ICBmb3IodmFyIGk9MDtpPHNwYW4+PDwvc3Bhbj5saXN0Lmxlbmd0aDtpKyspezxicj4gICAgbGV0IG9iaiA9IGxpc3RbaV07PGJyPiAgICBpZihvYmouY3VzdG9tX2ZpZWxkX2NvbmZpZyAhPT0gdW5kZWZpbmVkKSB7PGJyPiAgICAgIGlmKG9iai5jdXN0b21fZmllbGRfY29uZmlnLmVudGl0eV90eXBlID09PSAnY3VzdG9tZXInKSB7PGJyPiAgICAgICAgbGlzdE1hcFsnY3VzdGNzdF8nK29iai5jdXN0b21fZmllbGRfY29uZmlnLmFwaV9uYW1lXSA9IG9iai5jdXN0b21fZmllbGRfY29uZmlnOzxicj4gICAgICB9ZWxzZSBpZihvYmouY3VzdG9tX2ZpZWxkX2NvbmZpZy5lbnRpdHlfdHlwZSA9PT0gJ3N1YnNjcmlwdGlvbicpIHs8YnI+ICAgICAgICBsaXN0TWFwWydzdWJjc3RfJytvYmouY3VzdG9tX2ZpZWxkX2NvbmZpZy5hcGlfbmFtZV0gPSBvYmouY3VzdG9tX2ZpZWxkX2NvbmZpZzs8YnI+ICAgICAgfTxicj4gICAgfTxicj4gICAgPGJyPiAgfTxicj4gICAgbGV0IHN5bmNSdWxlc0ZpZWxkcyA9IHN0ZXBzLkdldFRwSW50ZWdDb25mLmRhdGEuY29uZmlnX2pzb24uY2xvdWRFbGVtZW50cy5zeW5jUnVsZXNGaWVsZHM7PGJyPiAgaWYgKHN5bmNSdWxlc0ZpZWxkcyA9PT0gdW5kZWZpbmVkKSB7PGJyPiAgICBzeW5jUnVsZXNGaWVsZHMgPSB7PGJyPiAgICAgICdjb21wYW55Jzogezxicj48YnI+ICAgICAgfSw8YnI+ICAgICAgJ2NvbnRhY3QnOiB7PGJyPjxicj4gICAgICB9LDxicj4gICAgICAnZGVhbCc6IHs8YnI+ICAgICAgfSw8YnI+ICAgICAgJ3N5bmMnOiAnZmFsc2UnPGJyPiAgICB9Ozxicj48YnI+ICB9IGVsc2Ugezxicj4gICAgaWYgKHN5bmNSdWxlc0ZpZWxkcy5jb21wYW55ID09PSB1bmRlZmluZWQgfHwgc3luY1J1bGVzRmllbGRzLmNvbXBhbnkgPT09ICcnKSB7PGJyPiAgICAgIHN5bmNSdWxlc0ZpZWxkcy5jb21wYW55ID0ge307PGJyPiAgICB9PGJyPiAgICBpZiAoc3luY1J1bGVzRmllbGRzLmNvbnRhY3QgPT09IHVuZGVmaW5lZCB8fCBzeW5jUnVsZXNGaWVsZHMuY29udGFjdCA9PT0gJycpIHs8YnI+ICAgICAgc3luY1J1bGVzRmllbGRzLmNvbnRhY3QgPSB7fTs8YnI+ICAgIH08YnI+ICAgIGlmIChzeW5jUnVsZXNGaWVsZHMuZGVhbCA9PT0gdW5kZWZpbmVkIHx8IHN5bmNSdWxlc0ZpZWxkcy5kZWFsID09PSAnJykgezxicj4gICAgICBzeW5jUnVsZXNGaWVsZHMuZGVhbCA9IHt9Ozxicj4gICAgfTxicj4gIH08YnI+ICA8YnI+ICBsZXQgY29udGFjdEtleXMgPSBPYmplY3Qua2V5cyhzeW5jUnVsZXNGaWVsZHMuY29udGFjdCk7PGJyPiAgbGV0IHN1YktleXMgPSBPYmplY3Qua2V5cyhzeW5jUnVsZXNGaWVsZHMuZGVhbCk7PGJyPiAgbGV0IGNLZXlzID1bXTs8YnI+ICBsZXQgY01hcCA9IHt9Ozxicj4gIGZvciAodmFyIGkgPSAwOyBpIDxzcGFuPjw8L3NwYW4+IGNvbnRhY3RLZXlzLmxlbmd0aDsgaSsrKSB7PGJyPiAgICBpZihjb250YWN0S2V5c1tpXS5zdGFydHNXaXRoKCdjdXN0Y3N0X2NmXycpIHx8IGNvbnRhY3RLZXlzW2ldLnN0YXJ0c1dpdGgoJ3N1YmNzdF9jZl8nKSApIHs8YnI+ICAgICAgaWYoY01hcFtjb250YWN0S2V5c1tpXV0gPT09IHVuZGVmaW5lZCl7PGJyPiAgICAgICAgY0tleXMucHVzaChjb250YWN0S2V5c1tpXSk7PGJyPiAgICAgICAgY01hcFtjb250YWN0S2V5c1tpXV0gPWNvbnRhY3RLZXlzW2ldOzxicj4gICAgICB9PGJyPiAgICB9PGJyPiAgfTxicj4gIGZvciAodmFyIGkgPSAwOyBpIDxzcGFuPjw8L3NwYW4+IHN1YktleXMubGVuZ3RoOyBpKyspIHs8YnI+ICAgIGlmKHN1YktleXNbaV0uc3RhcnRzV2l0aCgnY3VzdGNzdF9jZl8nKSB8fCBzdWJLZXlzW2ldLnN0YXJ0c1dpdGgoJ3N1YmNzdF9jZl8nKSApIHs8YnI+ICAgICAgaWYoY01hcFtzdWJLZXlzW2ldXSA9PT0gdW5kZWZpbmVkKXs8YnI+ICAgICAgICBjS2V5cy5wdXNoKHN1YktleXNbaV0pOzxicj4gICAgICAgIGNNYXBbc3ViS2V5c1tpXV0gPXN1YktleXNbaV07PGJyPiAgICAgIH08YnI+ICAgIH08YnI+ICB9PGJyPiAgPGJyPiAgICBmb3IgKHZhciBpID0gMDsgaSA8c3Bhbj48PC9zcGFuPiBjS2V5cy5sZW5ndGg7IGkrKykgezxicj4gICAgICBpZihsaXN0TWFwW2NLZXlzW2ldXSAhPT0gdW5kZWZpbmVkKSB7PGJyPiAgICAgICAgIGxldCB0eXBlID0gbGlzdE1hcFtjS2V5c1tpXV0uZmllbGRfZGF0YXR5cGU7PGJyPiAgICAgICAgIGxldCBrZXluYW1lID0gbGlzdE1hcFtjS2V5c1tpXV0uYXBpX25hbWU7PGJyPiAgICAgICAgIGlmKGxpc3RNYXBbY0tleXNbaV1dLmVudGl0eV90eXBlID09PSAnY3VzdG9tZXInKSB7PGJyPiAgICAgICAgICA8YnI+ICAgICAgICAgICBpZih0eXBlID09PSdkYXRlJyB8fCB0eXBlID09PSd0aW1lc3RhbXAnKSB7PGJyPiAgICAgICAgICAgICBjdXN0b21lZmllbGRzWzFdLmZpZWxkcy5wdXNoKFtrZXluYW1lLCAnZGF0ZXRpbWUnLCAnZGF0ZSddKTs8YnI+ICAgICAgICAgICB9ZWxzZSBpZih0eXBlID09PSdsb25nJyl7PGJyPiAgICAgICAgICAgICBjdXN0b21lZmllbGRzWzFdLmZpZWxkcy5wdXNoKFtrZXluYW1lLCAnbnVtYmVyJywgJ3RleHQnXSk7PGJyPiAgICAgICAgICAgfWVsc2Ugezxicj4gICAgICAgICAgICAgY3VzdG9tZWZpZWxkc1sxXS5maWVsZHMucHVzaChba2V5bmFtZSwgJ3N0cmluZycsICd0ZXh0J10pOzxicj4gICAgICAgICAgIH08YnI+ICAgICAgICAgICA8YnI+ICAgICAgICAgfWVsc2UgaWYobGlzdE1hcFtjS2V5c1tpXV0uZW50aXR5X3R5cGUgPT09ICdzdWJzY3JpcHRpb24nKSB7PGJyPiAgICAgICAgICAgIGlmKHR5cGUgPT09J2RhdGUnIHx8IHR5cGUgPT09J3RpbWVzdGFtcCcpIHs8YnI+ICAgICAgICAgICAgIGN1c3RvbWVmaWVsZHNbMF0uZmllbGRzLnB1c2goW2tleW5hbWUsICdkYXRldGltZScsICdkYXRlJ10pOzxicj4gICAgICAgICAgIH1lbHNlIGlmKHR5cGUgPT09J2xvbmcnKXs8YnI+ICAgICAgICAgICAgIGN1c3RvbWVmaWVsZHNbMF0uZmllbGRzLnB1c2goW2tleW5hbWUsICdudW1iZXInLCAndGV4dCddKTs8YnI+ICAgICAgICAgICB9ZWxzZSB7PGJyPiAgICAgICAgICAgICBjdXN0b21lZmllbGRzWzBdLmZpZWxkcy5wdXNoKFtrZXluYW1lLCAnc3RyaW5nJywgJ3RleHQnXSk7PGJyPiAgICAgICAgICAgfTxicj4gICAgICAgICB9PGJyPiAgICAgIH08YnI+ICAgIH08YnI+ICA8YnI+ICA8YnI+c3RlcHMuU3luY0xvZy5jdXN0b21lZmllbGRzPSBjdXN0b21lZmllbGRzOzxicj4gIDxicj59PGJyPmRvbmUoc3RlcHMuU3luY0xvZy5jdXN0b21lZmllbGRzKTs8L3ByZT48YnI+PGI+UkFXIEpTT046PC9iPjxicj48YnI+PHByZT57PGJyPiAgJ29uU3VjY2Vzcyc6IFs8YnI+ICAgICdHZXRDQk9yZGVyJzxicj4gIF0sPGJyPiAgJ29uRmFpbHVyZSc6IFtdLDxicj4gICduYW1lJzogJ1VwZGF0ZUN1c3RvbUZpZWxkSW5mbycsPGJyPiAgJ3R5cGUnOiAnc2NyaXB0Jyw8YnI+ICAncHJvcGVydGllcyc6IHs8YnI+ICAgICdib2R5JzogJy8qIFNldCB0aGUgbWFwcGVkIGZpZWxkcyAqL1xuXG5zdGVwcy5Db250YWN0SW5wdXRQYXJhbXMuaW5wdXQuY2JNYXBwZWRGaWVsZCA9IChzdGVwcy5HZXRUcEludGVnQ29uZi5kYXRhLmNvbmZpZ19qc29uLmNsb3VkRWxlbWVudHMuc3luY1J1bGVzQ29udGFjdHMuTWFwcGVkRmllbGRDaGFyZ2ViZWUgIT09IHVuZGVmaW5lZCkgPyBzdGVwcy5HZXRUcEludGVnQ29uZi5kYXRhLmNvbmZpZ19qc29uLmNsb3VkRWxlbWVudHMuc3luY1J1bGVzQ29udGFjdHMuTWFwcGVkRmllbGRDaGFyZ2ViZWUgOiBzdGVwcy5Db250YWN0SW5wdXRQYXJhbXMuaW5wdXQuY2JNYXBwZWRGaWVsZDtcblxuc3RlcHMuQ29udGFjdElucHV0UGFyYW1zLmlucHV0Lmh1YlNwb3RNYXBwZWRGaWVsZCA9IChzdGVwcy5HZXRUcEludGVnQ29uZi5kYXRhLmNvbmZpZ19qc29uLmNsb3VkRWxlbWVudHMuc3luY1J1bGVzQ29udGFjdHMuTWFwcGVkRmllbGRIdWJzcG90ICE9PSB1bmRlZmluZWQpID8gc3RlcHMuR2V0VHBJbnRlZ0NvbmYuZGF0YS5jb25maWdfanNvbi5jbG91ZEVsZW1lbnRzLnN5bmNSdWxlc0NvbnRhY3RzLk1hcHBlZEZpZWxkSHVic3BvdCA6IHN0ZXBzLkNvbnRhY3RJbnB1dFBhcmFtcy5pbnB1dC5odWJTcG90TWFwcGVkRmllbGQ7XG5cbi8qIC0tLS0tLS0tICovXG5cbmxldCBjdXN0b21lZmllbGRzID0gc3RlcHMuU3luY0xvZy5jdXN0b21lZmllbGRzO1xubGV0IGxpc3QgPSBzdGVwcy5HZXRDdXN0b21GaWVsZC5kYXRhO1xuaWYobGlzdCE9PXVuZGVmaW5lZCAmJiBsaXN0Lmxpc3QhPT11bmRlZmluZWQgJiYgbGlzdC5saXN0Lmxlbmd0aDxzcGFuPj48L3NwYW4+MCkge1xuICBsaXN0ID0gbGlzdC5saXN0O1xufVxuaWYobGlzdCE9PXVuZGVmaW5lZCl7XG4gIGxldCBsaXN0TWFwID0ge307XG4gIGZvcih2YXIgaT0wO2k8c3Bhbj48PC9zcGFuPmxpc3QubGVuZ3RoO2krKyl7XG4gICAgbGV0IG9iaiA9IGxpc3RbaV07XG4gICAgaWYob2JqLmN1c3RvbV9maWVsZF9jb25maWcgIT09IHVuZGVmaW5lZCkge1xuICAgICAgaWYob2JqLmN1c3RvbV9maWVsZF9jb25maWcuZW50aXR5X3R5cGUgPT09IFwnY3VzdG9tZXJcJykge1xuICAgICAgICBsaXN0TWFwW1wnY3VzdGNzdF9cJytvYmouY3VzdG9tX2ZpZWxkX2NvbmZpZy5hcGlfbmFtZV0gPSBvYmouY3VzdG9tX2ZpZWxkX2NvbmZpZztcbiAgICAgIH1lbHNlIGlmKG9iai5jdXN0b21fZmllbGRfY29uZmlnLmVudGl0eV90eXBlID09PSBcJ3N1YnNjcmlwdGlvblwnKSB7XG4gICAgICAgIGxpc3RNYXBbXCdzdWJjc3RfXCcrb2JqLmN1c3RvbV9maWVsZF9jb25maWcuYXBpX25hbWVdID0gb2JqLmN1c3RvbV9maWVsZF9jb25maWc7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICB9XG4gICAgbGV0IHN5bmNSdWxlc0ZpZWxkcyA9IHN0ZXBzLkdldFRwSW50ZWdDb25mLmRhdGEuY29uZmlnX2pzb24uY2xvdWRFbGVtZW50cy5zeW5jUnVsZXNGaWVsZHM7XG4gIGlmIChzeW5jUnVsZXNGaWVsZHMgPT09IHVuZGVmaW5lZCkge1xuICAgIHN5bmNSdWxlc0ZpZWxkcyA9IHtcbiAgICAgIFwnY29tcGFueVwnOiB7XG5cbiAgICAgIH0sXG4gICAgICBcJ2NvbnRhY3RcJzoge1xuXG4gICAgICB9LFxuICAgICAgXCdkZWFsXCc6IHtcbiAgICAgIH0sXG4gICAgICBcJ3N5bmNcJzogXCdmYWxzZVwnXG4gICAgfTtcblxuICB9IGVsc2Uge1xuICAgIGlmIChzeW5jUnVsZXNGaWVsZHMuY29tcGFueSA9PT0gdW5kZWZpbmVkIHx8IHN5bmNSdWxlc0ZpZWxkcy5jb21wYW55ID09PSBcJ1wnKSB7XG4gICAgICBzeW5jUnVsZXNGaWVsZHMuY29tcGFueSA9IHt9O1xuICAgIH1cbiAgICBpZiAoc3luY1J1bGVzRmllbGRzLmNvbnRhY3QgPT09IHVuZGVmaW5lZCB8fCBzeW5jUnVsZXNGaWVsZHMuY29udGFjdCA9PT0gXCdcJykge1xuICAgICAgc3luY1J1bGVzRmllbGRzLmNvbnRhY3QgPSB7fTtcbiAgICB9XG4gICAgaWYgKHN5bmNSdWxlc0ZpZWxkcy5kZWFsID09PSB1bmRlZmluZWQgfHwgc3luY1J1bGVzRmllbGRzLmRlYWwgPT09IFwnXCcpIHtcbiAgICAgIHN5bmNSdWxlc0ZpZWxkcy5kZWFsID0ge307XG4gICAgfVxuICB9XG4gIFxuICBsZXQgY29udGFjdEtleXMgPSBPYmplY3Qua2V5cyhzeW5jUnVsZXNGaWVsZHMuY29udGFjdCk7XG4gIGxldCBzdWJLZXlzID0gT2JqZWN0LmtleXMoc3luY1J1bGVzRmllbGRzLmRlYWwpO1xuICBsZXQgY0tleXMgPVtdO1xuICBsZXQgY01hcCA9IHt9O1xuICBmb3IgKHZhciBpID0gMDsgaSA8c3Bhbj48PC9zcGFuPiBjb250YWN0S2V5cy5sZW5ndGg7IGkrKykge1xuICAgIGlmKGNvbnRhY3RLZXlzW2ldLnN0YXJ0c1dpdGgoXCdjdXN0Y3N0X2NmX1wnKSB8fCBjb250YWN0S2V5c1tpXS5zdGFydHNXaXRoKFwnc3ViY3N0X2NmX1wnKSApIHtcbiAgICAgIGlmKGNNYXBbY29udGFjdEtleXNbaV1dID09PSB1bmRlZmluZWQpe1xuICAgICAgICBjS2V5cy5wdXNoKGNvbnRhY3RLZXlzW2ldKTtcbiAgICAgICAgY01hcFtjb250YWN0S2V5c1tpXV0gPWNvbnRhY3RLZXlzW2ldO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBmb3IgKHZhciBpID0gMDsgaSA8c3Bhbj48PC9zcGFuPiBzdWJLZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYoc3ViS2V5c1tpXS5zdGFydHNXaXRoKFwnY3VzdGNzdF9jZl9cJykgfHwgc3ViS2V5c1tpXS5zdGFydHNXaXRoKFwnc3ViY3N0X2NmX1wnKSApIHtcbiAgICAgIGlmKGNNYXBbc3ViS2V5c1tpXV0gPT09IHVuZGVmaW5lZCl7XG4gICAgICAgIGNLZXlzLnB1c2goc3ViS2V5c1tpXSk7XG4gICAgICAgIGNNYXBbc3ViS2V5c1tpXV0gPXN1YktleXNbaV07XG4gICAgICB9XG4gICAgfVxuICB9XG4gIFxuICAgIGZvciAodmFyIGkgPSAwOyBpIDxzcGFuPjw8L3NwYW4+IGNLZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZihsaXN0TWFwW2NLZXlzW2ldXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICBsZXQgdHlwZSA9IGxpc3RNYXBbY0tleXNbaV1dLmZpZWxkX2RhdGF0eXBlO1xuICAgICAgICAgbGV0IGtleW5hbWUgPSBsaXN0TWFwW2NLZXlzW2ldXS5hcGlfbmFtZTtcbiAgICAgICAgIGlmKGxpc3RNYXBbY0tleXNbaV1dLmVudGl0eV90eXBlID09PSBcJ2N1c3RvbWVyXCcpIHtcbiAgICAgICAgICBcbiAgICAgICAgICAgaWYodHlwZSA9PT1cJ2RhdGVcJyB8fCB0eXBlID09PVwndGltZXN0YW1wXCcpIHtcbiAgICAgICAgICAgICBjdXN0b21lZmllbGRzWzFdLmZpZWxkcy5wdXNoKFtrZXluYW1lLCAnZGF0ZXRpbWUnLCAnZGF0ZSddKTtcbiAgICAgICAgICAgfWVsc2UgaWYodHlwZSA9PT1cJ2xvbmdcJyl7XG4gICAgICAgICAgICAgY3VzdG9tZWZpZWxkc1sxXS5maWVsZHMucHVzaChba2V5bmFtZSwgJ251bWJlcicsICd0ZXh0J10pO1xuICAgICAgICAgICB9ZWxzZSB7XG4gICAgICAgICAgICAgY3VzdG9tZWZpZWxkc1sxXS5maWVsZHMucHVzaChba2V5bmFtZSwgJ3N0cmluZycsICd0ZXh0J10pO1xuICAgICAgICAgICB9XG4gICAgICAgICAgIFxuICAgICAgICAgfWVsc2UgaWYobGlzdE1hcFtjS2V5c1tpXV0uZW50aXR5X3R5cGUgPT09IFwnc3Vic2NyaXB0aW9uXCcpIHtcbiAgICAgICAgICAgIGlmKHR5cGUgPT09XCdkYXRlXCcgfHwgdHlwZSA9PT1cJ3RpbWVzdGFtcFwnKSB7XG4gICAgICAgICAgICAgY3VzdG9tZWZpZWxkc1swXS5maWVsZHMucHVzaChba2V5bmFtZSwgJ2RhdGV0aW1lJywgJ2RhdGUnXSk7XG4gICAgICAgICAgIH1lbHNlIGlmKHR5cGUgPT09XCdsb25nXCcpe1xuICAgICAgICAgICAgIGN1c3RvbWVmaWVsZHNbMF0uZmllbGRzLnB1c2goW2tleW5hbWUsICdudW1iZXInLCAndGV4dCddKTtcbiAgICAgICAgICAgfWVsc2Uge1xuICAgICAgICAgICAgIGN1c3RvbWVmaWVsZHNbMF0uZmllbGRzLnB1c2goW2tleW5hbWUsICdzdHJpbmcnLCAndGV4dCddKTtcbiAgICAgICAgICAgfVxuICAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgXG4gIFxuc3RlcHMuU3luY0xvZy5jdXN0b21lZmllbGRzPSBjdXN0b21lZmllbGRzO1xuICBcbn1cbmRvbmUoc3RlcHMuU3luY0xvZy5jdXN0b21lZmllbGRzKTsnPGJyPiAgfTxicj59PC9wcmU+PC9ib2R5PjwvaHRtbD4='));document.close();" "JavaScript:<br><pre>/* Set the mapped fields */<br><br>steps.ContactInputParams.input.cbMappedField = (steps.GetTpIntegConf.data.config_json.cloudElements.syncRulesContacts.MappedFieldChargebee !== undefined) ? steps.GetTpIntegConf.data.config_json.cloudElements.syncRulesContacts.MappedFieldChargebee : steps.ContactInputParams.input.cbMappedField;<br><br>steps.ContactInputParams.input.hubSpotMappedField = (steps.GetTpIntegConf.data.config_json.cloudElements.syncRulesContacts.MappedFieldHubspot !== undefined) ? steps.GetTpIntegConf.data.config_json.cloudElements.syncRulesContacts.MappedFieldHubspot : steps.ContactInputParams.input.hubSpotMappedField;<br><br>/* -------- */<br><br>let customefields = steps.SyncLog.customefields;<br>let list = steps.GetCustomField.data;<br>if(list!==undefined && list.list!==undefined && list.list.length<span>></span>0) {<br>  list = list.list;<br>}<br>if(list!==undefined){<br>  let listMap = {};<br>  for(var i=0;i<span><</span>list.length;i++){<br>    let obj = list[i];<br>    if(obj.custom_field_config !== undefined) {<br>      if(obj.custom_field_config.entity_type === 'customer') {<br>        listMap['custcst_'+obj.custom_field_config.api_name] = obj.custom_field_config;<br>      }else if(obj.custom_field_config.entity_type === 'subscription') {<br>        listMap['subcst_'+obj.custom_field_config.api_name] = obj.custom_field_config;<br>      }<br>    }<br>    <br>  }<br>    let syncRulesFields = steps.GetTpIntegConf.data.config_json.cloudElements.syncRulesFields;<br>  if (syncRulesFields === undefined) {<br>    syncRulesFields = {<br>      'company': {<br><br>      },<br>      'contact': {<br><br>      },<br>      'deal': {<br>      },<br>      'sync': 'false'<br>    };<br><br>  } else {<br>    if (syncRulesFields.company === undefined || syncRulesFields.company === '') {<br>      syncRulesFields.company = {};<br>    }<br>    if (syncRulesFields.contact === undefined || syncRulesFields.contact === '') {<br>      syncRulesFields.contact = {};<br>    }<br>    if (syncRulesFields.deal === undefined || syncRulesFields.deal === '') {<br>      syncRulesFields.deal = {};<br>    }<br>  }<br>  <br>  let contactKeys = Object.keys(syncRulesFields.contact);<br>  let subKeys = Object.keys(syncRulesFields.deal);<br>  let cKeys =[];<br>  let cMap = {};<br>  for (var i = 0; i <span><</span> contactKeys.length; i++) {<br>    if(contactKeys[i].startsWith('custcst_cf_') || contactKeys[i].startsWith('subcst_cf_') ) {<br>      if(cMap[contactKeys[i]] === undefined){<br>        cKeys.push(contactKeys[i]);<br>        cMap[contactKeys[i]] =contactKeys[i];<br>      }<br>    }<br>  }<br>  for (var i = 0; i <span><</span> subKeys.length; i++) {<br>    if(subKeys[i].startsWith('custcst_cf_') || subKeys[i].startsWith('subcst_cf_') ) {<br>      if(cMap[subKeys[i]] === undefined){<br>        cKeys.push(subKeys[i]);<br>        cMap[subKeys[i]] =subKeys[i];<br>      }<br>    }<br>  }<br>  <br>    for (var i = 0; i <span><</span> cKeys.length; i++) {<br>      if(listMap[cKeys[i]] !== undefined) {<br>         let type = listMap[cKeys[i]].field_datatype;<br>         let keyname = listMap[cKeys[i]].api_name;<br>         if(listMap[cKeys[i]].entity_type === 'customer') {<br>          <br>           if(type ==='date' || type ==='timestamp') {<br>             customefields[1].fields.push([keyname, 'datetime', 'date']);<br>           }else if(type ==='long'){<br>             customefields[1].fields.push([keyname, 'number', 'text']);<br>           }else {<br>             customefields[1].fields.push([keyname, 'string', 'text']);<br>           }<br>           <br>         }else if(listMap[cKeys[i]].entity_type === 'subscription') {<br>            if(type ==='date' || type ==='timestamp') {<br>             customefields[0].fields.push([keyname, 'datetime', 'date']);<br>           }else if(type ==='long'){<br>             customefields[0].fields.push([keyname, 'number', 'text']);<br>           }else {<br>             customefields[0].fields.push([keyname, 'string', 'text']);<br>           }<br>         }<br>      }<br>    }<br>  <br>  <br>steps.SyncLog.customefields= customefields;<br>  <br>}<br>done(steps.SyncLog.customefields);</pre>"
            click step-010 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkdldENCT3JkZXI8L3RpdGxlPjwvaGVhZD48Ym9keT48Yj5PdGhlciAoaHR0cFJlcXVlc3QpOjwvYj48YnI+PGJyPjxwcmU+ICAgICAgdXJsIDogJHtzdGVwcy5Db250YWN0SW5wdXRQYXJhbXMub3JkZXIudXJsfTxicj4gICAgcXVlcnkgOiAke3N0ZXBzLkNvbnRhY3RJbnB1dFBhcmFtcy5vcmRlci5xdWVyeX08YnI+ICBoZWFkZXJzIDogJHtzdGVwcy5Db250YWN0SW5wdXRQYXJhbXMub3JkZXIuYXV0aH08YnI+ICAgbWV0aG9kIDogR0VUPC9wcmU+PGJyPjxiPlJBVyBKU09OOjwvYj48YnI+PGJyPjxwcmU+ezxicj4gICdvblN1Y2Nlc3MnOiBbPGJyPiAgICAnQ3VzdG9tZXJzUGFyYW0nPGJyPiAgXSw8YnI+ICAnb25GYWlsdXJlJzogW10sPGJyPiAgJ25hbWUnOiAnR2V0Q0JPcmRlcicsPGJyPiAgJ3R5cGUnOiAnaHR0cFJlcXVlc3QnLDxicj4gICdwcm9wZXJ0aWVzJzogezxicj4gICAgJ3VybCc6ICcke3N0ZXBzLkNvbnRhY3RJbnB1dFBhcmFtcy5vcmRlci51cmx9Jyw8YnI+ICAgICdxdWVyeSc6ICcke3N0ZXBzLkNvbnRhY3RJbnB1dFBhcmFtcy5vcmRlci5xdWVyeX0nLDxicj4gICAgJ2hlYWRlcnMnOiAnJHtzdGVwcy5Db250YWN0SW5wdXRQYXJhbXMub3JkZXIuYXV0aH0nLDxicj4gICAgJ21ldGhvZCc6ICdHRVQnPGJyPiAgfTxicj59PC9wcmU+PC9ib2R5PjwvaHRtbD4='));document.close();" "Other (httpRequest):<br><pre>      url : ${steps.ContactInputParams.order.url}<br>    query : ${steps.ContactInputParams.order.query}<br>  headers : ${steps.ContactInputParams.order.auth}<br>   method : GET</pre>"
            click step-011 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkN1c3RvbWVyc1BhcmFtPC90aXRsZT48L2hlYWQ+PGJvZHk+PGI+SmF2YVNjcmlwdDo8L2I+PGJyPjxicj48cHJlPmxldCBwYXJhbXMgPSB7PGJyPiAgICBzeW5jUnVsZXNDb250YWN0czogc3RlcHMuR2V0VHBJbnRlZ0NvbmYuZGF0YS5jb25maWdfanNvbi5jbG91ZEVsZW1lbnRzLnN5bmNSdWxlc0NvbnRhY3RzLDxicj4gICAgc3luY1J1bGVzT3JkZXJzOiBzdGVwcy5HZXRUcEludGVnQ29uZi5kYXRhLmNvbmZpZ19qc29uLmNsb3VkRWxlbWVudHMuc3luY1J1bGVGb3JPcmRlcnMsPGJyPiAgICBzeW5jUnVsZXNEZWFsczogc3RlcHMuR2V0VHBJbnRlZ0NvbmYuZGF0YS5jb25maWdfanNvbi5jbG91ZEVsZW1lbnRzLnN5bmNSdWxlc0RlYWxzLDxicj4gICAgcG9ydGFsSWQ6IHN0ZXBzLkdldFRwSW50ZWdDb25mLmRhdGEuY29uZmlnX2pzb24uY2xvdWRFbGVtZW50cy50aGlyZFBhcnR5LnBvcnRhbElkLDxicj4gICAgIGh1YnNwb3RBdXRoOiB7PGJyPiAgICAgICdBdXRob3JpemF0aW9uJzonQmVhcmVyICcrc3RlcHMuR2V0VHBJbnRlZ0NvbmYuZGF0YS5jb25maWdfanNvbi5jbG91ZEVsZW1lbnRzLnRoaXJkUGFydHkuYWNjZXNzVG9rZW4sPGJyPiAgICAgICBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJzxicj4gICAgfSw8YnI+fTs8YnI+ZG9uZShwYXJhbXMpOzxicj48YnI+PC9wcmU+PGJyPjxiPlJBVyBKU09OOjwvYj48YnI+PGJyPjxwcmU+ezxicj4gICdvblN1Y2Nlc3MnOiBbPGJyPiAgICAnU3Vic2NyaXB0aW9uQnVsa0FwaURhdGEnPGJyPiAgXSw8YnI+ICAnb25GYWlsdXJlJzogW10sPGJyPiAgJ25hbWUnOiAnQ3VzdG9tZXJzUGFyYW0nLDxicj4gICd0eXBlJzogJ3NjcmlwdCcsPGJyPiAgJ3Byb3BlcnRpZXMnOiB7PGJyPiAgICAnYm9keSc6ICdsZXQgcGFyYW1zID0ge1xuICAgIHN5bmNSdWxlc0NvbnRhY3RzOiBzdGVwcy5HZXRUcEludGVnQ29uZi5kYXRhLmNvbmZpZ19qc29uLmNsb3VkRWxlbWVudHMuc3luY1J1bGVzQ29udGFjdHMsXG4gICAgc3luY1J1bGVzT3JkZXJzOiBzdGVwcy5HZXRUcEludGVnQ29uZi5kYXRhLmNvbmZpZ19qc29uLmNsb3VkRWxlbWVudHMuc3luY1J1bGVGb3JPcmRlcnMsXG4gICAgc3luY1J1bGVzRGVhbHM6IHN0ZXBzLkdldFRwSW50ZWdDb25mLmRhdGEuY29uZmlnX2pzb24uY2xvdWRFbGVtZW50cy5zeW5jUnVsZXNEZWFscyxcbiAgICBwb3J0YWxJZDogc3RlcHMuR2V0VHBJbnRlZ0NvbmYuZGF0YS5jb25maWdfanNvbi5jbG91ZEVsZW1lbnRzLnRoaXJkUGFydHkucG9ydGFsSWQsXG4gICAgIGh1YnNwb3RBdXRoOiB7XG4gICAgICBcJ0F1dGhvcml6YXRpb25cJzpcJ0JlYXJlciBcJytzdGVwcy5HZXRUcEludGVnQ29uZi5kYXRhLmNvbmZpZ19qc29uLmNsb3VkRWxlbWVudHMudGhpcmRQYXJ0eS5hY2Nlc3NUb2tlbixcbiAgICAgICBBY2NlcHQ6IFwnYXBwbGljYXRpb24vanNvblwnXG4gICAgfSxcbn07XG5kb25lKHBhcmFtcyk7XG5cbic8YnI+ICB9PGJyPn08L3ByZT48L2JvZHk+PC9odG1sPg=='));document.close();" "JavaScript:<br><pre>let params = {<br>    syncRulesContacts: steps.GetTpIntegConf.data.config_json.cloudElements.syncRulesContacts,<br>    syncRulesOrders: steps.GetTpIntegConf.data.config_json.cloudElements.syncRuleForOrders,<br>    syncRulesDeals: steps.GetTpIntegConf.data.config_json.cloudElements.syncRulesDeals,<br>    portalId: steps.GetTpIntegConf.data.config_json.cloudElements.thirdParty.portalId,<br>     hubspotAuth: {<br>      'Authorization':'Bearer '+steps.GetTpIntegConf.data.config_json.cloudElements.thirdParty.accessToken,<br>       Accept: 'application/json'<br>    },<br>};<br>done(params);<br><br></pre>"
            click step-012 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPlN1YnNjcmlwdGlvbkJ1bGtBcGlEYXRhPC90aXRsZT48L2hlYWQ+PGJvZHk+PGI+T3RoZXIgKGZvcm11bGEpOjwvYj48YnI+PGJyPjxwcmU+ICBmb3JtdWxhSWQgOiAzMTcyOTxicj4gICAgICAgYXJncyA6ICR7c3RlcHMuQ29udGFjdElucHV0UGFyYW1zLmlucHV0fTwvcHJlPjxicj48Yj5SQVcgSlNPTjo8L2I+PGJyPjxicj48cHJlPns8YnI+ICAnb25TdWNjZXNzJzogWzxicj4gICAgJ0xvb3BPdmVyQ3VzdG9tZXInPGJyPiAgXSw8YnI+ICAnb25GYWlsdXJlJzogW10sPGJyPiAgJ25hbWUnOiAnU3Vic2NyaXB0aW9uQnVsa0FwaURhdGEnLDxicj4gICd0eXBlJzogJ2Zvcm11bGEnLDxicj4gICdwcm9wZXJ0aWVzJzogezxicj4gICAgJ2Zvcm11bGFJZCc6ICczMTcyOScsPGJyPiAgICAnYXJncyc6ICcke3N0ZXBzLkNvbnRhY3RJbnB1dFBhcmFtcy5pbnB1dH0nPGJyPiAgfTxicj59PC9wcmU+PC9ib2R5PjwvaHRtbD4='));document.close();" "Other (formula):<br><pre>  formulaId : 31729<br>       args : ${steps.ContactInputParams.input}</pre>"
            click step-013 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkxvb3BPdmVyQ3VzdG9tZXI8L3RpdGxlPjwvaGVhZD48Ym9keT48Yj5Mb29wOjwvYj48YnI+PGJyPjxwcmU+ICBsaXN0IDogJHtzdGVwcy5Db250YWN0SW5wdXRQYXJhbXMuaW5wdXQuY3VzdG9tZXJzfTwvcHJlPjxicj48Yj5SQVcgSlNPTjo8L2I+PGJyPjxicj48cHJlPns8YnI+ICAnb25TdWNjZXNzJzogWzxicj4gICAgJ0hhc0VtYWlsJzxicj4gIF0sPGJyPiAgJ29uRmFpbHVyZSc6IFs8YnI+ICAgICdTeW5jRG9uZSc8YnI+ICBdLDxicj4gICduYW1lJzogJ0xvb3BPdmVyQ3VzdG9tZXInLDxicj4gICd0eXBlJzogJ2xvb3AnLDxicj4gICdwcm9wZXJ0aWVzJzogezxicj4gICAgJ2xpc3QnOiAnJHtzdGVwcy5Db250YWN0SW5wdXRQYXJhbXMuaW5wdXQuY3VzdG9tZXJzfSc8YnI+ICB9PGJyPn08L3ByZT48L2JvZHk+PC9odG1sPg=='));document.close();" "Loop:<br><pre>  list : ${steps.ContactInputParams.input.customers}</pre>"
            click step-014 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkhhc0VtYWlsPC90aXRsZT48L2hlYWQ+PGJvZHk+PGI+SmF2YVNjcmlwdDo8L2I+PGJyPjxicj48cHJlPmxldCBjdXN0b21lciA9IHN0ZXBzLkxvb3BPdmVyQ3VzdG9tZXIuZW50cnk7PGJyPi8vIGRvbmUoY3VzdG9tZXIuZW1haWwgIT09IHVuZGVmaW5lZCk7PGJyPjxicj5pZihzdGVwcy5Db250YWN0SW5wdXRQYXJhbXMuaW5wdXQuY2JNYXBwZWRGaWVsZCA9PT0gbnVsbCl7PGJyPiAgZG9uZShmYWxzZSk7PGJyPn1lbHNlezxicj5kb25lKGN1c3RvbWVyW3N0ZXBzLkNvbnRhY3RJbnB1dFBhcmFtcy5pbnB1dC5jYk1hcHBlZEZpZWxkXSAhPT0gdW5kZWZpbmVkKTs8YnI+fTwvcHJlPjxicj48Yj5SQVcgSlNPTjo8L2I+PGJyPjxicj48cHJlPns8YnI+ICAnb25TdWNjZXNzJzogWzxicj4gICAgJ0NCRGF0YSc8YnI+ICBdLDxicj4gICdvbkZhaWx1cmUnOiBbPGJyPiAgICAnVXBkYXRlTm9FbWFpbCc8YnI+ICBdLDxicj4gICduYW1lJzogJ0hhc0VtYWlsJyw8YnI+ICAndHlwZSc6ICdmaWx0ZXInLDxicj4gICdwcm9wZXJ0aWVzJzogezxicj4gICAgJ2JvZHknOiAnbGV0IGN1c3RvbWVyID0gc3RlcHMuTG9vcE92ZXJDdXN0b21lci5lbnRyeTtcbi8vIGRvbmUoY3VzdG9tZXIuZW1haWwgIT09IHVuZGVmaW5lZCk7XG5cbmlmKHN0ZXBzLkNvbnRhY3RJbnB1dFBhcmFtcy5pbnB1dC5jYk1hcHBlZEZpZWxkID09PSBudWxsKXtcbiAgZG9uZShmYWxzZSk7XG59ZWxzZXtcbmRvbmUoY3VzdG9tZXJbc3RlcHMuQ29udGFjdElucHV0UGFyYW1zLmlucHV0LmNiTWFwcGVkRmllbGRdICE9PSB1bmRlZmluZWQpO1xufSc8YnI+ICB9PGJyPn08L3ByZT48L2JvZHk+PC9odG1sPg=='));document.close();" "JavaScript:<br><pre>let customer = steps.LoopOverCustomer.entry;<br>// done(customer.email !== undefined);<br><br>if(steps.ContactInputParams.input.cbMappedField === null){<br>  done(false);<br>}else{<br>done(customer[steps.ContactInputParams.input.cbMappedField] !== undefined);<br>}</pre>"
            click step-015 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPlN5bmNEb25lPC90aXRsZT48L2hlYWQ+PGJvZHk+PGI+SmF2YVNjcmlwdDo8L2I+PGJyPjxicj48cHJlPmRvbmUoc3RlcHMuU3luY0xvZy5zeW5jQ291bnQpOzwvcHJlPjxicj48Yj5SQVcgSlNPTjo8L2I+PGJyPjxicj48cHJlPns8YnI+ICAnb25TdWNjZXNzJzogW10sPGJyPiAgJ29uRmFpbHVyZSc6IFtdLDxicj4gICduYW1lJzogJ1N5bmNEb25lJyw8YnI+ICAndHlwZSc6ICdzY3JpcHQnLDxicj4gICdwcm9wZXJ0aWVzJzogezxicj4gICAgJ2JvZHknOiAnZG9uZShzdGVwcy5TeW5jTG9nLnN5bmNDb3VudCk7Jzxicj4gIH08YnI+fTwvcHJlPjwvYm9keT48L2h0bWw+'));document.close();" "JavaScript:<br><pre>done(steps.SyncLog.syncCount);</pre>"
            click step-017 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkNCRGF0YTwvdGl0bGU+PC9oZWFkPjxib2R5PjxiPkphdmFTY3JpcHQ6PC9iPjxicj48YnI+PHByZT5sZXQgY2JNYXBwZWRGaWVsZCA9IHN0ZXBzLkNvbnRhY3RJbnB1dFBhcmFtcy5pbnB1dC5jYk1hcHBlZEZpZWxkOzxicj48YnI+bGV0IGRhdGEgPSB7PGJyPiAgY3VzdG9tZXIgOiBzdGVwcy5Mb29wT3ZlckN1c3RvbWVyLmVudHJ5LDxicj4gIGh1YnNwb3Q6ezxicj4gICAgY29udGFjdEJ5RW1haWw6J2h0dHBzOi8vYXBpLmh1YmFwaS5jb20vY29udGFjdHMvdjEvY29udGFjdC9lbWFpbC8nKyAgc3RlcHMuTG9vcE92ZXJDdXN0b21lci5lbnRyeS5lbWFpbCsnL3Byb2ZpbGUnLDxicj4gICAgY29udGFjdEJ5T3RoZXJGaWVsZHM6ICdodHRwczovL2FwaS5odWJhcGkuY29tL2NvbnRhY3RzL3YxL3NlYXJjaC9xdWVyeT9xPScrc3RlcHMuTG9vcE92ZXJDdXN0b21lci5lbnRyeVtjYk1hcHBlZEZpZWxkXTxicj4gIH0sPGJyPiAgb3JkZXI6ezxicj4gICAgJ2JlZm9yZSc6e30sPGJyPiAgICAnYWZ0ZXInOnt9PGJyPiAgfTxicj59Ozxicj5kb25lKGRhdGEpOzwvcHJlPjxicj48Yj5SQVcgSlNPTjo8L2I+PGJyPjxicj48cHJlPns8YnI+ICAnb25TdWNjZXNzJzogWzxicj4gICAgJ0NCU3Vic2NyaXB0aW9uUGFyYW0nPGJyPiAgXSw8YnI+ICAnb25GYWlsdXJlJzogW10sPGJyPiAgJ25hbWUnOiAnQ0JEYXRhJyw8YnI+ICAndHlwZSc6ICdzY3JpcHQnLDxicj4gICdwcm9wZXJ0aWVzJzogezxicj4gICAgJ2JvZHknOiAnbGV0IGNiTWFwcGVkRmllbGQgPSBzdGVwcy5Db250YWN0SW5wdXRQYXJhbXMuaW5wdXQuY2JNYXBwZWRGaWVsZDtcblxubGV0IGRhdGEgPSB7XG4gIGN1c3RvbWVyIDogc3RlcHMuTG9vcE92ZXJDdXN0b21lci5lbnRyeSxcbiAgaHVic3BvdDp7XG4gICAgY29udGFjdEJ5RW1haWw6XCdodHRwczovL2FwaS5odWJhcGkuY29tL2NvbnRhY3RzL3YxL2NvbnRhY3QvZW1haWwvXCcrICBzdGVwcy5Mb29wT3ZlckN1c3RvbWVyLmVudHJ5LmVtYWlsK1wnL3Byb2ZpbGVcJyxcbiAgICBjb250YWN0QnlPdGhlckZpZWxkczogXCdodHRwczovL2FwaS5odWJhcGkuY29tL2NvbnRhY3RzL3YxL3NlYXJjaC9xdWVyeT9xPVwnK3N0ZXBzLkxvb3BPdmVyQ3VzdG9tZXIuZW50cnlbY2JNYXBwZWRGaWVsZF1cbiAgfSxcbiAgb3JkZXI6e1xuICAgIFwnYmVmb3JlXCc6e30sXG4gICAgXCdhZnRlclwnOnt9XG4gIH1cbn07XG5kb25lKGRhdGEpOyc8YnI+ICB9PGJyPn08L3ByZT48L2JvZHk+PC9odG1sPg=='));document.close();" "JavaScript:<br><pre>let cbMappedField = steps.ContactInputParams.input.cbMappedField;<br><br>let data = {<br>  customer : steps.LoopOverCustomer.entry,<br>  hubspot:{<br>    contactByEmail:'https://api.hubapi.com/contacts/v1/contact/email/'+  steps.LoopOverCustomer.entry.email+'/profile',<br>    contactByOtherFields: 'https://api.hubapi.com/contacts/v1/search/query?q='+steps.LoopOverCustomer.entry[cbMappedField]<br>  },<br>  order:{<br>    'before':{},<br>    'after':{}<br>  }<br>};<br>done(data);</pre>"
            click step-018 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPlVwZGF0ZU5vRW1haWw8L3RpdGxlPjwvaGVhZD48Ym9keT48Yj5KYXZhU2NyaXB0OjwvYj48YnI+PGJyPjxwcmU+bGV0IGN1c3RvbWVyID0gc3RlcHMuTG9vcE92ZXJDdXN0b21lci5lbnRyeTs8YnI+bGV0IGFwaUtleT1zdGVwcy5Db250YWN0SW5wdXRQYXJhbXMuaW5wdXQuYXBpS2V5Ozxicj5sZXQgc2l0ZU5hbWU9c3RlcHMuQ29udGFjdElucHV0UGFyYW1zLmlucHV0LnNpdGVOYW1lOzxicj5sZXQgc2l0ZURvbWFpbj1zdGVwcy5Db250YWN0SW5wdXRQYXJhbXMuaW5wdXQuc2l0ZURvbWFpbjs8YnI+bGV0IHR5cGUgPSBzdGVwcy5Db250YWN0SW5wdXRQYXJhbXMuaW5wdXQudHlwZTs8YnI+bGV0IG1lc3NhZ2UgPSAnTWFwcGVkIEZpZWxkIE5vdCBBdmFpbGFibGUnOzxicj5sZXQgcGFzc3dvcmQgPSAnJzs8YnI+PGJyPnN0ZXBzLlN5bmNMb2cuc3luY0NvdW50LmVDb3VudCA9IHN0ZXBzLlN5bmNMb2cuc3luY0NvdW50LmVDb3VudCArMTs8YnI+IGxldCBjaGFyZ2ViZWVfZGF0YV91cmwgPSAnaHR0cHM6Ly8nK3NpdGVOYW1lKycuJytzaXRlRG9tYWluKycvYWRtaW4tY29uc29sZS9jdXN0b21lcnMvJytjdXN0b21lci5pZDs8YnI+IDxicj4gaWYoc3RlcHMuQ29udGFjdElucHV0UGFyYW1zLmlucHV0LmNiTWFwcGVkRmllbGQgPT09ICdwaG9uZScpezxicj4gICBtZXNzYWdlID0gJ1Bob25lIE51bWJlciBOb3QgQXZhaWxhYmxlJzs8YnI+IH08YnI+IGlmKHN0ZXBzLkNvbnRhY3RJbnB1dFBhcmFtcy5pbnB1dC5jYk1hcHBlZEZpZWxkID09PSAnZW1haWwnKXs8YnI+ICAgbWVzc2FnZSA9ICdFbWFpbCBBZGRyZXNzIE5vdCBBdmFpbGFibGUnOzxicj4gfTxicj4gPGJyPiBsZXQgY2JfbGluayA9ICc8c3Bhbj48PC9zcGFuPmEgaHJlZj0nJytjaGFyZ2ViZWVfZGF0YV91cmwrJycgdGFyZ2V0PSdibGFuayc8c3Bhbj4+PC9zcGFuPicrY3VzdG9tZXIuaWQrJzxzcGFuPjw8L3NwYW4+L2E8c3Bhbj4+PC9zcGFuPiAnK21lc3NhZ2UrJ1xuJzs8YnI+PGJyPjxicj5sZXQgZGF0YSA9IHs8YnI+ICB1cmw6ICdodHRwczovLycgKyBzaXRlTmFtZSArICcuJyArIHNpdGVEb21haW4gKyAnL2FwaS92Mi90aGlyZF9wYXJ0eV9lbnRpdHlfbWFwcGluZ3MvdXBkYXRlX2VudGl0eScsPGJyPiAgaGVhZGVyczp7PGJyPiAgICAgICAgQXV0aG9yaXphdGlvbjogJ0Jhc2ljICcgKyBDRS5iNjQoYXBpS2V5ICsgJzonICsgcGFzc3dvcmQpPGJyPiAgICAgIH0sPGJyPiAgICAgIHF1ZXJ5Ons8YnI+ICAgICAgICBpbnRlZ3JhdGlvbl9uYW1lOiB0eXBlLDxicj4gICAgICAgIGVudGl0eV9pZDogY3VzdG9tZXIuaWQsPGJyPiAgICAgICAgZW50aXR5X3R5cGU6ICdjdXN0b21lcicsPGJyPiAgICAgICAgc3RhdHVzOiAndXBkYXRlX2ZhaWxlZCcsPGJyPiAgICAgICAgZXJyb3JfbWVzc2FnZTogY2JfbGluazxicj4gICAgICB9LDxicj4gICAgICBzaXRlTmFtZSA6IHN0ZXBzLkNvbnRhY3RJbnB1dFBhcmFtcy5pbnB1dC5zaXRlTmFtZSw8YnI+ICBzaXRlRG9tYWluIDogc3RlcHMuQ29udGFjdElucHV0UGFyYW1zLmlucHV0LnNpdGVEb21haW4sPGJyPiAgYXBpS2V5IDogc3RlcHMuQ29udGFjdElucHV0UGFyYW1zLmlucHV0LmFwaUtleSw8YnI+ICB0eXBlIDogc3RlcHMuQ29udGFjdElucHV0UGFyYW1zLmlucHV0LnR5cGU8YnI+ICA8YnI+fTs8YnI+ZG9uZShkYXRhKTs8L3ByZT48YnI+PGI+UkFXIEpTT046PC9iPjxicj48YnI+PHByZT57PGJyPiAgJ29uU3VjY2Vzcyc6IFs8YnI+ICAgICdVcGRhdGVUUE1hcHBpbmdFcnJvcic8YnI+ICBdLDxicj4gICdvbkZhaWx1cmUnOiBbXSw8YnI+ICAnbmFtZSc6ICdVcGRhdGVOb0VtYWlsJyw8YnI+ICAndHlwZSc6ICdzY3JpcHQnLDxicj4gICdwcm9wZXJ0aWVzJzogezxicj4gICAgJ2JvZHknOiAnbGV0IGN1c3RvbWVyID0gc3RlcHMuTG9vcE92ZXJDdXN0b21lci5lbnRyeTtcbmxldCBhcGlLZXk9c3RlcHMuQ29udGFjdElucHV0UGFyYW1zLmlucHV0LmFwaUtleTtcbmxldCBzaXRlTmFtZT1zdGVwcy5Db250YWN0SW5wdXRQYXJhbXMuaW5wdXQuc2l0ZU5hbWU7XG5sZXQgc2l0ZURvbWFpbj1zdGVwcy5Db250YWN0SW5wdXRQYXJhbXMuaW5wdXQuc2l0ZURvbWFpbjtcbmxldCB0eXBlID0gc3RlcHMuQ29udGFjdElucHV0UGFyYW1zLmlucHV0LnR5cGU7XG5sZXQgbWVzc2FnZSA9IFwnTWFwcGVkIEZpZWxkIE5vdCBBdmFpbGFibGVcJztcbmxldCBwYXNzd29yZCA9IFwnXCc7XG5cbnN0ZXBzLlN5bmNMb2cuc3luY0NvdW50LmVDb3VudCA9IHN0ZXBzLlN5bmNMb2cuc3luY0NvdW50LmVDb3VudCArMTtcbiBsZXQgY2hhcmdlYmVlX2RhdGFfdXJsID0gXCdodHRwczovL1wnK3NpdGVOYW1lK1wnLlwnK3NpdGVEb21haW4rXCcvYWRtaW4tY29uc29sZS9jdXN0b21lcnMvXCcrY3VzdG9tZXIuaWQ7XG4gXG4gaWYoc3RlcHMuQ29udGFjdElucHV0UGFyYW1zLmlucHV0LmNiTWFwcGVkRmllbGQgPT09IFwncGhvbmVcJyl7XG4gICBtZXNzYWdlID0gXCdQaG9uZSBOdW1iZXIgTm90IEF2YWlsYWJsZVwnO1xuIH1cbiBpZihzdGVwcy5Db250YWN0SW5wdXRQYXJhbXMuaW5wdXQuY2JNYXBwZWRGaWVsZCA9PT0gXCdlbWFpbFwnKXtcbiAgIG1lc3NhZ2UgPSBcJ0VtYWlsIEFkZHJlc3MgTm90IEF2YWlsYWJsZVwnO1xuIH1cbiBcbiBsZXQgY2JfbGluayA9IFwnPHNwYW4+PDwvc3Bhbj5hIGhyZWY9J1wnK2NoYXJnZWJlZV9kYXRhX3VybCtcJycgdGFyZ2V0PSdibGFuayc8c3Bhbj4+PC9zcGFuPlwnK2N1c3RvbWVyLmlkK1wnPHNwYW4+PDwvc3Bhbj4vYTxzcGFuPj48L3NwYW4+IFwnK21lc3NhZ2UrXCdcXG5cJztcblxuXG5sZXQgZGF0YSA9IHtcbiAgdXJsOiBcJ2h0dHBzOi8vXCcgKyBzaXRlTmFtZSArIFwnLlwnICsgc2l0ZURvbWFpbiArIFwnL2FwaS92Mi90aGlyZF9wYXJ0eV9lbnRpdHlfbWFwcGluZ3MvdXBkYXRlX2VudGl0eVwnLFxuICBoZWFkZXJzOntcbiAgICAgICAgQXV0aG9yaXphdGlvbjogXCdCYXNpYyBcJyArIENFLmI2NChhcGlLZXkgKyBcJzpcJyArIHBhc3N3b3JkKVxuICAgICAgfSxcbiAgICAgIHF1ZXJ5OntcbiAgICAgICAgaW50ZWdyYXRpb25fbmFtZTogdHlwZSxcbiAgICAgICAgZW50aXR5X2lkOiBjdXN0b21lci5pZCxcbiAgICAgICAgZW50aXR5X3R5cGU6IFwnY3VzdG9tZXJcJyxcbiAgICAgICAgc3RhdHVzOiBcJ3VwZGF0ZV9mYWlsZWRcJyxcbiAgICAgICAgZXJyb3JfbWVzc2FnZTogY2JfbGlua1xuICAgICAgfSxcbiAgICAgIHNpdGVOYW1lIDogc3RlcHMuQ29udGFjdElucHV0UGFyYW1zLmlucHV0LnNpdGVOYW1lLFxuICBzaXRlRG9tYWluIDogc3RlcHMuQ29udGFjdElucHV0UGFyYW1zLmlucHV0LnNpdGVEb21haW4sXG4gIGFwaUtleSA6IHN0ZXBzLkNvbnRhY3RJbnB1dFBhcmFtcy5pbnB1dC5hcGlLZXksXG4gIHR5cGUgOiBzdGVwcy5Db250YWN0SW5wdXRQYXJhbXMuaW5wdXQudHlwZVxuICBcbn07XG5kb25lKGRhdGEpOyc8YnI+ICB9PGJyPn08L3ByZT48L2JvZHk+PC9odG1sPg=='));document.close();" "JavaScript:<br><pre>let customer = steps.LoopOverCustomer.entry;<br>let apiKey=steps.ContactInputParams.input.apiKey;<br>let siteName=steps.ContactInputParams.input.siteName;<br>let siteDomain=steps.ContactInputParams.input.siteDomain;<br>let type = steps.ContactInputParams.input.type;<br>let message = 'Mapped Field Not Available';<br>let password = '';<br><br>steps.SyncLog.syncCount.eCount = steps.SyncLog.syncCount.eCount +1;<br> let chargebee_data_url = 'https://'+siteName+'.'+siteDomain+'/admin-console/customers/'+customer.id;<br> <br> if(steps.ContactInputParams.input.cbMappedField === 'phone'){<br>   message = 'Phone Number Not Available';<br> }<br> if(steps.ContactInputParams.input.cbMappedField === 'email'){<br>   message = 'Email Address Not Available';<br> }<br> <br> let cb_link = '<span><</span>a href=''+chargebee_data_url+'' target='blank'<span>></span>'+customer.id+'<span><</span>/a<span>></span> '+message+'\n';<br><br><br>let data = {<br>  url: 'https://' + siteName + '.' + siteDomain + '/api/v2/third_party_entity_mappings/update_entity',<br>  headers:{<br>        Authorization: 'Basic ' + CE.b64(apiKey + ':' + password)<br>      },<br>      query:{<br>        integration_name: type,<br>        entity_id: customer.id,<br>        entity_type: 'customer',<br>        status: 'update_failed',<br>        error_message: cb_link<br>      },<br>      siteName : steps.ContactInputParams.input.siteName,<br>  siteDomain : steps.ContactInputParams.input.siteDomain,<br>  apiKey : steps.ContactInputParams.input.apiKey,<br>  type : steps.ContactInputParams.input.type<br>  <br>};<br>done(data);</pre>"
            click step-019 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkNCU3Vic2NyaXB0aW9uUGFyYW08L3RpdGxlPjwvaGVhZD48Ym9keT48Yj5KYXZhU2NyaXB0OjwvYj48YnI+PGJyPjxwcmU+bGV0IGNJZCA9IGVuY29kZVVSSUNvbXBvbmVudChzdGVwcy5DQkRhdGEuY3VzdG9tZXIuaWQpOzxicj5sZXQgZGF0YSA9IHs8YnI+ICA8YnI+ICBnZXRIdWJzcG90U3Vic2NyaXB0aW9uOns8YnI+ICAgIHVybDogJ2h0dHBzOi8vJytzdGVwcy5Db250YWN0SW5wdXRQYXJhbXMuaW5wdXQuc2l0ZU5hbWUrJy5pbnRlZ3JhdGlvbnMuJyArIHN0ZXBzLkNvbnRhY3RJbnB1dFBhcmFtcy5pbnB1dC5zaXRlRG9tYWluKycvYXBpL2h1YnNwb3Qvc3Vic2NyaXB0aW9uP2N1c3RvbWVyX2lkPScrY0lkLDxicj4gICBoZWFkZXJzOns8YnI+ICAgIGFwaV9rZXk6c3RlcHMuQ29udGFjdElucHV0UGFyYW1zLmlucHV0LmFwaUtleTxicj4gICAgfTxicj4gIH0sPGJyPiAgPGJyPiAgPGJyPiAgPGJyPiAgZ2V0Q3VzdG9tZXJDQkVNIDogezxicj4gICAgdXJsIDogJ2h0dHBzOi8vJyArIHN0ZXBzLkNvbnRhY3RJbnB1dFBhcmFtcy5pbnB1dC5zaXRlTmFtZSArICcuJyArIHN0ZXBzLkNvbnRhY3RJbnB1dFBhcmFtcy5pbnB1dC5zaXRlRG9tYWluICsgJy9hcGkvdjIvdGhpcmRfcGFydHlfZW50aXR5X21hcHBpbmdzL3JldHJpZXZlJyw8YnI+ICAgIGhlYWRlcnM6IHs8YnI+ICAgIEF1dGhvcml6YXRpb246ICdCYXNpYyAnICsgQ0UuYjY0KHN0ZXBzLkNvbnRhY3RJbnB1dFBhcmFtcy5pbnB1dC5hcGlLZXkgKyAnOicgKyAnJyk8YnI+ICB9LDxicj4gIHF1ZXJ5OiB7PGJyPiAgICAgICdpbnRlZ3JhdGlvbl9uYW1lJzogc3RlcHMuQ29udGFjdElucHV0UGFyYW1zLmlucHV0LnR5cGUsPGJyPiAgICAgICdlbnRpdHlfaWQnOiBjSWQsPGJyPiAgICAgICdlbnRpdHlfdHlwZSc6ICdjdXN0b21lcic8YnI+ICB9PGJyPiAgICA8YnI+ICB9LDxicj4gIDxicj4gIGNiZW1VcGRhdGUgOns8YnI+ICAgIHVybCA6ICdodHRwczovLycgKyBzdGVwcy5Db250YWN0SW5wdXRQYXJhbXMuaW5wdXQuc2l0ZU5hbWUgKyAnLicgKyBzdGVwcy5Db250YWN0SW5wdXRQYXJhbXMuaW5wdXQuc2l0ZURvbWFpbiArICcvYXBpL3YyL3RoaXJkX3BhcnR5X2VudGl0eV9tYXBwaW5ncy91cGRhdGVfZW50aXR5Jyw8YnI+ICAgICBoZWFkZXJzOiB7PGJyPiAgICBBdXRob3JpemF0aW9uOiAnQmFzaWMgJyArIENFLmI2NChzdGVwcy5Db250YWN0SW5wdXRQYXJhbXMuaW5wdXQuYXBpS2V5ICsgJzonICsgJycpPGJyPiAgfTxicj4gIH0sPGJyPiA8YnI+ICA8YnI+ICBjYmVtOns8YnI+ICAgICB1cmw6IHs8YnI+ICAgICdnZXQnOiAnaHR0cHM6Ly8nICsgc3RlcHMuQ29udGFjdElucHV0UGFyYW1zLmlucHV0LnNpdGVOYW1lICsgJy4nICsgc3RlcHMuQ29udGFjdElucHV0UGFyYW1zLmlucHV0LnNpdGVEb21haW4gKyAnL2FwaS92Mi90aGlyZF9wYXJ0eV9lbnRpdHlfbWFwcGluZ3MvcmV0cmlldmUnLDxicj4gICAgdXBkYXRlOiAnaHR0cHM6Ly8nICsgc3RlcHMuQ29udGFjdElucHV0UGFyYW1zLmlucHV0LnNpdGVOYW1lICsgJy4nICsgc3RlcHMuQ29udGFjdElucHV0UGFyYW1zLmlucHV0LnNpdGVEb21haW4gKyAnL2FwaS92Mi90aGlyZF9wYXJ0eV9lbnRpdHlfbWFwcGluZ3MvdXBkYXRlX2VudGl0eScsPGJyPiAgfSw8YnI+ICBhdXRoOiB7PGJyPiAgICBBdXRob3JpemF0aW9uOiAnQmFzaWMgJyArIENFLmI2NChzdGVwcy5Db250YWN0SW5wdXRQYXJhbXMuaW5wdXQuYXBpS2V5ICsgJzonICsgJycpPGJyPiAgfSw8YnI+ICBxdWVyeTogezxicj4gICAgY3VzdG9tZXI6IHs8YnI+ICAgICAgJ2ludGVncmF0aW9uX25hbWUnOiBzdGVwcy5Db250YWN0SW5wdXRQYXJhbXMuaW5wdXQudHlwZSw8YnI+ICAgICAgJ2VudGl0eV9pZCc6IGNJZCw8YnI+ICAgICAgJ2VudGl0eV90eXBlJzogJ2N1c3RvbWVyJzxicj4gICAgfTxicj4gIH0sPGJyPiAgfTxicj59Ozxicj48YnI+ZG9uZShkYXRhKTs8L3ByZT48YnI+PGI+UkFXIEpTT046PC9iPjxicj48YnI+PHByZT57PGJyPiAgJ29uU3VjY2Vzcyc6IFs8YnI+ICAgICdDdXNTdWJEZXRhaWxzJzxicj4gIF0sPGJyPiAgJ29uRmFpbHVyZSc6IFtdLDxicj4gICduYW1lJzogJ0NCU3Vic2NyaXB0aW9uUGFyYW0nLDxicj4gICd0eXBlJzogJ3NjcmlwdCcsPGJyPiAgJ3Byb3BlcnRpZXMnOiB7PGJyPiAgICAnYm9keSc6ICdsZXQgY0lkID0gZW5jb2RlVVJJQ29tcG9uZW50KHN0ZXBzLkNCRGF0YS5jdXN0b21lci5pZCk7XG5sZXQgZGF0YSA9IHtcbiAgXG4gIGdldEh1YnNwb3RTdWJzY3JpcHRpb246e1xuICAgIHVybDogXCdodHRwczovL1wnK3N0ZXBzLkNvbnRhY3RJbnB1dFBhcmFtcy5pbnB1dC5zaXRlTmFtZStcJy5pbnRlZ3JhdGlvbnMuXCcgKyBzdGVwcy5Db250YWN0SW5wdXRQYXJhbXMuaW5wdXQuc2l0ZURvbWFpbitcJy9hcGkvaHVic3BvdC9zdWJzY3JpcHRpb24/Y3VzdG9tZXJfaWQ9XCcrY0lkLFxuICAgaGVhZGVyczp7XG4gICAgYXBpX2tleTpzdGVwcy5Db250YWN0SW5wdXRQYXJhbXMuaW5wdXQuYXBpS2V5XG4gICAgfVxuICB9LFxuICBcbiAgXG4gIFxuICBnZXRDdXN0b21lckNCRU0gOiB7XG4gICAgdXJsIDogXCdodHRwczovL1wnICsgc3RlcHMuQ29udGFjdElucHV0UGFyYW1zLmlucHV0LnNpdGVOYW1lICsgXCcuXCcgKyBzdGVwcy5Db250YWN0SW5wdXRQYXJhbXMuaW5wdXQuc2l0ZURvbWFpbiArIFwnL2FwaS92Mi90aGlyZF9wYXJ0eV9lbnRpdHlfbWFwcGluZ3MvcmV0cmlldmVcJyxcbiAgICBoZWFkZXJzOiB7XG4gICAgQXV0aG9yaXphdGlvbjogXCdCYXNpYyBcJyArIENFLmI2NChzdGVwcy5Db250YWN0SW5wdXRQYXJhbXMuaW5wdXQuYXBpS2V5ICsgXCc6XCcgKyBcJ1wnKVxuICB9LFxuICBxdWVyeToge1xuICAgICAgJ2ludGVncmF0aW9uX25hbWUnOiBzdGVwcy5Db250YWN0SW5wdXRQYXJhbXMuaW5wdXQudHlwZSxcbiAgICAgICdlbnRpdHlfaWQnOiBjSWQsXG4gICAgICAnZW50aXR5X3R5cGUnOiAnY3VzdG9tZXInXG4gIH1cbiAgICBcbiAgfSxcbiAgXG4gIGNiZW1VcGRhdGUgOntcbiAgICB1cmwgOiBcJ2h0dHBzOi8vXCcgKyBzdGVwcy5Db250YWN0SW5wdXRQYXJhbXMuaW5wdXQuc2l0ZU5hbWUgKyBcJy5cJyArIHN0ZXBzLkNvbnRhY3RJbnB1dFBhcmFtcy5pbnB1dC5zaXRlRG9tYWluICsgXCcvYXBpL3YyL3RoaXJkX3BhcnR5X2VudGl0eV9tYXBwaW5ncy91cGRhdGVfZW50aXR5XCcsXG4gICAgIGhlYWRlcnM6IHtcbiAgICBBdXRob3JpemF0aW9uOiBcJ0Jhc2ljIFwnICsgQ0UuYjY0KHN0ZXBzLkNvbnRhY3RJbnB1dFBhcmFtcy5pbnB1dC5hcGlLZXkgKyBcJzpcJyArIFwnXCcpXG4gIH1cbiAgfSxcbiBcbiAgXG4gIGNiZW06e1xuICAgICB1cmw6IHtcbiAgICBcJ2dldFwnOiBcJ2h0dHBzOi8vXCcgKyBzdGVwcy5Db250YWN0SW5wdXRQYXJhbXMuaW5wdXQuc2l0ZU5hbWUgKyBcJy5cJyArIHN0ZXBzLkNvbnRhY3RJbnB1dFBhcmFtcy5pbnB1dC5zaXRlRG9tYWluICsgXCcvYXBpL3YyL3RoaXJkX3BhcnR5X2VudGl0eV9tYXBwaW5ncy9yZXRyaWV2ZVwnLFxuICAgIHVwZGF0ZTogXCdodHRwczovL1wnICsgc3RlcHMuQ29udGFjdElucHV0UGFyYW1zLmlucHV0LnNpdGVOYW1lICsgXCcuXCcgKyBzdGVwcy5Db250YWN0SW5wdXRQYXJhbXMuaW5wdXQuc2l0ZURvbWFpbiArIFwnL2FwaS92Mi90aGlyZF9wYXJ0eV9lbnRpdHlfbWFwcGluZ3MvdXBkYXRlX2VudGl0eVwnLFxuICB9LFxuICBhdXRoOiB7XG4gICAgQXV0aG9yaXphdGlvbjogXCdCYXNpYyBcJyArIENFLmI2NChzdGVwcy5Db250YWN0SW5wdXRQYXJhbXMuaW5wdXQuYXBpS2V5ICsgXCc6XCcgKyBcJ1wnKVxuICB9LFxuICBxdWVyeToge1xuICAgIGN1c3RvbWVyOiB7XG4gICAgICAnaW50ZWdyYXRpb25fbmFtZSc6IHN0ZXBzLkNvbnRhY3RJbnB1dFBhcmFtcy5pbnB1dC50eXBlLFxuICAgICAgJ2VudGl0eV9pZCc6IGNJZCxcbiAgICAgICdlbnRpdHlfdHlwZSc6ICdjdXN0b21lcidcbiAgICB9XG4gIH0sXG4gIH1cbn07XG5cbmRvbmUoZGF0YSk7Jzxicj4gIH08YnI+fTwvcHJlPjwvYm9keT48L2h0bWw+'));document.close();" "JavaScript:<br><pre>let cId = encodeURIComponent(steps.CBData.customer.id);<br>let data = {<br>  <br>  getHubspotSubscription:{<br>    url: 'https://'+steps.ContactInputParams.input.siteName+'.integrations.' + steps.ContactInputParams.input.siteDomain+'/api/hubspot/subscription?customer_id='+cId,<br>   headers:{<br>    api_key:steps.ContactInputParams.input.apiKey<br>    }<br>  },<br>  <br>  <br>  <br>  getCustomerCBEM : {<br>    url : 'https://' + steps.ContactInputParams.input.siteName + '.' + steps.ContactInputParams.input.siteDomain + '/api/v2/third_party_entity_mappings/retrieve',<br>    headers: {<br>    Authorization: 'Basic ' + CE.b64(steps.ContactInputParams.input.apiKey + ':' + '')<br>  },<br>  query: {<br>      'integration_name': steps.ContactInputParams.input.type,<br>      'entity_id': cId,<br>      'entity_type': 'customer'<br>  }<br>    <br>  },<br>  <br>  cbemUpdate :{<br>    url : 'https://' + steps.ContactInputParams.input.siteName + '.' + steps.ContactInputParams.input.siteDomain + '/api/v2/third_party_entity_mappings/update_entity',<br>     headers: {<br>    Authorization: 'Basic ' + CE.b64(steps.ContactInputParams.input.apiKey + ':' + '')<br>  }<br>  },<br> <br>  <br>  cbem:{<br>     url: {<br>    'get': 'https://' + steps.ContactInputParams.input.siteName + '.' + steps.ContactInputParams.input.siteDomain + '/api/v2/third_party_entity_mappings/retrieve',<br>    update: 'https://' + steps.ContactInputParams.input.siteName + '.' + steps.ContactInputParams.input.siteDomain + '/api/v2/third_party_entity_mappings/update_entity',<br>  },<br>  auth: {<br>    Authorization: 'Basic ' + CE.b64(steps.ContactInputParams.input.apiKey + ':' + '')<br>  },<br>  query: {<br>    customer: {<br>      'integration_name': steps.ContactInputParams.input.type,<br>      'entity_id': cId,<br>      'entity_type': 'customer'<br>    }<br>  },<br>  }<br>};<br><br>done(data);</pre>"
            click step-020 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPlVwZGF0ZVRQTWFwcGluZ0Vycm9yPC90aXRsZT48L2hlYWQ+PGJvZHk+PGI+T3RoZXIgKGZvcm11bGEpOjwvYj48YnI+PGJyPjxwcmU+ICBmb3JtdWxhSWQgOiAzMTMzMTxicj4gICAgICAgYXJncyA6ICR7c3RlcHMuVXBkYXRlTm9FbWFpbH08L3ByZT48YnI+PGI+UkFXIEpTT046PC9iPjxicj48YnI+PHByZT57PGJyPiAgJ29uU3VjY2Vzcyc6IFs8YnI+ICAgICdJc1VwZGF0ZVRQTWFwcGluZ0RvbmUnPGJyPiAgXSw8YnI+ICAnb25GYWlsdXJlJzogW10sPGJyPiAgJ25hbWUnOiAnVXBkYXRlVFBNYXBwaW5nRXJyb3InLDxicj4gICd0eXBlJzogJ2Zvcm11bGEnLDxicj4gICdwcm9wZXJ0aWVzJzogezxicj4gICAgJ2Zvcm11bGFJZCc6ICczMTMzMScsPGJyPiAgICAnYXJncyc6ICcke3N0ZXBzLlVwZGF0ZU5vRW1haWx9Jzxicj4gIH08YnI+fTwvcHJlPjwvYm9keT48L2h0bWw+'));document.close();" "Other (formula):<br><pre>  formulaId : 31331<br>       args : ${steps.UpdateNoEmail}</pre>"
            click step-021 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkN1c1N1YkRldGFpbHM8L3RpdGxlPjwvaGVhZD48Ym9keT48Yj5KYXZhU2NyaXB0OjwvYj48YnI+PGJyPjxwcmU+bGV0IGN1c0lkID0gc3RlcHMuQ0JEYXRhLmN1c3RvbWVyLmlkOzxicj5sZXQgZGF0YSA9IHN0ZXBzLlN1YnNjcmlwdGlvbkJ1bGtBcGlEYXRhLmRhdGFbY3VzSWRdOzxicj4vL3JldHVybihkYXRhKTs8YnI+ZG9uZShkYXRhKTs8L3ByZT48YnI+PGI+UkFXIEpTT046PC9iPjxicj48YnI+PHByZT57PGJyPiAgJ29uU3VjY2Vzcyc6IFs8YnI+ICAgICdHZXRDdXN0b21lckNiZW0nPGJyPiAgXSw8YnI+ICAnb25GYWlsdXJlJzogW10sPGJyPiAgJ25hbWUnOiAnQ3VzU3ViRGV0YWlscycsPGJyPiAgJ3R5cGUnOiAnc2NyaXB0Jyw8YnI+ICAncHJvcGVydGllcyc6IHs8YnI+ICAgICdib2R5JzogJ2xldCBjdXNJZCA9IHN0ZXBzLkNCRGF0YS5jdXN0b21lci5pZDtcbmxldCBkYXRhID0gc3RlcHMuU3Vic2NyaXB0aW9uQnVsa0FwaURhdGEuZGF0YVtjdXNJZF07XG4vL3JldHVybihkYXRhKTtcbmRvbmUoZGF0YSk7Jzxicj4gIH08YnI+fTwvcHJlPjwvYm9keT48L2h0bWw+'));document.close();" "JavaScript:<br><pre>let cusId = steps.CBData.customer.id;<br>let data = steps.SubscriptionBulkApiData.data[cusId];<br>//return(data);<br>done(data);</pre>"
            click step-022 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPklzVXBkYXRlVFBNYXBwaW5nRG9uZTwvdGl0bGU+PC9oZWFkPjxib2R5PjxiPkphdmFTY3JpcHQ6PC9iPjxicj48YnI+PHByZT5pZihzdGVwcy5VcGRhdGVUUE1hcHBpbmdFcnJvci5jYl9zdGF0dXMgPT0gJ3N1Y2Nlc3MnKTxicj4gIGRvbmUodHJ1ZSk7PGJyPmVsc2U8YnI+ICBkb25lKGZhbHNlKTs8L3ByZT48YnI+PGI+UkFXIEpTT046PC9iPjxicj48YnI+PHByZT57PGJyPiAgJ29uU3VjY2Vzcyc6IFs8YnI+ICAgICdMb29wT3ZlckN1c3RvbWVyJzxicj4gIF0sPGJyPiAgJ29uRmFpbHVyZSc6IFtdLDxicj4gICduYW1lJzogJ0lzVXBkYXRlVFBNYXBwaW5nRG9uZScsPGJyPiAgJ3R5cGUnOiAnZmlsdGVyJyw8YnI+ICAncHJvcGVydGllcyc6IHs8YnI+ICAgICdib2R5JzogJ2lmKHN0ZXBzLlVwZGF0ZVRQTWFwcGluZ0Vycm9yLmNiX3N0YXR1cyA9PSBcJ3N1Y2Nlc3NcJylcbiAgZG9uZSh0cnVlKTtcbmVsc2VcbiAgZG9uZShmYWxzZSk7Jzxicj4gIH08YnI+fTwvcHJlPjwvYm9keT48L2h0bWw+'));document.close();" "JavaScript:<br><pre>if(steps.UpdateTPMappingError.cb_status == 'success')<br>  done(true);<br>else<br>  done(false);</pre>"
            click step-024 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkdldEN1c3RvbWVyQ2JlbTwvdGl0bGU+PC9oZWFkPjxib2R5PjxiPkphdmFTY3JpcHQ6PC9iPjxicj48YnI+PHByZT5sZXQgZGV0YWlsc3RwbTs8YnI+bGV0IEN1c1N1YkRldGFpbHMgPSBzdGVwcy5DdXNTdWJEZXRhaWxzOzxicj5pZihDdXNTdWJEZXRhaWxzIT09dW5kZWZpbmVkKTxicj57PGJyPiAgaWYoQ3VzU3ViRGV0YWlscy50cG1hcHBpbmchPT11bmRlZmluZWQgKTxicj4gIHs8YnI+ICAgIGxldCB0cG1kYXRhID0geyd0aGlyZF9wYXJ0eV9lbnRpdHlfbWFwcGluZyc6Q3VzU3ViRGV0YWlscy50cG1hcHBpbmd9Ozxicj48YnI+ICAgIGRldGFpbHN0cG0gPSB7ZGF0YTp0cG1kYXRhfTs8YnI+ICB9PGJyPn08YnI+ZG9uZShkZXRhaWxzdHBtKTs8L3ByZT48YnI+PGI+UkFXIEpTT046PC9iPjxicj48YnI+PHByZT57PGJyPiAgJ29uU3VjY2Vzcyc6IFs8YnI+ICAgICdTeW5jT25seUFjdGl2ZVN1YnNjcnB0aW9uJzxicj4gIF0sPGJyPiAgJ29uRmFpbHVyZSc6IFtdLDxicj4gICduYW1lJzogJ0dldEN1c3RvbWVyQ2JlbScsPGJyPiAgJ3R5cGUnOiAnc2NyaXB0Jyw8YnI+ICAncHJvcGVydGllcyc6IHs8YnI+ICAgICdib2R5JzogJ2xldCBkZXRhaWxzdHBtO1xubGV0IEN1c1N1YkRldGFpbHMgPSBzdGVwcy5DdXNTdWJEZXRhaWxzO1xuaWYoQ3VzU3ViRGV0YWlscyE9PXVuZGVmaW5lZClcbntcbiAgaWYoQ3VzU3ViRGV0YWlscy50cG1hcHBpbmchPT11bmRlZmluZWQgKVxuICB7XG4gICAgbGV0IHRwbWRhdGEgPSB7XCd0aGlyZF9wYXJ0eV9lbnRpdHlfbWFwcGluZ1wnOkN1c1N1YkRldGFpbHMudHBtYXBwaW5nfTtcblxuICAgIGRldGFpbHN0cG0gPSB7ZGF0YTp0cG1kYXRhfTtcbiAgfVxufVxuZG9uZShkZXRhaWxzdHBtKTsnPGJyPiAgfTxicj59PC9wcmU+PC9ib2R5PjwvaHRtbD4='));document.close();" "JavaScript:<br><pre>let detailstpm;<br>let CusSubDetails = steps.CusSubDetails;<br>if(CusSubDetails!==undefined)<br>{<br>  if(CusSubDetails.tpmapping!==undefined )<br>  {<br>    let tpmdata = {'third_party_entity_mapping':CusSubDetails.tpmapping};<br><br>    detailstpm = {data:tpmdata};<br>  }<br>}<br>done(detailstpm);</pre>"
            click step-025 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPlN5bmNPbmx5QWN0aXZlU3Vic2NycHRpb248L3RpdGxlPjwvaGVhZD48Ym9keT48Yj5KYXZhU2NyaXB0OjwvYj48YnI+PGJyPjxwcmU+bGV0IHRwID0gc3RlcHMuR2V0Q3VzdG9tZXJDYmVtLmRhdGEudGhpcmRfcGFydHlfZW50aXR5X21hcHBpbmc7PGJyPmlmICh0cC50aGlyZF9wYXJ0eV9lbnRpdHlfaWQgIT09IHVuZGVmaW5lZCkgezxicj4gICAgc3RlcHMuQ0JEYXRhLmh1YnNwb3QuY29udGFjdElkID0gdHAudGhpcmRfcGFydHlfZW50aXR5X2lkOzxicj4gICAgc3RlcHMuQ0JEYXRhLmh1YnNwb3QuY29udGFjdEJ5SWQgPSAnaHR0cHM6Ly9hcGkuaHViYXBpLmNvbS9jb250YWN0cy92MS9jb250YWN0L3ZpZC8nICsgdHAudGhpcmRfcGFydHlfZW50aXR5X2lkICsgJy9wcm9maWxlJzs8YnI+PGJyPiAgICBpZiAodHAub2xkX3Jlc291cmNlICE9PSB1bmRlZmluZWQpIHs8YnI+ICAgICAgICBpZiAodHAub2xkX3Jlc291cmNlLmN1c3RvbWVyICE9PSB1bmRlZmluZWQpIHs8YnI+ICAgICAgICAgICAgc3RlcHMuQ0JEYXRhLmh1YnNwb3QuY3VzdG9tZXIgPSB0cC5vbGRfcmVzb3VyY2UuY3VzdG9tZXI7PGJyPiAgICAgICAgfTxicj4gICAgfTxicj59PGJyPjxicj4vKmxldCBzdWJSZXNwID0gc3RlcHMuQ3VzU3ViRGV0YWlscy5zdWJzY3JpcHRpb247PGJyPmxldCBzdWJzY3JpcHRpb247PGJyPmlmKHN1YlJlc3AgIT09IHVuZGVmaW5lZCkgezxicj4gICAgc3Vic2NyaXB0aW9uID0gc3ViUmVzcC5zdWJSZXNwOzxicj59Ki88YnI+bGV0IHN1YnNjcmlwdGlvbiA9IHN0ZXBzLkN1c1N1YkRldGFpbHMuc3Vic2NyaXB0aW9uOzxicj5sZXQgZmxhZyA9IGZhbHNlOzxicj4gc3RlcHMuQ0JEYXRhLnN1YnNjcmlwdGlvbiA9IHN1YnNjcmlwdGlvbjs8YnI+aWYoc3RlcHMuQ3VzdG9tZXJzUGFyYW0uc3luY1J1bGVzQ29udGFjdHMuQ3VzdG9tZXJzVG9TeW5jICE9PSB1bmRlZmluZWQgJiYgc3RlcHMuQ3VzdG9tZXJzUGFyYW0uc3luY1J1bGVzQ29udGFjdHMuQ3VzdG9tZXJzVG9TeW5jPT09J0N1c3RvbWVyc193aXRoX0FjdGl2ZV9zdWJzY3JpcHRpb25zJykgezxicj4gIGlmKHN1YnNjcmlwdGlvbiAhPT11bmRlZmluZWQgJiYgc3Vic2NyaXB0aW9uLnN0YXR1cyA9PT0gJ2FjdGl2ZScpIHs8YnI+ICAgIGZsYWcgPSB0cnVlOzxicj4gIH1lbHNlIHs8YnI+ICAgIGZsYWcgPSBmYWxzZTs8YnI+ICB9PGJyPn1lbHNlIHs8YnI+ICBmbGFnID0gdHJ1ZTs8YnI+fTxicj5kb25lKGZsYWcpOzxicj48L3ByZT48YnI+PGI+UkFXIEpTT046PC9iPjxicj48YnI+PHByZT57PGJyPiAgJ29uU3VjY2Vzcyc6IFs8YnI+ICAgICdEb1N5bmNPcmRlcic8YnI+ICBdLDxicj4gICdvbkZhaWx1cmUnOiBbPGJyPiAgICAnTG9vcE92ZXJDdXN0b21lcic8YnI+ICBdLDxicj4gICduYW1lJzogJ1N5bmNPbmx5QWN0aXZlU3Vic2NycHRpb24nLDxicj4gICd0eXBlJzogJ2ZpbHRlcicsPGJyPiAgJ3Byb3BlcnRpZXMnOiB7PGJyPiAgICAnYm9keSc6ICdsZXQgdHAgPSBzdGVwcy5HZXRDdXN0b21lckNiZW0uZGF0YS50aGlyZF9wYXJ0eV9lbnRpdHlfbWFwcGluZztcbmlmICh0cC50aGlyZF9wYXJ0eV9lbnRpdHlfaWQgIT09IHVuZGVmaW5lZCkge1xuICAgIHN0ZXBzLkNCRGF0YS5odWJzcG90LmNvbnRhY3RJZCA9IHRwLnRoaXJkX3BhcnR5X2VudGl0eV9pZDtcbiAgICBzdGVwcy5DQkRhdGEuaHVic3BvdC5jb250YWN0QnlJZCA9IFwnaHR0cHM6Ly9hcGkuaHViYXBpLmNvbS9jb250YWN0cy92MS9jb250YWN0L3ZpZC9cJyArIHRwLnRoaXJkX3BhcnR5X2VudGl0eV9pZCArIFwnL3Byb2ZpbGVcJztcblxuICAgIGlmICh0cC5vbGRfcmVzb3VyY2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAodHAub2xkX3Jlc291cmNlLmN1c3RvbWVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHN0ZXBzLkNCRGF0YS5odWJzcG90LmN1c3RvbWVyID0gdHAub2xkX3Jlc291cmNlLmN1c3RvbWVyO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vKmxldCBzdWJSZXNwID0gc3RlcHMuQ3VzU3ViRGV0YWlscy5zdWJzY3JpcHRpb247XG5sZXQgc3Vic2NyaXB0aW9uO1xuaWYoc3ViUmVzcCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgc3Vic2NyaXB0aW9uID0gc3ViUmVzcC5zdWJSZXNwO1xufSovXG5sZXQgc3Vic2NyaXB0aW9uID0gc3RlcHMuQ3VzU3ViRGV0YWlscy5zdWJzY3JpcHRpb247XG5sZXQgZmxhZyA9IGZhbHNlO1xuIHN0ZXBzLkNCRGF0YS5zdWJzY3JpcHRpb24gPSBzdWJzY3JpcHRpb247XG5pZihzdGVwcy5DdXN0b21lcnNQYXJhbS5zeW5jUnVsZXNDb250YWN0cy5DdXN0b21lcnNUb1N5bmMgIT09IHVuZGVmaW5lZCAmJiBzdGVwcy5DdXN0b21lcnNQYXJhbS5zeW5jUnVsZXNDb250YWN0cy5DdXN0b21lcnNUb1N5bmM9PT1cJ0N1c3RvbWVyc193aXRoX0FjdGl2ZV9zdWJzY3JpcHRpb25zXCcpIHtcbiAgaWYoc3Vic2NyaXB0aW9uICE9PXVuZGVmaW5lZCAmJiBzdWJzY3JpcHRpb24uc3RhdHVzID09PSAnYWN0aXZlJykge1xuICAgIGZsYWcgPSB0cnVlO1xuICB9ZWxzZSB7XG4gICAgZmxhZyA9IGZhbHNlO1xuICB9XG59ZWxzZSB7XG4gIGZsYWcgPSB0cnVlO1xufVxuZG9uZShmbGFnKTtcbic8YnI+ICB9PGJyPn08L3ByZT48L2JvZHk+PC9odG1sPg=='));document.close();" "JavaScript:<br><pre>let tp = steps.GetCustomerCbem.data.third_party_entity_mapping;<br>if (tp.third_party_entity_id !== undefined) {<br>    steps.CBData.hubspot.contactId = tp.third_party_entity_id;<br>    steps.CBData.hubspot.contactById = 'https://api.hubapi.com/contacts/v1/contact/vid/' + tp.third_party_entity_id + '/profile';<br><br>    if (tp.old_resource !== undefined) {<br>        if (tp.old_resource.customer !== undefined) {<br>            steps.CBData.hubspot.customer = tp.old_resource.customer;<br>        }<br>    }<br>}<br><br>/*let subResp = steps.CusSubDetails.subscription;<br>let subscription;<br>if(subResp !== undefined) {<br>    subscription = subResp.subResp;<br>}*/<br>let subscription = steps.CusSubDetails.subscription;<br>let flag = false;<br> steps.CBData.subscription = subscription;<br>if(steps.CustomersParam.syncRulesContacts.CustomersToSync !== undefined && steps.CustomersParam.syncRulesContacts.CustomersToSync==='Customers_with_Active_subscriptions') {<br>  if(subscription !==undefined && subscription.status === 'active') {<br>    flag = true;<br>  }else {<br>    flag = false;<br>  }<br>}else {<br>  flag = true;<br>}<br>done(flag);<br></pre>"
            click step-026 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkRvU3luY09yZGVyPC90aXRsZT48L2hlYWQ+PGJvZHk+PGI+SmF2YVNjcmlwdDo8L2I+PGJyPjxicj48cHJlPmRvbmUoc3RlcHMuR2V0Q0JPcmRlci5yZXNwb25zZS5jb2RlID09PSAyMDAgJiYgc3RlcHMuR2V0Q0JPcmRlci5yZXNwb25zZS5ib2R5Lm9yZGVyX3VzZWQgPT09IHRydWUgJiYgIHN0ZXBzLkN1c3RvbWVyc1BhcmFtLnN5bmNSdWxlc09yZGVycyE9PSB1bmRlZmluZWQgJiYgc3RlcHMuQ3VzdG9tZXJzUGFyYW0uc3luY1J1bGVzT3JkZXJzLnN5bmM9PT0ndHJ1ZScgJiYgIHN0ZXBzLkNCRGF0YS5zdWJzY3JpcHRpb24gICE9PSB1bmRlZmluZWQpOzwvcHJlPjxicj48Yj5SQVcgSlNPTjo8L2I+PGJyPjxicj48cHJlPns8YnI+ICAnb25TdWNjZXNzJzogWzxicj4gICAgJ09yZGVyUGFyYW0nPGJyPiAgXSw8YnI+ICAnb25GYWlsdXJlJzogWzxicj4gICAgJ0hhc0NvbnRhY3RJbkNCRU0nPGJyPiAgXSw8YnI+ICAnbmFtZSc6ICdEb1N5bmNPcmRlcicsPGJyPiAgJ3R5cGUnOiAnZmlsdGVyJyw8YnI+ICAncHJvcGVydGllcyc6IHs8YnI+ICAgICdib2R5JzogJ2RvbmUoc3RlcHMuR2V0Q0JPcmRlci5yZXNwb25zZS5jb2RlID09PSAyMDAgJiYgc3RlcHMuR2V0Q0JPcmRlci5yZXNwb25zZS5ib2R5Lm9yZGVyX3VzZWQgPT09IHRydWUgJiYgIHN0ZXBzLkN1c3RvbWVyc1BhcmFtLnN5bmNSdWxlc09yZGVycyE9PSB1bmRlZmluZWQgJiYgc3RlcHMuQ3VzdG9tZXJzUGFyYW0uc3luY1J1bGVzT3JkZXJzLnN5bmM9PT1cJ3RydWVcJyAmJiAgc3RlcHMuQ0JEYXRhLnN1YnNjcmlwdGlvbiAgIT09IHVuZGVmaW5lZCk7Jzxicj4gIH08YnI+fTwvcHJlPjwvYm9keT48L2h0bWw+'));document.close();" "JavaScript:<br><pre>done(steps.GetCBOrder.response.code === 200 && steps.GetCBOrder.response.body.order_used === true &&  steps.CustomersParam.syncRulesOrders!== undefined && steps.CustomersParam.syncRulesOrders.sync==='true' &&  steps.CBData.subscription  !== undefined);</pre>"
            click step-027 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPk9yZGVyUGFyYW08L3RpdGxlPjwvaGVhZD48Ym9keT48Yj5KYXZhU2NyaXB0OjwvYj48YnI+PGJyPjxwcmU+bGV0IHQgPSBNYXRoLnJvdW5kKChuZXcgRGF0ZSgpLmdldFRpbWUoKSkvMTAwMCk7PGJyPmxldCBkYXRhID0gezxicj4gIDxicj4gIDxicj4gIGdldE9yZGVyQmVmb3JlIDp7PGJyPiAgICB1cmw6J2h0dHBzOi8vJytzdGVwcy5Db250YWN0SW5wdXRQYXJhbXMuaW5wdXQuc2l0ZU5hbWUrJy4nK3N0ZXBzLkNvbnRhY3RJbnB1dFBhcmFtcy5pbnB1dC5zaXRlRG9tYWluKycvYXBpL3YyL29yZGVycycsPGJyPiAgaGVhZGVyczp7PGJyPiAgICAgICAgQXV0aG9yaXphdGlvbjogJ0Jhc2ljICcgKyBDRS5iNjQoc3RlcHMuQ29udGFjdElucHV0UGFyYW1zLmlucHV0LmFwaUtleSArICc6JyApPGJyPiAgICAgIH0sPGJyPiAgICAgIGJlZm9yZSA6IHs8YnI+ICAgIGxpbWl0OjEsPGJyPiAgICAnc3Vic2NyaXB0aW9uX2lkW2lzXSAnOmVuY29kZVVSSUNvbXBvbmVudChzdGVwcy5DQkRhdGEuc3Vic2NyaXB0aW9uLmlkKSw8YnI+ICAgICdzdGF0dXNbaXNfbm90XSc6J2RlbGl2ZXJlZCcsPGJyPiAgICAnc29ydF9ieVtkZXNjXSc6J3VwZGF0ZWRfYXQnLDxicj4gICAgJ29yZGVyX2RhdGVbYmVmb3JlXSc6dDxicj4gIH08YnI+ICB9LDxicj4gIGdldE9yZGVyQWZ0ZXIgOns8YnI+ICAgIHVybDonaHR0cHM6Ly8nK3N0ZXBzLkNvbnRhY3RJbnB1dFBhcmFtcy5pbnB1dC5zaXRlTmFtZSsnLicrc3RlcHMuQ29udGFjdElucHV0UGFyYW1zLmlucHV0LnNpdGVEb21haW4rJy9hcGkvdjIvb3JkZXJzJyw8YnI+ICBoZWFkZXJzOns8YnI+ICAgICAgICBBdXRob3JpemF0aW9uOiAnQmFzaWMgJyArIENFLmI2NChzdGVwcy5Db250YWN0SW5wdXRQYXJhbXMuaW5wdXQuYXBpS2V5ICsgJzonICk8YnI+ICAgICAgfSw8YnI+ICAgICAgYWZ0ZXIgOiB7PGJyPiAgICBsaW1pdDoxLDxicj4gICAgJ3N1YnNjcmlwdGlvbl9pZFtpc10gJzplbmNvZGVVUklDb21wb25lbnQoc3RlcHMuQ0JEYXRhLnN1YnNjcmlwdGlvbi5pZCksPGJyPiAgICAnc3RhdHVzW2lzX25vdF0nOidkZWxpdmVyZWQnLDxicj4gICAgJ3NvcnRfYnlbYXNjXSc6J2NyZWF0ZWRfYXQnLDxicj4gICAgJ29yZGVyX2RhdGVbYWZ0ZXJdJzp0PGJyPiAgfTxicj4gIH08YnI+IDxicj4gIDxicj59Ozxicj48YnI+ZG9uZShkYXRhKTs8L3ByZT48YnI+PGI+UkFXIEpTT046PC9iPjxicj48YnI+PHByZT57PGJyPiAgJ29uU3VjY2Vzcyc6IFs8YnI+ICAgICdHZXRPcmRlckJlZm9yZUNCR2V0Jzxicj4gIF0sPGJyPiAgJ29uRmFpbHVyZSc6IFtdLDxicj4gICduYW1lJzogJ09yZGVyUGFyYW0nLDxicj4gICd0eXBlJzogJ3NjcmlwdCcsPGJyPiAgJ3Byb3BlcnRpZXMnOiB7PGJyPiAgICAnYm9keSc6ICdsZXQgdCA9IE1hdGgucm91bmQoKG5ldyBEYXRlKCkuZ2V0VGltZSgpKS8xMDAwKTtcbmxldCBkYXRhID0ge1xuICBcbiAgXG4gIGdldE9yZGVyQmVmb3JlIDp7XG4gICAgdXJsOlwnaHR0cHM6Ly9cJytzdGVwcy5Db250YWN0SW5wdXRQYXJhbXMuaW5wdXQuc2l0ZU5hbWUrXCcuXCcrc3RlcHMuQ29udGFjdElucHV0UGFyYW1zLmlucHV0LnNpdGVEb21haW4rXCcvYXBpL3YyL29yZGVyc1wnLFxuICBoZWFkZXJzOntcbiAgICAgICAgQXV0aG9yaXphdGlvbjogXCdCYXNpYyBcJyArIENFLmI2NChzdGVwcy5Db250YWN0SW5wdXRQYXJhbXMuaW5wdXQuYXBpS2V5ICsgXCc6XCcgKVxuICAgICAgfSxcbiAgICAgIGJlZm9yZSA6IHtcbiAgICBsaW1pdDoxLFxuICAgIFwnc3Vic2NyaXB0aW9uX2lkW2lzXSBcJzplbmNvZGVVUklDb21wb25lbnQoc3RlcHMuQ0JEYXRhLnN1YnNjcmlwdGlvbi5pZCksXG4gICAgXCdzdGF0dXNbaXNfbm90XVwnOlwnZGVsaXZlcmVkXCcsXG4gICAgXCdzb3J0X2J5W2Rlc2NdXCc6XCd1cGRhdGVkX2F0XCcsXG4gICAgXCdvcmRlcl9kYXRlW2JlZm9yZV1cJzp0XG4gIH1cbiAgfSxcbiAgZ2V0T3JkZXJBZnRlciA6e1xuICAgIHVybDpcJ2h0dHBzOi8vXCcrc3RlcHMuQ29udGFjdElucHV0UGFyYW1zLmlucHV0LnNpdGVOYW1lK1wnLlwnK3N0ZXBzLkNvbnRhY3RJbnB1dFBhcmFtcy5pbnB1dC5zaXRlRG9tYWluK1wnL2FwaS92Mi9vcmRlcnNcJyxcbiAgaGVhZGVyczp7XG4gICAgICAgIEF1dGhvcml6YXRpb246IFwnQmFzaWMgXCcgKyBDRS5iNjQoc3RlcHMuQ29udGFjdElucHV0UGFyYW1zLmlucHV0LmFwaUtleSArIFwnOlwnIClcbiAgICAgIH0sXG4gICAgICBhZnRlciA6IHtcbiAgICBsaW1pdDoxLFxuICAgIFwnc3Vic2NyaXB0aW9uX2lkW2lzXSBcJzplbmNvZGVVUklDb21wb25lbnQoc3RlcHMuQ0JEYXRhLnN1YnNjcmlwdGlvbi5pZCksXG4gICAgXCdzdGF0dXNbaXNfbm90XVwnOlwnZGVsaXZlcmVkXCcsXG4gICAgXCdzb3J0X2J5W2FzY11cJzpcJ2NyZWF0ZWRfYXRcJyxcbiAgICBcJ29yZGVyX2RhdGVbYWZ0ZXJdXCc6dFxuICB9XG4gIH1cbiBcbiAgXG59O1xuXG5kb25lKGRhdGEpOyc8YnI+ICB9PGJyPn08L3ByZT48L2JvZHk+PC9odG1sPg=='));document.close();" "JavaScript:<br><pre>let t = Math.round((new Date().getTime())/1000);<br>let data = {<br>  <br>  <br>  getOrderBefore :{<br>    url:'https://'+steps.ContactInputParams.input.siteName+'.'+steps.ContactInputParams.input.siteDomain+'/api/v2/orders',<br>  headers:{<br>        Authorization: 'Basic ' + CE.b64(steps.ContactInputParams.input.apiKey + ':' )<br>      },<br>      before : {<br>    limit:1,<br>    'subscription_id[is] ':encodeURIComponent(steps.CBData.subscription.id),<br>    'status[is_not]':'delivered',<br>    'sort_by[desc]':'updated_at',<br>    'order_date[before]':t<br>  }<br>  },<br>  getOrderAfter :{<br>    url:'https://'+steps.ContactInputParams.input.siteName+'.'+steps.ContactInputParams.input.siteDomain+'/api/v2/orders',<br>  headers:{<br>        Authorization: 'Basic ' + CE.b64(steps.ContactInputParams.input.apiKey + ':' )<br>      },<br>      after : {<br>    limit:1,<br>    'subscription_id[is] ':encodeURIComponent(steps.CBData.subscription.id),<br>    'status[is_not]':'delivered',<br>    'sort_by[asc]':'created_at',<br>    'order_date[after]':t<br>  }<br>  }<br> <br>  <br>};<br><br>done(data);</pre>"
            click step-028 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkhhc0NvbnRhY3RJbkNCRU08L3RpdGxlPjwvaGVhZD48Ym9keT48Yj5KYXZhU2NyaXB0OjwvYj48YnI+PGJyPjxwcmU+ZG9uZShzdGVwcy5DQkRhdGEuaHVic3BvdC5jb250YWN0QnlJZCE9PSB1bmRlZmluZWQpOzwvcHJlPjxicj48Yj5SQVcgSlNPTjo8L2I+PGJyPjxicj48cHJlPns8YnI+ICAnb25TdWNjZXNzJzogWzxicj4gICAgJ0dldEh1YnNwb3RDb250YWN0QnlJZFBhcmFtJzxicj4gIF0sPGJyPiAgJ29uRmFpbHVyZSc6IFs8YnI+ICAgICdHZXRIdWJzcG90Q29udGFjdEJ5RW1haWwnPGJyPiAgXSw8YnI+ICAnbmFtZSc6ICdIYXNDb250YWN0SW5DQkVNJyw8YnI+ICAndHlwZSc6ICdmaWx0ZXInLDxicj4gICdwcm9wZXJ0aWVzJzogezxicj4gICAgJ2JvZHknOiAnZG9uZShzdGVwcy5DQkRhdGEuaHVic3BvdC5jb250YWN0QnlJZCE9PSB1bmRlZmluZWQpOyc8YnI+ICB9PGJyPn08L3ByZT48L2JvZHk+PC9odG1sPg=='));document.close();" "JavaScript:<br><pre>done(steps.CBData.hubspot.contactById!== undefined);</pre>"
            click step-029 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkdldE9yZGVyQmVmb3JlQ0JHZXQ8L3RpdGxlPjwvaGVhZD48Ym9keT48Yj5KYXZhU2NyaXB0OjwvYj48YnI+PGJyPjxwcmU+bGV0IG9yZGVyOzxicj5sZXQgQ3VzU3ViRGV0YWlscyA9IHN0ZXBzLkN1c1N1YkRldGFpbHM7PGJyPmlmKEN1c1N1YkRldGFpbHMhPT11bmRlZmluZWQgJiYgQ3VzU3ViRGV0YWlscyE9PW51bGwpPGJyPns8YnI+ICBpZihDdXNTdWJEZXRhaWxzLm9yZGVyX2JlZm9yZSE9PXVuZGVmaW5lZCAmJiBDdXNTdWJEZXRhaWxzLm9yZGVyX2JlZm9yZSE9PSBudWxsKTxicj4gIHs8YnI+ICAgIG9yZGVyID0gQ3VzU3ViRGV0YWlscy5vcmRlcl9iZWZvcmU7PGJyPiAgfTxicj59PGJyPmRvbmUob3JkZXIpOzxicj48YnI+PGJyPjxicj4vKmxldCBvID0gezxicj4gICAgJ29yZGVyX2lkJzogJzE0MTknLDxicj4gICAgJ2RvY3VtZW50X251bWJlcic6ICcxMDI3Jyw8YnI+ICAgICdpbnZvaWNlX2lkJzogJ1FidXNpdGUxMTg1Jyw8YnI+ICAgICdzdWJzY3JpcHRpb25faWQnOiAnSG1qR1FweFJuM3Jhd0JKdmMnLDxicj4gICAgJ2N1c3RvbWVyX2lkJzogJ0htakdRcHhSbjNyYXdCSnZjJyw8YnI+ICAgICdzdGF0dXMnOiAncXVldWVkJyw8YnI+ICAgICdwYXltZW50X3N0YXR1cyc6ICdwYWlkJyw8YnI+ICAgICdvcmRlcl90eXBlJzogJ3N5c3RlbV9nZW5lcmF0ZWQnLDxicj4gICAgJ3ByaWNlX3R5cGUnOiAndGF4X2V4Y2x1c2l2ZScsPGJyPiAgICAnb3JkZXJfZGF0ZSc6IDE1Nzg1NTQwOTIsPGJyPiAgICAnc2hpcHBpbmdfZGF0ZSc6IDE1Nzg1NTQwOTIsPGJyPiAgICAnY3JlYXRlZF9ieSc6ICdBdXRvIGdlbmVyYXRlZCBieSBzeXN0ZW0nLDxicj4gICAgJ3RheCc6IDAsPGJyPiAgICAnYW1vdW50X3BhaWQnOiAwLDxicj4gICAgJ2Ftb3VudF9hZGp1c3RlZCc6IDEyOTk5LDxicj4gICAgJ3JlZnVuZGFibGVfY3JlZGl0c19pc3N1ZWQnOiAwLDxicj4gICAgJ3JlZnVuZGFibGVfY3JlZGl0cyc6IDAsPGJyPiAgICAncm91bmRpbmdfYWRqdXN0ZW1lbnQnOiAxLDxicj4gICAgJ3BhaWRfb24nOiAxNTc4NTU0MDkyLDxicj4gICAgJ2V4Y2hhbmdlX3JhdGUnOiAxLjAsPGJyPiAgICAnY3JlYXRlZF9hdCc6IDE1Nzg1NTQwOTMsPGJyPiAgICAndXBkYXRlZF9hdCc6IDE1Nzg1NTQwOTMsPGJyPiAgICAncmVzb3VyY2VfdmVyc2lvbic6IDE1Nzg1NTQwOTM2MDIsPGJyPiAgICAnZGVsZXRlZCc6IGZhbHNlLDxicj4gICAgJ29iamVjdCc6ICdvcmRlcicsPGJyPiAgICAnZGlzY291bnQnOiAwLDxicj4gICAgJ3N1Yl90b3RhbCc6IDEzMDAwLDxicj4nZnVsZmlsbG1lbnRfc3RhdHVzJzp0cnVlLDxicj4gICAgJ29yZGVyX2xpbmVfaXRlbXMnOiBbezxicj4gICAgICAgICdpZCc6ICdvX2xpSG1qR1FweFJuM3M2YWdKd3onLDxicj4gICAgICAgICdpbnZvaWNlX2lkJzogJ1FidXNpdGUxMTg1Jyw8YnI+ICAgICAgICAnaW52b2ljZV9saW5lX2l0ZW1faWQnOiAnbGlfSG1qR1FweFJuM3JheUFKdmUnLDxicj4gICAgICAgICd1bml0X3ByaWNlJzogMTMwMDAsPGJyPiAgICAgICAgJ2Ftb3VudCc6IDEzMDAwLDxicj4gICAgICAgICdmdWxmaWxsbWVudF9xdWFudGl0eSc6IDEsPGJyPiAgICAgICAgJ2Z1bGZpbGxtZW50X2Ftb3VudCc6IDEzMDAwLDxicj4gICAgICAgICd0YXhfYW1vdW50JzogMCw8YnI+ICAgICAgICAnYW1vdW50X3BhaWQnOiAwLDxicj4gICAgICAgICdhbW91bnRfYWRqdXN0ZWQnOiAxMjk5OSw8YnI+ICAgICAgICAncmVmdW5kYWJsZV9jcmVkaXRzX2lzc3VlZCc6IDAsPGJyPiAgICAgICAgJ3JlZnVuZGFibGVfY3JlZGl0cyc6IDAsPGJyPiAgICAgICAgJ2lzX3NoaXBwYWJsZSc6IHRydWUsPGJyPiAgICAgICAgJ3N0YXR1cyc6ICdxdWV1ZWQnLDxicj4gICAgICAgICdvYmplY3QnOiAnb3JkZXJfbGluZV9pdGVtJyw8YnI+ICAgICAgICAnZW50aXR5X2lkJzogJ3NoaXBwYWJsZScsPGJyPiAgICAgICAgJ2Rpc2NvdW50X2Ftb3VudCc6IDAsPGJyPiAgICAgICAgJ2l0ZW1fbGV2ZWxfZGlzY291bnRfYW1vdW50JzogMCw8YnI+ICAgICAgICAnZGVzY3JpcHRpb24nOiAnc2hpcHBhYmxlJyw8YnI+ICAgICAgICAnZW50aXR5X3R5cGUnOiAncGxhbic8YnI+ICAgIH1dLDxicj4gICAgJ3RvdGFsJzogMTMwMDEsPGJyPiAgICAnY3VycmVuY3lfY29kZSc6ICdVU0QnLDxicj4gICAgJ2Jhc2VfY3VycmVuY3lfY29kZSc6ICdVU0QnLDxicj4gICAgJ2lzX2dpZnRlZCc6IGZhbHNlLDxicj4nZ2lmdF9pZCcgOiAxMjM0LDxicj4nY2FuY2VsbGF0aW9uX3JlYXNvbic6J2NhbmNlbGxhdGlvbiByZWFzb24nLDxicj4ncmVmZXJlbmNlX2lkJzoxMjM0LDxicj4ndHJhY2tpbmdfaWQnOjU2NzgsPGJyPidiYXRjaF9pZCc6OTAxMiw8YnI+J3NoaXBtZW50X2NhcnJpZXInOidCdXMnLDxicj4naW52b2ljZV9yb3VuZF9vZmZfYW1vdW50Jzo5ODAwLDxicj4nc3RhdHVzX3VwZGF0ZV9hdCc6MTU3ODU1NDA5Myw8YnI+J2RlbGl2ZXJlZF9hdCc6MTU3ODU1NDA5Myw8YnI+J3NoaXBwZWRfYXQnOjE1Nzg1NTQwOTMsPGJyPidjYW5jZWxsZWRfYXQnOjE1Nzg1NTQwOTMsPGJyPidzaGlwcGluZ19jdXRfb2ZmX2RhdGUnOjE1Nzg1NTQwOTMsPGJyPiAgICAnYmlsbGluZ19hZGRyZXNzJzogezxicj4gICAgICAgICdmaXJzdF9uYW1lJzogJ2JpbGx5Jyw8YnI+ICAgICAgICAndmFsaWRhdGlvbl9zdGF0dXMnOiAnbm90X3ZhbGlkYXRlZCcsPGJyPiAgICAgICAgJ29iamVjdCc6ICdiaWxsaW5nX2FkZHJlc3MnPGJyPiAgICB9LDxicj4gICAgJ2xpbmtlZF9jcmVkaXRfbm90ZXMnOiBbezxicj4gICAgICAgICdvYmplY3QnOiAnb3JkZXJfbGluZV9pdGVtX2xpbmtlZF9jcmVkaXQnLDxicj4gICAgICAgICdpZCc6ICdxYnVzaXRlY240MScsPGJyPiAgICAgICAgJ3R5cGUnOiAnYWRqdXN0bWVudCcsPGJyPiAgICAgICAgJ3N0YXR1cyc6ICdhZGp1c3RlZCcsPGJyPiAgICAgICAgJ2Ftb3VudCc6IDEyOTk5PGJyPiAgICB9XTxicj59Ozxicj48YnI+ZG9uZShvKTs8YnI+PGJyPiovPC9wcmU+PGJyPjxiPlJBVyBKU09OOjwvYj48YnI+PGJyPjxwcmU+ezxicj4gICdvblN1Y2Nlc3MnOiBbPGJyPiAgICAnR2V0T3JkZXJBZnRlckNCR2V0Jzxicj4gIF0sPGJyPiAgJ29uRmFpbHVyZSc6IFtdLDxicj4gICduYW1lJzogJ0dldE9yZGVyQmVmb3JlQ0JHZXQnLDxicj4gICd0eXBlJzogJ3NjcmlwdCcsPGJyPiAgJ3Byb3BlcnRpZXMnOiB7PGJyPiAgICAnYm9keSc6ICdsZXQgb3JkZXI7XG5sZXQgQ3VzU3ViRGV0YWlscyA9IHN0ZXBzLkN1c1N1YkRldGFpbHM7XG5pZihDdXNTdWJEZXRhaWxzIT09dW5kZWZpbmVkICYmIEN1c1N1YkRldGFpbHMhPT1udWxsKVxue1xuICBpZihDdXNTdWJEZXRhaWxzLm9yZGVyX2JlZm9yZSE9PXVuZGVmaW5lZCAmJiBDdXNTdWJEZXRhaWxzLm9yZGVyX2JlZm9yZSE9PSBudWxsKVxuICB7XG4gICAgb3JkZXIgPSBDdXNTdWJEZXRhaWxzLm9yZGVyX2JlZm9yZTtcbiAgfVxufVxuZG9uZShvcmRlcik7XG5cblxuXG4vKmxldCBvID0ge1xuICAgIFwnb3JkZXJfaWRcJzogXCcxNDE5XCcsXG4gICAgXCdkb2N1bWVudF9udW1iZXJcJzogXCcxMDI3XCcsXG4gICAgXCdpbnZvaWNlX2lkXCc6IFwnUWJ1c2l0ZTExODVcJyxcbiAgICBcJ3N1YnNjcmlwdGlvbl9pZFwnOiBcJ0htakdRcHhSbjNyYXdCSnZjXCcsXG4gICAgXCdjdXN0b21lcl9pZFwnOiBcJ0htakdRcHhSbjNyYXdCSnZjXCcsXG4gICAgXCdzdGF0dXNcJzogXCdxdWV1ZWRcJyxcbiAgICBcJ3BheW1lbnRfc3RhdHVzXCc6IFwncGFpZFwnLFxuICAgIFwnb3JkZXJfdHlwZVwnOiBcJ3N5c3RlbV9nZW5lcmF0ZWRcJyxcbiAgICBcJ3ByaWNlX3R5cGVcJzogXCd0YXhfZXhjbHVzaXZlXCcsXG4gICAgXCdvcmRlcl9kYXRlXCc6IDE1Nzg1NTQwOTIsXG4gICAgXCdzaGlwcGluZ19kYXRlXCc6IDE1Nzg1NTQwOTIsXG4gICAgXCdjcmVhdGVkX2J5XCc6IFwnQXV0byBnZW5lcmF0ZWQgYnkgc3lzdGVtXCcsXG4gICAgXCd0YXhcJzogMCxcbiAgICBcJ2Ftb3VudF9wYWlkXCc6IDAsXG4gICAgXCdhbW91bnRfYWRqdXN0ZWRcJzogMTI5OTksXG4gICAgXCdyZWZ1bmRhYmxlX2NyZWRpdHNfaXNzdWVkXCc6IDAsXG4gICAgXCdyZWZ1bmRhYmxlX2NyZWRpdHNcJzogMCxcbiAgICBcJ3JvdW5kaW5nX2FkanVzdGVtZW50XCc6IDEsXG4gICAgXCdwYWlkX29uXCc6IDE1Nzg1NTQwOTIsXG4gICAgXCdleGNoYW5nZV9yYXRlXCc6IDEuMCxcbiAgICBcJ2NyZWF0ZWRfYXRcJzogMTU3ODU1NDA5MyxcbiAgICBcJ3VwZGF0ZWRfYXRcJzogMTU3ODU1NDA5MyxcbiAgICBcJ3Jlc291cmNlX3ZlcnNpb25cJzogMTU3ODU1NDA5MzYwMixcbiAgICBcJ2RlbGV0ZWRcJzogZmFsc2UsXG4gICAgXCdvYmplY3RcJzogXCdvcmRlclwnLFxuICAgIFwnZGlzY291bnRcJzogMCxcbiAgICBcJ3N1Yl90b3RhbFwnOiAxMzAwMCxcblwnZnVsZmlsbG1lbnRfc3RhdHVzXCc6dHJ1ZSxcbiAgICBcJ29yZGVyX2xpbmVfaXRlbXNcJzogW3tcbiAgICAgICAgXCdpZFwnOiBcJ29fbGlIbWpHUXB4Um4zczZhZ0p3elwnLFxuICAgICAgICBcJ2ludm9pY2VfaWRcJzogXCdRYnVzaXRlMTE4NVwnLFxuICAgICAgICBcJ2ludm9pY2VfbGluZV9pdGVtX2lkXCc6IFwnbGlfSG1qR1FweFJuM3JheUFKdmVcJyxcbiAgICAgICAgXCd1bml0X3ByaWNlXCc6IDEzMDAwLFxuICAgICAgICBcJ2Ftb3VudFwnOiAxMzAwMCxcbiAgICAgICAgXCdmdWxmaWxsbWVudF9xdWFudGl0eVwnOiAxLFxuICAgICAgICBcJ2Z1bGZpbGxtZW50X2Ftb3VudFwnOiAxMzAwMCxcbiAgICAgICAgXCd0YXhfYW1vdW50XCc6IDAsXG4gICAgICAgIFwnYW1vdW50X3BhaWRcJzogMCxcbiAgICAgICAgXCdhbW91bnRfYWRqdXN0ZWRcJzogMTI5OTksXG4gICAgICAgIFwncmVmdW5kYWJsZV9jcmVkaXRzX2lzc3VlZFwnOiAwLFxuICAgICAgICBcJ3JlZnVuZGFibGVfY3JlZGl0c1wnOiAwLFxuICAgICAgICBcJ2lzX3NoaXBwYWJsZVwnOiB0cnVlLFxuICAgICAgICBcJ3N0YXR1c1wnOiBcJ3F1ZXVlZFwnLFxuICAgICAgICBcJ29iamVjdFwnOiBcJ29yZGVyX2xpbmVfaXRlbVwnLFxuICAgICAgICBcJ2VudGl0eV9pZFwnOiBcJ3NoaXBwYWJsZVwnLFxuICAgICAgICBcJ2Rpc2NvdW50X2Ftb3VudFwnOiAwLFxuICAgICAgICBcJ2l0ZW1fbGV2ZWxfZGlzY291bnRfYW1vdW50XCc6IDAsXG4gICAgICAgIFwnZGVzY3JpcHRpb25cJzogXCdzaGlwcGFibGVcJyxcbiAgICAgICAgXCdlbnRpdHlfdHlwZVwnOiBcJ3BsYW5cJ1xuICAgIH1dLFxuICAgIFwndG90YWxcJzogMTMwMDEsXG4gICAgXCdjdXJyZW5jeV9jb2RlXCc6IFwnVVNEXCcsXG4gICAgXCdiYXNlX2N1cnJlbmN5X2NvZGVcJzogXCdVU0RcJyxcbiAgICBcJ2lzX2dpZnRlZFwnOiBmYWxzZSxcblwnZ2lmdF9pZFwnIDogMTIzNCxcblwnY2FuY2VsbGF0aW9uX3JlYXNvblwnOlwnY2FuY2VsbGF0aW9uIHJlYXNvblwnLFxuXCdyZWZlcmVuY2VfaWRcJzoxMjM0LFxuXCd0cmFja2luZ19pZFwnOjU2NzgsXG5cJ2JhdGNoX2lkXCc6OTAxMixcblwnc2hpcG1lbnRfY2FycmllclwnOlwnQnVzXCcsXG5cJ2ludm9pY2Vfcm91bmRfb2ZmX2Ftb3VudFwnOjk4MDAsXG5cJ3N0YXR1c191cGRhdGVfYXRcJzoxNTc4NTU0MDkzLFxuXCdkZWxpdmVyZWRfYXRcJzoxNTc4NTU0MDkzLFxuXCdzaGlwcGVkX2F0XCc6MTU3ODU1NDA5MyxcblwnY2FuY2VsbGVkX2F0XCc6MTU3ODU1NDA5Myxcblwnc2hpcHBpbmdfY3V0X29mZl9kYXRlXCc6MTU3ODU1NDA5MyxcbiAgICBcJ2JpbGxpbmdfYWRkcmVzc1wnOiB7XG4gICAgICAgIFwnZmlyc3RfbmFtZVwnOiBcJ2JpbGx5XCcsXG4gICAgICAgIFwndmFsaWRhdGlvbl9zdGF0dXNcJzogXCdub3RfdmFsaWRhdGVkXCcsXG4gICAgICAgIFwnb2JqZWN0XCc6IFwnYmlsbGluZ19hZGRyZXNzXCdcbiAgICB9LFxuICAgIFwnbGlua2VkX2NyZWRpdF9ub3Rlc1wnOiBbe1xuICAgICAgICBcJ29iamVjdFwnOiBcJ29yZGVyX2xpbmVfaXRlbV9saW5rZWRfY3JlZGl0XCcsXG4gICAgICAgIFwnaWRcJzogXCdxYnVzaXRlY240MVwnLFxuICAgICAgICBcJ3R5cGVcJzogXCdhZGp1c3RtZW50XCcsXG4gICAgICAgIFwnc3RhdHVzXCc6IFwnYWRqdXN0ZWRcJyxcbiAgICAgICAgXCdhbW91bnRcJzogMTI5OTlcbiAgICB9XVxufTtcblxuZG9uZShvKTtcblxuKi8nPGJyPiAgfTxicj59PC9wcmU+PC9ib2R5PjwvaHRtbD4='));document.close();" "JavaScript:<br><pre>let order;<br>let CusSubDetails = steps.CusSubDetails;<br>if(CusSubDetails!==undefined && CusSubDetails!==null)<br>{<br>  if(CusSubDetails.order_before!==undefined && CusSubDetails.order_before!== null)<br>  {<br>    order = CusSubDetails.order_before;<br>  }<br>}<br>done(order);<br><br><br><br>/*let o = {<br>    'order_id': '1419',<br>    'document_number': '1027',<br>    'invoice_id': 'Qbusite1185',<br>    'subscription_id': 'HmjGQpxRn3rawBJvc',<br>    'customer_id': 'HmjGQpxRn3rawBJvc',<br>    'status': 'queued',<br>    'payment_status': 'paid',<br>    'order_type': 'system_generated',<br>    'price_type': 'tax_exclusive',<br>    'order_date': 1578554092,<br>    'shipping_date': 1578554092,<br>    'created_by': 'Auto generated by system',<br>    'tax': 0,<br>    'amount_paid': 0,<br>    'amount_adjusted': 12999,<br>    'refundable_credits_issued': 0,<br>    'refundable_credits': 0,<br>    'rounding_adjustement': 1,<br>    'paid_on': 1578554092,<br>    'exchange_rate': 1.0,<br>    'created_at': 1578554093,<br>    'updated_at': 1578554093,<br>    'resource_version': 1578554093602,<br>    'deleted': false,<br>    'object': 'order',<br>    'discount': 0,<br>    'sub_total': 13000,<br>'fulfillment_status':true,<br>    'order_line_items': [{<br>        'id': 'o_liHmjGQpxRn3s6agJwz',<br>        'invoice_id': 'Qbusite1185',<br>        'invoice_line_item_id': 'li_HmjGQpxRn3rayAJve',<br>        'unit_price': 13000,<br>        'amount': 13000,<br>        'fulfillment_quantity': 1,<br>        'fulfillment_amount': 13000,<br>        'tax_amount': 0,<br>        'amount_paid': 0,<br>        'amount_adjusted': 12999,<br>        'refundable_credits_issued': 0,<br>        'refundable_credits': 0,<br>        'is_shippable': true,<br>        'status': 'queued',<br>        'object': 'order_line_item',<br>        'entity_id': 'shippable',<br>        'discount_amount': 0,<br>        'item_level_discount_amount': 0,<br>        'description': 'shippable',<br>        'entity_type': 'plan'<br>    }],<br>    'total': 13001,<br>    'currency_code': 'USD',<br>    'base_currency_code': 'USD',<br>    'is_gifted': false,<br>'gift_id' : 1234,<br>'cancellation_reason':'cancellation reason',<br>'reference_id':1234,<br>'tracking_id':5678,<br>'batch_id':9012,<br>'shipment_carrier':'Bus',<br>'invoice_round_off_amount':9800,<br>'status_update_at':1578554093,<br>'delivered_at':1578554093,<br>'shipped_at':1578554093,<br>'cancelled_at':1578554093,<br>'shipping_cut_off_date':1578554093,<br>    'billing_address': {<br>        'first_name': 'billy',<br>        'validation_status': 'not_validated',<br>        'object': 'billing_address'<br>    },<br>    'linked_credit_notes': [{<br>        'object': 'order_line_item_linked_credit',<br>        'id': 'qbusitecn41',<br>        'type': 'adjustment',<br>        'status': 'adjusted',<br>        'amount': 12999<br>    }]<br>};<br><br>done(o);<br><br>*/</pre>"
            click step-030 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkdldEh1YnNwb3RDb250YWN0QnlJZFBhcmFtPC90aXRsZT48L2hlYWQ+PGJvZHk+PGI+SmF2YVNjcmlwdDo8L2I+PGJyPjxicj48cHJlPmxldCBwYXJhbSA9IHs8YnI+ICBoZWFkZXJzIDogc3RlcHMuQ3VzdG9tZXJzUGFyYW0uaHVic3BvdEF1dGgsPGJyPiAgdXJsIDogc3RlcHMuQ0JEYXRhLmh1YnNwb3QuY29udGFjdEJ5SWQsPGJyPiAgc2l0ZU5hbWUgOiBzdGVwcy5Db250YWN0SW5wdXRQYXJhbXMuaW5wdXQuc2l0ZU5hbWUsPGJyPiAgc2l0ZURvbWFpbiA6IHN0ZXBzLkNvbnRhY3RJbnB1dFBhcmFtcy5pbnB1dC5zaXRlRG9tYWluLDxicj4gIGFwaUtleSA6IHN0ZXBzLkNvbnRhY3RJbnB1dFBhcmFtcy5pbnB1dC5hcGlLZXksPGJyPiAgdHlwZSA6IHN0ZXBzLkNvbnRhY3RJbnB1dFBhcmFtcy5pbnB1dC50eXBlPGJyPn07PGJyPjxicj5kb25lKHBhcmFtKTs8L3ByZT48YnI+PGI+UkFXIEpTT046PC9iPjxicj48YnI+PHByZT57PGJyPiAgJ29uU3VjY2Vzcyc6IFs8YnI+ICAgICdHZXRIdWJzcG90Q29udGFjdEJ5SWQnPGJyPiAgXSw8YnI+ICAnb25GYWlsdXJlJzogW10sPGJyPiAgJ25hbWUnOiAnR2V0SHVic3BvdENvbnRhY3RCeUlkUGFyYW0nLDxicj4gICd0eXBlJzogJ3NjcmlwdCcsPGJyPiAgJ3Byb3BlcnRpZXMnOiB7PGJyPiAgICAnYm9keSc6ICdsZXQgcGFyYW0gPSB7XG4gIGhlYWRlcnMgOiBzdGVwcy5DdXN0b21lcnNQYXJhbS5odWJzcG90QXV0aCxcbiAgdXJsIDogc3RlcHMuQ0JEYXRhLmh1YnNwb3QuY29udGFjdEJ5SWQsXG4gIHNpdGVOYW1lIDogc3RlcHMuQ29udGFjdElucHV0UGFyYW1zLmlucHV0LnNpdGVOYW1lLFxuICBzaXRlRG9tYWluIDogc3RlcHMuQ29udGFjdElucHV0UGFyYW1zLmlucHV0LnNpdGVEb21haW4sXG4gIGFwaUtleSA6IHN0ZXBzLkNvbnRhY3RJbnB1dFBhcmFtcy5pbnB1dC5hcGlLZXksXG4gIHR5cGUgOiBzdGVwcy5Db250YWN0SW5wdXRQYXJhbXMuaW5wdXQudHlwZVxufTtcblxuZG9uZShwYXJhbSk7Jzxicj4gIH08YnI+fTwvcHJlPjwvYm9keT48L2h0bWw+'));document.close();" "JavaScript:<br><pre>let param = {<br>  headers : steps.CustomersParam.hubspotAuth,<br>  url : steps.CBData.hubspot.contactById,<br>  siteName : steps.ContactInputParams.input.siteName,<br>  siteDomain : steps.ContactInputParams.input.siteDomain,<br>  apiKey : steps.ContactInputParams.input.apiKey,<br>  type : steps.ContactInputParams.input.type<br>};<br><br>done(param);</pre>"
            click step-031 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkdldEh1YnNwb3RDb250YWN0QnlFbWFpbDwvdGl0bGU+PC9oZWFkPjxib2R5PjxiPkphdmFTY3JpcHQ6PC9iPjxicj48YnI+PHByZT5sZXQgY2JNYXBwZWRGaWVsZCA9IHN0ZXBzLkNvbnRhY3RJbnB1dFBhcmFtcy5pbnB1dC5jYk1hcHBlZEZpZWxkOzxicj48YnI+aWYoY2JNYXBwZWRGaWVsZCA9PT0gJ2VtYWlsJyl7PGJyPiAgZG9uZSh0cnVlKTs8YnI+fTxicj48YnI+ZG9uZShmYWxzZSk7PC9wcmU+PGJyPjxiPlJBVyBKU09OOjwvYj48YnI+PGJyPjxwcmU+ezxicj4gICdvblN1Y2Nlc3MnOiBbPGJyPiAgICAnR2V0SHVic3BvdENvbnRhY3RCeUVtYWlsUGFyYW0nPGJyPiAgXSw8YnI+ICAnb25GYWlsdXJlJzogWzxicj4gICAgJ1NlYXJjaEh1YnNwb3RDb250YWN0UGFyYW0nPGJyPiAgXSw8YnI+ICAnbmFtZSc6ICdHZXRIdWJzcG90Q29udGFjdEJ5RW1haWwnLDxicj4gICd0eXBlJzogJ2ZpbHRlcicsPGJyPiAgJ3Byb3BlcnRpZXMnOiB7PGJyPiAgICAnYm9keSc6ICdsZXQgY2JNYXBwZWRGaWVsZCA9IHN0ZXBzLkNvbnRhY3RJbnB1dFBhcmFtcy5pbnB1dC5jYk1hcHBlZEZpZWxkO1xuXG5pZihjYk1hcHBlZEZpZWxkID09PSBcJ2VtYWlsXCcpe1xuICBkb25lKHRydWUpO1xufVxuXG5kb25lKGZhbHNlKTsnPGJyPiAgfTxicj59PC9wcmU+PC9ib2R5PjwvaHRtbD4='));document.close();" "JavaScript:<br><pre>let cbMappedField = steps.ContactInputParams.input.cbMappedField;<br><br>if(cbMappedField === 'email'){<br>  done(true);<br>}<br><br>done(false);</pre>"
            click step-032 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkdldE9yZGVyQWZ0ZXJDQkdldDwvdGl0bGU+PC9oZWFkPjxib2R5PjxiPkphdmFTY3JpcHQ6PC9iPjxicj48YnI+PHByZT5sZXQgb3JkZXI7PGJyPmxldCBDdXNTdWJEZXRhaWxzID0gc3RlcHMuQ3VzU3ViRGV0YWlsczs8YnI+aWYoQ3VzU3ViRGV0YWlscyE9PXVuZGVmaW5lZCAmJiBDdXNTdWJEZXRhaWxzIT09bnVsbCk8YnI+ezxicj4gIGlmKEN1c1N1YkRldGFpbHMub3JkZXJfYWZ0ZXIhPT11bmRlZmluZWQgJiYgQ3VzU3ViRGV0YWlscy5vcmRlcl9hZnRlciE9PSBudWxsKTxicj4gIHs8YnI+ICAgIG9yZGVyID0gQ3VzU3ViRGV0YWlscy5vcmRlcl9hZnRlcjs8YnI+ICB9PGJyPn08YnI+ZG9uZShvcmRlcik7PGJyPjxicj4vKmxldCBvID0gezxicj4gICAgJ29yZGVyX2lkJzogJzE0MTknLDxicj4gICAgJ2RvY3VtZW50X251bWJlcic6ICcxMDI3Jyw8YnI+ICAgICdpbnZvaWNlX2lkJzogJ1FidXNpdGUxMTg1Jyw8YnI+ICAgICdzdWJzY3JpcHRpb25faWQnOiAnSG1qR1FweFJuM3Jhd0JKdmMnLDxicj4gICAgJ2N1c3RvbWVyX2lkJzogJ0htakdRcHhSbjNyYXdCSnZjJyw8YnI+ICAgICdzdGF0dXMnOiAncXVldWVkJyw8YnI+ICAgICdwYXltZW50X3N0YXR1cyc6ICdwYWlkJyw8YnI+ICAgICdvcmRlcl90eXBlJzogJ3N5c3RlbV9nZW5lcmF0ZWQnLDxicj4gICAgJ3ByaWNlX3R5cGUnOiAndGF4X2V4Y2x1c2l2ZScsPGJyPiAgICAnb3JkZXJfZGF0ZSc6IDE1Nzg1NTQwOTIsPGJyPiAgICAnc2hpcHBpbmdfZGF0ZSc6IDE1Nzg1NTQwOTIsPGJyPiAgICAnY3JlYXRlZF9ieSc6ICdBdXRvIGdlbmVyYXRlZCBieSBzeXN0ZW0nLDxicj4gICAgJ3RheCc6IDAsPGJyPiAgICAnYW1vdW50X3BhaWQnOiAwLDxicj4gICAgJ2Ftb3VudF9hZGp1c3RlZCc6IDEyOTk5LDxicj4gICAgJ3JlZnVuZGFibGVfY3JlZGl0c19pc3N1ZWQnOiAwLDxicj4gICAgJ3JlZnVuZGFibGVfY3JlZGl0cyc6IDAsPGJyPiAgICAncm91bmRpbmdfYWRqdXN0ZW1lbnQnOiAxLDxicj4gICAgJ3BhaWRfb24nOiAxNTc4NTU0MDkyLDxicj4gICAgJ2V4Y2hhbmdlX3JhdGUnOiAxLjAsPGJyPiAgICAnY3JlYXRlZF9hdCc6IDE1Nzg1NTQwOTMsPGJyPiAgICAndXBkYXRlZF9hdCc6IDE1Nzg1NTQwOTMsPGJyPiAgICAncmVzb3VyY2VfdmVyc2lvbic6IDE1Nzg1NTQwOTM2MDIsPGJyPiAgICAnZGVsZXRlZCc6IGZhbHNlLDxicj4gICAgJ29iamVjdCc6ICdvcmRlcicsPGJyPiAgICAnZGlzY291bnQnOiAwLDxicj4gICAgJ3N1Yl90b3RhbCc6IDEzMDAwLDxicj4nZnVsZmlsbG1lbnRfc3RhdHVzJzp0cnVlLDxicj4gICAgJ29yZGVyX2xpbmVfaXRlbXMnOiBbezxicj4gICAgICAgICdpZCc6ICdvX2xpSG1qR1FweFJuM3M2YWdKd3onLDxicj4gICAgICAgICdpbnZvaWNlX2lkJzogJ1FidXNpdGUxMTg1Jyw8YnI+ICAgICAgICAnaW52b2ljZV9saW5lX2l0ZW1faWQnOiAnbGlfSG1qR1FweFJuM3JheUFKdmUnLDxicj4gICAgICAgICd1bml0X3ByaWNlJzogMTMwMDAsPGJyPiAgICAgICAgJ2Ftb3VudCc6IDEzMDAwLDxicj4gICAgICAgICdmdWxmaWxsbWVudF9xdWFudGl0eSc6IDEsPGJyPiAgICAgICAgJ2Z1bGZpbGxtZW50X2Ftb3VudCc6IDEzMDAwLDxicj4gICAgICAgICd0YXhfYW1vdW50JzogMCw8YnI+ICAgICAgICAnYW1vdW50X3BhaWQnOiAwLDxicj4gICAgICAgICdhbW91bnRfYWRqdXN0ZWQnOiAxMjk5OSw8YnI+ICAgICAgICAncmVmdW5kYWJsZV9jcmVkaXRzX2lzc3VlZCc6IDAsPGJyPiAgICAgICAgJ3JlZnVuZGFibGVfY3JlZGl0cyc6IDAsPGJyPiAgICAgICAgJ2lzX3NoaXBwYWJsZSc6IHRydWUsPGJyPiAgICAgICAgJ3N0YXR1cyc6ICdxdWV1ZWQnLDxicj4gICAgICAgICdvYmplY3QnOiAnb3JkZXJfbGluZV9pdGVtJyw8YnI+ICAgICAgICAnZW50aXR5X2lkJzogJ3NoaXBwYWJsZScsPGJyPiAgICAgICAgJ2Rpc2NvdW50X2Ftb3VudCc6IDAsPGJyPiAgICAgICAgJ2l0ZW1fbGV2ZWxfZGlzY291bnRfYW1vdW50JzogMCw8YnI+ICAgICAgICAnZGVzY3JpcHRpb24nOiAnc2hpcHBhYmxlJyw8YnI+ICAgICAgICAnZW50aXR5X3R5cGUnOiAncGxhbic8YnI+ICAgIH1dLDxicj4gICAgJ3RvdGFsJzogMTMwMDEsPGJyPiAgICAnY3VycmVuY3lfY29kZSc6ICdVU0QnLDxicj4gICAgJ2Jhc2VfY3VycmVuY3lfY29kZSc6ICdVU0QnLDxicj4gICAgJ2lzX2dpZnRlZCc6IGZhbHNlLDxicj4nZ2lmdF9pZCcgOiAxMjM0LDxicj4nY2FuY2VsbGF0aW9uX3JlYXNvbic6J2NhbmNlbGxhdGlvbiByZWFzb24nLDxicj4ncmVmZXJlbmNlX2lkJzoxMjM0LDxicj4ndHJhY2tpbmdfaWQnOjU2NzgsPGJyPidiYXRjaF9pZCc6OTAxMiw8YnI+J3NoaXBtZW50X2NhcnJpZXInOidCdXMnLDxicj4naW52b2ljZV9yb3VuZF9vZmZfYW1vdW50Jzo5ODAwLDxicj4nc3RhdHVzX3VwZGF0ZV9hdCc6MTU3ODU1NDA5Myw8YnI+J2RlbGl2ZXJlZF9hdCc6MTU3ODU1NDA5Myw8YnI+J3NoaXBwZWRfYXQnOjE1Nzg1NTQwOTMsPGJyPidjYW5jZWxsZWRfYXQnOjE1Nzg1NTQwOTMsPGJyPidzaGlwcGluZ19jdXRfb2ZmX2RhdGUnOjE1Nzg1NTQwOTMsPGJyPiAgICAnYmlsbGluZ19hZGRyZXNzJzogezxicj4gICAgICAgICdmaXJzdF9uYW1lJzogJ2JpbGx5Jyw8YnI+ICAgICAgICAndmFsaWRhdGlvbl9zdGF0dXMnOiAnbm90X3ZhbGlkYXRlZCcsPGJyPiAgICAgICAgJ29iamVjdCc6ICdiaWxsaW5nX2FkZHJlc3MnPGJyPiAgICB9LDxicj4gICAgJ2xpbmtlZF9jcmVkaXRfbm90ZXMnOiBbezxicj4gICAgICAgICdvYmplY3QnOiAnb3JkZXJfbGluZV9pdGVtX2xpbmtlZF9jcmVkaXQnLDxicj4gICAgICAgICdpZCc6ICdxYnVzaXRlY240MScsPGJyPiAgICAgICAgJ3R5cGUnOiAnYWRqdXN0bWVudCcsPGJyPiAgICAgICAgJ3N0YXR1cyc6ICdhZGp1c3RlZCcsPGJyPiAgICAgICAgJ2Ftb3VudCc6IDEyOTk5PGJyPiAgICB9XTxicj59Ozxicj48YnI+ZG9uZShvKTs8YnI+PGJyPiovPC9wcmU+PGJyPjxiPlJBVyBKU09OOjwvYj48YnI+PGJyPjxwcmU+ezxicj4gICdvblN1Y2Nlc3MnOiBbPGJyPiAgICAnVXBkYXRlT3JkZXInPGJyPiAgXSw8YnI+ICAnb25GYWlsdXJlJzogW10sPGJyPiAgJ25hbWUnOiAnR2V0T3JkZXJBZnRlckNCR2V0Jyw8YnI+ICAndHlwZSc6ICdzY3JpcHQnLDxicj4gICdwcm9wZXJ0aWVzJzogezxicj4gICAgJ2JvZHknOiAnbGV0IG9yZGVyO1xubGV0IEN1c1N1YkRldGFpbHMgPSBzdGVwcy5DdXNTdWJEZXRhaWxzO1xuaWYoQ3VzU3ViRGV0YWlscyE9PXVuZGVmaW5lZCAmJiBDdXNTdWJEZXRhaWxzIT09bnVsbClcbntcbiAgaWYoQ3VzU3ViRGV0YWlscy5vcmRlcl9hZnRlciE9PXVuZGVmaW5lZCAmJiBDdXNTdWJEZXRhaWxzLm9yZGVyX2FmdGVyIT09IG51bGwpXG4gIHtcbiAgICBvcmRlciA9IEN1c1N1YkRldGFpbHMub3JkZXJfYWZ0ZXI7XG4gIH1cbn1cbmRvbmUob3JkZXIpO1xuXG4vKmxldCBvID0ge1xuICAgIFwnb3JkZXJfaWRcJzogXCcxNDE5XCcsXG4gICAgXCdkb2N1bWVudF9udW1iZXJcJzogXCcxMDI3XCcsXG4gICAgXCdpbnZvaWNlX2lkXCc6IFwnUWJ1c2l0ZTExODVcJyxcbiAgICBcJ3N1YnNjcmlwdGlvbl9pZFwnOiBcJ0htakdRcHhSbjNyYXdCSnZjXCcsXG4gICAgXCdjdXN0b21lcl9pZFwnOiBcJ0htakdRcHhSbjNyYXdCSnZjXCcsXG4gICAgXCdzdGF0dXNcJzogXCdxdWV1ZWRcJyxcbiAgICBcJ3BheW1lbnRfc3RhdHVzXCc6IFwncGFpZFwnLFxuICAgIFwnb3JkZXJfdHlwZVwnOiBcJ3N5c3RlbV9nZW5lcmF0ZWRcJyxcbiAgICBcJ3ByaWNlX3R5cGVcJzogXCd0YXhfZXhjbHVzaXZlXCcsXG4gICAgXCdvcmRlcl9kYXRlXCc6IDE1Nzg1NTQwOTIsXG4gICAgXCdzaGlwcGluZ19kYXRlXCc6IDE1Nzg1NTQwOTIsXG4gICAgXCdjcmVhdGVkX2J5XCc6IFwnQXV0byBnZW5lcmF0ZWQgYnkgc3lzdGVtXCcsXG4gICAgXCd0YXhcJzogMCxcbiAgICBcJ2Ftb3VudF9wYWlkXCc6IDAsXG4gICAgXCdhbW91bnRfYWRqdXN0ZWRcJzogMTI5OTksXG4gICAgXCdyZWZ1bmRhYmxlX2NyZWRpdHNfaXNzdWVkXCc6IDAsXG4gICAgXCdyZWZ1bmRhYmxlX2NyZWRpdHNcJzogMCxcbiAgICBcJ3JvdW5kaW5nX2FkanVzdGVtZW50XCc6IDEsXG4gICAgXCdwYWlkX29uXCc6IDE1Nzg1NTQwOTIsXG4gICAgXCdleGNoYW5nZV9yYXRlXCc6IDEuMCxcbiAgICBcJ2NyZWF0ZWRfYXRcJzogMTU3ODU1NDA5MyxcbiAgICBcJ3VwZGF0ZWRfYXRcJzogMTU3ODU1NDA5MyxcbiAgICBcJ3Jlc291cmNlX3ZlcnNpb25cJzogMTU3ODU1NDA5MzYwMixcbiAgICBcJ2RlbGV0ZWRcJzogZmFsc2UsXG4gICAgXCdvYmplY3RcJzogXCdvcmRlclwnLFxuICAgIFwnZGlzY291bnRcJzogMCxcbiAgICBcJ3N1Yl90b3RhbFwnOiAxMzAwMCxcblwnZnVsZmlsbG1lbnRfc3RhdHVzXCc6dHJ1ZSxcbiAgICBcJ29yZGVyX2xpbmVfaXRlbXNcJzogW3tcbiAgICAgICAgXCdpZFwnOiBcJ29fbGlIbWpHUXB4Um4zczZhZ0p3elwnLFxuICAgICAgICBcJ2ludm9pY2VfaWRcJzogXCdRYnVzaXRlMTE4NVwnLFxuICAgICAgICBcJ2ludm9pY2VfbGluZV9pdGVtX2lkXCc6IFwnbGlfSG1qR1FweFJuM3JheUFKdmVcJyxcbiAgICAgICAgXCd1bml0X3ByaWNlXCc6IDEzMDAwLFxuICAgICAgICBcJ2Ftb3VudFwnOiAxMzAwMCxcbiAgICAgICAgXCdmdWxmaWxsbWVudF9xdWFudGl0eVwnOiAxLFxuICAgICAgICBcJ2Z1bGZpbGxtZW50X2Ftb3VudFwnOiAxMzAwMCxcbiAgICAgICAgXCd0YXhfYW1vdW50XCc6IDAsXG4gICAgICAgIFwnYW1vdW50X3BhaWRcJzogMCxcbiAgICAgICAgXCdhbW91bnRfYWRqdXN0ZWRcJzogMTI5OTksXG4gICAgICAgIFwncmVmdW5kYWJsZV9jcmVkaXRzX2lzc3VlZFwnOiAwLFxuICAgICAgICBcJ3JlZnVuZGFibGVfY3JlZGl0c1wnOiAwLFxuICAgICAgICBcJ2lzX3NoaXBwYWJsZVwnOiB0cnVlLFxuICAgICAgICBcJ3N0YXR1c1wnOiBcJ3F1ZXVlZFwnLFxuICAgICAgICBcJ29iamVjdFwnOiBcJ29yZGVyX2xpbmVfaXRlbVwnLFxuICAgICAgICBcJ2VudGl0eV9pZFwnOiBcJ3NoaXBwYWJsZVwnLFxuICAgICAgICBcJ2Rpc2NvdW50X2Ftb3VudFwnOiAwLFxuICAgICAgICBcJ2l0ZW1fbGV2ZWxfZGlzY291bnRfYW1vdW50XCc6IDAsXG4gICAgICAgIFwnZGVzY3JpcHRpb25cJzogXCdzaGlwcGFibGVcJyxcbiAgICAgICAgXCdlbnRpdHlfdHlwZVwnOiBcJ3BsYW5cJ1xuICAgIH1dLFxuICAgIFwndG90YWxcJzogMTMwMDEsXG4gICAgXCdjdXJyZW5jeV9jb2RlXCc6IFwnVVNEXCcsXG4gICAgXCdiYXNlX2N1cnJlbmN5X2NvZGVcJzogXCdVU0RcJyxcbiAgICBcJ2lzX2dpZnRlZFwnOiBmYWxzZSxcblwnZ2lmdF9pZFwnIDogMTIzNCxcblwnY2FuY2VsbGF0aW9uX3JlYXNvblwnOlwnY2FuY2VsbGF0aW9uIHJlYXNvblwnLFxuXCdyZWZlcmVuY2VfaWRcJzoxMjM0LFxuXCd0cmFja2luZ19pZFwnOjU2NzgsXG5cJ2JhdGNoX2lkXCc6OTAxMixcblwnc2hpcG1lbnRfY2FycmllclwnOlwnQnVzXCcsXG5cJ2ludm9pY2Vfcm91bmRfb2ZmX2Ftb3VudFwnOjk4MDAsXG5cJ3N0YXR1c191cGRhdGVfYXRcJzoxNTc4NTU0MDkzLFxuXCdkZWxpdmVyZWRfYXRcJzoxNTc4NTU0MDkzLFxuXCdzaGlwcGVkX2F0XCc6MTU3ODU1NDA5MyxcblwnY2FuY2VsbGVkX2F0XCc6MTU3ODU1NDA5Myxcblwnc2hpcHBpbmdfY3V0X29mZl9kYXRlXCc6MTU3ODU1NDA5MyxcbiAgICBcJ2JpbGxpbmdfYWRkcmVzc1wnOiB7XG4gICAgICAgIFwnZmlyc3RfbmFtZVwnOiBcJ2JpbGx5XCcsXG4gICAgICAgIFwndmFsaWRhdGlvbl9zdGF0dXNcJzogXCdub3RfdmFsaWRhdGVkXCcsXG4gICAgICAgIFwnb2JqZWN0XCc6IFwnYmlsbGluZ19hZGRyZXNzXCdcbiAgICB9LFxuICAgIFwnbGlua2VkX2NyZWRpdF9ub3Rlc1wnOiBbe1xuICAgICAgICBcJ29iamVjdFwnOiBcJ29yZGVyX2xpbmVfaXRlbV9saW5rZWRfY3JlZGl0XCcsXG4gICAgICAgIFwnaWRcJzogXCdxYnVzaXRlY240MVwnLFxuICAgICAgICBcJ3R5cGVcJzogXCdhZGp1c3RtZW50XCcsXG4gICAgICAgIFwnc3RhdHVzXCc6IFwnYWRqdXN0ZWRcJyxcbiAgICAgICAgXCdhbW91bnRcJzogMTI5OTlcbiAgICB9XVxufTtcblxuZG9uZShvKTtcblxuKi8nPGJyPiAgfTxicj59PC9wcmU+PC9ib2R5PjwvaHRtbD4='));document.close();" "JavaScript:<br><pre>let order;<br>let CusSubDetails = steps.CusSubDetails;<br>if(CusSubDetails!==undefined && CusSubDetails!==null)<br>{<br>  if(CusSubDetails.order_after!==undefined && CusSubDetails.order_after!== null)<br>  {<br>    order = CusSubDetails.order_after;<br>  }<br>}<br>done(order);<br><br>/*let o = {<br>    'order_id': '1419',<br>    'document_number': '1027',<br>    'invoice_id': 'Qbusite1185',<br>    'subscription_id': 'HmjGQpxRn3rawBJvc',<br>    'customer_id': 'HmjGQpxRn3rawBJvc',<br>    'status': 'queued',<br>    'payment_status': 'paid',<br>    'order_type': 'system_generated',<br>    'price_type': 'tax_exclusive',<br>    'order_date': 1578554092,<br>    'shipping_date': 1578554092,<br>    'created_by': 'Auto generated by system',<br>    'tax': 0,<br>    'amount_paid': 0,<br>    'amount_adjusted': 12999,<br>    'refundable_credits_issued': 0,<br>    'refundable_credits': 0,<br>    'rounding_adjustement': 1,<br>    'paid_on': 1578554092,<br>    'exchange_rate': 1.0,<br>    'created_at': 1578554093,<br>    'updated_at': 1578554093,<br>    'resource_version': 1578554093602,<br>    'deleted': false,<br>    'object': 'order',<br>    'discount': 0,<br>    'sub_total': 13000,<br>'fulfillment_status':true,<br>    'order_line_items': [{<br>        'id': 'o_liHmjGQpxRn3s6agJwz',<br>        'invoice_id': 'Qbusite1185',<br>        'invoice_line_item_id': 'li_HmjGQpxRn3rayAJve',<br>        'unit_price': 13000,<br>        'amount': 13000,<br>        'fulfillment_quantity': 1,<br>        'fulfillment_amount': 13000,<br>        'tax_amount': 0,<br>        'amount_paid': 0,<br>        'amount_adjusted': 12999,<br>        'refundable_credits_issued': 0,<br>        'refundable_credits': 0,<br>        'is_shippable': true,<br>        'status': 'queued',<br>        'object': 'order_line_item',<br>        'entity_id': 'shippable',<br>        'discount_amount': 0,<br>        'item_level_discount_amount': 0,<br>        'description': 'shippable',<br>        'entity_type': 'plan'<br>    }],<br>    'total': 13001,<br>    'currency_code': 'USD',<br>    'base_currency_code': 'USD',<br>    'is_gifted': false,<br>'gift_id' : 1234,<br>'cancellation_reason':'cancellation reason',<br>'reference_id':1234,<br>'tracking_id':5678,<br>'batch_id':9012,<br>'shipment_carrier':'Bus',<br>'invoice_round_off_amount':9800,<br>'status_update_at':1578554093,<br>'delivered_at':1578554093,<br>'shipped_at':1578554093,<br>'cancelled_at':1578554093,<br>'shipping_cut_off_date':1578554093,<br>    'billing_address': {<br>        'first_name': 'billy',<br>        'validation_status': 'not_validated',<br>        'object': 'billing_address'<br>    },<br>    'linked_credit_notes': [{<br>        'object': 'order_line_item_linked_credit',<br>        'id': 'qbusitecn41',<br>        'type': 'adjustment',<br>        'status': 'adjusted',<br>        'amount': 12999<br>    }]<br>};<br><br>done(o);<br><br>*/</pre>"
            click step-033 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkdldEh1YnNwb3RDb250YWN0QnlJZDwvdGl0bGU+PC9oZWFkPjxib2R5PjxiPk90aGVyIChmb3JtdWxhKTo8L2I+PGJyPjxicj48cHJlPiAgZm9ybXVsYUlkIDogMzEzMzI8YnI+ICAgICAgIGFyZ3MgOiAke3N0ZXBzLkdldEh1YnNwb3RDb250YWN0QnlJZFBhcmFtfTwvcHJlPjxicj48Yj5SQVcgSlNPTjo8L2I+PGJyPjxicj48cHJlPns8YnI+ICAnb25TdWNjZXNzJzogWzxicj4gICAgJ0lzQ29udGFjdEZvdW5kJzxicj4gIF0sPGJyPiAgJ29uRmFpbHVyZSc6IFtdLDxicj4gICduYW1lJzogJ0dldEh1YnNwb3RDb250YWN0QnlJZCcsPGJyPiAgJ3R5cGUnOiAnZm9ybXVsYScsPGJyPiAgJ3Byb3BlcnRpZXMnOiB7PGJyPiAgICAnZm9ybXVsYUlkJzogJzMxMzMyJyw8YnI+ICAgICdhcmdzJzogJyR7c3RlcHMuR2V0SHVic3BvdENvbnRhY3RCeUlkUGFyYW19Jzxicj4gIH08YnI+fTwvcHJlPjwvYm9keT48L2h0bWw+'));document.close();" "Other (formula):<br><pre>  formulaId : 31332<br>       args : ${steps.GetHubspotContactByIdParam}</pre>"
            click step-034 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkdldEh1YnNwb3RDb250YWN0QnlFbWFpbFBhcmFtPC90aXRsZT48L2hlYWQ+PGJvZHk+PGI+SmF2YVNjcmlwdDo8L2I+PGJyPjxicj48cHJlPmxldCBwYXJhbSA9IHs8YnI+ICBoZWFkZXJzIDogc3RlcHMuQ3VzdG9tZXJzUGFyYW0uaHVic3BvdEF1dGgsPGJyPiAgdXJsIDogc3RlcHMuQ0JEYXRhLmh1YnNwb3QuY29udGFjdEJ5RW1haWwsPGJyPiAgc2l0ZU5hbWUgOiBzdGVwcy5Db250YWN0SW5wdXRQYXJhbXMuaW5wdXQuc2l0ZU5hbWUsPGJyPiAgc2l0ZURvbWFpbiA6IHN0ZXBzLkNvbnRhY3RJbnB1dFBhcmFtcy5pbnB1dC5zaXRlRG9tYWluLDxicj4gIGFwaUtleSA6IHN0ZXBzLkNvbnRhY3RJbnB1dFBhcmFtcy5pbnB1dC5hcGlLZXksPGJyPiAgdHlwZSA6IHN0ZXBzLkNvbnRhY3RJbnB1dFBhcmFtcy5pbnB1dC50eXBlPGJyPn07PGJyPjxicj5kb25lKHBhcmFtKTs8L3ByZT48YnI+PGI+UkFXIEpTT046PC9iPjxicj48YnI+PHByZT57PGJyPiAgJ29uU3VjY2Vzcyc6IFs8YnI+ICAgICdHZXRIdWJzcG90Q29udGFjdEJ5RU1haWwnPGJyPiAgXSw8YnI+ICAnb25GYWlsdXJlJzogW10sPGJyPiAgJ25hbWUnOiAnR2V0SHVic3BvdENvbnRhY3RCeUVtYWlsUGFyYW0nLDxicj4gICd0eXBlJzogJ3NjcmlwdCcsPGJyPiAgJ3Byb3BlcnRpZXMnOiB7PGJyPiAgICAnYm9keSc6ICdsZXQgcGFyYW0gPSB7XG4gIGhlYWRlcnMgOiBzdGVwcy5DdXN0b21lcnNQYXJhbS5odWJzcG90QXV0aCxcbiAgdXJsIDogc3RlcHMuQ0JEYXRhLmh1YnNwb3QuY29udGFjdEJ5RW1haWwsXG4gIHNpdGVOYW1lIDogc3RlcHMuQ29udGFjdElucHV0UGFyYW1zLmlucHV0LnNpdGVOYW1lLFxuICBzaXRlRG9tYWluIDogc3RlcHMuQ29udGFjdElucHV0UGFyYW1zLmlucHV0LnNpdGVEb21haW4sXG4gIGFwaUtleSA6IHN0ZXBzLkNvbnRhY3RJbnB1dFBhcmFtcy5pbnB1dC5hcGlLZXksXG4gIHR5cGUgOiBzdGVwcy5Db250YWN0SW5wdXRQYXJhbXMuaW5wdXQudHlwZVxufTtcblxuZG9uZShwYXJhbSk7Jzxicj4gIH08YnI+fTwvcHJlPjwvYm9keT48L2h0bWw+'));document.close();" "JavaScript:<br><pre>let param = {<br>  headers : steps.CustomersParam.hubspotAuth,<br>  url : steps.CBData.hubspot.contactByEmail,<br>  siteName : steps.ContactInputParams.input.siteName,<br>  siteDomain : steps.ContactInputParams.input.siteDomain,<br>  apiKey : steps.ContactInputParams.input.apiKey,<br>  type : steps.ContactInputParams.input.type<br>};<br><br>done(param);</pre>"
            click step-035 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPlNlYXJjaEh1YnNwb3RDb250YWN0UGFyYW08L3RpdGxlPjwvaGVhZD48Ym9keT48Yj5KYXZhU2NyaXB0OjwvYj48YnI+PGJyPjxwcmU+bGV0IHBhcmFtID0gezxicj4gIGhlYWRlcnMgOiBzdGVwcy5DdXN0b21lcnNQYXJhbS5odWJzcG90QXV0aCw8YnI+ICB1cmwgOiBzdGVwcy5DQkRhdGEuaHVic3BvdC5jb250YWN0QnlPdGhlckZpZWxkcyw8YnI+ICBzaXRlTmFtZSA6IHN0ZXBzLkNvbnRhY3RJbnB1dFBhcmFtcy5pbnB1dC5zaXRlTmFtZSw8YnI+ICBzaXRlRG9tYWluIDogc3RlcHMuQ29udGFjdElucHV0UGFyYW1zLmlucHV0LnNpdGVEb21haW4sPGJyPiAgYXBpS2V5IDogc3RlcHMuQ29udGFjdElucHV0UGFyYW1zLmlucHV0LmFwaUtleSw8YnI+ICB0eXBlIDogc3RlcHMuQ29udGFjdElucHV0UGFyYW1zLmlucHV0LnR5cGU8YnI+fTs8YnI+PGJyPmRvbmUocGFyYW0pOzwvcHJlPjxicj48Yj5SQVcgSlNPTjo8L2I+PGJyPjxicj48cHJlPns8YnI+ICAnb25TdWNjZXNzJzogWzxicj4gICAgJ1NlYXJjaEh1YnNwb3RDb250YWN0Jzxicj4gIF0sPGJyPiAgJ29uRmFpbHVyZSc6IFtdLDxicj4gICduYW1lJzogJ1NlYXJjaEh1YnNwb3RDb250YWN0UGFyYW0nLDxicj4gICd0eXBlJzogJ3NjcmlwdCcsPGJyPiAgJ3Byb3BlcnRpZXMnOiB7PGJyPiAgICAnYm9keSc6ICdsZXQgcGFyYW0gPSB7XG4gIGhlYWRlcnMgOiBzdGVwcy5DdXN0b21lcnNQYXJhbS5odWJzcG90QXV0aCxcbiAgdXJsIDogc3RlcHMuQ0JEYXRhLmh1YnNwb3QuY29udGFjdEJ5T3RoZXJGaWVsZHMsXG4gIHNpdGVOYW1lIDogc3RlcHMuQ29udGFjdElucHV0UGFyYW1zLmlucHV0LnNpdGVOYW1lLFxuICBzaXRlRG9tYWluIDogc3RlcHMuQ29udGFjdElucHV0UGFyYW1zLmlucHV0LnNpdGVEb21haW4sXG4gIGFwaUtleSA6IHN0ZXBzLkNvbnRhY3RJbnB1dFBhcmFtcy5pbnB1dC5hcGlLZXksXG4gIHR5cGUgOiBzdGVwcy5Db250YWN0SW5wdXRQYXJhbXMuaW5wdXQudHlwZVxufTtcblxuZG9uZShwYXJhbSk7Jzxicj4gIH08YnI+fTwvcHJlPjwvYm9keT48L2h0bWw+'));document.close();" "JavaScript:<br><pre>let param = {<br>  headers : steps.CustomersParam.hubspotAuth,<br>  url : steps.CBData.hubspot.contactByOtherFields,<br>  siteName : steps.ContactInputParams.input.siteName,<br>  siteDomain : steps.ContactInputParams.input.siteDomain,<br>  apiKey : steps.ContactInputParams.input.apiKey,<br>  type : steps.ContactInputParams.input.type<br>};<br><br>done(param);</pre>"
            click step-036 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPlVwZGF0ZU9yZGVyPC90aXRsZT48L2hlYWQ+PGJvZHk+PGI+SmF2YVNjcmlwdDo8L2I+PGJyPjxicj48cHJlPjxicj5zdGVwcy5DQkRhdGEub3JkZXIgPSB7IGJlZm9yZTp7fSwgYWZ0ZXI6e319Ozxicj5pZihzdGVwcy5HZXRPcmRlckJlZm9yZUNCR2V0IT09IHVuZGVmaW5lZCApIHs8YnI+ICBsZXQgb3JkZXIgPSBzdGVwcy5HZXRPcmRlckJlZm9yZUNCR2V0Ozxicj4gIDxicj4gc3RlcHMuQ0JEYXRhLm9yZGVyLmJlZm9yZSA9IHs8YnI+ICAgIG9yZGVyX2RhdGUgOiBvcmRlci5vcmRlcl9kYXRlLDxicj4gICAgZG9jdW1lbnRfbnVtYmVyIDogb3JkZXIuZG9jdW1lbnRfbnVtYmVyLDxicj4gICAgdG90YWwgOiBvcmRlci50b3RhbCw8YnI+ICAgIHN0YXR1czogb3JkZXIuc3RhdHVzLDxicj4gICAgYW1vdW50X3BhaWQ6b3JkZXIuYW1vdW50X3BhaWQsPGJyPiAgICBwYWlkX29uIDogb3JkZXIucGFpZF9vbiw8YnI+ICAgIGNyZWF0ZWRfYXQgOiBvcmRlci5jcmVhdGVkX2F0LDxicj4gICAgcmVmdW5kYWJsZV9jcmVkaXRzX2lzc3VlZCA6IG9yZGVyLnJlZnVuZGFibGVfY3JlZGl0c19pc3N1ZWQsPGJyPiAgICBjdXJyZW5jeV9jb2RlIDogb3JkZXIuY3VycmVuY3lfY29kZSw8YnI+ICAgIHN1Yl90b3RhbCA6IG9yZGVyLnN1Yl90b3RhbCw8YnI+ICAgIHNoaXBwaW5nX2RhdGUgOiBvcmRlci5zaGlwcGluZ19kYXRlLDxicj4gICAgc3Vic2NyaXB0aW9uX2lkIDogb3JkZXIuc3Vic2NyaXB0aW9uX2lkLDxicj4gICAgYmFzZV9jdXJyZW5jeV9jb2RlIDogb3JkZXIuYmFzZV9jdXJyZW5jeV9jb2RlLDxicj4gICAgcGF5bWVudF9zdGF0dXMgOiBvcmRlci5wYXltZW50X3N0YXR1cyw8YnI+ICAgIHRheCA6IG9yZGVyLnRheCw8YnI+ICAgIGNyZWF0ZWRfYnkgOiBvcmRlci5jcmVhdGVkX2J5LDxicj4gICAgZGVsZXRlZCA6IG9yZGVyLmRlbGV0ZWQsPGJyPiAgICByZXNvdXJjZV92ZXJzaW9uIDogb3JkZXIucmVzb3VyY2VfdmVyc2lvbiw8YnI+ICAgIGJpbGxpbmdfYWRkcmVzcyA6IG9yZGVyLmJpbGxpbmdfYWRkcmVzcyw8YnI+ICAgIGludm9pY2VfaWQgOiBvcmRlci5pbnZvaWNlX2lkLDxicj4gICAgZXhjaGFuZ2VfcmF0ZSA6IG9yZGVyLmV4Y2hhbmdlX3JhdGUsPGJyPiAgICBwcmljZV90eXBlIDogb3JkZXIucHJpY2VfdHlwZSw8YnI+ICAgIG9yZGVyX3R5cGUgOiBvcmRlci5vcmRlcl90eXBlLDxicj4gICAgaXNfZ2lmdGVkIDogb3JkZXIuaXNfZ2lmdGVkLDxicj4gICAgcmVmdW5kYWJsZV9jcmVkaXRzIDogb3JkZXIucmVmdW5kYWJsZV9jcmVkaXRzLDxicj4gICAgcm91bmRpbmdfYWRqdXN0ZW1lbnQgOiBvcmRlci5yb3VuZGluZ19hZGp1c3RlbWVudCw8YnI+ICAgIHVwZGF0ZWRfYXQgOiBvcmRlci51cGRhdGVkX2F0LDxicj4gICAgbGlua2VkX2NyZWRpdF9ub3RlcyA6IG9yZGVyLmxpbmtlZF9jcmVkaXRfbm90ZXMsPGJyPiAgICBvYmplY3QgOiBvcmRlci5vYmplY3QsPGJyPmFtb3VudF9hZGp1c3RlZCA6IG9yZGVyLmFtb3VudF9hZGp1c3RlZCw8YnI+Y3VzdG9tZXJfaWQgOiBvcmRlci5jdXN0b21lcl9pZCw8YnI+Z2lmdF9pZCA6IG9yZGVyLmdpZnRfaWQsPGJyPjxicj5zdGF0dXNfdXBkYXRlX2F0Om9yZGVyLnN0YXR1c191cGRhdGVfYXQsPGJyPnNoaXBwaW5nX2N1dF9vZmZfZGF0ZTpvcmRlci5zaGlwcGluZ19jdXRfb2ZmX2RhdGUsPGJyPmNhbmNlbGxlZF9hdDpvcmRlci5jYW5jZWxsZWRfYXQsPGJyPnNoaXBtZW50X2NhcnJpZXI6b3JkZXIuc2hpcG1lbnRfY2Fycmllciw8YnI+Y2FuY2VsbGF0aW9uX3JlYXNvbjpvcmRlci5jYW5jZWxsYXRpb25fcmVhc29uLDxicj50cmFja2luZ19pZDpvcmRlci50cmFja2luZ19pZCw8YnI+YmF0Y2hfaWQ6b3JkZXIuYmF0Y2hfaWQsPGJyPmRpc2NvdW50Om9yZGVyLmRpc2NvdW50LDxicj5zaGlwcGVkX2F0Om9yZGVyLnNoaXBwZWRfYXQsPGJyPmRlbGl2ZXJlZF9hdDpvcmRlci5kZWxpdmVyZWRfYXQsPGJyPkludm9pY2Vfcm91bmRfb2ZmX2Ftb3VudDpvcmRlci5pbnZvaWNlX3JvdW5kX29mZl9hbW91bnQsPGJyPmZ1bGZpbGxtZW50X3N0YXR1czpvcmRlci5mdWxmaWxsbWVudF9zdGF0dXMsPGJyPnJlZmVyZW5jZV9pZDpvcmRlci5yZWZlcmVuY2VfaWQ8YnI+PGJyPiAgfTs8YnI+ICBsZXQgb3JkZXJfbGluZV9pdGVtcyA9IG9yZGVyLm9yZGVyX2xpbmVfaXRlbXM7PGJyPiAgaWYob3JkZXJfbGluZV9pdGVtcyAhPT0gdW5kZWZpbmVkICYmIG9yZGVyX2xpbmVfaXRlbXMubGVuZ3RoIDxzcGFuPj48L3NwYW4+IDApIHs8YnI+ICAgIGZvcih2YXIgaT0wO2k8c3Bhbj48PC9zcGFuPm9yZGVyX2xpbmVfaXRlbXMubGVuZ3RoO2krKyl7PGJyPiAgICAgIGlmKG9yZGVyX2xpbmVfaXRlbXNbaV0uZW50aXR5X3R5cGUgIT09dW5kZWZpbmVkICYmIG9yZGVyX2xpbmVfaXRlbXNbaV0uZW50aXR5X3R5cGUgPT09ICdwbGFuJykgezxicj4gICAgICAgIHN0ZXBzLkNCRGF0YS5vcmRlci5iZWZvcmUuc2t1ID0gb3JkZXJfbGluZV9pdGVtc1tpXS5za3U7PGJyPiAgICAgICAgPGJyPiAgICAgIH08YnI+ICAgIH08YnI+ICB9PGJyPiAgPGJyPiAgPGJyPn08YnI+PGJyPmlmKHN0ZXBzLkdldE9yZGVyQWZ0ZXJDQkdldCAhPT0gdW5kZWZpbmVkICkgezxicj4gIGxldCBvcmRlciA9IHN0ZXBzLkdldE9yZGVyQWZ0ZXJDQkdldDs8YnI+ICAgc3RlcHMuQ0JEYXRhLm9yZGVyLmFmdGVyID0gezxicj4gICAgb3JkZXJfZGF0ZSA6IG9yZGVyLm9yZGVyX2RhdGUsPGJyPiAgICBkb2N1bWVudF9udW1iZXIgOiBvcmRlci5kb2N1bWVudF9udW1iZXIsPGJyPiAgICB0b3RhbCA6IG9yZGVyLnRvdGFsLDxicj4gICAgc3RhdHVzOiBvcmRlci5zdGF0dXMsPGJyPiAgICBhbW91bnRfcGFpZDpvcmRlci5hbW91bnRfcGFpZCw8YnI+ICAgIHBhaWRfb24gOiBvcmRlci5wYWlkX29uLDxicj4gICAgY3JlYXRlZF9hdCA6IG9yZGVyLmNyZWF0ZWRfYXQsPGJyPiAgICByZWZ1bmRhYmxlX2NyZWRpdHNfaXNzdWVkIDogb3JkZXIucmVmdW5kYWJsZV9jcmVkaXRzX2lzc3VlZCw8YnI+ICAgIGN1cnJlbmN5X2NvZGUgOiBvcmRlci5jdXJyZW5jeV9jb2RlLDxicj4gICAgc3ViX3RvdGFsIDogb3JkZXIuc3ViX3RvdGFsLDxicj4gICAgc2hpcHBpbmdfZGF0ZSA6IG9yZGVyLnNoaXBwaW5nX2RhdGUsPGJyPiAgICBzdWJzY3JpcHRpb25faWQgOiBvcmRlci5zdWJzY3JpcHRpb25faWQsPGJyPiAgICBiYXNlX2N1cnJlbmN5X2NvZGUgOiBvcmRlci5iYXNlX2N1cnJlbmN5X2NvZGUsPGJyPiAgICBwYXltZW50X3N0YXR1cyA6IG9yZGVyLnBheW1lbnRfc3RhdHVzLDxicj4gICAgdGF4IDogb3JkZXIudGF4LDxicj4gICAgY3JlYXRlZF9ieSA6IG9yZGVyLmNyZWF0ZWRfYnksPGJyPiAgICBkZWxldGVkIDogb3JkZXIuZGVsZXRlZCw8YnI+ICAgIHJlc291cmNlX3ZlcnNpb24gOiBvcmRlci5yZXNvdXJjZV92ZXJzaW9uLDxicj4gICAgYmlsbGluZ19hZGRyZXNzIDogb3JkZXIuYmlsbGluZ19hZGRyZXNzLDxicj4gICAgaW52b2ljZV9pZCA6IG9yZGVyLmludm9pY2VfaWQsPGJyPiAgICBleGNoYW5nZV9yYXRlIDogb3JkZXIuZXhjaGFuZ2VfcmF0ZSw8YnI+ICAgIHByaWNlX3R5cGUgOiBvcmRlci5wcmljZV90eXBlLDxicj4gICAgb3JkZXJfdHlwZSA6IG9yZGVyLm9yZGVyX3R5cGUsPGJyPiAgICBpc19naWZ0ZWQgOiBvcmRlci5pc19naWZ0ZWQsPGJyPiAgICByZWZ1bmRhYmxlX2NyZWRpdHMgOiBvcmRlci5yZWZ1bmRhYmxlX2NyZWRpdHMsPGJyPiAgICByb3VuZGluZ19hZGp1c3RlbWVudCA6IG9yZGVyLnJvdW5kaW5nX2FkanVzdGVtZW50LDxicj4gICAgdXBkYXRlZF9hdCA6IG9yZGVyLnVwZGF0ZWRfYXQsPGJyPiAgICBsaW5rZWRfY3JlZGl0X25vdGVzIDogb3JkZXIubGlua2VkX2NyZWRpdF9ub3Rlcyw8YnI+ICAgIG9iamVjdCA6IG9yZGVyLm9iamVjdCw8YnI+YW1vdW50X2FkanVzdGVkIDogb3JkZXIuYW1vdW50X2FkanVzdGVkLDxicj5jdXN0b21lcl9pZCA6IG9yZGVyLmN1c3RvbWVyX2lkLDxicj5naWZ0X2lkIDogb3JkZXIuZ2lmdF9pZCw8YnI+PGJyPnN0YXR1c191cGRhdGVfYXQ6b3JkZXIuc3RhdHVzX3VwZGF0ZV9hdCw8YnI+c2hpcHBpbmdfY3V0X29mZl9kYXRlOm9yZGVyLnNoaXBwaW5nX2N1dF9vZmZfZGF0ZSw8YnI+Y2FuY2VsbGVkX2F0Om9yZGVyLmNhbmNlbGxlZF9hdCw8YnI+c2hpcG1lbnRfY2FycmllcjpvcmRlci5zaGlwbWVudF9jYXJyaWVyLDxicj5jYW5jZWxsYXRpb25fcmVhc29uOm9yZGVyLmNhbmNlbGxhdGlvbl9yZWFzb24sPGJyPnRyYWNraW5nX2lkOm9yZGVyLnRyYWNraW5nX2lkLDxicj5iYXRjaF9pZDpvcmRlci5iYXRjaF9pZCw8YnI+ZGlzY291bnQ6b3JkZXIuZGlzY291bnQsPGJyPnNoaXBwZWRfYXQ6b3JkZXIuc2hpcHBlZF9hdCw8YnI+ZGVsaXZlcmVkX2F0Om9yZGVyLmRlbGl2ZXJlZF9hdCw8YnI+SW52b2ljZV9yb3VuZF9vZmZfYW1vdW50Om9yZGVyLmludm9pY2Vfcm91bmRfb2ZmX2Ftb3VudCw8YnI+ZnVsZmlsbG1lbnRfc3RhdHVzOm9yZGVyLmZ1bGZpbGxtZW50X3N0YXR1cyw8YnI+cmVmZXJlbmNlX2lkOm9yZGVyLnJlZmVyZW5jZV9pZDxicj48YnI+ICB9Ozxicj4gIGxldCBvcmRlcl9saW5lX2l0ZW1zID0gb3JkZXIub3JkZXJfbGluZV9pdGVtczs8YnI+ICBpZihvcmRlcl9saW5lX2l0ZW1zICE9PSB1bmRlZmluZWQgJiYgb3JkZXJfbGluZV9pdGVtcy5sZW5ndGggPHNwYW4+Pjwvc3Bhbj4gMCkgezxicj4gICAgZm9yKHZhciBpPTA7aTxzcGFuPjw8L3NwYW4+b3JkZXJfbGluZV9pdGVtcy5sZW5ndGg7aSsrKXs8YnI+ICAgICAgaWYob3JkZXJfbGluZV9pdGVtc1tpXS5lbnRpdHlfdHlwZSAhPT11bmRlZmluZWQgJiYgb3JkZXJfbGluZV9pdGVtc1tpXS5lbnRpdHlfdHlwZSA9PT0gJ3BsYW4nKSB7PGJyPiAgICAgICAgIHN0ZXBzLkNCRGF0YS5vcmRlci5hZnRlci5za3UgPSBvcmRlcl9saW5lX2l0ZW1zW2ldLnNrdTs8YnI+ICAgICAgICA8YnI+ICAgICAgfTxicj4gICAgfTxicj4gIH08YnI+ICA8YnI+ICA8YnI+fTxicj4vKnN0ZXBzLkNCRGF0YS5vcmRlciA9IHt9Ozxicj5pZihzdGVwcy5vbGRfR2V0T3JkZXJCZWZvcmVDQkdldC5kYXRhIT09IHVuZGVmaW5lZCAmJiBzdGVwcy5vbGRfR2V0T3JkZXJCZWZvcmVDQkdldC5kYXRhLmxpc3QgIT09IHVuZGVmaW5lZCAmJiBzdGVwcy5vbGRfR2V0T3JkZXJCZWZvcmVDQkdldC5kYXRhLmxpc3QubGVuZ3RoIDxzcGFuPj48L3NwYW4+IDAgKSB7PGJyPiAgbGV0IG9yZGVyID0gc3RlcHMub2xkX0dldE9yZGVyQmVmb3JlQ0JHZXQuZGF0YS5saXN0WzBdLm9yZGVyOzxicj4gIDxicj4gc3RlcHMuQ0JEYXRhLm9yZGVyLmJlZm9yZSA9IHs8YnI+ICAgIG9yZGVyX2RhdGUgOiBvcmRlci5vcmRlcl9kYXRlLDxicj4gICAgdG90YWwgOiBvcmRlci50b3RhbCw8YnI+ICAgIHN0YXR1czogb3JkZXIuc3RhdHVzLDxicj4gIH07PGJyPiAgbGV0IG9yZGVyX2xpbmVfaXRlbXMgPSBvcmRlci5vcmRlcl9saW5lX2l0ZW1zOzxicj4gIGlmKG9yZGVyX2xpbmVfaXRlbXMgIT09IHVuZGVmaW5lZCAmJiBvcmRlcl9saW5lX2l0ZW1zLmxlbmd0aCA8c3Bhbj4+PC9zcGFuPiAwKSB7PGJyPiAgICBmb3IodmFyIGk9MDtpPHNwYW4+PDwvc3Bhbj5vcmRlcl9saW5lX2l0ZW1zLmxlbmd0aDtpKyspezxicj4gICAgICBpZihvcmRlcl9saW5lX2l0ZW1zW2ldLmVudGl0eV90eXBlICE9PXVuZGVmaW5lZCAmJiBvcmRlcl9saW5lX2l0ZW1zW2ldLmVudGl0eV90eXBlID09PSAncGxhbicpIHs8YnI+ICAgICAgICBzdGVwcy5DQkRhdGEub3JkZXIuYmVmb3JlLnNrdSA9IG9yZGVyX2xpbmVfaXRlbXNbaV0uc2t1Ozxicj4gICAgICAgIDxicj4gICAgICB9PGJyPiAgICB9PGJyPiAgfTxicj4gIDxicj4gIDxicj59PGJyPjxicj5pZihzdGVwcy5vbGRfR2V0T3JkZXJBZnRlckNCR2V0LmRhdGEgIT09IHVuZGVmaW5lZCAmJiBzdGVwcy5vbGRfR2V0T3JkZXJBZnRlckNCR2V0LmRhdGEubGlzdCAhPT0gdW5kZWZpbmVkICYmIHN0ZXBzLm9sZF9HZXRPcmRlckFmdGVyQ0JHZXQuZGF0YS5saXN0Lmxlbmd0aCA8c3Bhbj4+PC9zcGFuPiAwICkgezxicj4gIGxldCBvcmRlciA9IHN0ZXBzLm9sZF9HZXRPcmRlckFmdGVyQ0JHZXQuZGF0YS5saXN0WzBdLm9yZGVyOzxicj4gICBzdGVwcy5DQkRhdGEub3JkZXIuYWZ0ZXIgPSB7PGJyPiAgICBvcmRlcl9kYXRlIDogb3JkZXIub3JkZXJfZGF0ZSw8YnI+ICAgIHRvdGFsIDogb3JkZXIudG90YWwsPGJyPiAgICBzdGF0dXM6IG9yZGVyLnN0YXR1cyw8YnI+ICB9Ozxicj4gIGxldCBvcmRlcl9saW5lX2l0ZW1zID0gb3JkZXIub3JkZXJfbGluZV9pdGVtczs8YnI+ICBpZihvcmRlcl9saW5lX2l0ZW1zICE9PSB1bmRlZmluZWQgJiYgb3JkZXJfbGluZV9pdGVtcy5sZW5ndGggPHNwYW4+Pjwvc3Bhbj4gMCkgezxicj4gICAgZm9yKHZhciBpPTA7aTxzcGFuPjw8L3NwYW4+b3JkZXJfbGluZV9pdGVtcy5sZW5ndGg7aSsrKXs8YnI+ICAgICAgaWYob3JkZXJfbGluZV9pdGVtc1tpXS5lbnRpdHlfdHlwZSAhPT11bmRlZmluZWQgJiYgb3JkZXJfbGluZV9pdGVtc1tpXS5lbnRpdHlfdHlwZSA9PT0gJ3BsYW4nKSB7PGJyPiAgICAgICAgIHN0ZXBzLkNCRGF0YS5vcmRlci5hZnRlci5za3UgPSBvcmRlcl9saW5lX2l0ZW1zW2ldLnNrdTs8YnI+ICAgICAgICA8YnI+ICAgICAgfTxicj4gICAgfTxicj4gIH08YnI+ICA8YnI+ICA8YnI+fSovPGJyPjxicj48L3ByZT48YnI+PGI+UkFXIEpTT046PC9iPjxicj48YnI+PHByZT57PGJyPiAgJ29uU3VjY2Vzcyc6IFs8YnI+ICAgICdIYXNDb250YWN0SW5DQkVNJzxicj4gIF0sPGJyPiAgJ29uRmFpbHVyZSc6IFtdLDxicj4gICduYW1lJzogJ1VwZGF0ZU9yZGVyJyw8YnI+ICAndHlwZSc6ICdzY3JpcHQnLDxicj4gICdwcm9wZXJ0aWVzJzogezxicj4gICAgJ2JvZHknOiAnXG5zdGVwcy5DQkRhdGEub3JkZXIgPSB7IGJlZm9yZTp7fSwgYWZ0ZXI6e319O1xuaWYoc3RlcHMuR2V0T3JkZXJCZWZvcmVDQkdldCE9PSB1bmRlZmluZWQgKSB7XG4gIGxldCBvcmRlciA9IHN0ZXBzLkdldE9yZGVyQmVmb3JlQ0JHZXQ7XG4gIFxuIHN0ZXBzLkNCRGF0YS5vcmRlci5iZWZvcmUgPSB7XG4gICAgb3JkZXJfZGF0ZSA6IG9yZGVyLm9yZGVyX2RhdGUsXG4gICAgZG9jdW1lbnRfbnVtYmVyIDogb3JkZXIuZG9jdW1lbnRfbnVtYmVyLFxuICAgIHRvdGFsIDogb3JkZXIudG90YWwsXG4gICAgc3RhdHVzOiBvcmRlci5zdGF0dXMsXG4gICAgYW1vdW50X3BhaWQ6b3JkZXIuYW1vdW50X3BhaWQsXG4gICAgcGFpZF9vbiA6IG9yZGVyLnBhaWRfb24sXG4gICAgY3JlYXRlZF9hdCA6IG9yZGVyLmNyZWF0ZWRfYXQsXG4gICAgcmVmdW5kYWJsZV9jcmVkaXRzX2lzc3VlZCA6IG9yZGVyLnJlZnVuZGFibGVfY3JlZGl0c19pc3N1ZWQsXG4gICAgY3VycmVuY3lfY29kZSA6IG9yZGVyLmN1cnJlbmN5X2NvZGUsXG4gICAgc3ViX3RvdGFsIDogb3JkZXIuc3ViX3RvdGFsLFxuICAgIHNoaXBwaW5nX2RhdGUgOiBvcmRlci5zaGlwcGluZ19kYXRlLFxuICAgIHN1YnNjcmlwdGlvbl9pZCA6IG9yZGVyLnN1YnNjcmlwdGlvbl9pZCxcbiAgICBiYXNlX2N1cnJlbmN5X2NvZGUgOiBvcmRlci5iYXNlX2N1cnJlbmN5X2NvZGUsXG4gICAgcGF5bWVudF9zdGF0dXMgOiBvcmRlci5wYXltZW50X3N0YXR1cyxcbiAgICB0YXggOiBvcmRlci50YXgsXG4gICAgY3JlYXRlZF9ieSA6IG9yZGVyLmNyZWF0ZWRfYnksXG4gICAgZGVsZXRlZCA6IG9yZGVyLmRlbGV0ZWQsXG4gICAgcmVzb3VyY2VfdmVyc2lvbiA6IG9yZGVyLnJlc291cmNlX3ZlcnNpb24sXG4gICAgYmlsbGluZ19hZGRyZXNzIDogb3JkZXIuYmlsbGluZ19hZGRyZXNzLFxuICAgIGludm9pY2VfaWQgOiBvcmRlci5pbnZvaWNlX2lkLFxuICAgIGV4Y2hhbmdlX3JhdGUgOiBvcmRlci5leGNoYW5nZV9yYXRlLFxuICAgIHByaWNlX3R5cGUgOiBvcmRlci5wcmljZV90eXBlLFxuICAgIG9yZGVyX3R5cGUgOiBvcmRlci5vcmRlcl90eXBlLFxuICAgIGlzX2dpZnRlZCA6IG9yZGVyLmlzX2dpZnRlZCxcbiAgICByZWZ1bmRhYmxlX2NyZWRpdHMgOiBvcmRlci5yZWZ1bmRhYmxlX2NyZWRpdHMsXG4gICAgcm91bmRpbmdfYWRqdXN0ZW1lbnQgOiBvcmRlci5yb3VuZGluZ19hZGp1c3RlbWVudCxcbiAgICB1cGRhdGVkX2F0IDogb3JkZXIudXBkYXRlZF9hdCxcbiAgICBsaW5rZWRfY3JlZGl0X25vdGVzIDogb3JkZXIubGlua2VkX2NyZWRpdF9ub3RlcyxcbiAgICBvYmplY3QgOiBvcmRlci5vYmplY3QsXG5hbW91bnRfYWRqdXN0ZWQgOiBvcmRlci5hbW91bnRfYWRqdXN0ZWQsXG5jdXN0b21lcl9pZCA6IG9yZGVyLmN1c3RvbWVyX2lkLFxuZ2lmdF9pZCA6IG9yZGVyLmdpZnRfaWQsXG5cbnN0YXR1c191cGRhdGVfYXQ6b3JkZXIuc3RhdHVzX3VwZGF0ZV9hdCxcbnNoaXBwaW5nX2N1dF9vZmZfZGF0ZTpvcmRlci5zaGlwcGluZ19jdXRfb2ZmX2RhdGUsXG5jYW5jZWxsZWRfYXQ6b3JkZXIuY2FuY2VsbGVkX2F0LFxuc2hpcG1lbnRfY2FycmllcjpvcmRlci5zaGlwbWVudF9jYXJyaWVyLFxuY2FuY2VsbGF0aW9uX3JlYXNvbjpvcmRlci5jYW5jZWxsYXRpb25fcmVhc29uLFxudHJhY2tpbmdfaWQ6b3JkZXIudHJhY2tpbmdfaWQsXG5iYXRjaF9pZDpvcmRlci5iYXRjaF9pZCxcbmRpc2NvdW50Om9yZGVyLmRpc2NvdW50LFxuc2hpcHBlZF9hdDpvcmRlci5zaGlwcGVkX2F0LFxuZGVsaXZlcmVkX2F0Om9yZGVyLmRlbGl2ZXJlZF9hdCxcbkludm9pY2Vfcm91bmRfb2ZmX2Ftb3VudDpvcmRlci5pbnZvaWNlX3JvdW5kX29mZl9hbW91bnQsXG5mdWxmaWxsbWVudF9zdGF0dXM6b3JkZXIuZnVsZmlsbG1lbnRfc3RhdHVzLFxucmVmZXJlbmNlX2lkOm9yZGVyLnJlZmVyZW5jZV9pZFxuXG4gIH07XG4gIGxldCBvcmRlcl9saW5lX2l0ZW1zID0gb3JkZXIub3JkZXJfbGluZV9pdGVtcztcbiAgaWYob3JkZXJfbGluZV9pdGVtcyAhPT0gdW5kZWZpbmVkICYmIG9yZGVyX2xpbmVfaXRlbXMubGVuZ3RoIDxzcGFuPj48L3NwYW4+IDApIHtcbiAgICBmb3IodmFyIGk9MDtpPHNwYW4+PDwvc3Bhbj5vcmRlcl9saW5lX2l0ZW1zLmxlbmd0aDtpKyspe1xuICAgICAgaWYob3JkZXJfbGluZV9pdGVtc1tpXS5lbnRpdHlfdHlwZSAhPT11bmRlZmluZWQgJiYgb3JkZXJfbGluZV9pdGVtc1tpXS5lbnRpdHlfdHlwZSA9PT0gXCdwbGFuXCcpIHtcbiAgICAgICAgc3RlcHMuQ0JEYXRhLm9yZGVyLmJlZm9yZS5za3UgPSBvcmRlcl9saW5lX2l0ZW1zW2ldLnNrdTtcbiAgICAgICAgXG4gICAgICB9XG4gICAgfVxuICB9XG4gIFxuICBcbn1cblxuaWYoc3RlcHMuR2V0T3JkZXJBZnRlckNCR2V0ICE9PSB1bmRlZmluZWQgKSB7XG4gIGxldCBvcmRlciA9IHN0ZXBzLkdldE9yZGVyQWZ0ZXJDQkdldDtcbiAgIHN0ZXBzLkNCRGF0YS5vcmRlci5hZnRlciA9IHtcbiAgICBvcmRlcl9kYXRlIDogb3JkZXIub3JkZXJfZGF0ZSxcbiAgICBkb2N1bWVudF9udW1iZXIgOiBvcmRlci5kb2N1bWVudF9udW1iZXIsXG4gICAgdG90YWwgOiBvcmRlci50b3RhbCxcbiAgICBzdGF0dXM6IG9yZGVyLnN0YXR1cyxcbiAgICBhbW91bnRfcGFpZDpvcmRlci5hbW91bnRfcGFpZCxcbiAgICBwYWlkX29uIDogb3JkZXIucGFpZF9vbixcbiAgICBjcmVhdGVkX2F0IDogb3JkZXIuY3JlYXRlZF9hdCxcbiAgICByZWZ1bmRhYmxlX2NyZWRpdHNfaXNzdWVkIDogb3JkZXIucmVmdW5kYWJsZV9jcmVkaXRzX2lzc3VlZCxcbiAgICBjdXJyZW5jeV9jb2RlIDogb3JkZXIuY3VycmVuY3lfY29kZSxcbiAgICBzdWJfdG90YWwgOiBvcmRlci5zdWJfdG90YWwsXG4gICAgc2hpcHBpbmdfZGF0ZSA6IG9yZGVyLnNoaXBwaW5nX2RhdGUsXG4gICAgc3Vic2NyaXB0aW9uX2lkIDogb3JkZXIuc3Vic2NyaXB0aW9uX2lkLFxuICAgIGJhc2VfY3VycmVuY3lfY29kZSA6IG9yZGVyLmJhc2VfY3VycmVuY3lfY29kZSxcbiAgICBwYXltZW50X3N0YXR1cyA6IG9yZGVyLnBheW1lbnRfc3RhdHVzLFxuICAgIHRheCA6IG9yZGVyLnRheCxcbiAgICBjcmVhdGVkX2J5IDogb3JkZXIuY3JlYXRlZF9ieSxcbiAgICBkZWxldGVkIDogb3JkZXIuZGVsZXRlZCxcbiAgICByZXNvdXJjZV92ZXJzaW9uIDogb3JkZXIucmVzb3VyY2VfdmVyc2lvbixcbiAgICBiaWxsaW5nX2FkZHJlc3MgOiBvcmRlci5iaWxsaW5nX2FkZHJlc3MsXG4gICAgaW52b2ljZV9pZCA6IG9yZGVyLmludm9pY2VfaWQsXG4gICAgZXhjaGFuZ2VfcmF0ZSA6IG9yZGVyLmV4Y2hhbmdlX3JhdGUsXG4gICAgcHJpY2VfdHlwZSA6IG9yZGVyLnByaWNlX3R5cGUsXG4gICAgb3JkZXJfdHlwZSA6IG9yZGVyLm9yZGVyX3R5cGUsXG4gICAgaXNfZ2lmdGVkIDogb3JkZXIuaXNfZ2lmdGVkLFxuICAgIHJlZnVuZGFibGVfY3JlZGl0cyA6IG9yZGVyLnJlZnVuZGFibGVfY3JlZGl0cyxcbiAgICByb3VuZGluZ19hZGp1c3RlbWVudCA6IG9yZGVyLnJvdW5kaW5nX2FkanVzdGVtZW50LFxuICAgIHVwZGF0ZWRfYXQgOiBvcmRlci51cGRhdGVkX2F0LFxuICAgIGxpbmtlZF9jcmVkaXRfbm90ZXMgOiBvcmRlci5saW5rZWRfY3JlZGl0X25vdGVzLFxuICAgIG9iamVjdCA6IG9yZGVyLm9iamVjdCxcbmFtb3VudF9hZGp1c3RlZCA6IG9yZGVyLmFtb3VudF9hZGp1c3RlZCxcbmN1c3RvbWVyX2lkIDogb3JkZXIuY3VzdG9tZXJfaWQsXG5naWZ0X2lkIDogb3JkZXIuZ2lmdF9pZCxcblxuc3RhdHVzX3VwZGF0ZV9hdDpvcmRlci5zdGF0dXNfdXBkYXRlX2F0LFxuc2hpcHBpbmdfY3V0X29mZl9kYXRlOm9yZGVyLnNoaXBwaW5nX2N1dF9vZmZfZGF0ZSxcbmNhbmNlbGxlZF9hdDpvcmRlci5jYW5jZWxsZWRfYXQsXG5zaGlwbWVudF9jYXJyaWVyOm9yZGVyLnNoaXBtZW50X2NhcnJpZXIsXG5jYW5jZWxsYXRpb25fcmVhc29uOm9yZGVyLmNhbmNlbGxhdGlvbl9yZWFzb24sXG50cmFja2luZ19pZDpvcmRlci50cmFja2luZ19pZCxcbmJhdGNoX2lkOm9yZGVyLmJhdGNoX2lkLFxuZGlzY291bnQ6b3JkZXIuZGlzY291bnQsXG5zaGlwcGVkX2F0Om9yZGVyLnNoaXBwZWRfYXQsXG5kZWxpdmVyZWRfYXQ6b3JkZXIuZGVsaXZlcmVkX2F0LFxuSW52b2ljZV9yb3VuZF9vZmZfYW1vdW50Om9yZGVyLmludm9pY2Vfcm91bmRfb2ZmX2Ftb3VudCxcbmZ1bGZpbGxtZW50X3N0YXR1czpvcmRlci5mdWxmaWxsbWVudF9zdGF0dXMsXG5yZWZlcmVuY2VfaWQ6b3JkZXIucmVmZXJlbmNlX2lkXG5cbiAgfTtcbiAgbGV0IG9yZGVyX2xpbmVfaXRlbXMgPSBvcmRlci5vcmRlcl9saW5lX2l0ZW1zO1xuICBpZihvcmRlcl9saW5lX2l0ZW1zICE9PSB1bmRlZmluZWQgJiYgb3JkZXJfbGluZV9pdGVtcy5sZW5ndGggPHNwYW4+Pjwvc3Bhbj4gMCkge1xuICAgIGZvcih2YXIgaT0wO2k8c3Bhbj48PC9zcGFuPm9yZGVyX2xpbmVfaXRlbXMubGVuZ3RoO2krKyl7XG4gICAgICBpZihvcmRlcl9saW5lX2l0ZW1zW2ldLmVudGl0eV90eXBlICE9PXVuZGVmaW5lZCAmJiBvcmRlcl9saW5lX2l0ZW1zW2ldLmVudGl0eV90eXBlID09PSBcJ3BsYW5cJykge1xuICAgICAgICAgc3RlcHMuQ0JEYXRhLm9yZGVyLmFmdGVyLnNrdSA9IG9yZGVyX2xpbmVfaXRlbXNbaV0uc2t1O1xuICAgICAgICBcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgXG4gIFxufVxuLypzdGVwcy5DQkRhdGEub3JkZXIgPSB7fTtcbmlmKHN0ZXBzLm9sZF9HZXRPcmRlckJlZm9yZUNCR2V0LmRhdGEhPT0gdW5kZWZpbmVkICYmIHN0ZXBzLm9sZF9HZXRPcmRlckJlZm9yZUNCR2V0LmRhdGEubGlzdCAhPT0gdW5kZWZpbmVkICYmIHN0ZXBzLm9sZF9HZXRPcmRlckJlZm9yZUNCR2V0LmRhdGEubGlzdC5sZW5ndGggPHNwYW4+Pjwvc3Bhbj4gMCApIHtcbiAgbGV0IG9yZGVyID0gc3RlcHMub2xkX0dldE9yZGVyQmVmb3JlQ0JHZXQuZGF0YS5saXN0WzBdLm9yZGVyO1xuICBcbiBzdGVwcy5DQkRhdGEub3JkZXIuYmVmb3JlID0ge1xuICAgIG9yZGVyX2RhdGUgOiBvcmRlci5vcmRlcl9kYXRlLFxuICAgIHRvdGFsIDogb3JkZXIudG90YWwsXG4gICAgc3RhdHVzOiBvcmRlci5zdGF0dXMsXG4gIH07XG4gIGxldCBvcmRlcl9saW5lX2l0ZW1zID0gb3JkZXIub3JkZXJfbGluZV9pdGVtcztcbiAgaWYob3JkZXJfbGluZV9pdGVtcyAhPT0gdW5kZWZpbmVkICYmIG9yZGVyX2xpbmVfaXRlbXMubGVuZ3RoIDxzcGFuPj48L3NwYW4+IDApIHtcbiAgICBmb3IodmFyIGk9MDtpPHNwYW4+PDwvc3Bhbj5vcmRlcl9saW5lX2l0ZW1zLmxlbmd0aDtpKyspe1xuICAgICAgaWYob3JkZXJfbGluZV9pdGVtc1tpXS5lbnRpdHlfdHlwZSAhPT11bmRlZmluZWQgJiYgb3JkZXJfbGluZV9pdGVtc1tpXS5lbnRpdHlfdHlwZSA9PT0gXCdwbGFuXCcpIHtcbiAgICAgICAgc3RlcHMuQ0JEYXRhLm9yZGVyLmJlZm9yZS5za3UgPSBvcmRlcl9saW5lX2l0ZW1zW2ldLnNrdTtcbiAgICAgICAgXG4gICAgICB9XG4gICAgfVxuICB9XG4gIFxuICBcbn1cblxuaWYoc3RlcHMub2xkX0dldE9yZGVyQWZ0ZXJDQkdldC5kYXRhICE9PSB1bmRlZmluZWQgJiYgc3RlcHMub2xkX0dldE9yZGVyQWZ0ZXJDQkdldC5kYXRhLmxpc3QgIT09IHVuZGVmaW5lZCAmJiBzdGVwcy5vbGRfR2V0T3JkZXJBZnRlckNCR2V0LmRhdGEubGlzdC5sZW5ndGggPHNwYW4+Pjwvc3Bhbj4gMCApIHtcbiAgbGV0IG9yZGVyID0gc3RlcHMub2xkX0dldE9yZGVyQWZ0ZXJDQkdldC5kYXRhLmxpc3RbMF0ub3JkZXI7XG4gICBzdGVwcy5DQkRhdGEub3JkZXIuYWZ0ZXIgPSB7XG4gICAgb3JkZXJfZGF0ZSA6IG9yZGVyLm9yZGVyX2RhdGUsXG4gICAgdG90YWwgOiBvcmRlci50b3RhbCxcbiAgICBzdGF0dXM6IG9yZGVyLnN0YXR1cyxcbiAgfTtcbiAgbGV0IG9yZGVyX2xpbmVfaXRlbXMgPSBvcmRlci5vcmRlcl9saW5lX2l0ZW1zO1xuICBpZihvcmRlcl9saW5lX2l0ZW1zICE9PSB1bmRlZmluZWQgJiYgb3JkZXJfbGluZV9pdGVtcy5sZW5ndGggPHNwYW4+Pjwvc3Bhbj4gMCkge1xuICAgIGZvcih2YXIgaT0wO2k8c3Bhbj48PC9zcGFuPm9yZGVyX2xpbmVfaXRlbXMubGVuZ3RoO2krKyl7XG4gICAgICBpZihvcmRlcl9saW5lX2l0ZW1zW2ldLmVudGl0eV90eXBlICE9PXVuZGVmaW5lZCAmJiBvcmRlcl9saW5lX2l0ZW1zW2ldLmVudGl0eV90eXBlID09PSBcJ3BsYW5cJykge1xuICAgICAgICAgc3RlcHMuQ0JEYXRhLm9yZGVyLmFmdGVyLnNrdSA9IG9yZGVyX2xpbmVfaXRlbXNbaV0uc2t1O1xuICAgICAgICBcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgXG4gIFxufSovXG5cbic8YnI+ICB9PGJyPn08L3ByZT48L2JvZHk+PC9odG1sPg=='));document.close();" "JavaScript:<br><pre><br>steps.CBData.order = { before:{}, after:{}};<br>if(steps.GetOrderBeforeCBGet!== undefined ) {<br>  let order = steps.GetOrderBeforeCBGet;<br>  <br> steps.CBData.order.before = {<br>    order_date : order.order_date,<br>    document_number : order.document_number,<br>    total : order.total,<br>    status: order.status,<br>    amount_paid:order.amount_paid,<br>    paid_on : order.paid_on,<br>    created_at : order.created_at,<br>    refundable_credits_issued : order.refundable_credits_issued,<br>    currency_code : order.currency_code,<br>    sub_total : order.sub_total,<br>    shipping_date : order.shipping_date,<br>    subscription_id : order.subscription_id,<br>    base_currency_code : order.base_currency_code,<br>    payment_status : order.payment_status,<br>    tax : order.tax,<br>    created_by : order.created_by,<br>    deleted : order.deleted,<br>    resource_version : order.resource_version,<br>    billing_address : order.billing_address,<br>    invoice_id : order.invoice_id,<br>    exchange_rate : order.exchange_rate,<br>    price_type : order.price_type,<br>    order_type : order.order_type,<br>    is_gifted : order.is_gifted,<br>    refundable_credits : order.refundable_credits,<br>    rounding_adjustement : order.rounding_adjustement,<br>    updated_at : order.updated_at,<br>    linked_credit_notes : order.linked_credit_notes,<br>    object : order.object,<br>amount_adjusted : order.amount_adjusted,<br>customer_id : order.customer_id,<br>gift_id : order.gift_id,<br><br>status_update_at:order.status_update_at,<br>shipping_cut_off_date:order.shipping_cut_off_date,<br>cancelled_at:order.cancelled_at,<br>shipment_carrier:order.shipment_carrier,<br>cancellation_reason:order.cancellation_reason,<br>tracking_id:order.tracking_id,<br>batch_id:order.batch_id,<br>discount:order.discount,<br>shipped_at:order.shipped_at,<br>delivered_at:order.delivered_at,<br>Invoice_round_off_amount:order.invoice_round_off_amount,<br>fulfillment_status:order.fulfillment_status,<br>reference_id:order.reference_id<br><br>  };<br>  let order_line_items = order.order_line_items;<br>  if(order_line_items !== undefined && order_line_items.length <span>></span> 0) {<br>    for(var i=0;i<span><</span>order_line_items.length;i++){<br>      if(order_line_items[i].entity_type !==undefined && order_line_items[i].entity_type === 'plan') {<br>        steps.CBData.order.before.sku = order_line_items[i].sku;<br>        <br>      }<br>    }<br>  }<br>  <br>  <br>}<br><br>if(steps.GetOrderAfterCBGet !== undefined ) {<br>  let order = steps.GetOrderAfterCBGet;<br>   steps.CBData.order.after = {<br>    order_date : order.order_date,<br>    document_number : order.document_number,<br>    total : order.total,<br>    status: order.status,<br>    amount_paid:order.amount_paid,<br>    paid_on : order.paid_on,<br>    created_at : order.created_at,<br>    refundable_credits_issued : order.refundable_credits_issued,<br>    currency_code : order.currency_code,<br>    sub_total : order.sub_total,<br>    shipping_date : order.shipping_date,<br>    subscription_id : order.subscription_id,<br>    base_currency_code : order.base_currency_code,<br>    payment_status : order.payment_status,<br>    tax : order.tax,<br>    created_by : order.created_by,<br>    deleted : order.deleted,<br>    resource_version : order.resource_version,<br>    billing_address : order.billing_address,<br>    invoice_id : order.invoice_id,<br>    exchange_rate : order.exchange_rate,<br>    price_type : order.price_type,<br>    order_type : order.order_type,<br>    is_gifted : order.is_gifted,<br>    refundable_credits : order.refundable_credits,<br>    rounding_adjustement : order.rounding_adjustement,<br>    updated_at : order.updated_at,<br>    linked_credit_notes : order.linked_credit_notes,<br>    object : order.object,<br>amount_adjusted : order.amount_adjusted,<br>customer_id : order.customer_id,<br>gift_id : order.gift_id,<br><br>status_update_at:order.status_update_at,<br>shipping_cut_off_date:order.shipping_cut_off_date,<br>cancelled_at:order.cancelled_at,<br>shipment_carrier:order.shipment_carrier,<br>cancellation_reason:order.cancellation_reason,<br>tracking_id:order.tracking_id,<br>batch_id:order.batch_id,<br>discount:order.discount,<br>shipped_at:order.shipped_at,<br>delivered_at:order.delivered_at,<br>Invoice_round_off_amount:order.invoice_round_off_amount,<br>fulfillment_status:order.fulfillment_status,<br>reference_id:order.reference_id<br><br>  };<br>  let order_line_items = order.order_line_items;<br>  if(order_line_items !== undefined && order_line_items.length <span>></span> 0) {<br>    for(var i=0;i<span><</span>order_line_items.length;i++){<br>      if(order_line_items[i].entity_type !==undefined && order_line_items[i].entity_type === 'plan') {<br>         steps.CBData.order.after.sku = order_line_items[i].sku;<br>        <br>      }<br>    }<br>  }<br>  <br>  <br>}<br>/*steps.CBData.order = {};<br>if(steps.old_GetOrderBeforeCBGet.data!== undefined && steps.old_GetOrderBeforeCBGet.data.list !== undefined && steps.old_GetOrderBeforeCBGet.data.list.length <span>></span> 0 ) {<br>  let order = steps.old_GetOrderBeforeCBGet.data.list[0].order;<br>  <br> steps.CBData.order.before = {<br>    order_date : order.order_date,<br>    total : order.total,<br>    status: order.status,<br>  };<br>  let order_line_items = order.order_line_items;<br>  if(order_line_items !== undefined && order_line_items.length <span>></span> 0) {<br>    for(var i=0;i<span><</span>order_line_items.length;i++){<br>      if(order_line_items[i].entity_type !==undefined && order_line_items[i].entity_type === 'plan') {<br>        steps.CBData.order.before.sku = order_line_items[i].sku;<br>        <br>      }<br>    }<br>  }<br>  <br>  <br>}<br><br>if(steps.old_GetOrderAfterCBGet.data !== undefined && steps.old_GetOrderAfterCBGet.data.list !== undefined && steps.old_GetOrderAfterCBGet.data.list.length <span>></span> 0 ) {<br>  let order = steps.old_GetOrderAfterCBGet.data.list[0].order;<br>   steps.CBData.order.after = {<br>    order_date : order.order_date,<br>    total : order.total,<br>    status: order.status,<br>  };<br>  let order_line_items = order.order_line_items;<br>  if(order_line_items !== undefined && order_line_items.length <span>></span> 0) {<br>    for(var i=0;i<span><</span>order_line_items.length;i++){<br>      if(order_line_items[i].entity_type !==undefined && order_line_items[i].entity_type === 'plan') {<br>         steps.CBData.order.after.sku = order_line_items[i].sku;<br>        <br>      }<br>    }<br>  }<br>  <br>  <br>}*/<br><br></pre>"
            click step-037 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPklzQ29udGFjdEZvdW5kPC90aXRsZT48L2hlYWQ+PGJvZHk+PGI+SmF2YVNjcmlwdDo8L2I+PGJyPjxicj48cHJlPmlmKHN0ZXBzLkdldEh1YnNwb3RDb250YWN0QnlJZC5jYl9zdGF0dXM9PSdzdWNjZXNzJyl7PGJyPiBzdGVwcy5DQkRhdGEuaHVic3BvdC5jb250YWN0ID0gc3RlcHMuR2V0SHVic3BvdENvbnRhY3RCeUlkLmRhdGE7PGJyPiAgc3RlcHMuQ0JEYXRhLmh1YnNwb3Quc3RhdHVzPSAndXBkYXRlJzs8YnI+ICBkb25lKHRydWUpOzxicj59ZWxzZSB7PGJyPiBzdGVwcy5DQkRhdGEuaHVic3BvdC5zdGF0dXM9ICdjcmVhdGUnOzxicj4gIGRvbmUoZmFsc2UpOzxicj59PC9wcmU+PGJyPjxiPlJBVyBKU09OOjwvYj48YnI+PGJyPjxwcmU+ezxicj4gICdvblN1Y2Nlc3MnOiBbPGJyPiAgICAnSHViU3BvdElucHV0Jzxicj4gIF0sPGJyPiAgJ29uRmFpbHVyZSc6IFs8YnI+ICAgICdHZXRIdWJzcG90Q29udGFjdEJ5RW1haWxQYXJhbSc8YnI+ICBdLDxicj4gICduYW1lJzogJ0lzQ29udGFjdEZvdW5kJyw8YnI+ICAndHlwZSc6ICdmaWx0ZXInLDxicj4gICdwcm9wZXJ0aWVzJzogezxicj4gICAgJ2JvZHknOiAnaWYoc3RlcHMuR2V0SHVic3BvdENvbnRhY3RCeUlkLmNiX3N0YXR1cz09XCdzdWNjZXNzXCcpe1xuIHN0ZXBzLkNCRGF0YS5odWJzcG90LmNvbnRhY3QgPSBzdGVwcy5HZXRIdWJzcG90Q29udGFjdEJ5SWQuZGF0YTtcbiAgc3RlcHMuQ0JEYXRhLmh1YnNwb3Quc3RhdHVzPSBcJ3VwZGF0ZVwnO1xuICBkb25lKHRydWUpO1xufWVsc2Uge1xuIHN0ZXBzLkNCRGF0YS5odWJzcG90LnN0YXR1cz0gXCdjcmVhdGVcJztcbiAgZG9uZShmYWxzZSk7XG59Jzxicj4gIH08YnI+fTwvcHJlPjwvYm9keT48L2h0bWw+'));document.close();" "JavaScript:<br><pre>if(steps.GetHubspotContactById.cb_status=='success'){<br> steps.CBData.hubspot.contact = steps.GetHubspotContactById.data;<br>  steps.CBData.hubspot.status= 'update';<br>  done(true);<br>}else {<br> steps.CBData.hubspot.status= 'create';<br>  done(false);<br>}</pre>"
            click step-038 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkdldEh1YnNwb3RDb250YWN0QnlFTWFpbDwvdGl0bGU+PC9oZWFkPjxib2R5PjxiPk90aGVyIChmb3JtdWxhKTo8L2I+PGJyPjxicj48cHJlPiAgZm9ybXVsYUlkIDogMzEzMzI8YnI+ICAgICAgIGFyZ3MgOiAke3N0ZXBzLkdldEh1YnNwb3RDb250YWN0QnlFbWFpbFBhcmFtfTwvcHJlPjxicj48Yj5SQVcgSlNPTjo8L2I+PGJyPjxicj48cHJlPns8YnI+ICAnb25TdWNjZXNzJzogWzxicj4gICAgJ0RvQ3JlYXRlQ29udGFjdCc8YnI+ICBdLDxicj4gICdvbkZhaWx1cmUnOiBbXSw8YnI+ICAnbmFtZSc6ICdHZXRIdWJzcG90Q29udGFjdEJ5RU1haWwnLDxicj4gICd0eXBlJzogJ2Zvcm11bGEnLDxicj4gICdwcm9wZXJ0aWVzJzogezxicj4gICAgJ2Zvcm11bGFJZCc6ICczMTMzMicsPGJyPiAgICAnYXJncyc6ICcke3N0ZXBzLkdldEh1YnNwb3RDb250YWN0QnlFbWFpbFBhcmFtfSc8YnI+ICB9PGJyPn08L3ByZT48L2JvZHk+PC9odG1sPg=='));document.close();" "Other (formula):<br><pre>  formulaId : 31332<br>       args : ${steps.GetHubspotContactByEmailParam}</pre>"
            click step-039 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPlNlYXJjaEh1YnNwb3RDb250YWN0PC90aXRsZT48L2hlYWQ+PGJvZHk+PGI+T3RoZXIgKGZvcm11bGEpOjwvYj48YnI+PGJyPjxwcmU+ICBmb3JtdWxhSWQgOiAzMTMzMjxicj4gICAgICAgYXJncyA6ICR7c3RlcHMuU2VhcmNoSHVic3BvdENvbnRhY3RQYXJhbX08L3ByZT48YnI+PGI+UkFXIEpTT046PC9iPjxicj48YnI+PHByZT57PGJyPiAgJ29uU3VjY2Vzcyc6IFs8YnI+ICAgICdJc0NvbnRhY3RFeGlzdCc8YnI+ICBdLDxicj4gICdvbkZhaWx1cmUnOiBbXSw8YnI+ICAnbmFtZSc6ICdTZWFyY2hIdWJzcG90Q29udGFjdCcsPGJyPiAgJ3R5cGUnOiAnZm9ybXVsYScsPGJyPiAgJ3Byb3BlcnRpZXMnOiB7PGJyPiAgICAnZm9ybXVsYUlkJzogJzMxMzMyJyw8YnI+ICAgICdhcmdzJzogJyR7c3RlcHMuU2VhcmNoSHVic3BvdENvbnRhY3RQYXJhbX0nPGJyPiAgfTxicj59PC9wcmU+PC9ib2R5PjwvaHRtbD4='));document.close();" "Other (formula):<br><pre>  formulaId : 31332<br>       args : ${steps.SearchHubspotContactParam}</pre>"
            click step-040 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkh1YlNwb3RJbnB1dDwvdGl0bGU+PC9oZWFkPjxib2R5PjxiPkphdmFTY3JpcHQ6PC9iPjxicj48YnI+PHByZT5sZXQgY3VzdG9tZXIgPSBzdGVwcy5DQkRhdGEuY3VzdG9tZXI7PGJyPjxicj5sZXQgZGF0YSA9IHs8YnI+ICBvcCA6IHN0ZXBzLkNCRGF0YS5odWJzcG90LDxicj4gICAgaW5wdXRzIDp7fSw8YnI+ICAgIHRwIDp7PGJyPiAgICAgIGludGVncmF0aW9uX25hbWU6IHN0ZXBzLkNvbnRhY3RJbnB1dFBhcmFtcy5pbnB1dC50eXBlLDxicj4gICAgICBlbnRpdHlfaWQ6IGN1c3RvbWVyLmlkLDxicj4gICAgICBlbnRpdHlfdHlwZTogJ2N1c3RvbWVyJyw8YnI+ICAgICAgc3RhdHVzOiAnc3luY2VkJzxicj4gICAgICB9PGJyPn07PGJyPmRvbmUoZGF0YSk7PC9wcmU+PGJyPjxiPlJBVyBKU09OOjwvYj48YnI+PGJyPjxwcmU+ezxicj4gICdvblN1Y2Nlc3MnOiBbPGJyPiAgICAnSHViRGF0YSc8YnI+ICBdLDxicj4gICdvbkZhaWx1cmUnOiBbXSw8YnI+ICAnbmFtZSc6ICdIdWJTcG90SW5wdXQnLDxicj4gICd0eXBlJzogJ3NjcmlwdCcsPGJyPiAgJ3Byb3BlcnRpZXMnOiB7PGJyPiAgICAnYm9keSc6ICdsZXQgY3VzdG9tZXIgPSBzdGVwcy5DQkRhdGEuY3VzdG9tZXI7XG5cbmxldCBkYXRhID0ge1xuICBvcCA6IHN0ZXBzLkNCRGF0YS5odWJzcG90LFxuICAgIGlucHV0cyA6e30sXG4gICAgdHAgOntcbiAgICAgIGludGVncmF0aW9uX25hbWU6IHN0ZXBzLkNvbnRhY3RJbnB1dFBhcmFtcy5pbnB1dC50eXBlLFxuICAgICAgZW50aXR5X2lkOiBjdXN0b21lci5pZCxcbiAgICAgIGVudGl0eV90eXBlOiBcJ2N1c3RvbWVyXCcsXG4gICAgICBzdGF0dXM6IFwnc3luY2VkXCdcbiAgICAgIH1cbn07XG5kb25lKGRhdGEpOyc8YnI+ICB9PGJyPn08L3ByZT48L2JvZHk+PC9odG1sPg=='));document.close();" "JavaScript:<br><pre>let customer = steps.CBData.customer;<br><br>let data = {<br>  op : steps.CBData.hubspot,<br>    inputs :{},<br>    tp :{<br>      integration_name: steps.ContactInputParams.input.type,<br>      entity_id: customer.id,<br>      entity_type: 'customer',<br>      status: 'synced'<br>      }<br>};<br>done(data);</pre>"
            click step-041 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkRvQ3JlYXRlQ29udGFjdDwvdGl0bGU+PC9oZWFkPjxib2R5PjxiPkphdmFTY3JpcHQ6PC9iPjxicj48YnI+PHByZT5pZihzdGVwcy5HZXRIdWJzcG90Q29udGFjdEJ5RW1haWwgIT09IHVuZGVmaW5lZCAmJiBzdGVwcy5HZXRIdWJzcG90Q29udGFjdEJ5RW1haWwuY29udGludWUgPT09IGZhbHNlKXs8YnI+ICBpZihzdGVwcy5Jc0NvbnRhY3RFeGlzdCA9PT0gdW5kZWZpbmVkKXs8YnI+ICAgIHN0ZXBzLkNCRGF0YS5odWJzcG90LnN0YXR1cyA9ICdlcnJvcic7PGJyPiAgICBkb25lKGZhbHNlKTs8YnI+ICB9PGJyPiAgPGJyPiAgaWYoc3RlcHMuSXNDb250YWN0RXhpc3QuZmxhZyA9PT0gJ3RydWUnKXs8YnI+ICAgIHN0ZXBzLkNCRGF0YS5odWJzcG90LnN0YXR1cyA9ICd1cGRhdGUnOzxicj4gICAgc3RlcHMuQ0JEYXRhLmh1YnNwb3QuY29udGFjdCA9IHN0ZXBzLklzQ29udGFjdEV4aXN0LmNvbnRhY3Q7PGJyPiAgfWVsc2UgaWYoc3RlcHMuSXNDb250YWN0RXhpc3QuZmxhZyA9PT0gJ2ZhbHNlJyl7PGJyPiAgICBzdGVwcy5DQkRhdGEuaHVic3BvdC5zdGF0dXMgPSAnY3JlYXRlJzs8YnI+ICAgIHN0ZXBzLkNCRGF0YS5odWJzcG90LmNvbnRhY3QgPSBzdGVwcy5Jc0NvbnRhY3RFeGlzdC5jb250YWN0Ozxicj4gIH1lbHNlezxicj4gICAgc3RlcHMuQ0JEYXRhLmh1YnNwb3Quc3RhdHVzID0gJ2Vycm9yJzs8YnI+ICB9PGJyPn1lbHNlezxicj4gIGxldCByZXNwID0gc3RlcHMuR2V0SHVic3BvdENvbnRhY3RCeUVNYWlsOzxicj4gIGlmKHJlc3AuY2Jfc3RhdHVzPT0gJ3N1Y2Nlc3MnKXs8YnI+ICAgIGxldCBjYklkID0gcmVzcC5kYXRhLnByb3BlcnRpZXMuY2hhcmdlYmVlY3VzdG9tZXJpZDs8YnI+ICAgICBpZihjYklkICE9PSB1bmRlZmluZWQpIHs8YnI+ICAgICAgICBjYklkID0gIGNiSWQudmFsdWU7PGJyPiAgICAgfTxicj4gICAgIHN0ZXBzLkNCRGF0YS5odWJzcG90LnN0YXR1cz0gJ3VwZGF0ZSc7PGJyPiAgICBpZihyZXNwLmRhdGEucHJvcGVydGllcy5jaGFyZ2ViZWVjdXN0b21lcmlkID09PSB1bmRlZmluZWQpezxicj4gICAgIHN0ZXBzLkNCRGF0YS5odWJzcG90LmNvbnRhY3QgPSByZXNwLmRhdGE7PGJyPiAgICB9ZWxzZSBpZihzdGVwcy5DQkRhdGEuY3VzdG9tZXJJZCA9PT0gY2JJZCl7PGJyPiAgICAgIHN0ZXBzLkNCRGF0YS5odWJzcG90LmNvbnRhY3QgPSByZXNwLmRhdGE7PGJyPiAgICB9ZWxzZSB7PGJyPiAgICAgICBzdGVwcy5DQkRhdGEuaHVic3BvdC5zdGF0dXM9ICdlcnJvcic7PGJyPiAgICB9PGJyPiAgfWVsc2Ugezxicj4gICAgc3RlcHMuQ0JEYXRhLmh1YnNwb3Quc3RhdHVzPSAnY3JlYXRlJzs8YnI+ICB9PGJyPn08YnI+PGJyPmNvbnNvbGUubG9nKHN0ZXBzLkNCRGF0YS5odWJzcG90LnN0YXR1cyk7PGJyPjxicj5pZihzdGVwcy5DQkRhdGEuaHVic3BvdC5zdGF0dXM9PT0gJ2Vycm9yJykgezxicj4gIGRvbmUoZmFsc2UpOzxicj59ZWxzZSBpZihzdGVwcy5DQkRhdGEuaHVic3BvdC5zdGF0dXM9PT0gJ3VwZGF0ZScpIHs8YnI+ICBkb25lKHRydWUpOzxicj59ZWxzZSB7PGJyPiAgaWYoc3RlcHMuQ3VzdG9tZXJzUGFyYW0uc3luY1J1bGVzQ29udGFjdHMuSHViU3BvdENvbnRhY3ROb01hdGNoPT09J0NyZWF0ZV9jb250YWN0Jykgezxicj4gICAgZG9uZSh0cnVlKTs8YnI+ICB9ZWxzZSB7PGJyPiAgICBkb25lKGZhbHNlKTs8YnI+ICB9PGJyPn08L3ByZT48YnI+PGI+UkFXIEpTT046PC9iPjxicj48YnI+PHByZT57PGJyPiAgJ29uU3VjY2Vzcyc6IFs8YnI+ICAgICdIdWJTcG90SW5wdXQnPGJyPiAgXSw8YnI+ICAnb25GYWlsdXJlJzogWzxicj4gICAgJ0lzRXJyb3InPGJyPiAgXSw8YnI+ICAnbmFtZSc6ICdEb0NyZWF0ZUNvbnRhY3QnLDxicj4gICd0eXBlJzogJ2ZpbHRlcicsPGJyPiAgJ3Byb3BlcnRpZXMnOiB7PGJyPiAgICAnYm9keSc6ICdpZihzdGVwcy5HZXRIdWJzcG90Q29udGFjdEJ5RW1haWwgIT09IHVuZGVmaW5lZCAmJiBzdGVwcy5HZXRIdWJzcG90Q29udGFjdEJ5RW1haWwuY29udGludWUgPT09IGZhbHNlKXtcbiAgaWYoc3RlcHMuSXNDb250YWN0RXhpc3QgPT09IHVuZGVmaW5lZCl7XG4gICAgc3RlcHMuQ0JEYXRhLmh1YnNwb3Quc3RhdHVzID0gXCdlcnJvclwnO1xuICAgIGRvbmUoZmFsc2UpO1xuICB9XG4gIFxuICBpZihzdGVwcy5Jc0NvbnRhY3RFeGlzdC5mbGFnID09PSAndHJ1ZScpe1xuICAgIHN0ZXBzLkNCRGF0YS5odWJzcG90LnN0YXR1cyA9IFwndXBkYXRlXCc7XG4gICAgc3RlcHMuQ0JEYXRhLmh1YnNwb3QuY29udGFjdCA9IHN0ZXBzLklzQ29udGFjdEV4aXN0LmNvbnRhY3Q7XG4gIH1lbHNlIGlmKHN0ZXBzLklzQ29udGFjdEV4aXN0LmZsYWcgPT09ICdmYWxzZScpe1xuICAgIHN0ZXBzLkNCRGF0YS5odWJzcG90LnN0YXR1cyA9IFwnY3JlYXRlXCc7XG4gICAgc3RlcHMuQ0JEYXRhLmh1YnNwb3QuY29udGFjdCA9IHN0ZXBzLklzQ29udGFjdEV4aXN0LmNvbnRhY3Q7XG4gIH1lbHNle1xuICAgIHN0ZXBzLkNCRGF0YS5odWJzcG90LnN0YXR1cyA9IFwnZXJyb3JcJztcbiAgfVxufWVsc2V7XG4gIGxldCByZXNwID0gc3RlcHMuR2V0SHVic3BvdENvbnRhY3RCeUVNYWlsO1xuICBpZihyZXNwLmNiX3N0YXR1cz09IFwnc3VjY2Vzc1wnKXtcbiAgICBsZXQgY2JJZCA9IHJlc3AuZGF0YS5wcm9wZXJ0aWVzLmNoYXJnZWJlZWN1c3RvbWVyaWQ7XG4gICAgIGlmKGNiSWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjYklkID0gIGNiSWQudmFsdWU7XG4gICAgIH1cbiAgICAgc3RlcHMuQ0JEYXRhLmh1YnNwb3Quc3RhdHVzPSBcJ3VwZGF0ZVwnO1xuICAgIGlmKHJlc3AuZGF0YS5wcm9wZXJ0aWVzLmNoYXJnZWJlZWN1c3RvbWVyaWQgPT09IHVuZGVmaW5lZCl7XG4gICAgIHN0ZXBzLkNCRGF0YS5odWJzcG90LmNvbnRhY3QgPSByZXNwLmRhdGE7XG4gICAgfWVsc2UgaWYoc3RlcHMuQ0JEYXRhLmN1c3RvbWVySWQgPT09IGNiSWQpe1xuICAgICAgc3RlcHMuQ0JEYXRhLmh1YnNwb3QuY29udGFjdCA9IHJlc3AuZGF0YTtcbiAgICB9ZWxzZSB7XG4gICAgICAgc3RlcHMuQ0JEYXRhLmh1YnNwb3Quc3RhdHVzPSBcJ2Vycm9yXCc7XG4gICAgfVxuICB9ZWxzZSB7XG4gICAgc3RlcHMuQ0JEYXRhLmh1YnNwb3Quc3RhdHVzPSBcJ2NyZWF0ZVwnO1xuICB9XG59XG5cbmNvbnNvbGUubG9nKHN0ZXBzLkNCRGF0YS5odWJzcG90LnN0YXR1cyk7XG5cbmlmKHN0ZXBzLkNCRGF0YS5odWJzcG90LnN0YXR1cz09PSBcJ2Vycm9yXCcpIHtcbiAgZG9uZShmYWxzZSk7XG59ZWxzZSBpZihzdGVwcy5DQkRhdGEuaHVic3BvdC5zdGF0dXM9PT0gXCd1cGRhdGVcJykge1xuICBkb25lKHRydWUpO1xufWVsc2Uge1xuICBpZihzdGVwcy5DdXN0b21lcnNQYXJhbS5zeW5jUnVsZXNDb250YWN0cy5IdWJTcG90Q29udGFjdE5vTWF0Y2g9PT1cJ0NyZWF0ZV9jb250YWN0XCcpIHtcbiAgICBkb25lKHRydWUpO1xuICB9ZWxzZSB7XG4gICAgZG9uZShmYWxzZSk7XG4gIH1cbn0nPGJyPiAgfTxicj59PC9wcmU+PC9ib2R5PjwvaHRtbD4='));document.close();" "JavaScript:<br><pre>if(steps.GetHubspotContactByEmail !== undefined && steps.GetHubspotContactByEmail.continue === false){<br>  if(steps.IsContactExist === undefined){<br>    steps.CBData.hubspot.status = 'error';<br>    done(false);<br>  }<br>  <br>  if(steps.IsContactExist.flag === 'true'){<br>    steps.CBData.hubspot.status = 'update';<br>    steps.CBData.hubspot.contact = steps.IsContactExist.contact;<br>  }else if(steps.IsContactExist.flag === 'false'){<br>    steps.CBData.hubspot.status = 'create';<br>    steps.CBData.hubspot.contact = steps.IsContactExist.contact;<br>  }else{<br>    steps.CBData.hubspot.status = 'error';<br>  }<br>}else{<br>  let resp = steps.GetHubspotContactByEMail;<br>  if(resp.cb_status== 'success'){<br>    let cbId = resp.data.properties.chargebeecustomerid;<br>     if(cbId !== undefined) {<br>        cbId =  cbId.value;<br>     }<br>     steps.CBData.hubspot.status= 'update';<br>    if(resp.data.properties.chargebeecustomerid === undefined){<br>     steps.CBData.hubspot.contact = resp.data;<br>    }else if(steps.CBData.customerId === cbId){<br>      steps.CBData.hubspot.contact = resp.data;<br>    }else {<br>       steps.CBData.hubspot.status= 'error';<br>    }<br>  }else {<br>    steps.CBData.hubspot.status= 'create';<br>  }<br>}<br><br>console.log(steps.CBData.hubspot.status);<br><br>if(steps.CBData.hubspot.status=== 'error') {<br>  done(false);<br>}else if(steps.CBData.hubspot.status=== 'update') {<br>  done(true);<br>}else {<br>  if(steps.CustomersParam.syncRulesContacts.HubSpotContactNoMatch==='Create_contact') {<br>    done(true);<br>  }else {<br>    done(false);<br>  }<br>}</pre>"
            click step-042 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPklzQ29udGFjdEV4aXN0PC90aXRsZT48L2hlYWQ+PGJvZHk+PGI+SmF2YVNjcmlwdDo8L2I+PGJyPjxicj48cHJlPmlmKHN0ZXBzLlNlYXJjaEh1YnNwb3RDb250YWN0LmNiX3N0YXR1cyAhPT0gJ3N1Y2Nlc3MnKXs8YnI+ICBkb25lKHs8YnI+ICAgIGZsYWc6ICdlcnJvcic8YnI+ICB9KTs8YnI+fTxicj48YnI+bGV0IGRhdGFQYXlsb2FkID0gc3RlcHMuU2VhcmNoSHVic3BvdENvbnRhY3QuZGF0YTs8YnI+bGV0IGNiTWFwcGVkRmllbGQgPSBzdGVwcy5Db250YWN0SW5wdXRQYXJhbXMuaW5wdXQuY2JNYXBwZWRGaWVsZDs8YnI+bGV0IGh1YlNwb3RNYXBwZWRGaWVsZCA9IHN0ZXBzLkNvbnRhY3RJbnB1dFBhcmFtcy5pbnB1dC5odWJTcG90TWFwcGVkRmllbGQ7PGJyPmxldCBodWJzcG90TWFwcGVkRmllbGRWYWx1ZTs8YnI+bGV0IGNoYXJnZWJlZU1hcHBlZEZpZWxkVmFsdWUgPSBzdGVwcy5Mb29wT3ZlckN1c3RvbWVyLmVudHJ5W2NiTWFwcGVkRmllbGRdOzxicj48YnI+Zm9yKHZhciBpPTA7IGkgPHNwYW4+PDwvc3Bhbj4gZGF0YVBheWxvYWQuY29udGFjdHMubGVuZ3RoOyBpKyspezxicj4gIGh1YnNwb3RNYXBwZWRGaWVsZFZhbHVlID0gKGRhdGFQYXlsb2FkLmNvbnRhY3RzW2ldWydwcm9wZXJ0aWVzJ11baHViU3BvdE1hcHBlZEZpZWxkXSAhPT0gdW5kZWZpbmVkKSA/IGRhdGFQYXlsb2FkLmNvbnRhY3RzW2ldWydwcm9wZXJ0aWVzJ11baHViU3BvdE1hcHBlZEZpZWxkXVsndmFsdWUnXSA6IHVuZGVmaW5lZDs8YnI+ICA8YnI+ICBpZihodWJzcG90TWFwcGVkRmllbGRWYWx1ZSA9PT0gdW5kZWZpbmVkKXs8YnI+ICAgIGRvbmUoezxicj4gICAgICAgZmxhZzogJ2ZhbHNlJzxicj4gICAgfSk7PGJyPiAgfTxicj4gIDxicj4gIGlmKGRhdGFQYXlsb2FkLmNvbnRhY3RzW2ldWydwcm9wZXJ0aWVzJ11baHViU3BvdE1hcHBlZEZpZWxkXVsndmFsdWUnXSA9PSBzdGVwcy5Mb29wT3ZlckN1c3RvbWVyLmVudHJ5W2NiTWFwcGVkRmllbGRdKXs8YnI+ICAgICAgaWYoZGF0YVBheWxvYWQuY29udGFjdHNbaV0ucHJvcGVydGllcy5jaGFyZ2ViZWVjdXN0b21lcmlkID09IHN0ZXBzLkxvb3BPdmVyQ3VzdG9tZXIuZW50cnkuaWQpezxicj4gICAgICAgIGRvbmUoezxicj4gICAgICAgICAgZmxhZzogJ3RydWUnLDxicj4gICAgICAgICAgY29udGFjdDogZGF0YVBheWxvYWQuY29udGFjdHNbaV08YnI+ICAgICAgICB9KTs8YnI+ICAgICAgfWVsc2V7PGJyPiAgICAgICAgZG9uZSh7PGJyPiAgICAgICAgICBmbGFnOiAnZXJyb3InLDxicj4gICAgICAgICAgY29udGFjdDogZGF0YVBheWxvYWQuY29udGFjdHNbaV08YnI+ICAgICAgICB9KTs8YnI+ICAgICAgfTxicj4gIH08YnI+fTxicj48YnI+ZG9uZSh7PGJyPiAgZmxhZzogJ2ZhbHNlJzxicj59KTs8YnI+PC9wcmU+PGJyPjxiPlJBVyBKU09OOjwvYj48YnI+PGJyPjxwcmU+ezxicj4gICdvblN1Y2Nlc3MnOiBbPGJyPiAgICAnRG9DcmVhdGVDb250YWN0Jzxicj4gIF0sPGJyPiAgJ29uRmFpbHVyZSc6IFtdLDxicj4gICduYW1lJzogJ0lzQ29udGFjdEV4aXN0Jyw8YnI+ICAndHlwZSc6ICdzY3JpcHQnLDxicj4gICdwcm9wZXJ0aWVzJzogezxicj4gICAgJ2JvZHknOiAnaWYoc3RlcHMuU2VhcmNoSHVic3BvdENvbnRhY3QuY2Jfc3RhdHVzICE9PSBcJ3N1Y2Nlc3NcJyl7XG4gIGRvbmUoe1xuICAgIGZsYWc6ICdlcnJvcidcbiAgfSk7XG59XG5cbmxldCBkYXRhUGF5bG9hZCA9IHN0ZXBzLlNlYXJjaEh1YnNwb3RDb250YWN0LmRhdGE7XG5sZXQgY2JNYXBwZWRGaWVsZCA9IHN0ZXBzLkNvbnRhY3RJbnB1dFBhcmFtcy5pbnB1dC5jYk1hcHBlZEZpZWxkO1xubGV0IGh1YlNwb3RNYXBwZWRGaWVsZCA9IHN0ZXBzLkNvbnRhY3RJbnB1dFBhcmFtcy5pbnB1dC5odWJTcG90TWFwcGVkRmllbGQ7XG5sZXQgaHVic3BvdE1hcHBlZEZpZWxkVmFsdWU7XG5sZXQgY2hhcmdlYmVlTWFwcGVkRmllbGRWYWx1ZSA9IHN0ZXBzLkxvb3BPdmVyQ3VzdG9tZXIuZW50cnlbY2JNYXBwZWRGaWVsZF07XG5cbmZvcih2YXIgaT0wOyBpIDxzcGFuPjw8L3NwYW4+IGRhdGFQYXlsb2FkLmNvbnRhY3RzLmxlbmd0aDsgaSsrKXtcbiAgaHVic3BvdE1hcHBlZEZpZWxkVmFsdWUgPSAoZGF0YVBheWxvYWQuY29udGFjdHNbaV1bJ3Byb3BlcnRpZXMnXVtodWJTcG90TWFwcGVkRmllbGRdICE9PSB1bmRlZmluZWQpID8gZGF0YVBheWxvYWQuY29udGFjdHNbaV1bJ3Byb3BlcnRpZXMnXVtodWJTcG90TWFwcGVkRmllbGRdWyd2YWx1ZSddIDogdW5kZWZpbmVkO1xuICBcbiAgaWYoaHVic3BvdE1hcHBlZEZpZWxkVmFsdWUgPT09IHVuZGVmaW5lZCl7XG4gICAgZG9uZSh7XG4gICAgICAgZmxhZzogJ2ZhbHNlJ1xuICAgIH0pO1xuICB9XG4gIFxuICBpZihkYXRhUGF5bG9hZC5jb250YWN0c1tpXVsncHJvcGVydGllcyddW2h1YlNwb3RNYXBwZWRGaWVsZF1bJ3ZhbHVlJ10gPT0gc3RlcHMuTG9vcE92ZXJDdXN0b21lci5lbnRyeVtjYk1hcHBlZEZpZWxkXSl7XG4gICAgICBpZihkYXRhUGF5bG9hZC5jb250YWN0c1tpXS5wcm9wZXJ0aWVzLmNoYXJnZWJlZWN1c3RvbWVyaWQgPT0gc3RlcHMuTG9vcE92ZXJDdXN0b21lci5lbnRyeS5pZCl7XG4gICAgICAgIGRvbmUoe1xuICAgICAgICAgIGZsYWc6ICd0cnVlJyxcbiAgICAgICAgICBjb250YWN0OiBkYXRhUGF5bG9hZC5jb250YWN0c1tpXVxuICAgICAgICB9KTtcbiAgICAgIH1lbHNle1xuICAgICAgICBkb25lKHtcbiAgICAgICAgICBmbGFnOiAnZXJyb3InLFxuICAgICAgICAgIGNvbnRhY3Q6IGRhdGFQYXlsb2FkLmNvbnRhY3RzW2ldXG4gICAgICAgIH0pO1xuICAgICAgfVxuICB9XG59XG5cbmRvbmUoe1xuICBmbGFnOiAnZmFsc2UnXG59KTtcbic8YnI+ICB9PGJyPn08L3ByZT48L2JvZHk+PC9odG1sPg=='));document.close();" "JavaScript:<br><pre>if(steps.SearchHubspotContact.cb_status !== 'success'){<br>  done({<br>    flag: 'error'<br>  });<br>}<br><br>let dataPayload = steps.SearchHubspotContact.data;<br>let cbMappedField = steps.ContactInputParams.input.cbMappedField;<br>let hubSpotMappedField = steps.ContactInputParams.input.hubSpotMappedField;<br>let hubspotMappedFieldValue;<br>let chargebeeMappedFieldValue = steps.LoopOverCustomer.entry[cbMappedField];<br><br>for(var i=0; i <span><</span> dataPayload.contacts.length; i++){<br>  hubspotMappedFieldValue = (dataPayload.contacts[i]['properties'][hubSpotMappedField] !== undefined) ? dataPayload.contacts[i]['properties'][hubSpotMappedField]['value'] : undefined;<br>  <br>  if(hubspotMappedFieldValue === undefined){<br>    done({<br>       flag: 'false'<br>    });<br>  }<br>  <br>  if(dataPayload.contacts[i]['properties'][hubSpotMappedField]['value'] == steps.LoopOverCustomer.entry[cbMappedField]){<br>      if(dataPayload.contacts[i].properties.chargebeecustomerid == steps.LoopOverCustomer.entry.id){<br>        done({<br>          flag: 'true',<br>          contact: dataPayload.contacts[i]<br>        });<br>      }else{<br>        done({<br>          flag: 'error',<br>          contact: dataPayload.contacts[i]<br>        });<br>      }<br>  }<br>}<br><br>done({<br>  flag: 'false'<br>});<br></pre>"
            click step-043 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkh1YkRhdGE8L3RpdGxlPjwvaGVhZD48Ym9keT48Yj5KYXZhU2NyaXB0OjwvYj48YnI+PGJyPjxwcmU+bGV0IGRhdGEgPSB7PGJyPiAgY3VzdG9tZXIgOnN0ZXBzLkNCRGF0YS5jdXN0b21lciw8YnI+ICBzdWJzY3JpcHRpb246c3RlcHMuQ0JEYXRhLnN1YnNjcmlwdGlvbiw8YnI+ICBvcmRlcjp7J2JlZm9yZScgOnN0ZXBzLkNCRGF0YS5vcmRlci5iZWZvcmUsPGJyPiAgJ2FmdGVyJzogc3RlcHMuQ0JEYXRhLm9yZGVyLmFmdGVyfSw8YnI+ICBpbnZvaWNlOns8YnI+ICAgIDxicj4gIH0sPGJyPiAgY21yciA6IHN0ZXBzLkN1c1N1YkRldGFpbHMuY21ycjxicj4gIDxicj59Ozxicj4vKmlmKHN0ZXBzLkNCRGF0YS5yZXN1bHQgIT09IHVuZGVmaW5lZCkgezxicj4gIGlmKHN0ZXBzLkNCRGF0YS5yZXN1bHQuZXN0aW1hdGUgIT09IHVuZGVmaW5lZCAmJiBzdGVwcy5DQkRhdGEucmVzdWx0LmVzdGltYXRlLmludm9pY2VfZXN0aW1hdGUgIT09IHVuZGVmaW5lZCkgezxicj4gICAgZGF0YS5pbnZvaWNlLnRvdGFsID0gc3RlcHMuQ0JEYXRhLnJlc3VsdC5lc3RpbWF0ZS5pbnZvaWNlX2VzdGltYXRlLmFtb3VudF9wYWlkOzxicj4gICBkYXRhLmludm9pY2UuZXN0aW1hdGUgPSBzdGVwcy5DQkRhdGEucmVzdWx0LmVzdGltYXRlLmludm9pY2VfZXN0aW1hdGUuYW1vdW50X2R1ZTs8YnI+ICB9PGJyPn0qLzxicj48YnI+PGJyPiAgaWYoc3RlcHMuQ3VzU3ViRGV0YWlscy5lc3RpbWF0ZSAhPT0gdW5kZWZpbmVkICYmIHN0ZXBzLkN1c1N1YkRldGFpbHMuZXN0aW1hdGUuaW52b2ljZV9lc3RpbWF0ZSAhPT0gdW5kZWZpbmVkKSB7PGJyPiAgICBkYXRhLmludm9pY2UudG90YWwgPSBzdGVwcy5DdXNTdWJEZXRhaWxzLmVzdGltYXRlLmludm9pY2VfZXN0aW1hdGUuYW1vdW50X3BhaWQ7PGJyPiAgIGRhdGEuaW52b2ljZS5lc3RpbWF0ZSA9IHN0ZXBzLkN1c1N1YkRldGFpbHMuZXN0aW1hdGUuaW52b2ljZV9lc3RpbWF0ZS5hbW91bnRfZHVlOzxicj4gIH08YnI+ICBpZihkYXRhLmludm9pY2UudG90YWwgPT09IDAgJiYgc3RlcHMuQ3VzU3ViRGV0YWlscy5pbnZvaWNlICE9PSB1bmRlZmluZWQgKSB7PGJyPiAgICBkYXRhLmludm9pY2UudG90YWwgPSBzdGVwcy5DdXNTdWJEZXRhaWxzLmludm9pY2UuYW1vdW50X3BhaWQ7PGJyPiAgfTxicj4gIDxicj48YnI+PGJyPmRvbmUoZGF0YSk7PGJyPjwvcHJlPjxicj48Yj5SQVcgSlNPTjo8L2I+PGJyPjxicj48cHJlPns8YnI+ICAnb25TdWNjZXNzJzogWzxicj4gICAgJ0lzSHViU3BvdENyZWF0ZSc8YnI+ICBdLDxicj4gICdvbkZhaWx1cmUnOiBbXSw8YnI+ICAnbmFtZSc6ICdIdWJEYXRhJyw8YnI+ICAndHlwZSc6ICdzY3JpcHQnLDxicj4gICdwcm9wZXJ0aWVzJzogezxicj4gICAgJ2JvZHknOiAnbGV0IGRhdGEgPSB7XG4gIGN1c3RvbWVyIDpzdGVwcy5DQkRhdGEuY3VzdG9tZXIsXG4gIHN1YnNjcmlwdGlvbjpzdGVwcy5DQkRhdGEuc3Vic2NyaXB0aW9uLFxuICBvcmRlcjp7XCdiZWZvcmVcJyA6c3RlcHMuQ0JEYXRhLm9yZGVyLmJlZm9yZSxcbiAgXCdhZnRlclwnOiBzdGVwcy5DQkRhdGEub3JkZXIuYWZ0ZXJ9LFxuICBpbnZvaWNlOntcbiAgICBcbiAgfSxcbiAgY21yciA6IHN0ZXBzLkN1c1N1YkRldGFpbHMuY21yclxuICBcbn07XG4vKmlmKHN0ZXBzLkNCRGF0YS5yZXN1bHQgIT09IHVuZGVmaW5lZCkge1xuICBpZihzdGVwcy5DQkRhdGEucmVzdWx0LmVzdGltYXRlICE9PSB1bmRlZmluZWQgJiYgc3RlcHMuQ0JEYXRhLnJlc3VsdC5lc3RpbWF0ZS5pbnZvaWNlX2VzdGltYXRlICE9PSB1bmRlZmluZWQpIHtcbiAgICBkYXRhLmludm9pY2UudG90YWwgPSBzdGVwcy5DQkRhdGEucmVzdWx0LmVzdGltYXRlLmludm9pY2VfZXN0aW1hdGUuYW1vdW50X3BhaWQ7XG4gICBkYXRhLmludm9pY2UuZXN0aW1hdGUgPSBzdGVwcy5DQkRhdGEucmVzdWx0LmVzdGltYXRlLmludm9pY2VfZXN0aW1hdGUuYW1vdW50X2R1ZTtcbiAgfVxufSovXG5cblxuICBpZihzdGVwcy5DdXNTdWJEZXRhaWxzLmVzdGltYXRlICE9PSB1bmRlZmluZWQgJiYgc3RlcHMuQ3VzU3ViRGV0YWlscy5lc3RpbWF0ZS5pbnZvaWNlX2VzdGltYXRlICE9PSB1bmRlZmluZWQpIHtcbiAgICBkYXRhLmludm9pY2UudG90YWwgPSBzdGVwcy5DdXNTdWJEZXRhaWxzLmVzdGltYXRlLmludm9pY2VfZXN0aW1hdGUuYW1vdW50X3BhaWQ7XG4gICBkYXRhLmludm9pY2UuZXN0aW1hdGUgPSBzdGVwcy5DdXNTdWJEZXRhaWxzLmVzdGltYXRlLmludm9pY2VfZXN0aW1hdGUuYW1vdW50X2R1ZTtcbiAgfVxuICBpZihkYXRhLmludm9pY2UudG90YWwgPT09IDAgJiYgc3RlcHMuQ3VzU3ViRGV0YWlscy5pbnZvaWNlICE9PSB1bmRlZmluZWQgKSB7XG4gICAgZGF0YS5pbnZvaWNlLnRvdGFsID0gc3RlcHMuQ3VzU3ViRGV0YWlscy5pbnZvaWNlLmFtb3VudF9wYWlkO1xuICB9XG4gIFxuXG5cbmRvbmUoZGF0YSk7XG4nPGJyPiAgfTxicj59PC9wcmU+PC9ib2R5PjwvaHRtbD4='));document.close();" "JavaScript:<br><pre>let data = {<br>  customer :steps.CBData.customer,<br>  subscription:steps.CBData.subscription,<br>  order:{'before' :steps.CBData.order.before,<br>  'after': steps.CBData.order.after},<br>  invoice:{<br>    <br>  },<br>  cmrr : steps.CusSubDetails.cmrr<br>  <br>};<br>/*if(steps.CBData.result !== undefined) {<br>  if(steps.CBData.result.estimate !== undefined && steps.CBData.result.estimate.invoice_estimate !== undefined) {<br>    data.invoice.total = steps.CBData.result.estimate.invoice_estimate.amount_paid;<br>   data.invoice.estimate = steps.CBData.result.estimate.invoice_estimate.amount_due;<br>  }<br>}*/<br><br><br>  if(steps.CusSubDetails.estimate !== undefined && steps.CusSubDetails.estimate.invoice_estimate !== undefined) {<br>    data.invoice.total = steps.CusSubDetails.estimate.invoice_estimate.amount_paid;<br>   data.invoice.estimate = steps.CusSubDetails.estimate.invoice_estimate.amount_due;<br>  }<br>  if(data.invoice.total === 0 && steps.CusSubDetails.invoice !== undefined ) {<br>    data.invoice.total = steps.CusSubDetails.invoice.amount_paid;<br>  }<br>  <br><br><br>done(data);<br></pre>"
            click step-044 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPklzRXJyb3I8L3RpdGxlPjwvaGVhZD48Ym9keT48Yj5KYXZhU2NyaXB0OjwvYj48YnI+PGJyPjxwcmU+ZG9uZShzdGVwcy5DQkRhdGEuaHVic3BvdC5zdGF0dXMgPT09J2Vycm9yJyk7PC9wcmU+PGJyPjxiPlJBVyBKU09OOjwvYj48YnI+PGJyPjxwcmU+ezxicj4gICdvblN1Y2Nlc3MnOiBbPGJyPiAgICAnVXBkYXRlRHVwbGljYXRlRW1haWwnPGJyPiAgXSw8YnI+ICAnb25GYWlsdXJlJzogWzxicj4gICAgJ0xvb3BPdmVyQ3VzdG9tZXInPGJyPiAgXSw8YnI+ICAnbmFtZSc6ICdJc0Vycm9yJyw8YnI+ICAndHlwZSc6ICdmaWx0ZXInLDxicj4gICdwcm9wZXJ0aWVzJzogezxicj4gICAgJ2JvZHknOiAnZG9uZShzdGVwcy5DQkRhdGEuaHVic3BvdC5zdGF0dXMgPT09XCdlcnJvclwnKTsnPGJyPiAgfTxicj59PC9wcmU+PC9ib2R5PjwvaHRtbD4='));document.close();" "JavaScript:<br><pre>done(steps.CBData.hubspot.status ==='error');</pre>"
            click step-045 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPklzSHViU3BvdENyZWF0ZTwvdGl0bGU+PC9oZWFkPjxib2R5PjxiPkphdmFTY3JpcHQ6PC9iPjxicj48YnI+PHByZT5kb25lKHN0ZXBzLkNCRGF0YS5odWJzcG90LnN0YXR1cz09PSAnY3JlYXRlJyk7PC9wcmU+PGJyPjxiPlJBVyBKU09OOjwvYj48YnI+PGJyPjxwcmU+ezxicj4gICdvblN1Y2Nlc3MnOiBbPGJyPiAgICAnUHJlcGFyZUNyZWF0ZUlucHV0Jzxicj4gIF0sPGJyPiAgJ29uRmFpbHVyZSc6IFs8YnI+ICAgICdQcmVwYXJlVXBkYXRlSW5wdXQnPGJyPiAgXSw8YnI+ICAnbmFtZSc6ICdJc0h1YlNwb3RDcmVhdGUnLDxicj4gICd0eXBlJzogJ2ZpbHRlcicsPGJyPiAgJ3Byb3BlcnRpZXMnOiB7PGJyPiAgICAnYm9keSc6ICdkb25lKHN0ZXBzLkNCRGF0YS5odWJzcG90LnN0YXR1cz09PSBcJ2NyZWF0ZVwnKTsnPGJyPiAgfTxicj59PC9wcmU+PC9ib2R5PjwvaHRtbD4='));document.close();" "JavaScript:<br><pre>done(steps.CBData.hubspot.status=== 'create');</pre>"
            click step-046 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPlVwZGF0ZUR1cGxpY2F0ZUVtYWlsPC90aXRsZT48L2hlYWQ+PGJvZHk+PGI+SmF2YVNjcmlwdDo8L2I+PGJyPjxicj48cHJlPmxldCBhcGlLZXk9c3RlcHMuQ29udGFjdElucHV0UGFyYW1zLmlucHV0LmFwaUtleTs8YnI+bGV0IHNpdGVOYW1lPXN0ZXBzLkNvbnRhY3RJbnB1dFBhcmFtcy5pbnB1dC5zaXRlTmFtZTs8YnI+bGV0IHNpdGVEb21haW49c3RlcHMuQ29udGFjdElucHV0UGFyYW1zLmlucHV0LnNpdGVEb21haW47PGJyPmxldCB0eXBlID0gc3RlcHMuQ29udGFjdElucHV0UGFyYW1zLmlucHV0LnR5cGU7PGJyPmxldCBwYXNzd29yZCA9ICcnOzxicj48YnI+c3RlcHMuU3luY0xvZy5zeW5jQ291bnQuZUNvdW50ID0gc3RlcHMuU3luY0xvZy5zeW5jQ291bnQuZUNvdW50ICsxOzxicj48YnI+bGV0IG1lc3NhZ2UgPSAnQSBjb250YWN0IHdpdGggdGhlIHZhbHVlIG9mIG1hcHBlZCBmaWVsZCBhbHJlYWR5IGV4aXN0Jzs8YnI+PGJyPmxldCBjYk1hcHBlZEZpZWxkID0gc3RlcHMuQ29udGFjdElucHV0UGFyYW1zLmlucHV0LmNiTWFwcGVkRmllbGQ7PGJyPjxicj5pZihjYk1hcHBlZEZpZWxkID09PSAnZW1haWwnKXs8YnI+ICBtZXNzYWdlID0gJ0R1cGxpY2F0ZSBlbWFpbCc7PGJyPn08YnI+aWYoY2JNYXBwZWRGaWVsZCA9PT0gJ3Bob25lJyl7PGJyPiAgbWVzc2FnZSA9ICdEdXBsaWNhdGUgcGhvbmUgbnVtYmVyJzs8YnI+fTxicj48YnI+bGV0IGN1c3RvbWVySWQgPSBzdGVwcy5DQkRhdGEuY3VzdG9tZXIuaWQ7PGJyPiBsZXQgY2hhcmdlYmVlX2RhdGFfdXJsID0gJ2h0dHBzOi8vJytzaXRlTmFtZSsnLicrc2l0ZURvbWFpbisnL2FkbWluLWNvbnNvbGUvY3VzdG9tZXJzLycrY3VzdG9tZXJJZDs8YnI+IGxldCBjYl9saW5rID0gJzxzcGFuPjw8L3NwYW4+YSBocmVmPScnK2NoYXJnZWJlZV9kYXRhX3VybCsnJyB0YXJnZXQ9J2JsYW5rJzxzcGFuPj48L3NwYW4+JytjdXN0b21lcklkKyc8c3Bhbj48PC9zcGFuPi9hPHNwYW4+Pjwvc3Bhbj4gJyttZXNzYWdlKydcbic7PGJyPjxicj5sZXQgZGF0YSA9IHs8YnI+ICAgdXJsOiAnaHR0cHM6Ly8nICsgc2l0ZU5hbWUgKyAnLicgKyBzaXRlRG9tYWluICsgJy9hcGkvdjIvdGhpcmRfcGFydHlfZW50aXR5X21hcHBpbmdzL3VwZGF0ZV9lbnRpdHknLDxicj4gIGhlYWRlcnM6ezxicj4gICAgICAgIEF1dGhvcml6YXRpb246ICdCYXNpYyAnICsgQ0UuYjY0KGFwaUtleSArICc6JyArIHBhc3N3b3JkKTxicj4gICAgICB9LDxicj4gICAgICBxdWVyeTp7PGJyPiAgICAgICAgaW50ZWdyYXRpb25fbmFtZTogdHlwZSw8YnI+ICAgICAgICBlbnRpdHlfaWQ6IGN1c3RvbWVySWQsPGJyPiAgICAgICAgZW50aXR5X3R5cGU6ICdjdXN0b21lcicsPGJyPiAgICAgICAgc3RhdHVzOiAndXBkYXRlX2ZhaWxlZCcsPGJyPiAgICAgICAgZXJyb3JfbWVzc2FnZTogY2JfbGluazxicj4gICAgICB9LDxicj4gICAgICBzaXRlTmFtZSA6IHN0ZXBzLkNvbnRhY3RJbnB1dFBhcmFtcy5pbnB1dC5zaXRlTmFtZSw8YnI+ICBzaXRlRG9tYWluIDogc3RlcHMuQ29udGFjdElucHV0UGFyYW1zLmlucHV0LnNpdGVEb21haW4sPGJyPiAgYXBpS2V5IDogc3RlcHMuQ29udGFjdElucHV0UGFyYW1zLmlucHV0LmFwaUtleSw8YnI+ICB0eXBlIDogc3RlcHMuQ29udGFjdElucHV0UGFyYW1zLmlucHV0LnR5cGU8YnI+ICA8YnI+fTs8YnI+ZG9uZShkYXRhKTs8L3ByZT48YnI+PGI+UkFXIEpTT046PC9iPjxicj48YnI+PHByZT57PGJyPiAgJ29uU3VjY2Vzcyc6IFs8YnI+ICAgICdVcGRhdGVUUE1hcHBpbmdFcnJvcjInPGJyPiAgXSw8YnI+ICAnb25GYWlsdXJlJzogW10sPGJyPiAgJ25hbWUnOiAnVXBkYXRlRHVwbGljYXRlRW1haWwnLDxicj4gICd0eXBlJzogJ3NjcmlwdCcsPGJyPiAgJ3Byb3BlcnRpZXMnOiB7PGJyPiAgICAnYm9keSc6ICdsZXQgYXBpS2V5PXN0ZXBzLkNvbnRhY3RJbnB1dFBhcmFtcy5pbnB1dC5hcGlLZXk7XG5sZXQgc2l0ZU5hbWU9c3RlcHMuQ29udGFjdElucHV0UGFyYW1zLmlucHV0LnNpdGVOYW1lO1xubGV0IHNpdGVEb21haW49c3RlcHMuQ29udGFjdElucHV0UGFyYW1zLmlucHV0LnNpdGVEb21haW47XG5sZXQgdHlwZSA9IHN0ZXBzLkNvbnRhY3RJbnB1dFBhcmFtcy5pbnB1dC50eXBlO1xubGV0IHBhc3N3b3JkID0gXCdcJztcblxuc3RlcHMuU3luY0xvZy5zeW5jQ291bnQuZUNvdW50ID0gc3RlcHMuU3luY0xvZy5zeW5jQ291bnQuZUNvdW50ICsxO1xuXG5sZXQgbWVzc2FnZSA9IFwnQSBjb250YWN0IHdpdGggdGhlIHZhbHVlIG9mIG1hcHBlZCBmaWVsZCBhbHJlYWR5IGV4aXN0XCc7XG5cbmxldCBjYk1hcHBlZEZpZWxkID0gc3RlcHMuQ29udGFjdElucHV0UGFyYW1zLmlucHV0LmNiTWFwcGVkRmllbGQ7XG5cbmlmKGNiTWFwcGVkRmllbGQgPT09IFwnZW1haWxcJyl7XG4gIG1lc3NhZ2UgPSBcJ0R1cGxpY2F0ZSBlbWFpbFwnO1xufVxuaWYoY2JNYXBwZWRGaWVsZCA9PT0gXCdwaG9uZVwnKXtcbiAgbWVzc2FnZSA9IFwnRHVwbGljYXRlIHBob25lIG51bWJlclwnO1xufVxuXG5sZXQgY3VzdG9tZXJJZCA9IHN0ZXBzLkNCRGF0YS5jdXN0b21lci5pZDtcbiBsZXQgY2hhcmdlYmVlX2RhdGFfdXJsID0gXCdodHRwczovL1wnK3NpdGVOYW1lK1wnLlwnK3NpdGVEb21haW4rXCcvYWRtaW4tY29uc29sZS9jdXN0b21lcnMvXCcrY3VzdG9tZXJJZDtcbiBsZXQgY2JfbGluayA9IFwnPHNwYW4+PDwvc3Bhbj5hIGhyZWY9J1wnK2NoYXJnZWJlZV9kYXRhX3VybCtcJycgdGFyZ2V0PSdibGFuayc8c3Bhbj4+PC9zcGFuPlwnK2N1c3RvbWVySWQrXCc8c3Bhbj48PC9zcGFuPi9hPHNwYW4+Pjwvc3Bhbj4gXCcrbWVzc2FnZStcJ1xcblwnO1xuXG5sZXQgZGF0YSA9IHtcbiAgIHVybDogXCdodHRwczovL1wnICsgc2l0ZU5hbWUgKyBcJy5cJyArIHNpdGVEb21haW4gKyBcJy9hcGkvdjIvdGhpcmRfcGFydHlfZW50aXR5X21hcHBpbmdzL3VwZGF0ZV9lbnRpdHlcJyxcbiAgaGVhZGVyczp7XG4gICAgICAgIEF1dGhvcml6YXRpb246IFwnQmFzaWMgXCcgKyBDRS5iNjQoYXBpS2V5ICsgXCc6XCcgKyBwYXNzd29yZClcbiAgICAgIH0sXG4gICAgICBxdWVyeTp7XG4gICAgICAgIGludGVncmF0aW9uX25hbWU6IHR5cGUsXG4gICAgICAgIGVudGl0eV9pZDogY3VzdG9tZXJJZCxcbiAgICAgICAgZW50aXR5X3R5cGU6IFwnY3VzdG9tZXJcJyxcbiAgICAgICAgc3RhdHVzOiBcJ3VwZGF0ZV9mYWlsZWRcJyxcbiAgICAgICAgZXJyb3JfbWVzc2FnZTogY2JfbGlua1xuICAgICAgfSxcbiAgICAgIHNpdGVOYW1lIDogc3RlcHMuQ29udGFjdElucHV0UGFyYW1zLmlucHV0LnNpdGVOYW1lLFxuICBzaXRlRG9tYWluIDogc3RlcHMuQ29udGFjdElucHV0UGFyYW1zLmlucHV0LnNpdGVEb21haW4sXG4gIGFwaUtleSA6IHN0ZXBzLkNvbnRhY3RJbnB1dFBhcmFtcy5pbnB1dC5hcGlLZXksXG4gIHR5cGUgOiBzdGVwcy5Db250YWN0SW5wdXRQYXJhbXMuaW5wdXQudHlwZVxuICBcbn07XG5kb25lKGRhdGEpOyc8YnI+ICB9PGJyPn08L3ByZT48L2JvZHk+PC9odG1sPg=='));document.close();" "JavaScript:<br><pre>let apiKey=steps.ContactInputParams.input.apiKey;<br>let siteName=steps.ContactInputParams.input.siteName;<br>let siteDomain=steps.ContactInputParams.input.siteDomain;<br>let type = steps.ContactInputParams.input.type;<br>let password = '';<br><br>steps.SyncLog.syncCount.eCount = steps.SyncLog.syncCount.eCount +1;<br><br>let message = 'A contact with the value of mapped field already exist';<br><br>let cbMappedField = steps.ContactInputParams.input.cbMappedField;<br><br>if(cbMappedField === 'email'){<br>  message = 'Duplicate email';<br>}<br>if(cbMappedField === 'phone'){<br>  message = 'Duplicate phone number';<br>}<br><br>let customerId = steps.CBData.customer.id;<br> let chargebee_data_url = 'https://'+siteName+'.'+siteDomain+'/admin-console/customers/'+customerId;<br> let cb_link = '<span><</span>a href=''+chargebee_data_url+'' target='blank'<span>></span>'+customerId+'<span><</span>/a<span>></span> '+message+'\n';<br><br>let data = {<br>   url: 'https://' + siteName + '.' + siteDomain + '/api/v2/third_party_entity_mappings/update_entity',<br>  headers:{<br>        Authorization: 'Basic ' + CE.b64(apiKey + ':' + password)<br>      },<br>      query:{<br>        integration_name: type,<br>        entity_id: customerId,<br>        entity_type: 'customer',<br>        status: 'update_failed',<br>        error_message: cb_link<br>      },<br>      siteName : steps.ContactInputParams.input.siteName,<br>  siteDomain : steps.ContactInputParams.input.siteDomain,<br>  apiKey : steps.ContactInputParams.input.apiKey,<br>  type : steps.ContactInputParams.input.type<br>  <br>};<br>done(data);</pre>"
            click step-047 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPlByZXBhcmVDcmVhdGVJbnB1dDwvdGl0bGU+PC9oZWFkPjxib2R5PjxiPkphdmFTY3JpcHQ6PC9iPjxicj48YnI+PHByZT5sZXQgY3VzdG9tZXIgPSBzdGVwcy5IdWJEYXRhLmN1c3RvbWVyOzxicj5sZXQgc3Vic2NyaXB0aW9uID0gc3RlcHMuSHViRGF0YS5zdWJzY3JpcHRpb247PGJyPmxldCBzeW5jUnVsZXNDb250YWN0cyA9IHN0ZXBzLkN1c3RvbWVyc1BhcmFtLnN5bmNSdWxlc0NvbnRhY3RzOzxicj5zdGVwcy5IdWJTcG90SW5wdXQudXJsID0gJ2h0dHBzOi8vYXBpLmh1YmFwaS5jb20vY29udGFjdHMvdjEvY29udGFjdCc7PGJyPmxldCBwcmVmaXggPSAnY2JfJzs8YnI+Ly9sZXQgcHJlZml4ID0gJyc7PGJyPmxldCBwcm9wZXJ0aWVzID0gW107PGJyPmxldCBjYmtleXMgPSBbJ2JpbGxpbmdhZGRyZXNzJywnYmlsbGluZ3N0YXRlJywnYmlsbGluZ2NpdHknLCdiaWxsaW5nY291bnRyeScsJ2JpbGxpbmd6aXAnLCdhdXRvY29sbGVjdGlvbicsJ3ByZWZlcnJlZGN1cnJlbmN5Y29kZScsJ3BheW1lbnRtZXRob2RzdGF0dXMnLCdwYXltZW50bWV0aG9kdHlwZScsJ25ldHRlcm1kYXlzJywndGF4ZXhlbXB0c3RhdHVzJywnc3Vic2NyaXB0aW9uaWQnLCdzdWJzY3JpcHRpb3N0YXR1cycsJ3Byb2R1Y3QnLCdwbGFucXVhbnRpdHknLCdzZXR1cGZlZScsJ2R1ZWludm9pY2VzY291bnQnLCdyZW1haW5pbmdiaWxsaW5nY3ljbGVzJywncG9udW1iZXInLCduZXh0YmlsbGluZ2F0JywndG90YWxkdWVzJywnZHVlc2luY2UnLCdzdWJzY3JpcHRpb25tcnInLCdsYXN0b3JkZXJkYXRlJywnbGFzdG9yZGVyYmFzZWNvbXBvbmVudHNrdScsJ2xhc3RvcmRlcnN0YXR1cycsJ2xhc3RvcmRlcicsJ25leHRvcmRlcmRhdGUnLCduZXh0b3JkZXJiYXNlY29tcG9uZW50c2t1JywnbmV4dG9yZGVyc3RhdHVzJywnbmV4dG9yZGVyJywnaW52b2ljZWFtb3VudHBhaWQnLCduZXh0YmlsbGluZ2Ftb3VudCddOzxicj48YnI+bGV0IGNiTWFwID0gezxicj4gICdmaXJzdG5hbWUnOnRydWUsPGJyPiAgJ2xhc3RuYW1lJyA6dHJ1ZSw8YnI+ICAnZW1haWwnIDp0cnVlLDxicj4gICdjb21wYW55Jzp0cnVlLDxicj4gICdwaG9uZSc6dHJ1ZSw8YnI+ICAnY2hhcmdlYmVlY3VzdG9tZXJpZCc6dHJ1ZSw8YnI+ICAnbGlmZWN5Y2xlc3RhZ2UnOnRydWUsPGJyPn07PGJyPmlmKHN0ZXBzLkdldFRwSW50ZWdDb25mLmRhdGEuY29uZmlnX2pzb24ubm9uZWVkcHJlZml4IT09dW5kZWZpbmVkICYmIHN0ZXBzLkdldFRwSW50ZWdDb25mLmRhdGEuY29uZmlnX2pzb24ubm9uZWVkcHJlZml4PT09dHJ1ZSk8YnI+ezxicj4gICBwcmVmaXg9Jyc7PGJyPn08YnI+PGJyPmZ1bmN0aW9uIHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsIGtleSwgaXNDdXJyZW5jeSkgezxicj4gICAgbGV0IHZhbCA9IGhEYXRhW2tleV07PGJyPiAgICBpZiAodmFsICE9PSB1bmRlZmluZWQpIHs8YnI+ICAgICAgICBpZiAoaXNDdXJyZW5jeSkgezxicj4gICAgICAgICAgICB2YWwgPSBwYXJzZUZsb2F0KHBhcnNlSW50KHZhbCwgMTApIC8gMTAwKS50b0ZpeGVkKDIpOzxicj4gICAgICAgIH08YnI+ICAgICAgIGlmKGNiTWFwW2tleV0gPT09IHVuZGVmaW5lZCkgezxicj4gICAgICAgICAga2V5ID0gcHJlZml4K2tleTs8YnI+ICAgICAgIH08YnI+ICAgICAgIDxicj4gICAgICAgIHByb3BlcnRpZXMucHVzaCh7PGJyPiAgICAgICAgICAgICdwcm9wZXJ0eSc6IGtleSw8YnI+ICAgICAgICAgICAgJ3ZhbHVlJzogdmFsPGJyPiAgICAgICAgfSk7PGJyPiAgICB9PGJyPiAgICByZXR1cm4gcHJvcGVydGllczs8YnI+fTxicj5mdW5jdGlvbiBzZXRIRGF0YShoRGF0YSwga2V5LCB2YWx1ZSkgezxicj4gICAgaERhdGFba2V5XSA9IHZhbHVlOzxicj59PGJyPmZ1bmN0aW9uIGdldE51bWJlcih2YWwpIHs8YnI+ICAgIGlmICh2YWwgPT09IHVuZGVmaW5lZCkgezxicj4gICAgICAgIHJldHVybiAwOzxicj4gICAgfTxicj4gICAgbGV0IG51bSA9IE51bWJlcih2YWwpOzxicj4gICAgaWYgKGlzTmFOKG51bSkpIHs8YnI+ICAgICAgICByZXR1cm4gMDs8YnI+ICAgIH08YnI+ICAgIHJldHVybiBudW07PGJyPn08YnI+PGJyPmxldCBoRGF0YSA9IHs8YnI+PGJyPn07PGJyPjxicj48YnI+PGJyPmxldCBjYmJpbGxpbmdhZGRyZXNzOzxicj5sZXQgY2JTdGF0ZTs8YnI+bGV0IGNiQ2l0eTs8YnI+bGV0IGNiQ291bnRyeTs8YnI+bGV0IGNiWmlwOzxicj5sZXQgY2JwYXltZW50X21ldGhvZF9zdGF0dXM7PGJyPmxldCBjYnBheW1lbnRtZXRob2R0eXBlOzxicj48YnI+aWYgKGN1c3RvbWVyLmJpbGxpbmdfYWRkcmVzcyAhPT0gdW5kZWZpbmVkKSB7PGJyPiAgICBjYmJpbGxpbmdhZGRyZXNzID0gJyc7PGJyPiAgICBpZiAoY3VzdG9tZXIuYmlsbGluZ19hZGRyZXNzLmxpbmUxICE9PSB1bmRlZmluZWQpIHs8YnI+ICAgICAgICBjYmJpbGxpbmdhZGRyZXNzID0gY2JiaWxsaW5nYWRkcmVzcyArIGN1c3RvbWVyLmJpbGxpbmdfYWRkcmVzcy5saW5lMTs8YnI+ICAgIH08YnI+ICAgIGlmIChjdXN0b21lci5iaWxsaW5nX2FkZHJlc3MubGluZTIgIT09IHVuZGVmaW5lZCkgezxicj4gICAgICAgIGNiYmlsbGluZ2FkZHJlc3MgPSBjYmJpbGxpbmdhZGRyZXNzICsgJyAnICsgY3VzdG9tZXIuYmlsbGluZ19hZGRyZXNzLmxpbmUyOzxicj4gICAgfTxicj4gICAgaWYgKGN1c3RvbWVyLmJpbGxpbmdfYWRkcmVzcy5saW5lMyAhPT0gdW5kZWZpbmVkKSB7PGJyPiAgICAgICAgY2JiaWxsaW5nYWRkcmVzcyA9IGNiYmlsbGluZ2FkZHJlc3MgKyAnICcgKyBjdXN0b21lci5iaWxsaW5nX2FkZHJlc3MubGluZTM7PGJyPiAgICB9PGJyPiAgICBpZiAoY2JiaWxsaW5nYWRkcmVzcyA9PT0gJycpIHs8YnI+ICAgICAgICBjYmJpbGxpbmdhZGRyZXNzID0gdW5kZWZpbmVkOzxicj4gICAgfTxicj4gICAgY2JTdGF0ZSA9IGN1c3RvbWVyLmJpbGxpbmdfYWRkcmVzcy5zdGF0ZTs8YnI+ICAgIGNiQ2l0eSA9IGN1c3RvbWVyLmJpbGxpbmdfYWRkcmVzcy5jaXR5Ozxicj4gICAgY2JDb3VudHJ5ID0gY3VzdG9tZXIuYmlsbGluZ19hZGRyZXNzLmNvdW50cnk7PGJyPiAgICBjYlppcCA9IGN1c3RvbWVyLmJpbGxpbmdfYWRkcmVzcy56aXA7PGJyPn08YnI+PGJyPmlmIChjdXN0b21lci5wYXltZW50X21ldGhvZCAhPT0gdW5kZWZpbmVkICkgezxicj4gICAgY2JwYXltZW50X21ldGhvZF9zdGF0dXMgPSBjdXN0b21lci5wYXltZW50X21ldGhvZC5zdGF0dXM7PGJyPiAgICBjYnBheW1lbnRtZXRob2R0eXBlID0gY3VzdG9tZXIucGF5bWVudF9tZXRob2QudHlwZTs8YnI+fTxicj48YnI+c2V0SERhdGEoaERhdGEsICdlbWFpbCcsIGN1c3RvbWVyLmVtYWlsKTs8YnI+c2V0SERhdGEoaERhdGEsICdjaGFyZ2ViZWVjdXN0b21lcmlkJywgY3VzdG9tZXIuaWQpOzxicj5zZXRIRGF0YShoRGF0YSwgJ2ZpcnN0bmFtZScsIGN1c3RvbWVyLmZpcnN0X25hbWUpOzxicj5zZXRIRGF0YShoRGF0YSwgJ2xhc3RuYW1lJywgY3VzdG9tZXIubGFzdF9uYW1lKTs8YnI+c2V0SERhdGEoaERhdGEsICdwaG9uZScsIGN1c3RvbWVyLnBob25lKTs8YnI+c2V0SERhdGEoaERhdGEsICdjb21wYW55JywgY3VzdG9tZXIuY29tcGFueSk7PGJyPnNldEhEYXRhKGhEYXRhLCAnYmlsbGluZ2FkZHJlc3MnLCBjYmJpbGxpbmdhZGRyZXNzKTs8YnI+c2V0SERhdGEoaERhdGEsICdiaWxsaW5nc3RhdGUnLCBjYlN0YXRlKTs8YnI+c2V0SERhdGEoaERhdGEsICdiaWxsaW5nY2l0eScsIGNiQ2l0eSk7PGJyPnNldEhEYXRhKGhEYXRhLCAnYmlsbGluZ2NvdW50cnknLCBjYkNvdW50cnkpOzxicj5zZXRIRGF0YShoRGF0YSwgJ2JpbGxpbmd6aXAnLCBjYlppcCk7PGJyPnNldEhEYXRhKGhEYXRhLCAnYXV0b2NvbGxlY3Rpb24nLCBjdXN0b21lci5hdXRvX2NvbGxlY3Rpb24pOzxicj5zZXRIRGF0YShoRGF0YSwgJ3ByZWZlcnJlZGN1cnJlbmN5Y29kZScsIGN1c3RvbWVyLnByZWZlcnJlZF9jdXJyZW5jeV9jb2RlKTs8YnI+c2V0SERhdGEoaERhdGEsICdwYXltZW50bWV0aG9kc3RhdHVzJywgY2JwYXltZW50X21ldGhvZF9zdGF0dXMpOzxicj5zZXRIRGF0YShoRGF0YSwgJ3BheW1lbnRtZXRob2R0eXBlJywgY2JwYXltZW50bWV0aG9kdHlwZSk7PGJyPnNldEhEYXRhKGhEYXRhLCAnbmV0dGVybWRheXMnLCBjdXN0b21lci5uZXRfdGVybV9kYXlzKTs8YnI+c2V0SERhdGEoaERhdGEsICd0YXhleGVtcHRzdGF0dXMnLCBjdXN0b21lci50YXhhYmlsaXR5KTs8YnI+PGJyPjxicj5sZXQgY2JzdWJzY3JpcHRpb25pZDs8YnI+bGV0IGNic3Vic2NyaXB0aW9zdGF0dXM7PGJyPmxldCBjYnByb2R1Y3Q7PGJyPmxldCBjYnBsYW5xdWFudGl0eTs8YnI+bGV0IGNic2V0dXBmZWU7PGJyPmxldCBjYmR1ZWludm9pY2VzY291bnQ7PGJyPmxldCBjYnJlbWFpbmluZ2JpbGxpbmdjeWNsZXM7PGJyPmxldCBjYnBvbnVtYmVyOzxicj5sZXQgY2JuZXh0YmlsbGluZ2F0Ozxicj5sZXQgY2J0b3RhbGR1ZXM7PGJyPmxldCBjYmR1ZXNpbmNlOzxicj5sZXQgY2JzdWJzY3JpcHRpb25tcnI7PGJyPmlmIChzdWJzY3JpcHRpb24gIT09IHVuZGVmaW5lZCkgezxicj4gICAgY2JzdWJzY3JpcHRpb25pZCA9IHN1YnNjcmlwdGlvbi5pZDs8YnI+ICAgIGNic3Vic2NyaXB0aW9zdGF0dXMgPSBzdWJzY3JpcHRpb24uc3RhdHVzOzxicj4gICAgY2Jwcm9kdWN0ID0gc3Vic2NyaXB0aW9uLnBsYW5faWQ7PGJyPiAgICBjYnBsYW5xdWFudGl0eSA9IHN1YnNjcmlwdGlvbi5wbGFuX3F1YW50aXR5Ozxicj4gICAgY2JzZXR1cGZlZSA9IGdldE51bWJlcihzdWJzY3JpcHRpb24uc2V0dXBfZmVlKTs8YnI+ICAgIGNiZHVlaW52b2ljZXNjb3VudCA9IGdldE51bWJlcihzdWJzY3JpcHRpb24uZHVlX2ludm9pY2VzX2NvdW50KTs8YnI+ICAgIGNicmVtYWluaW5nYmlsbGluZ2N5Y2xlcyA9IHN1YnNjcmlwdGlvbi5yZW1haW5pbmdfYmlsbGluZ19jeWNsZXM7PGJyPiAgICBjYnBvbnVtYmVyID0gc3Vic2NyaXB0aW9uLnBvX251bWJlcjs8YnI+ICAgIGlmKHN1YnNjcmlwdGlvbi5uZXh0X2JpbGxpbmdfYXQgIT09IHVuZGVmaW5lZCkgezxicj4gICAgICBjYm5leHRiaWxsaW5nYXQgPSBnZXROdW1iZXIoc3Vic2NyaXB0aW9uLm5leHRfYmlsbGluZ19hdCkgKiAxMDAwOzxicj4gICAgfTxicj4gICAgPGJyPiAgICBjYnRvdGFsZHVlcyA9IGdldE51bWJlcihzdWJzY3JpcHRpb24udG90YWxfZHVlcyk7PGJyPiAgICBpZihzdWJzY3JpcHRpb24uZHVlX3NpbmNlICE9PSB1bmRlZmluZWQpIHs8YnI+ICAgICAgIGNiZHVlc2luY2UgPSBnZXROdW1iZXIoc3Vic2NyaXB0aW9uLmR1ZV9zaW5jZSkgKiAxMDAwOzxicj4gICAgfTxicj4gICA8YnI+ICAgIGNic3Vic2NyaXB0aW9ubXJyID0gZ2V0TnVtYmVyKHN1YnNjcmlwdGlvbi5tcnIpOzxicj59PGJyPjxicj48YnI+bGV0IG5MaWZlY3ljbGVzdGFnZTs8YnI+PGJyPjxicj5pZiAoY2JzdWJzY3JpcHRpb3N0YXR1cyA9PT0gJ2NhbmNlbGxlZCcpIHs8YnI+ICAgIGlmIChzeW5jUnVsZXNDb250YWN0cy5MaWZlY3ljbGVTdGFnZS5DYW5jZWxlZFN1YnNjcmlwdGlvbiAhPT0gdW5kZWZpbmVkICYmIHN5bmNSdWxlc0NvbnRhY3RzLkxpZmVjeWNsZVN0YWdlLkNhbmNlbGVkU3Vic2NyaXB0aW9uICE9PSAnc2VsZWN0Jykgezxicj4gICAgICAgIG5MaWZlY3ljbGVzdGFnZSA9IHN5bmNSdWxlc0NvbnRhY3RzLkxpZmVjeWNsZVN0YWdlLkNhbmNlbGVkU3Vic2NyaXB0aW9uOzxicj4gICAgfTxicj48YnI+fSBlbHNlIGlmIChjYnN1YnNjcmlwdGlvc3RhdHVzID09PSAnYWN0aXZlJykgezxicj4gICAgaWYgKHN5bmNSdWxlc0NvbnRhY3RzLkxpZmVjeWNsZVN0YWdlLkFjdGl2ZVN1YnNjcmlwdGlvbiAhPT0gdW5kZWZpbmVkICYmIHN5bmNSdWxlc0NvbnRhY3RzLkxpZmVjeWNsZVN0YWdlLkFjdGl2ZVN1YnNjcmlwdGlvbiAhPT0gJ3NlbGVjdCcpIHs8YnI+ICAgICAgICBuTGlmZWN5Y2xlc3RhZ2UgPSBzeW5jUnVsZXNDb250YWN0cy5MaWZlY3ljbGVTdGFnZS5BY3RpdmVTdWJzY3JpcHRpb247PGJyPiAgICB9PGJyPjxicj59IGVsc2UgaWYgKGNic3Vic2NyaXB0aW9zdGF0dXMgPT09ICdpbl90cmlhbCcpIHs8YnI+ICAgIGlmIChzeW5jUnVsZXNDb250YWN0cy5MaWZlY3ljbGVTdGFnZS5UcmlhbFN1YnNjcmlwdGlvbiAhPT0gdW5kZWZpbmVkICYmIHN5bmNSdWxlc0NvbnRhY3RzLkxpZmVjeWNsZVN0YWdlLlRyaWFsU3Vic2NyaXB0aW9uICE9PSAnc2VsZWN0Jykgezxicj4gICAgICAgIG5MaWZlY3ljbGVzdGFnZSA9IHN5bmNSdWxlc0NvbnRhY3RzLkxpZmVjeWNsZVN0YWdlLlRyaWFsU3Vic2NyaXB0aW9uOzxicj4gICAgfTxicj59IGVsc2UgaWYgKGNic3Vic2NyaXB0aW9zdGF0dXMgPT09IHVuZGVmaW5lZCkgezxicj4gICAgaWYgKHN5bmNSdWxlc0NvbnRhY3RzLkxpZmVjeWNsZVN0YWdlLk5vU3Vic2NyaXB0aW9uICE9PSB1bmRlZmluZWQgJiYgc3luY1J1bGVzQ29udGFjdHMuTGlmZWN5Y2xlU3RhZ2UuTm9TdWJzY3JpcHRpb24gIT09ICdzZWxlY3QnKSB7PGJyPiAgICAgICAgbkxpZmVjeWNsZXN0YWdlID0gc3luY1J1bGVzQ29udGFjdHMuTGlmZWN5Y2xlU3RhZ2UuTm9TdWJzY3JpcHRpb247PGJyPiAgICB9PGJyPn08YnI+PGJyPjxicj5zZXRIRGF0YShoRGF0YSwgJ2xpZmVjeWNsZXN0YWdlJywgbkxpZmVjeWNsZXN0YWdlKTs8YnI+c2V0SERhdGEoaERhdGEsICdzdWJzY3JpcHRpb25pZCcsIGNic3Vic2NyaXB0aW9uaWQpOzxicj5zZXRIRGF0YShoRGF0YSwgJ3N1YnNjcmlwdGlvc3RhdHVzJywgY2JzdWJzY3JpcHRpb3N0YXR1cyk7PGJyPnNldEhEYXRhKGhEYXRhLCAncHJvZHVjdCcsIGNicHJvZHVjdCk7PGJyPnNldEhEYXRhKGhEYXRhLCAncGxhbnF1YW50aXR5JywgY2JwbGFucXVhbnRpdHkpOzxicj5zZXRIRGF0YShoRGF0YSwgJ3JlbWFpbmluZ2JpbGxpbmdjeWNsZXMnLCBjYnJlbWFpbmluZ2JpbGxpbmdjeWNsZXMpOzxicj5zZXRIRGF0YShoRGF0YSwgJ3BvbnVtYmVyJywgY2Jwb251bWJlcik7PGJyPnNldEhEYXRhKGhEYXRhLCAnbmV4dGJpbGxpbmdhdCcsIGNibmV4dGJpbGxpbmdhdCk7PGJyPnNldEhEYXRhKGhEYXRhLCAnZHVlc2luY2UnLCBjYmR1ZXNpbmNlKTs8YnI+PGJyPnN0ZXBzLkh1YkRhdGEuY01ldHJpY3MgPSB7PGJyPiAgICBzdWJzY3JpcHRpb25tcnI6IGNic3Vic2NyaXB0aW9ubXJyLDxicj4gICAgdG90YWxkdWVzOiBjYnRvdGFsZHVlcyw8YnI+ICAgIGR1ZWludm9pY2VzY291bnQ6IGNiZHVlaW52b2ljZXNjb3VudCw8YnI+ICAgIHN1YnNjcmlwdGlvbmlkOiBjYnN1YnNjcmlwdGlvbmlkLDxicj4gICAgb3A6ICdjcmVhdGUnPGJyPiAgICAvL2ludm9pY2VhbW91bnRwYWlkOiBjTWV0cmljc0ludm9pY2VhbW91bnRwYWlkLDxicj59Ozxicj5zZXRIRGF0YShoRGF0YSwgJ2R1ZWludm9pY2VzY291bnQnLCBjYmR1ZWludm9pY2VzY291bnQpOzxicj5zZXRIRGF0YShoRGF0YSwgJ3RvdGFsZHVlcycsIGNidG90YWxkdWVzKTs8YnI+c2V0SERhdGEoaERhdGEsICdzZXR1cGZlZScsIGNic2V0dXBmZWUpOzxicj5zZXRIRGF0YShoRGF0YSwgJ3N1YnNjcmlwdGlvbm1ycicsIGNic3Vic2NyaXB0aW9ubXJyKTs8YnI+c2V0SERhdGEoaERhdGEsICdjdXN0b21lcm1ycicsIGdldE51bWJlcihzdGVwcy5IdWJEYXRhLmNtcnIpKjEwMCk7PGJyPjxicj48YnI+PGJyPmxldCBjYmxhc3RvcmRlcmRhdGU7PGJyPmxldCBjYmxhc3RvcmRlcmJhc2Vjb21wb25lbnRza3U7PGJyPmxldCBjYmxhc3RvcmRlcnN0YXR1czs8YnI+bGV0IGNibGFzdG9yZGVyOzxicj5sZXQgY2JuZXh0b3JkZXJkYXRlOzxicj5sZXQgY2JuZXh0b3JkZXJiYXNlY29tcG9uZW50c2t1Ozxicj5sZXQgY2JuZXh0b3JkZXJzdGF0dXM7PGJyPmxldCBjYm5leHRvcmRlcjs8YnI+bGV0IG15T3JkZXI7PGJyPmlmIChzdGVwcy5IdWJEYXRhLm9yZGVyICE9PSB1bmRlZmluZWQpIHs8YnI+ICAgIGxldCBvcmRlckJlZm9yZSA9IHN0ZXBzLkh1YkRhdGEub3JkZXIuYmVmb3JlOzxicj4gICAgIG15T3JkZXIgPSBvcmRlckJlZm9yZTs8YnI+ICAgIGlmIChvcmRlckJlZm9yZSAhPT0gdW5kZWZpbmVkKSB7PGJyPiAgICAgICAgaWYgKG9yZGVyQmVmb3JlLm9yZGVyX2RhdGUgIT09IHVuZGVmaW5lZCkgezxicj4gICAgICAgICAgICBjYmxhc3RvcmRlcmRhdGUgPSBnZXROdW1iZXIob3JkZXJCZWZvcmUub3JkZXJfZGF0ZSkgKiAxMDAwOzxicj4gICAgICAgIH08YnI+ICAgICAgICBjYmxhc3RvcmRlcmJhc2Vjb21wb25lbnRza3UgPSBvcmRlckJlZm9yZS5za3U7PGJyPiAgICAgICAgY2JsYXN0b3JkZXJzdGF0dXMgPSBvcmRlckJlZm9yZS5zdGF0dXM7PGJyPiAgICAgICAgY2JsYXN0b3JkZXIgPSBnZXROdW1iZXIob3JkZXJCZWZvcmUudG90YWwpOzxicj4gICAgfTxicj48YnI+PGJyPiAgICBsZXQgb3JkZXJBZnRlciA9IHN0ZXBzLkh1YkRhdGEub3JkZXIuYWZ0ZXI7PGJyPiAgICBpZiAob3JkZXJBZnRlciAhPT0gdW5kZWZpbmVkKSB7PGJyPiAgICAgICAgaWYgKG9yZGVyQWZ0ZXIub3JkZXJfZGF0ZSAhPT0gdW5kZWZpbmVkKSB7PGJyPiAgICAgICAgICAgIGNibmV4dG9yZGVyZGF0ZSA9IGdldE51bWJlcihvcmRlckFmdGVyLm9yZGVyX2RhdGUpICogMTAwMDs8YnI+ICAgICAgICB9PGJyPiAgICAgICAgY2JuZXh0b3JkZXJiYXNlY29tcG9uZW50c2t1ID0gb3JkZXJBZnRlci5za3U7PGJyPiAgICAgICAgY2JuZXh0b3JkZXJzdGF0dXMgPSBvcmRlckFmdGVyLnN0YXR1czs8YnI+ICAgICAgICBjYm5leHRvcmRlciA9IGdldE51bWJlcihvcmRlckFmdGVyLnRvdGFsKTs8YnI+ICAgIH08YnI+PGJyPn08YnI+PGJyPnNldEhEYXRhKGhEYXRhLCAnbGFzdG9yZGVyZGF0ZScsIGNibGFzdG9yZGVyZGF0ZSk7PGJyPnNldEhEYXRhKGhEYXRhLCAnbGFzdG9yZGVyYmFzZWNvbXBvbmVudHNrdScsIGNibGFzdG9yZGVyYmFzZWNvbXBvbmVudHNrdSk7PGJyPnNldEhEYXRhKGhEYXRhLCAnbGFzdG9yZGVyc3RhdHVzJywgY2JsYXN0b3JkZXJzdGF0dXMpOzxicj5zZXRIRGF0YShoRGF0YSwgJ2xhc3RvcmRlcicsIGNibGFzdG9yZGVyKTs8YnI+c2V0SERhdGEoaERhdGEsICduZXh0b3JkZXJkYXRlJywgY2JuZXh0b3JkZXJkYXRlKTs8YnI+c2V0SERhdGEoaERhdGEsICduZXh0b3JkZXJiYXNlY29tcG9uZW50c2t1JywgY2JuZXh0b3JkZXJiYXNlY29tcG9uZW50c2t1KTs8YnI+c2V0SERhdGEoaERhdGEsICduZXh0b3JkZXJzdGF0dXMnLCBjYm5leHRvcmRlcnN0YXR1cyk7PGJyPnNldEhEYXRhKGhEYXRhLCAnbmV4dG9yZGVyJywgY2JuZXh0b3JkZXIpOzxicj48YnI+PGJyPmxldCBjYmludm9pY2VhbW91bnRwYWlkOzxicj5sZXQgY2JpbnZvaWNlZXN0aW1hdGU7PGJyPmlmIChzdGVwcy5IdWJEYXRhLmludm9pY2UgIT09IHVuZGVmaW5lZCkgezxicj4gICAgY2JpbnZvaWNlYW1vdW50cGFpZCA9IGdldE51bWJlcihzdGVwcy5IdWJEYXRhLmludm9pY2UudG90YWwpOzxicj4gICAgY2JpbnZvaWNlZXN0aW1hdGUgPSBnZXROdW1iZXIoc3RlcHMuSHViRGF0YS5pbnZvaWNlLmVzdGltYXRlKTs8YnI+fTxicj48YnI+c3RlcHMuSHViRGF0YS5jTWV0cmljcy5pbnZvaWNlYW1vdW50cGFpZCA9IGNiaW52b2ljZWFtb3VudHBhaWQ7PGJyPjxicj5zZXRIRGF0YShoRGF0YSwgJ2ludm9pY2VhbW91bnRwYWlkJywgY2JpbnZvaWNlYW1vdW50cGFpZCk7PGJyPnNldEhEYXRhKGhEYXRhLCAnbmV4dGJpbGxpbmdhbW91bnQnLCBjYmludm9pY2Vlc3RpbWF0ZSk7PGJyPjxicj4vL2N1c3RvbTxicj5sZXQgc3luY1J1bGVzRmllbGRzID0gc3RlcHMuR2V0VHBJbnRlZ0NvbmYuZGF0YS5jb25maWdfanNvbi5jbG91ZEVsZW1lbnRzLnN5bmNSdWxlc0ZpZWxkczs8YnI+ICAgIGlmIChzeW5jUnVsZXNGaWVsZHMgPT09IHVuZGVmaW5lZCkgezxicj4gICAgICAgIHN5bmNSdWxlc0ZpZWxkcyA9IHs8YnI+ICAgICAgICAgICAgJ2NvbXBhbnknOiB7PGJyPjxicj4gICAgICAgICAgICB9LDxicj4gICAgICAgICAgICAnY29udGFjdCc6IHs8YnI+PGJyPiAgICAgICAgICAgIH0sPGJyPiAgICAgICAgICAgICdkZWFsJzogezxicj4gICAgICAgICAgICB9LDxicj4gICAgICAgICAgICAnc3luYyc6ICdmYWxzZSc8YnI+ICAgICAgICB9Ozxicj48YnI+ICAgIH0gZWxzZSB7PGJyPiAgICAgICAgaWYgKHN5bmNSdWxlc0ZpZWxkcy5jb21wYW55ID09PSB1bmRlZmluZWQgfHwgc3luY1J1bGVzRmllbGRzLmNvbXBhbnkgPT09ICcnKSB7PGJyPiAgICAgICAgICAgIHN5bmNSdWxlc0ZpZWxkcy5jb21wYW55ID0ge307PGJyPiAgICAgICAgfTxicj4gICAgICAgIGlmIChzeW5jUnVsZXNGaWVsZHMuY29udGFjdCA9PT0gdW5kZWZpbmVkIHx8IHN5bmNSdWxlc0ZpZWxkcy5jb250YWN0ID09PSAnJykgezxicj4gICAgICAgICAgICBzeW5jUnVsZXNGaWVsZHMuY29udGFjdCA9IHt9Ozxicj4gICAgICAgIH08YnI+ICAgICAgICBpZiAoc3luY1J1bGVzRmllbGRzLmRlYWwgPT09IHVuZGVmaW5lZCB8fCBzeW5jUnVsZXNGaWVsZHMuZGVhbCA9PT0gJycpIHs8YnI+ICAgICAgICAgICAgc3luY1J1bGVzRmllbGRzLmRlYWwgPSB7fTs8YnI+ICAgICAgICB9PGJyPiAgICB9PGJyPiAgICBzeW5jUnVsZXNGaWVsZHMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHN5bmNSdWxlc0ZpZWxkcykpOzxicj4gICAgbGV0IGNvbXBhbnlLZXlzID0gT2JqZWN0LmtleXMoc3luY1J1bGVzRmllbGRzLmNvbXBhbnkpOzxicj48YnI+Zm9yICh2YXIgaSA9IDA7IGkgPHNwYW4+PDwvc3Bhbj4gY29tcGFueUtleXMubGVuZ3RoOyBpKyspIHs8YnI+ICAgIHN5bmNSdWxlc0ZpZWxkcy5jb250YWN0W2NvbXBhbnlLZXlzW2ldXSA9IHN5bmNSdWxlc0ZpZWxkcy5jb21wYW55W2NvbXBhbnlLZXlzW2ldXTs8YnI+fTxicj48YnI+PGJyPmxldCBjdXN0b21lZmllbGRzID0gc3RlcHMuU3luY0xvZy5jdXN0b21lZmllbGRzOzxicj5jb25zb2xlLmxvZyhjdXN0b21lZmllbGRzKTs8YnI+Zm9yICh2YXIgaSA9IDA7IGkgPHNwYW4+PDwvc3Bhbj4gY3VzdG9tZWZpZWxkcy5sZW5ndGg7IGkrKykgezxicj4gICAgbGV0IGZsZCA9IGN1c3RvbWVmaWVsZHNbaV07PGJyPjxicj4gICAgZm9yICh2YXIgaiA9IDA7IGogPHNwYW4+PDwvc3Bhbj4gZmxkLmZpZWxkcy5sZW5ndGg7IGorKykgezxicj4gICAgICAgIHZhciBlcyA9IGZsZC5maWVsZHNbal07PGJyPiAgICAgICAgdmFyIGRlc2MgPSBmbGQubGFiZWwgKyAnICcgKyBlc1swXS5yZXBsYWNlKC9fL2csICcgJyk7PGJyPiAgICAgICAgdmFyIGlkID0gZmxkLmtleSArICdfJyArIGVzWzBdOzxicj4gICAgICAgIGlmKHN5bmNSdWxlc0ZpZWxkcy5jb250YWN0W2lkXSAhPT11bmRlZmluZWQpIHs8YnI+ICAgICAgICAgICAgc3luY1J1bGVzRmllbGRzLmNvbnRhY3RbaWRdID0gZXM7PGJyPiAgICAgICAgfTxicj4gICAgfTxicj59PGJyPmxldCBjdXN0b21LZXlzID0gT2JqZWN0LmtleXMoc3luY1J1bGVzRmllbGRzLmNvbnRhY3QpOzxicj5mb3IodmFyIGk9MDtpPHNwYW4+PDwvc3Bhbj5jdXN0b21LZXlzLmxlbmd0aDtpKyspezxicj4gIHZhciBjS2V5ID0gY3VzdG9tS2V5c1tpXTs8YnI+ICB2YXIgY1ZhbCA9IHN5bmNSdWxlc0ZpZWxkcy5jb250YWN0W2NLZXldOzxicj4gICBsZXQgc3ViVmFsOzxicj4gIGlmKGNLZXkuc3RhcnRzV2l0aCggJ3N1YmNzdCcpKXs8YnI+ICAgIGlmKHN1YnNjcmlwdGlvbiAhPT0gdW5kZWZpbmVkKXs8YnI+ICAgIHN1YlZhbCA9IHN1YnNjcmlwdGlvbltjVmFsWzBdXTs8YnI+ICAgIH08YnI+ICB9ZWxzZSBpZihjS2V5LnN0YXJ0c1dpdGgoJ29yZGVyY3N0Jykpezxicj4gICAgaWYobXlPcmRlciAhPT0gdW5kZWZpbmVkKSB7PGJyPiAgICAgIHN1YlZhbCA9IG15T3JkZXJbY1ZhbFswXV07PGJyPiAgICB9PGJyPiAgICA8YnI+ICB9IGVsc2UgaWYoY0tleS5zdGFydHNXaXRoKCdjdXN0Y3N0Jykpezxicj4gICAgIGlmKGN1c3RvbWVyICE9PSB1bmRlZmluZWQpezxicj4gICAgICAgc3ViVmFsID0gY3VzdG9tZXJbY1ZhbFswXV07PGJyPiAgICB9PGJyPiAgfTxicj5pZiAoY1ZhbFsxXSA9PT0gJ251bWJlcicpIHs8YnI+ICAgIHN1YlZhbCA9IGdldE51bWJlcihzdWJWYWwpOzxicj4gICAgc2V0SERhdGEoaERhdGEsIGNLZXksIHN1YlZhbCk7PGJyPiAgICBpZiAoY1ZhbC5sZW5ndGggPT0gNCkgezxicj4gICAgICAgIHByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCBjS2V5LCB0cnVlKTs8YnI+ICAgIH0gZWxzZSB7PGJyPiAgICAgICAgcHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsIGNLZXkpOzxicj4gICAgfTxicj4gICAgc3RlcHMuSHViRGF0YS5jTWV0cmljc1tjS2V5XSA9IHN1YlZhbDs8YnI+fSBlbHNlIGlmIChjVmFsWzFdID09PSAnZGF0ZXRpbWUnKSB7PGJyPiAgaWYoc3ViVmFsICE9PSB1bmRlZmluZWQpIHs8YnI+ICAgICBzdWJWYWwgPSBnZXROdW1iZXIoc3ViVmFsKSAqIDEwMDA7PGJyPiAgICBzZXRIRGF0YShoRGF0YSwgY0tleSwgc3ViVmFsKTs8YnI+ICAgIHByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCBjS2V5KTs8YnI+ICB9PGJyPiAgIDxicj48YnI+fSBlbHNlIHs8YnI+ICAgIGlmIChzdWJWYWwgPT09IHVuZGVmaW5lZCkgezxicj4gICAgICAgIHN1YlZhbCA9ICcnOzxicj48YnI+ICAgIH08YnI+ICAgIHNldEhEYXRhKGhEYXRhLCBjS2V5LCBzdWJWYWwpOzxicj4gICAgcHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsIGNLZXkpOzxicj59PGJyPiAgPGJyPiAgPGJyPn08YnI+Ly9jdXN0b208YnI+PGJyPjxicj48YnI+cHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdmaXJzdG5hbWUnKTs8YnI+cHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdlbWFpbCcpOzxicj5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ2xhc3RuYW1lJyk7PGJyPnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAncGhvbmUnKTs8YnI+cHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdjb21wYW55Jyk7PGJyPnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAnYmlsbGluZ2FkZHJlc3MnKTs8YnI+cHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdiaWxsaW5nc3RhdGUnKTs8YnI+cHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdiaWxsaW5nY2l0eScpOzxicj5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ2JpbGxpbmdjb3VudHJ5Jyk7PGJyPnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAnYmlsbGluZ3ppcCcpOzxicj5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ2F1dG9jb2xsZWN0aW9uJyk7PGJyPnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAncHJlZmVycmVkY3VycmVuY3ljb2RlJyk7PGJyPnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAncGF5bWVudG1ldGhvZHN0YXR1cycpOzxicj5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ3BheW1lbnRtZXRob2R0eXBlJyk7PGJyPnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAnbmV0dGVybWRheXMnKTs8YnI+cHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICd0YXhleGVtcHRzdGF0dXMnKTs8YnI+cHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdjaGFyZ2ViZWVjdXN0b21lcmlkJyk7PGJyPnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAnc3Vic2NyaXB0aW9uaWQnKTs8YnI+cHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdzdWJzY3JpcHRpb3N0YXR1cycpOzxicj5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ3Byb2R1Y3QnKTs8YnI+cHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdwbGFucXVhbnRpdHknKTs8YnI+cHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdzZXR1cGZlZScsIHRydWUpOzxicj5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ2R1ZWludm9pY2VzY291bnQnKTs8YnI+cHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdyZW1haW5pbmdiaWxsaW5nY3ljbGVzJyk7PGJyPnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAncG9udW1iZXInKTs8YnI+cHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICduZXh0YmlsbGluZ2F0Jyk7PGJyPnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAndG90YWxkdWVzJywgdHJ1ZSk7PGJyPnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAnZHVlc2luY2UnKTs8YnI+cHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdzdWJzY3JpcHRpb25tcnInLCB0cnVlKTs8YnI+cHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdsaWZlY3ljbGVzdGFnZScpOzxicj5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ2xhc3RvcmRlcmRhdGUnKTs8YnI+cHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdsYXN0b3JkZXJiYXNlY29tcG9uZW50c2t1Jyk7PGJyPnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAnbGFzdG9yZGVyc3RhdHVzJyk7PGJyPnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAnbGFzdG9yZGVyJywgdHJ1ZSk7PGJyPnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAnbmV4dG9yZGVyZGF0ZScpOzxicj5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ25leHRvcmRlcmJhc2Vjb21wb25lbnRza3UnKTs8YnI+cHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICduZXh0b3JkZXJzdGF0dXMnKTs8YnI+cHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICduZXh0b3JkZXInLCB0cnVlKTs8YnI+cHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdpbnZvaWNlYW1vdW50cGFpZCcsIHRydWUpOzxicj5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ25leHRiaWxsaW5nYW1vdW50JywgdHJ1ZSk7PGJyPjxicj5zdGVwcy5IdWJTcG90SW5wdXQuaW5wdXRzLnByb3BlcnRpZXMgPSBwcm9wZXJ0aWVzOzxicj48YnI+bGV0IGdmZyA9IHs8YnI+ICAgIHByb3BlcnRpZXM6IHByb3BlcnRpZXMsPGJyPiAgICBtZXRyaWNzOiBzdGVwcy5IdWJEYXRhLmNNZXRyaWNzLDxicj4gICAgaERhdGE6IGhEYXRhPGJyPn08YnI+PGJyPmRvbmUoZ2ZnKTs8L3ByZT48YnI+PGI+UkFXIEpTT046PC9iPjxicj48YnI+PHByZT57PGJyPiAgJ29uU3VjY2Vzcyc6IFs8YnI+ICAgICdDcmVhdGVIdWJzcG90Q29udGFjdFBhcmFtJzxicj4gIF0sPGJyPiAgJ29uRmFpbHVyZSc6IFtdLDxicj4gICduYW1lJzogJ1ByZXBhcmVDcmVhdGVJbnB1dCcsPGJyPiAgJ3R5cGUnOiAnc2NyaXB0Jyw8YnI+ICAncHJvcGVydGllcyc6IHs8YnI+ICAgICdib2R5JzogJ2xldCBjdXN0b21lciA9IHN0ZXBzLkh1YkRhdGEuY3VzdG9tZXI7XG5sZXQgc3Vic2NyaXB0aW9uID0gc3RlcHMuSHViRGF0YS5zdWJzY3JpcHRpb247XG5sZXQgc3luY1J1bGVzQ29udGFjdHMgPSBzdGVwcy5DdXN0b21lcnNQYXJhbS5zeW5jUnVsZXNDb250YWN0cztcbnN0ZXBzLkh1YlNwb3RJbnB1dC51cmwgPSBcJ2h0dHBzOi8vYXBpLmh1YmFwaS5jb20vY29udGFjdHMvdjEvY29udGFjdFwnO1xubGV0IHByZWZpeCA9IFwnY2JfXCc7XG4vL2xldCBwcmVmaXggPSBcJ1wnO1xubGV0IHByb3BlcnRpZXMgPSBbXTtcbmxldCBjYmtleXMgPSBbJ2JpbGxpbmdhZGRyZXNzJywnYmlsbGluZ3N0YXRlJywnYmlsbGluZ2NpdHknLCdiaWxsaW5nY291bnRyeScsJ2JpbGxpbmd6aXAnLCdhdXRvY29sbGVjdGlvbicsJ3ByZWZlcnJlZGN1cnJlbmN5Y29kZScsJ3BheW1lbnRtZXRob2RzdGF0dXMnLCdwYXltZW50bWV0aG9kdHlwZScsJ25ldHRlcm1kYXlzJywndGF4ZXhlbXB0c3RhdHVzJywnc3Vic2NyaXB0aW9uaWQnLCdzdWJzY3JpcHRpb3N0YXR1cycsJ3Byb2R1Y3QnLCdwbGFucXVhbnRpdHknLCdzZXR1cGZlZScsJ2R1ZWludm9pY2VzY291bnQnLCdyZW1haW5pbmdiaWxsaW5nY3ljbGVzJywncG9udW1iZXInLCduZXh0YmlsbGluZ2F0JywndG90YWxkdWVzJywnZHVlc2luY2UnLCdzdWJzY3JpcHRpb25tcnInLCdsYXN0b3JkZXJkYXRlJywnbGFzdG9yZGVyYmFzZWNvbXBvbmVudHNrdScsJ2xhc3RvcmRlcnN0YXR1cycsJ2xhc3RvcmRlcicsJ25leHRvcmRlcmRhdGUnLCduZXh0b3JkZXJiYXNlY29tcG9uZW50c2t1JywnbmV4dG9yZGVyc3RhdHVzJywnbmV4dG9yZGVyJywnaW52b2ljZWFtb3VudHBhaWQnLCduZXh0YmlsbGluZ2Ftb3VudCddO1xuXG5sZXQgY2JNYXAgPSB7XG4gIFwnZmlyc3RuYW1lXCc6dHJ1ZSxcbiAgXCdsYXN0bmFtZVwnIDp0cnVlLFxuICBcJ2VtYWlsXCcgOnRydWUsXG4gIFwnY29tcGFueVwnOnRydWUsXG4gIFwncGhvbmVcJzp0cnVlLFxuICBcJ2NoYXJnZWJlZWN1c3RvbWVyaWRcJzp0cnVlLFxuICBcJ2xpZmVjeWNsZXN0YWdlXCc6dHJ1ZSxcbn07XG5pZihzdGVwcy5HZXRUcEludGVnQ29uZi5kYXRhLmNvbmZpZ19qc29uLm5vbmVlZHByZWZpeCE9PXVuZGVmaW5lZCAmJiBzdGVwcy5HZXRUcEludGVnQ29uZi5kYXRhLmNvbmZpZ19qc29uLm5vbmVlZHByZWZpeD09PXRydWUpXG57XG4gICBwcmVmaXg9XCdcJztcbn1cblxuZnVuY3Rpb24gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwga2V5LCBpc0N1cnJlbmN5KSB7XG4gICAgbGV0IHZhbCA9IGhEYXRhW2tleV07XG4gICAgaWYgKHZhbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGlmIChpc0N1cnJlbmN5KSB7XG4gICAgICAgICAgICB2YWwgPSBwYXJzZUZsb2F0KHBhcnNlSW50KHZhbCwgMTApIC8gMTAwKS50b0ZpeGVkKDIpO1xuICAgICAgICB9XG4gICAgICAgaWYoY2JNYXBba2V5XSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAga2V5ID0gcHJlZml4K2tleTtcbiAgICAgICB9XG4gICAgICAgXG4gICAgICAgIHByb3BlcnRpZXMucHVzaCh7XG4gICAgICAgICAgICBcJ3Byb3BlcnR5XCc6IGtleSxcbiAgICAgICAgICAgIFwndmFsdWVcJzogdmFsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gcHJvcGVydGllcztcbn1cbmZ1bmN0aW9uIHNldEhEYXRhKGhEYXRhLCBrZXksIHZhbHVlKSB7XG4gICAgaERhdGFba2V5XSA9IHZhbHVlO1xufVxuZnVuY3Rpb24gZ2V0TnVtYmVyKHZhbCkge1xuICAgIGlmICh2YWwgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgbGV0IG51bSA9IE51bWJlcih2YWwpO1xuICAgIGlmIChpc05hTihudW0pKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgICByZXR1cm4gbnVtO1xufVxuXG5sZXQgaERhdGEgPSB7XG5cbn07XG5cblxuXG5sZXQgY2JiaWxsaW5nYWRkcmVzcztcbmxldCBjYlN0YXRlO1xubGV0IGNiQ2l0eTtcbmxldCBjYkNvdW50cnk7XG5sZXQgY2JaaXA7XG5sZXQgY2JwYXltZW50X21ldGhvZF9zdGF0dXM7XG5sZXQgY2JwYXltZW50bWV0aG9kdHlwZTtcblxuaWYgKGN1c3RvbWVyLmJpbGxpbmdfYWRkcmVzcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgY2JiaWxsaW5nYWRkcmVzcyA9IFwnXCc7XG4gICAgaWYgKGN1c3RvbWVyLmJpbGxpbmdfYWRkcmVzcy5saW5lMSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNiYmlsbGluZ2FkZHJlc3MgPSBjYmJpbGxpbmdhZGRyZXNzICsgY3VzdG9tZXIuYmlsbGluZ19hZGRyZXNzLmxpbmUxO1xuICAgIH1cbiAgICBpZiAoY3VzdG9tZXIuYmlsbGluZ19hZGRyZXNzLmxpbmUyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY2JiaWxsaW5nYWRkcmVzcyA9IGNiYmlsbGluZ2FkZHJlc3MgKyBcJyBcJyArIGN1c3RvbWVyLmJpbGxpbmdfYWRkcmVzcy5saW5lMjtcbiAgICB9XG4gICAgaWYgKGN1c3RvbWVyLmJpbGxpbmdfYWRkcmVzcy5saW5lMyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNiYmlsbGluZ2FkZHJlc3MgPSBjYmJpbGxpbmdhZGRyZXNzICsgXCcgXCcgKyBjdXN0b21lci5iaWxsaW5nX2FkZHJlc3MubGluZTM7XG4gICAgfVxuICAgIGlmIChjYmJpbGxpbmdhZGRyZXNzID09PSBcJ1wnKSB7XG4gICAgICAgIGNiYmlsbGluZ2FkZHJlc3MgPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGNiU3RhdGUgPSBjdXN0b21lci5iaWxsaW5nX2FkZHJlc3Muc3RhdGU7XG4gICAgY2JDaXR5ID0gY3VzdG9tZXIuYmlsbGluZ19hZGRyZXNzLmNpdHk7XG4gICAgY2JDb3VudHJ5ID0gY3VzdG9tZXIuYmlsbGluZ19hZGRyZXNzLmNvdW50cnk7XG4gICAgY2JaaXAgPSBjdXN0b21lci5iaWxsaW5nX2FkZHJlc3MuemlwO1xufVxuXG5pZiAoY3VzdG9tZXIucGF5bWVudF9tZXRob2QgIT09IHVuZGVmaW5lZCApIHtcbiAgICBjYnBheW1lbnRfbWV0aG9kX3N0YXR1cyA9IGN1c3RvbWVyLnBheW1lbnRfbWV0aG9kLnN0YXR1cztcbiAgICBjYnBheW1lbnRtZXRob2R0eXBlID0gY3VzdG9tZXIucGF5bWVudF9tZXRob2QudHlwZTtcbn1cblxuc2V0SERhdGEoaERhdGEsICdlbWFpbCcsIGN1c3RvbWVyLmVtYWlsKTtcbnNldEhEYXRhKGhEYXRhLCAnY2hhcmdlYmVlY3VzdG9tZXJpZCcsIGN1c3RvbWVyLmlkKTtcbnNldEhEYXRhKGhEYXRhLCAnZmlyc3RuYW1lJywgY3VzdG9tZXIuZmlyc3RfbmFtZSk7XG5zZXRIRGF0YShoRGF0YSwgJ2xhc3RuYW1lJywgY3VzdG9tZXIubGFzdF9uYW1lKTtcbnNldEhEYXRhKGhEYXRhLCAncGhvbmUnLCBjdXN0b21lci5waG9uZSk7XG5zZXRIRGF0YShoRGF0YSwgJ2NvbXBhbnknLCBjdXN0b21lci5jb21wYW55KTtcbnNldEhEYXRhKGhEYXRhLCAnYmlsbGluZ2FkZHJlc3MnLCBjYmJpbGxpbmdhZGRyZXNzKTtcbnNldEhEYXRhKGhEYXRhLCAnYmlsbGluZ3N0YXRlJywgY2JTdGF0ZSk7XG5zZXRIRGF0YShoRGF0YSwgJ2JpbGxpbmdjaXR5JywgY2JDaXR5KTtcbnNldEhEYXRhKGhEYXRhLCAnYmlsbGluZ2NvdW50cnknLCBjYkNvdW50cnkpO1xuc2V0SERhdGEoaERhdGEsICdiaWxsaW5nemlwJywgY2JaaXApO1xuc2V0SERhdGEoaERhdGEsICdhdXRvY29sbGVjdGlvbicsIGN1c3RvbWVyLmF1dG9fY29sbGVjdGlvbik7XG5zZXRIRGF0YShoRGF0YSwgJ3ByZWZlcnJlZGN1cnJlbmN5Y29kZScsIGN1c3RvbWVyLnByZWZlcnJlZF9jdXJyZW5jeV9jb2RlKTtcbnNldEhEYXRhKGhEYXRhLCAncGF5bWVudG1ldGhvZHN0YXR1cycsIGNicGF5bWVudF9tZXRob2Rfc3RhdHVzKTtcbnNldEhEYXRhKGhEYXRhLCAncGF5bWVudG1ldGhvZHR5cGUnLCBjYnBheW1lbnRtZXRob2R0eXBlKTtcbnNldEhEYXRhKGhEYXRhLCAnbmV0dGVybWRheXMnLCBjdXN0b21lci5uZXRfdGVybV9kYXlzKTtcbnNldEhEYXRhKGhEYXRhLCAndGF4ZXhlbXB0c3RhdHVzJywgY3VzdG9tZXIudGF4YWJpbGl0eSk7XG5cblxubGV0IGNic3Vic2NyaXB0aW9uaWQ7XG5sZXQgY2JzdWJzY3JpcHRpb3N0YXR1cztcbmxldCBjYnByb2R1Y3Q7XG5sZXQgY2JwbGFucXVhbnRpdHk7XG5sZXQgY2JzZXR1cGZlZTtcbmxldCBjYmR1ZWludm9pY2VzY291bnQ7XG5sZXQgY2JyZW1haW5pbmdiaWxsaW5nY3ljbGVzO1xubGV0IGNicG9udW1iZXI7XG5sZXQgY2JuZXh0YmlsbGluZ2F0O1xubGV0IGNidG90YWxkdWVzO1xubGV0IGNiZHVlc2luY2U7XG5sZXQgY2JzdWJzY3JpcHRpb25tcnI7XG5pZiAoc3Vic2NyaXB0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICBjYnN1YnNjcmlwdGlvbmlkID0gc3Vic2NyaXB0aW9uLmlkO1xuICAgIGNic3Vic2NyaXB0aW9zdGF0dXMgPSBzdWJzY3JpcHRpb24uc3RhdHVzO1xuICAgIGNicHJvZHVjdCA9IHN1YnNjcmlwdGlvbi5wbGFuX2lkO1xuICAgIGNicGxhbnF1YW50aXR5ID0gc3Vic2NyaXB0aW9uLnBsYW5fcXVhbnRpdHk7XG4gICAgY2JzZXR1cGZlZSA9IGdldE51bWJlcihzdWJzY3JpcHRpb24uc2V0dXBfZmVlKTtcbiAgICBjYmR1ZWludm9pY2VzY291bnQgPSBnZXROdW1iZXIoc3Vic2NyaXB0aW9uLmR1ZV9pbnZvaWNlc19jb3VudCk7XG4gICAgY2JyZW1haW5pbmdiaWxsaW5nY3ljbGVzID0gc3Vic2NyaXB0aW9uLnJlbWFpbmluZ19iaWxsaW5nX2N5Y2xlcztcbiAgICBjYnBvbnVtYmVyID0gc3Vic2NyaXB0aW9uLnBvX251bWJlcjtcbiAgICBpZihzdWJzY3JpcHRpb24ubmV4dF9iaWxsaW5nX2F0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGNibmV4dGJpbGxpbmdhdCA9IGdldE51bWJlcihzdWJzY3JpcHRpb24ubmV4dF9iaWxsaW5nX2F0KSAqIDEwMDA7XG4gICAgfVxuICAgIFxuICAgIGNidG90YWxkdWVzID0gZ2V0TnVtYmVyKHN1YnNjcmlwdGlvbi50b3RhbF9kdWVzKTtcbiAgICBpZihzdWJzY3JpcHRpb24uZHVlX3NpbmNlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICBjYmR1ZXNpbmNlID0gZ2V0TnVtYmVyKHN1YnNjcmlwdGlvbi5kdWVfc2luY2UpICogMTAwMDtcbiAgICB9XG4gICBcbiAgICBjYnN1YnNjcmlwdGlvbm1yciA9IGdldE51bWJlcihzdWJzY3JpcHRpb24ubXJyKTtcbn1cblxuXG5sZXQgbkxpZmVjeWNsZXN0YWdlO1xuXG5cbmlmIChjYnN1YnNjcmlwdGlvc3RhdHVzID09PSBcJ2NhbmNlbGxlZFwnKSB7XG4gICAgaWYgKHN5bmNSdWxlc0NvbnRhY3RzLkxpZmVjeWNsZVN0YWdlLkNhbmNlbGVkU3Vic2NyaXB0aW9uICE9PSB1bmRlZmluZWQgJiYgc3luY1J1bGVzQ29udGFjdHMuTGlmZWN5Y2xlU3RhZ2UuQ2FuY2VsZWRTdWJzY3JpcHRpb24gIT09IFwnc2VsZWN0XCcpIHtcbiAgICAgICAgbkxpZmVjeWNsZXN0YWdlID0gc3luY1J1bGVzQ29udGFjdHMuTGlmZWN5Y2xlU3RhZ2UuQ2FuY2VsZWRTdWJzY3JpcHRpb247XG4gICAgfVxuXG59IGVsc2UgaWYgKGNic3Vic2NyaXB0aW9zdGF0dXMgPT09IFwnYWN0aXZlXCcpIHtcbiAgICBpZiAoc3luY1J1bGVzQ29udGFjdHMuTGlmZWN5Y2xlU3RhZ2UuQWN0aXZlU3Vic2NyaXB0aW9uICE9PSB1bmRlZmluZWQgJiYgc3luY1J1bGVzQ29udGFjdHMuTGlmZWN5Y2xlU3RhZ2UuQWN0aXZlU3Vic2NyaXB0aW9uICE9PSBcJ3NlbGVjdFwnKSB7XG4gICAgICAgIG5MaWZlY3ljbGVzdGFnZSA9IHN5bmNSdWxlc0NvbnRhY3RzLkxpZmVjeWNsZVN0YWdlLkFjdGl2ZVN1YnNjcmlwdGlvbjtcbiAgICB9XG5cbn0gZWxzZSBpZiAoY2JzdWJzY3JpcHRpb3N0YXR1cyA9PT0gXCdpbl90cmlhbFwnKSB7XG4gICAgaWYgKHN5bmNSdWxlc0NvbnRhY3RzLkxpZmVjeWNsZVN0YWdlLlRyaWFsU3Vic2NyaXB0aW9uICE9PSB1bmRlZmluZWQgJiYgc3luY1J1bGVzQ29udGFjdHMuTGlmZWN5Y2xlU3RhZ2UuVHJpYWxTdWJzY3JpcHRpb24gIT09IFwnc2VsZWN0XCcpIHtcbiAgICAgICAgbkxpZmVjeWNsZXN0YWdlID0gc3luY1J1bGVzQ29udGFjdHMuTGlmZWN5Y2xlU3RhZ2UuVHJpYWxTdWJzY3JpcHRpb247XG4gICAgfVxufSBlbHNlIGlmIChjYnN1YnNjcmlwdGlvc3RhdHVzID09PSB1bmRlZmluZWQpIHtcbiAgICBpZiAoc3luY1J1bGVzQ29udGFjdHMuTGlmZWN5Y2xlU3RhZ2UuTm9TdWJzY3JpcHRpb24gIT09IHVuZGVmaW5lZCAmJiBzeW5jUnVsZXNDb250YWN0cy5MaWZlY3ljbGVTdGFnZS5Ob1N1YnNjcmlwdGlvbiAhPT0gXCdzZWxlY3RcJykge1xuICAgICAgICBuTGlmZWN5Y2xlc3RhZ2UgPSBzeW5jUnVsZXNDb250YWN0cy5MaWZlY3ljbGVTdGFnZS5Ob1N1YnNjcmlwdGlvbjtcbiAgICB9XG59XG5cblxuc2V0SERhdGEoaERhdGEsICdsaWZlY3ljbGVzdGFnZScsIG5MaWZlY3ljbGVzdGFnZSk7XG5zZXRIRGF0YShoRGF0YSwgJ3N1YnNjcmlwdGlvbmlkJywgY2JzdWJzY3JpcHRpb25pZCk7XG5zZXRIRGF0YShoRGF0YSwgJ3N1YnNjcmlwdGlvc3RhdHVzJywgY2JzdWJzY3JpcHRpb3N0YXR1cyk7XG5zZXRIRGF0YShoRGF0YSwgJ3Byb2R1Y3QnLCBjYnByb2R1Y3QpO1xuc2V0SERhdGEoaERhdGEsICdwbGFucXVhbnRpdHknLCBjYnBsYW5xdWFudGl0eSk7XG5zZXRIRGF0YShoRGF0YSwgJ3JlbWFpbmluZ2JpbGxpbmdjeWNsZXMnLCBjYnJlbWFpbmluZ2JpbGxpbmdjeWNsZXMpO1xuc2V0SERhdGEoaERhdGEsICdwb251bWJlcicsIGNicG9udW1iZXIpO1xuc2V0SERhdGEoaERhdGEsICduZXh0YmlsbGluZ2F0JywgY2JuZXh0YmlsbGluZ2F0KTtcbnNldEhEYXRhKGhEYXRhLCAnZHVlc2luY2UnLCBjYmR1ZXNpbmNlKTtcblxuc3RlcHMuSHViRGF0YS5jTWV0cmljcyA9IHtcbiAgICBzdWJzY3JpcHRpb25tcnI6IGNic3Vic2NyaXB0aW9ubXJyLFxuICAgIHRvdGFsZHVlczogY2J0b3RhbGR1ZXMsXG4gICAgZHVlaW52b2ljZXNjb3VudDogY2JkdWVpbnZvaWNlc2NvdW50LFxuICAgIHN1YnNjcmlwdGlvbmlkOiBjYnN1YnNjcmlwdGlvbmlkLFxuICAgIG9wOiBcJ2NyZWF0ZVwnXG4gICAgLy9pbnZvaWNlYW1vdW50cGFpZDogY01ldHJpY3NJbnZvaWNlYW1vdW50cGFpZCxcbn07XG5zZXRIRGF0YShoRGF0YSwgJ2R1ZWludm9pY2VzY291bnQnLCBjYmR1ZWludm9pY2VzY291bnQpO1xuc2V0SERhdGEoaERhdGEsICd0b3RhbGR1ZXMnLCBjYnRvdGFsZHVlcyk7XG5zZXRIRGF0YShoRGF0YSwgJ3NldHVwZmVlJywgY2JzZXR1cGZlZSk7XG5zZXRIRGF0YShoRGF0YSwgJ3N1YnNjcmlwdGlvbm1ycicsIGNic3Vic2NyaXB0aW9ubXJyKTtcbnNldEhEYXRhKGhEYXRhLCAnY3VzdG9tZXJtcnInLCBnZXROdW1iZXIoc3RlcHMuSHViRGF0YS5jbXJyKSoxMDApO1xuXG5cblxubGV0IGNibGFzdG9yZGVyZGF0ZTtcbmxldCBjYmxhc3RvcmRlcmJhc2Vjb21wb25lbnRza3U7XG5sZXQgY2JsYXN0b3JkZXJzdGF0dXM7XG5sZXQgY2JsYXN0b3JkZXI7XG5sZXQgY2JuZXh0b3JkZXJkYXRlO1xubGV0IGNibmV4dG9yZGVyYmFzZWNvbXBvbmVudHNrdTtcbmxldCBjYm5leHRvcmRlcnN0YXR1cztcbmxldCBjYm5leHRvcmRlcjtcbmxldCBteU9yZGVyO1xuaWYgKHN0ZXBzLkh1YkRhdGEub3JkZXIgIT09IHVuZGVmaW5lZCkge1xuICAgIGxldCBvcmRlckJlZm9yZSA9IHN0ZXBzLkh1YkRhdGEub3JkZXIuYmVmb3JlO1xuICAgICBteU9yZGVyID0gb3JkZXJCZWZvcmU7XG4gICAgaWYgKG9yZGVyQmVmb3JlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKG9yZGVyQmVmb3JlLm9yZGVyX2RhdGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY2JsYXN0b3JkZXJkYXRlID0gZ2V0TnVtYmVyKG9yZGVyQmVmb3JlLm9yZGVyX2RhdGUpICogMTAwMDtcbiAgICAgICAgfVxuICAgICAgICBjYmxhc3RvcmRlcmJhc2Vjb21wb25lbnRza3UgPSBvcmRlckJlZm9yZS5za3U7XG4gICAgICAgIGNibGFzdG9yZGVyc3RhdHVzID0gb3JkZXJCZWZvcmUuc3RhdHVzO1xuICAgICAgICBjYmxhc3RvcmRlciA9IGdldE51bWJlcihvcmRlckJlZm9yZS50b3RhbCk7XG4gICAgfVxuXG5cbiAgICBsZXQgb3JkZXJBZnRlciA9IHN0ZXBzLkh1YkRhdGEub3JkZXIuYWZ0ZXI7XG4gICAgaWYgKG9yZGVyQWZ0ZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAob3JkZXJBZnRlci5vcmRlcl9kYXRlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNibmV4dG9yZGVyZGF0ZSA9IGdldE51bWJlcihvcmRlckFmdGVyLm9yZGVyX2RhdGUpICogMTAwMDtcbiAgICAgICAgfVxuICAgICAgICBjYm5leHRvcmRlcmJhc2Vjb21wb25lbnRza3UgPSBvcmRlckFmdGVyLnNrdTtcbiAgICAgICAgY2JuZXh0b3JkZXJzdGF0dXMgPSBvcmRlckFmdGVyLnN0YXR1cztcbiAgICAgICAgY2JuZXh0b3JkZXIgPSBnZXROdW1iZXIob3JkZXJBZnRlci50b3RhbCk7XG4gICAgfVxuXG59XG5cbnNldEhEYXRhKGhEYXRhLCAnbGFzdG9yZGVyZGF0ZScsIGNibGFzdG9yZGVyZGF0ZSk7XG5zZXRIRGF0YShoRGF0YSwgJ2xhc3RvcmRlcmJhc2Vjb21wb25lbnRza3UnLCBjYmxhc3RvcmRlcmJhc2Vjb21wb25lbnRza3UpO1xuc2V0SERhdGEoaERhdGEsICdsYXN0b3JkZXJzdGF0dXMnLCBjYmxhc3RvcmRlcnN0YXR1cyk7XG5zZXRIRGF0YShoRGF0YSwgJ2xhc3RvcmRlcicsIGNibGFzdG9yZGVyKTtcbnNldEhEYXRhKGhEYXRhLCAnbmV4dG9yZGVyZGF0ZScsIGNibmV4dG9yZGVyZGF0ZSk7XG5zZXRIRGF0YShoRGF0YSwgJ25leHRvcmRlcmJhc2Vjb21wb25lbnRza3UnLCBjYm5leHRvcmRlcmJhc2Vjb21wb25lbnRza3UpO1xuc2V0SERhdGEoaERhdGEsICduZXh0b3JkZXJzdGF0dXMnLCBjYm5leHRvcmRlcnN0YXR1cyk7XG5zZXRIRGF0YShoRGF0YSwgJ25leHRvcmRlcicsIGNibmV4dG9yZGVyKTtcblxuXG5sZXQgY2JpbnZvaWNlYW1vdW50cGFpZDtcbmxldCBjYmludm9pY2Vlc3RpbWF0ZTtcbmlmIChzdGVwcy5IdWJEYXRhLmludm9pY2UgIT09IHVuZGVmaW5lZCkge1xuICAgIGNiaW52b2ljZWFtb3VudHBhaWQgPSBnZXROdW1iZXIoc3RlcHMuSHViRGF0YS5pbnZvaWNlLnRvdGFsKTtcbiAgICBjYmludm9pY2Vlc3RpbWF0ZSA9IGdldE51bWJlcihzdGVwcy5IdWJEYXRhLmludm9pY2UuZXN0aW1hdGUpO1xufVxuXG5zdGVwcy5IdWJEYXRhLmNNZXRyaWNzLmludm9pY2VhbW91bnRwYWlkID0gY2JpbnZvaWNlYW1vdW50cGFpZDtcblxuc2V0SERhdGEoaERhdGEsICdpbnZvaWNlYW1vdW50cGFpZCcsIGNiaW52b2ljZWFtb3VudHBhaWQpO1xuc2V0SERhdGEoaERhdGEsICduZXh0YmlsbGluZ2Ftb3VudCcsIGNiaW52b2ljZWVzdGltYXRlKTtcblxuLy9jdXN0b21cbmxldCBzeW5jUnVsZXNGaWVsZHMgPSBzdGVwcy5HZXRUcEludGVnQ29uZi5kYXRhLmNvbmZpZ19qc29uLmNsb3VkRWxlbWVudHMuc3luY1J1bGVzRmllbGRzO1xuICAgIGlmIChzeW5jUnVsZXNGaWVsZHMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBzeW5jUnVsZXNGaWVsZHMgPSB7XG4gICAgICAgICAgICBcJ2NvbXBhbnlcJzoge1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCdjb250YWN0XCc6IHtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwnZGVhbFwnOiB7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCdzeW5jXCc6IFwnZmFsc2VcJ1xuICAgICAgICB9O1xuXG4gICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHN5bmNSdWxlc0ZpZWxkcy5jb21wYW55ID09PSB1bmRlZmluZWQgfHwgc3luY1J1bGVzRmllbGRzLmNvbXBhbnkgPT09IFwnXCcpIHtcbiAgICAgICAgICAgIHN5bmNSdWxlc0ZpZWxkcy5jb21wYW55ID0ge307XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN5bmNSdWxlc0ZpZWxkcy5jb250YWN0ID09PSB1bmRlZmluZWQgfHwgc3luY1J1bGVzRmllbGRzLmNvbnRhY3QgPT09IFwnXCcpIHtcbiAgICAgICAgICAgIHN5bmNSdWxlc0ZpZWxkcy5jb250YWN0ID0ge307XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN5bmNSdWxlc0ZpZWxkcy5kZWFsID09PSB1bmRlZmluZWQgfHwgc3luY1J1bGVzRmllbGRzLmRlYWwgPT09IFwnXCcpIHtcbiAgICAgICAgICAgIHN5bmNSdWxlc0ZpZWxkcy5kZWFsID0ge307XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3luY1J1bGVzRmllbGRzID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShzeW5jUnVsZXNGaWVsZHMpKTtcbiAgICBsZXQgY29tcGFueUtleXMgPSBPYmplY3Qua2V5cyhzeW5jUnVsZXNGaWVsZHMuY29tcGFueSk7XG5cbmZvciAodmFyIGkgPSAwOyBpIDxzcGFuPjw8L3NwYW4+IGNvbXBhbnlLZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgc3luY1J1bGVzRmllbGRzLmNvbnRhY3RbY29tcGFueUtleXNbaV1dID0gc3luY1J1bGVzRmllbGRzLmNvbXBhbnlbY29tcGFueUtleXNbaV1dO1xufVxuXG5cbmxldCBjdXN0b21lZmllbGRzID0gc3RlcHMuU3luY0xvZy5jdXN0b21lZmllbGRzO1xuY29uc29sZS5sb2coY3VzdG9tZWZpZWxkcyk7XG5mb3IgKHZhciBpID0gMDsgaSA8c3Bhbj48PC9zcGFuPiBjdXN0b21lZmllbGRzLmxlbmd0aDsgaSsrKSB7XG4gICAgbGV0IGZsZCA9IGN1c3RvbWVmaWVsZHNbaV07XG5cbiAgICBmb3IgKHZhciBqID0gMDsgaiA8c3Bhbj48PC9zcGFuPiBmbGQuZmllbGRzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgIHZhciBlcyA9IGZsZC5maWVsZHNbal07XG4gICAgICAgIHZhciBkZXNjID0gZmxkLmxhYmVsICsgXCcgXCcgKyBlc1swXS5yZXBsYWNlKC9fL2csIFwnIFwnKTtcbiAgICAgICAgdmFyIGlkID0gZmxkLmtleSArIFwnX1wnICsgZXNbMF07XG4gICAgICAgIGlmKHN5bmNSdWxlc0ZpZWxkcy5jb250YWN0W2lkXSAhPT11bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHN5bmNSdWxlc0ZpZWxkcy5jb250YWN0W2lkXSA9IGVzO1xuICAgICAgICB9XG4gICAgfVxufVxubGV0IGN1c3RvbUtleXMgPSBPYmplY3Qua2V5cyhzeW5jUnVsZXNGaWVsZHMuY29udGFjdCk7XG5mb3IodmFyIGk9MDtpPHNwYW4+PDwvc3Bhbj5jdXN0b21LZXlzLmxlbmd0aDtpKyspe1xuICB2YXIgY0tleSA9IGN1c3RvbUtleXNbaV07XG4gIHZhciBjVmFsID0gc3luY1J1bGVzRmllbGRzLmNvbnRhY3RbY0tleV07XG4gICBsZXQgc3ViVmFsO1xuICBpZihjS2V5LnN0YXJ0c1dpdGgoIFwnc3ViY3N0XCcpKXtcbiAgICBpZihzdWJzY3JpcHRpb24gIT09IHVuZGVmaW5lZCl7XG4gICAgc3ViVmFsID0gc3Vic2NyaXB0aW9uW2NWYWxbMF1dO1xuICAgIH1cbiAgfWVsc2UgaWYoY0tleS5zdGFydHNXaXRoKFwnb3JkZXJjc3RcJykpe1xuICAgIGlmKG15T3JkZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgc3ViVmFsID0gbXlPcmRlcltjVmFsWzBdXTtcbiAgICB9XG4gICAgXG4gIH0gZWxzZSBpZihjS2V5LnN0YXJ0c1dpdGgoXCdjdXN0Y3N0XCcpKXtcbiAgICAgaWYoY3VzdG9tZXIgIT09IHVuZGVmaW5lZCl7XG4gICAgICAgc3ViVmFsID0gY3VzdG9tZXJbY1ZhbFswXV07XG4gICAgfVxuICB9XG5pZiAoY1ZhbFsxXSA9PT0gXCdudW1iZXJcJykge1xuICAgIHN1YlZhbCA9IGdldE51bWJlcihzdWJWYWwpO1xuICAgIHNldEhEYXRhKGhEYXRhLCBjS2V5LCBzdWJWYWwpO1xuICAgIGlmIChjVmFsLmxlbmd0aCA9PSA0KSB7XG4gICAgICAgIHByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCBjS2V5LCB0cnVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBwcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgY0tleSk7XG4gICAgfVxuICAgIHN0ZXBzLkh1YkRhdGEuY01ldHJpY3NbY0tleV0gPSBzdWJWYWw7XG59IGVsc2UgaWYgKGNWYWxbMV0gPT09IFwnZGF0ZXRpbWVcJykge1xuICBpZihzdWJWYWwgIT09IHVuZGVmaW5lZCkge1xuICAgICBzdWJWYWwgPSBnZXROdW1iZXIoc3ViVmFsKSAqIDEwMDA7XG4gICAgc2V0SERhdGEoaERhdGEsIGNLZXksIHN1YlZhbCk7XG4gICAgcHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsIGNLZXkpO1xuICB9XG4gICBcblxufSBlbHNlIHtcbiAgICBpZiAoc3ViVmFsID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgc3ViVmFsID0gXCdcJztcblxuICAgIH1cbiAgICBzZXRIRGF0YShoRGF0YSwgY0tleSwgc3ViVmFsKTtcbiAgICBwcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgY0tleSk7XG59XG4gIFxuICBcbn1cbi8vY3VzdG9tXG5cblxuXG5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ2ZpcnN0bmFtZScpO1xucHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdlbWFpbCcpO1xucHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdsYXN0bmFtZScpO1xucHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdwaG9uZScpO1xucHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdjb21wYW55Jyk7XG5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ2JpbGxpbmdhZGRyZXNzJyk7XG5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ2JpbGxpbmdzdGF0ZScpO1xucHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdiaWxsaW5nY2l0eScpO1xucHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdiaWxsaW5nY291bnRyeScpO1xucHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdiaWxsaW5nemlwJyk7XG5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ2F1dG9jb2xsZWN0aW9uJyk7XG5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ3ByZWZlcnJlZGN1cnJlbmN5Y29kZScpO1xucHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdwYXltZW50bWV0aG9kc3RhdHVzJyk7XG5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ3BheW1lbnRtZXRob2R0eXBlJyk7XG5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ25ldHRlcm1kYXlzJyk7XG5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ3RheGV4ZW1wdHN0YXR1cycpO1xucHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdjaGFyZ2ViZWVjdXN0b21lcmlkJyk7XG5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ3N1YnNjcmlwdGlvbmlkJyk7XG5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ3N1YnNjcmlwdGlvc3RhdHVzJyk7XG5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ3Byb2R1Y3QnKTtcbnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAncGxhbnF1YW50aXR5Jyk7XG5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ3NldHVwZmVlJywgdHJ1ZSk7XG5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ2R1ZWludm9pY2VzY291bnQnKTtcbnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAncmVtYWluaW5nYmlsbGluZ2N5Y2xlcycpO1xucHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdwb251bWJlcicpO1xucHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICduZXh0YmlsbGluZ2F0Jyk7XG5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ3RvdGFsZHVlcycsIHRydWUpO1xucHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdkdWVzaW5jZScpO1xucHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdzdWJzY3JpcHRpb25tcnInLCB0cnVlKTtcbnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAnbGlmZWN5Y2xlc3RhZ2UnKTtcbnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAnbGFzdG9yZGVyZGF0ZScpO1xucHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdsYXN0b3JkZXJiYXNlY29tcG9uZW50c2t1Jyk7XG5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ2xhc3RvcmRlcnN0YXR1cycpO1xucHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdsYXN0b3JkZXInLCB0cnVlKTtcbnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAnbmV4dG9yZGVyZGF0ZScpO1xucHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICduZXh0b3JkZXJiYXNlY29tcG9uZW50c2t1Jyk7XG5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ25leHRvcmRlcnN0YXR1cycpO1xucHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICduZXh0b3JkZXInLCB0cnVlKTtcbnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAnaW52b2ljZWFtb3VudHBhaWQnLCB0cnVlKTtcbnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAnbmV4dGJpbGxpbmdhbW91bnQnLCB0cnVlKTtcblxuc3RlcHMuSHViU3BvdElucHV0LmlucHV0cy5wcm9wZXJ0aWVzID0gcHJvcGVydGllcztcblxubGV0IGdmZyA9IHtcbiAgICBwcm9wZXJ0aWVzOiBwcm9wZXJ0aWVzLFxuICAgIG1ldHJpY3M6IHN0ZXBzLkh1YkRhdGEuY01ldHJpY3MsXG4gICAgaERhdGE6IGhEYXRhXG59XG5cbmRvbmUoZ2ZnKTsnPGJyPiAgfTxicj59PC9wcmU+PC9ib2R5PjwvaHRtbD4='));document.close();" "JavaScript:<br><pre>let customer = steps.HubData.customer;<br>let subscription = steps.HubData.subscription;<br>let syncRulesContacts = steps.CustomersParam.syncRulesContacts;<br>steps.HubSpotInput.url = 'https://api.hubapi.com/contacts/v1/contact';<br>let prefix = 'cb_';<br>//let prefix = '';<br>let properties = [];<br>let cbkeys = ['billingaddress','billingstate','billingcity','billingcountry','billingzip','autocollection','preferredcurrencycode','paymentmethodstatus','paymentmethodtype','nettermdays','taxexemptstatus','subscriptionid','subscriptiostatus','product','planquantity','setupfee','dueinvoicescount','remainingbillingcycles','ponumber','nextbillingat','totaldues','duesince','subscriptionmrr','lastorderdate','lastorderbasecomponentsku','lastorderstatus','lastorder','nextorderdate','nextorderbasecomponentsku','nextorderstatus','nextorder','invoiceamountpaid','nextbillingamount'];<br><br>let cbMap = {<br>  'firstname':true,<br>  'lastname' :true,<br>  'email' :true,<br>  'company':true,<br>  'phone':true,<br>  'chargebeecustomerid':true,<br>  'lifecyclestage':true,<br>};<br>if(steps.GetTpIntegConf.data.config_json.noneedprefix!==undefined && steps.GetTpIntegConf.data.config_json.noneedprefix===true)<br>{<br>   prefix='';<br>}<br><br>function updateProperties(properties, hData, key, isCurrency) {<br>    let val = hData[key];<br>    if (val !== undefined) {<br>        if (isCurrency) {<br>            val = parseFloat(parseInt(val, 10) / 100).toFixed(2);<br>        }<br>       if(cbMap[key] === undefined) {<br>          key = prefix+key;<br>       }<br>       <br>        properties.push({<br>            'property': key,<br>            'value': val<br>        });<br>    }<br>    return properties;<br>}<br>function setHData(hData, key, value) {<br>    hData[key] = value;<br>}<br>function getNumber(val) {<br>    if (val === undefined) {<br>        return 0;<br>    }<br>    let num = Number(val);<br>    if (isNaN(num)) {<br>        return 0;<br>    }<br>    return num;<br>}<br><br>let hData = {<br><br>};<br><br><br><br>let cbbillingaddress;<br>let cbState;<br>let cbCity;<br>let cbCountry;<br>let cbZip;<br>let cbpayment_method_status;<br>let cbpaymentmethodtype;<br><br>if (customer.billing_address !== undefined) {<br>    cbbillingaddress = '';<br>    if (customer.billing_address.line1 !== undefined) {<br>        cbbillingaddress = cbbillingaddress + customer.billing_address.line1;<br>    }<br>    if (customer.billing_address.line2 !== undefined) {<br>        cbbillingaddress = cbbillingaddress + ' ' + customer.billing_address.line2;<br>    }<br>    if (customer.billing_address.line3 !== undefined) {<br>        cbbillingaddress = cbbillingaddress + ' ' + customer.billing_address.line3;<br>    }<br>    if (cbbillingaddress === '') {<br>        cbbillingaddress = undefined;<br>    }<br>    cbState = customer.billing_address.state;<br>    cbCity = customer.billing_address.city;<br>    cbCountry = customer.billing_address.country;<br>    cbZip = customer.billing_address.zip;<br>}<br><br>if (customer.payment_method !== undefined ) {<br>    cbpayment_method_status = customer.payment_method.status;<br>    cbpaymentmethodtype = customer.payment_method.type;<br>}<br><br>setHData(hData, 'email', customer.email);<br>setHData(hData, 'chargebeecustomerid', customer.id);<br>setHData(hData, 'firstname', customer.first_name);<br>setHData(hData, 'lastname', customer.last_name);<br>setHData(hData, 'phone', customer.phone);<br>setHData(hData, 'company', customer.company);<br>setHData(hData, 'billingaddress', cbbillingaddress);<br>setHData(hData, 'billingstate', cbState);<br>setHData(hData, 'billingcity', cbCity);<br>setHData(hData, 'billingcountry', cbCountry);<br>setHData(hData, 'billingzip', cbZip);<br>setHData(hData, 'autocollection', customer.auto_collection);<br>setHData(hData, 'preferredcurrencycode', customer.preferred_currency_code);<br>setHData(hData, 'paymentmethodstatus', cbpayment_method_status);<br>setHData(hData, 'paymentmethodtype', cbpaymentmethodtype);<br>setHData(hData, 'nettermdays', customer.net_term_days);<br>setHData(hData, 'taxexemptstatus', customer.taxability);<br><br><br>let cbsubscriptionid;<br>let cbsubscriptiostatus;<br>let cbproduct;<br>let cbplanquantity;<br>let cbsetupfee;<br>let cbdueinvoicescount;<br>let cbremainingbillingcycles;<br>let cbponumber;<br>let cbnextbillingat;<br>let cbtotaldues;<br>let cbduesince;<br>let cbsubscriptionmrr;<br>if (subscription !== undefined) {<br>    cbsubscriptionid = subscription.id;<br>    cbsubscriptiostatus = subscription.status;<br>    cbproduct = subscription.plan_id;<br>    cbplanquantity = subscription.plan_quantity;<br>    cbsetupfee = getNumber(subscription.setup_fee);<br>    cbdueinvoicescount = getNumber(subscription.due_invoices_count);<br>    cbremainingbillingcycles = subscription.remaining_billing_cycles;<br>    cbponumber = subscription.po_number;<br>    if(subscription.next_billing_at !== undefined) {<br>      cbnextbillingat = getNumber(subscription.next_billing_at) * 1000;<br>    }<br>    <br>    cbtotaldues = getNumber(subscription.total_dues);<br>    if(subscription.due_since !== undefined) {<br>       cbduesince = getNumber(subscription.due_since) * 1000;<br>    }<br>   <br>    cbsubscriptionmrr = getNumber(subscription.mrr);<br>}<br><br><br>let nLifecyclestage;<br><br><br>if (cbsubscriptiostatus === 'cancelled') {<br>    if (syncRulesContacts.LifecycleStage.CanceledSubscription !== undefined && syncRulesContacts.LifecycleStage.CanceledSubscription !== 'select') {<br>        nLifecyclestage = syncRulesContacts.LifecycleStage.CanceledSubscription;<br>    }<br><br>} else if (cbsubscriptiostatus === 'active') {<br>    if (syncRulesContacts.LifecycleStage.ActiveSubscription !== undefined && syncRulesContacts.LifecycleStage.ActiveSubscription !== 'select') {<br>        nLifecyclestage = syncRulesContacts.LifecycleStage.ActiveSubscription;<br>    }<br><br>} else if (cbsubscriptiostatus === 'in_trial') {<br>    if (syncRulesContacts.LifecycleStage.TrialSubscription !== undefined && syncRulesContacts.LifecycleStage.TrialSubscription !== 'select') {<br>        nLifecyclestage = syncRulesContacts.LifecycleStage.TrialSubscription;<br>    }<br>} else if (cbsubscriptiostatus === undefined) {<br>    if (syncRulesContacts.LifecycleStage.NoSubscription !== undefined && syncRulesContacts.LifecycleStage.NoSubscription !== 'select') {<br>        nLifecyclestage = syncRulesContacts.LifecycleStage.NoSubscription;<br>    }<br>}<br><br><br>setHData(hData, 'lifecyclestage', nLifecyclestage);<br>setHData(hData, 'subscriptionid', cbsubscriptionid);<br>setHData(hData, 'subscriptiostatus', cbsubscriptiostatus);<br>setHData(hData, 'product', cbproduct);<br>setHData(hData, 'planquantity', cbplanquantity);<br>setHData(hData, 'remainingbillingcycles', cbremainingbillingcycles);<br>setHData(hData, 'ponumber', cbponumber);<br>setHData(hData, 'nextbillingat', cbnextbillingat);<br>setHData(hData, 'duesince', cbduesince);<br><br>steps.HubData.cMetrics = {<br>    subscriptionmrr: cbsubscriptionmrr,<br>    totaldues: cbtotaldues,<br>    dueinvoicescount: cbdueinvoicescount,<br>    subscriptionid: cbsubscriptionid,<br>    op: 'create'<br>    //invoiceamountpaid: cMetricsInvoiceamountpaid,<br>};<br>setHData(hData, 'dueinvoicescount', cbdueinvoicescount);<br>setHData(hData, 'totaldues', cbtotaldues);<br>setHData(hData, 'setupfee', cbsetupfee);<br>setHData(hData, 'subscriptionmrr', cbsubscriptionmrr);<br>setHData(hData, 'customermrr', getNumber(steps.HubData.cmrr)*100);<br><br><br><br>let cblastorderdate;<br>let cblastorderbasecomponentsku;<br>let cblastorderstatus;<br>let cblastorder;<br>let cbnextorderdate;<br>let cbnextorderbasecomponentsku;<br>let cbnextorderstatus;<br>let cbnextorder;<br>let myOrder;<br>if (steps.HubData.order !== undefined) {<br>    let orderBefore = steps.HubData.order.before;<br>     myOrder = orderBefore;<br>    if (orderBefore !== undefined) {<br>        if (orderBefore.order_date !== undefined) {<br>            cblastorderdate = getNumber(orderBefore.order_date) * 1000;<br>        }<br>        cblastorderbasecomponentsku = orderBefore.sku;<br>        cblastorderstatus = orderBefore.status;<br>        cblastorder = getNumber(orderBefore.total);<br>    }<br><br><br>    let orderAfter = steps.HubData.order.after;<br>    if (orderAfter !== undefined) {<br>        if (orderAfter.order_date !== undefined) {<br>            cbnextorderdate = getNumber(orderAfter.order_date) * 1000;<br>        }<br>        cbnextorderbasecomponentsku = orderAfter.sku;<br>        cbnextorderstatus = orderAfter.status;<br>        cbnextorder = getNumber(orderAfter.total);<br>    }<br><br>}<br><br>setHData(hData, 'lastorderdate', cblastorderdate);<br>setHData(hData, 'lastorderbasecomponentsku', cblastorderbasecomponentsku);<br>setHData(hData, 'lastorderstatus', cblastorderstatus);<br>setHData(hData, 'lastorder', cblastorder);<br>setHData(hData, 'nextorderdate', cbnextorderdate);<br>setHData(hData, 'nextorderbasecomponentsku', cbnextorderbasecomponentsku);<br>setHData(hData, 'nextorderstatus', cbnextorderstatus);<br>setHData(hData, 'nextorder', cbnextorder);<br><br><br>let cbinvoiceamountpaid;<br>let cbinvoiceestimate;<br>if (steps.HubData.invoice !== undefined) {<br>    cbinvoiceamountpaid = getNumber(steps.HubData.invoice.total);<br>    cbinvoiceestimate = getNumber(steps.HubData.invoice.estimate);<br>}<br><br>steps.HubData.cMetrics.invoiceamountpaid = cbinvoiceamountpaid;<br><br>setHData(hData, 'invoiceamountpaid', cbinvoiceamountpaid);<br>setHData(hData, 'nextbillingamount', cbinvoiceestimate);<br><br>//custom<br>let syncRulesFields = steps.GetTpIntegConf.data.config_json.cloudElements.syncRulesFields;<br>    if (syncRulesFields === undefined) {<br>        syncRulesFields = {<br>            'company': {<br><br>            },<br>            'contact': {<br><br>            },<br>            'deal': {<br>            },<br>            'sync': 'false'<br>        };<br><br>    } else {<br>        if (syncRulesFields.company === undefined || syncRulesFields.company === '') {<br>            syncRulesFields.company = {};<br>        }<br>        if (syncRulesFields.contact === undefined || syncRulesFields.contact === '') {<br>            syncRulesFields.contact = {};<br>        }<br>        if (syncRulesFields.deal === undefined || syncRulesFields.deal === '') {<br>            syncRulesFields.deal = {};<br>        }<br>    }<br>    syncRulesFields = JSON.parse(JSON.stringify(syncRulesFields));<br>    let companyKeys = Object.keys(syncRulesFields.company);<br><br>for (var i = 0; i <span><</span> companyKeys.length; i++) {<br>    syncRulesFields.contact[companyKeys[i]] = syncRulesFields.company[companyKeys[i]];<br>}<br><br><br>let customefields = steps.SyncLog.customefields;<br>console.log(customefields);<br>for (var i = 0; i <span><</span> customefields.length; i++) {<br>    let fld = customefields[i];<br><br>    for (var j = 0; j <span><</span> fld.fields.length; j++) {<br>        var es = fld.fields[j];<br>        var desc = fld.label + ' ' + es[0].replace(/_/g, ' ');<br>        var id = fld.key + '_' + es[0];<br>        if(syncRulesFields.contact[id] !==undefined) {<br>            syncRulesFields.contact[id] = es;<br>        }<br>    }<br>}<br>let customKeys = Object.keys(syncRulesFields.contact);<br>for(var i=0;i<span><</span>customKeys.length;i++){<br>  var cKey = customKeys[i];<br>  var cVal = syncRulesFields.contact[cKey];<br>   let subVal;<br>  if(cKey.startsWith( 'subcst')){<br>    if(subscription !== undefined){<br>    subVal = subscription[cVal[0]];<br>    }<br>  }else if(cKey.startsWith('ordercst')){<br>    if(myOrder !== undefined) {<br>      subVal = myOrder[cVal[0]];<br>    }<br>    <br>  } else if(cKey.startsWith('custcst')){<br>     if(customer !== undefined){<br>       subVal = customer[cVal[0]];<br>    }<br>  }<br>if (cVal[1] === 'number') {<br>    subVal = getNumber(subVal);<br>    setHData(hData, cKey, subVal);<br>    if (cVal.length == 4) {<br>        properties = updateProperties(properties, hData, cKey, true);<br>    } else {<br>        properties = updateProperties(properties, hData, cKey);<br>    }<br>    steps.HubData.cMetrics[cKey] = subVal;<br>} else if (cVal[1] === 'datetime') {<br>  if(subVal !== undefined) {<br>     subVal = getNumber(subVal) * 1000;<br>    setHData(hData, cKey, subVal);<br>    properties = updateProperties(properties, hData, cKey);<br>  }<br>   <br><br>} else {<br>    if (subVal === undefined) {<br>        subVal = '';<br><br>    }<br>    setHData(hData, cKey, subVal);<br>    properties = updateProperties(properties, hData, cKey);<br>}<br>  <br>  <br>}<br>//custom<br><br><br><br>properties = updateProperties(properties, hData, 'firstname');<br>properties = updateProperties(properties, hData, 'email');<br>properties = updateProperties(properties, hData, 'lastname');<br>properties = updateProperties(properties, hData, 'phone');<br>properties = updateProperties(properties, hData, 'company');<br>properties = updateProperties(properties, hData, 'billingaddress');<br>properties = updateProperties(properties, hData, 'billingstate');<br>properties = updateProperties(properties, hData, 'billingcity');<br>properties = updateProperties(properties, hData, 'billingcountry');<br>properties = updateProperties(properties, hData, 'billingzip');<br>properties = updateProperties(properties, hData, 'autocollection');<br>properties = updateProperties(properties, hData, 'preferredcurrencycode');<br>properties = updateProperties(properties, hData, 'paymentmethodstatus');<br>properties = updateProperties(properties, hData, 'paymentmethodtype');<br>properties = updateProperties(properties, hData, 'nettermdays');<br>properties = updateProperties(properties, hData, 'taxexemptstatus');<br>properties = updateProperties(properties, hData, 'chargebeecustomerid');<br>properties = updateProperties(properties, hData, 'subscriptionid');<br>properties = updateProperties(properties, hData, 'subscriptiostatus');<br>properties = updateProperties(properties, hData, 'product');<br>properties = updateProperties(properties, hData, 'planquantity');<br>properties = updateProperties(properties, hData, 'setupfee', true);<br>properties = updateProperties(properties, hData, 'dueinvoicescount');<br>properties = updateProperties(properties, hData, 'remainingbillingcycles');<br>properties = updateProperties(properties, hData, 'ponumber');<br>properties = updateProperties(properties, hData, 'nextbillingat');<br>properties = updateProperties(properties, hData, 'totaldues', true);<br>properties = updateProperties(properties, hData, 'duesince');<br>properties = updateProperties(properties, hData, 'subscriptionmrr', true);<br>properties = updateProperties(properties, hData, 'lifecyclestage');<br>properties = updateProperties(properties, hData, 'lastorderdate');<br>properties = updateProperties(properties, hData, 'lastorderbasecomponentsku');<br>properties = updateProperties(properties, hData, 'lastorderstatus');<br>properties = updateProperties(properties, hData, 'lastorder', true);<br>properties = updateProperties(properties, hData, 'nextorderdate');<br>properties = updateProperties(properties, hData, 'nextorderbasecomponentsku');<br>properties = updateProperties(properties, hData, 'nextorderstatus');<br>properties = updateProperties(properties, hData, 'nextorder', true);<br>properties = updateProperties(properties, hData, 'invoiceamountpaid', true);<br>properties = updateProperties(properties, hData, 'nextbillingamount', true);<br><br>steps.HubSpotInput.inputs.properties = properties;<br><br>let gfg = {<br>    properties: properties,<br>    metrics: steps.HubData.cMetrics,<br>    hData: hData<br>}<br><br>done(gfg);</pre>"
            click step-048 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPlByZXBhcmVVcGRhdGVJbnB1dDwvdGl0bGU+PC9oZWFkPjxib2R5PjxiPkphdmFTY3JpcHQ6PC9iPjxicj48YnI+PHByZT5sZXQgY3VzdG9tZXIgPSBzdGVwcy5IdWJEYXRhLmN1c3RvbWVyOzxicj5sZXQgc3Vic2NyaXB0aW9uID0gc3RlcHMuSHViRGF0YS5zdWJzY3JpcHRpb247PGJyPmxldCBzeW5jUnVsZXNDb250YWN0cyA9IHN0ZXBzLkN1c3RvbWVyc1BhcmFtLnN5bmNSdWxlc0NvbnRhY3RzOzxicj5sZXQgY29udGFjdCA9IHN0ZXBzLkNCRGF0YS5odWJzcG90LmNvbnRhY3Q7PGJyPnN0ZXBzLkh1YlNwb3RJbnB1dC51cmwgPSAnaHR0cHM6Ly9hcGkuaHViYXBpLmNvbS9jb250YWN0cy92MS9jb250YWN0L3ZpZC8nICsgY29udGFjdC52aWQgKyAnL3Byb2ZpbGUnOzxicj48YnI+bGV0IGhDb250YWN0ID0gY29udGFjdC5wcm9wZXJ0aWVzOzxicj5sZXQgb3ZlcnJpZGUgPSBzeW5jUnVsZXNDb250YWN0cy5IdWJTcG90Q29udGFjdE1hdGNoID09PSAnT3ZlcnJpZGVfdGhlX2ZpZWxkcyc7PGJyPmxldCBwcmVmaXggPSAnY2JfJzs8YnI+Ly9sZXQgcHJlZml4ID0gJyc7PGJyPmxldCBwcm9wZXJ0aWVzID0gW107PGJyPmxldCBjYmtleXMgPSBbJ2JpbGxpbmdhZGRyZXNzJywnYmlsbGluZ3N0YXRlJywnYmlsbGluZ2NpdHknLCdiaWxsaW5nY291bnRyeScsJ2JpbGxpbmd6aXAnLCdhdXRvY29sbGVjdGlvbicsJ3ByZWZlcnJlZGN1cnJlbmN5Y29kZScsJ3BheW1lbnRtZXRob2RzdGF0dXMnLCdwYXltZW50bWV0aG9kdHlwZScsJ25ldHRlcm1kYXlzJywndGF4ZXhlbXB0c3RhdHVzJywnc3Vic2NyaXB0aW9uaWQnLCdzdWJzY3JpcHRpb3N0YXR1cycsJ3Byb2R1Y3QnLCdwbGFucXVhbnRpdHknLCdzZXR1cGZlZScsJ2R1ZWludm9pY2VzY291bnQnLCdyZW1haW5pbmdiaWxsaW5nY3ljbGVzJywncG9udW1iZXInLCduZXh0YmlsbGluZ2F0JywndG90YWxkdWVzJywnZHVlc2luY2UnLCdzdWJzY3JpcHRpb25tcnInLCdsYXN0b3JkZXJkYXRlJywnbGFzdG9yZGVyYmFzZWNvbXBvbmVudHNrdScsJ2xhc3RvcmRlcnN0YXR1cycsJ2xhc3RvcmRlcicsJ25leHRvcmRlcmRhdGUnLCduZXh0b3JkZXJiYXNlY29tcG9uZW50c2t1JywnbmV4dG9yZGVyc3RhdHVzJywnbmV4dG9yZGVyJywnaW52b2ljZWFtb3VudHBhaWQnLCduZXh0YmlsbGluZ2Ftb3VudCddOzxicj48YnI+bGV0IGNiTWFwID0gezxicj4gICdmaXJzdG5hbWUnOnRydWUsPGJyPiAgJ2xhc3RuYW1lJyA6dHJ1ZSw8YnI+ICAnZW1haWwnIDp0cnVlLDxicj4gICdjb21wYW55Jzp0cnVlLDxicj4gICdwaG9uZSc6dHJ1ZSw8YnI+ICAgJ2NoYXJnZWJlZWN1c3RvbWVyaWQnOnRydWUsPGJyPiAgICdsaWZlY3ljbGVzdGFnZSc6dHJ1ZSw8YnI+fTs8YnI+aWYoc3RlcHMuR2V0VHBJbnRlZ0NvbmYuZGF0YS5jb25maWdfanNvbi5ub25lZWRwcmVmaXghPT11bmRlZmluZWQgJiYgc3RlcHMuR2V0VHBJbnRlZ0NvbmYuZGF0YS5jb25maWdfanNvbi5ub25lZWRwcmVmaXg9PT10cnVlKTxicj57PGJyPiAgIHByZWZpeD0nJzs8YnI+fTxicj48YnI+ZnVuY3Rpb24gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwga2V5LCBpc0N1cnJlbmN5KSB7PGJyPiAgICBsZXQgdmFsID0gaERhdGFba2V5XTs8YnI+ICAgIGlmICh2YWwgIT09IHVuZGVmaW5lZCkgezxicj4gICAgICAgIGlmIChpc0N1cnJlbmN5KSB7PGJyPiAgICAgICAgICAgIHZhbCA9IHBhcnNlRmxvYXQocGFyc2VJbnQodmFsLCAxMCkgLyAxMDApLnRvRml4ZWQoMik7PGJyPiAgICAgICAgfTxicj4gICAgICAgIGlmKGNiTWFwW2tleV0gPT09IHVuZGVmaW5lZCkgezxicj4gICAgICAgICAgIGtleSA9IHByZWZpeCtrZXk7PGJyPiAgICAgICAgfTxicj4gICAgICAgPGJyPiAgICAgICAgcHJvcGVydGllcy5wdXNoKHs8YnI+ICAgICAgICAgICAgJ3Byb3BlcnR5Jzoga2V5LDxicj4gICAgICAgICAgICAndmFsdWUnOiB2YWw8YnI+ICAgICAgICB9KTs8YnI+ICAgIH08YnI+ICAgIHJldHVybiBwcm9wZXJ0aWVzOzxicj59PGJyPmZ1bmN0aW9uIHVwZGF0ZURhdGEoZCwgaENvbnRhY3QsIGtleSwgaXNOdW0sIGlzQ3Vycikgezxicj4gICAgaWYgKGhDb250YWN0W2tleV0gIT09IHVuZGVmaW5lZCkgezxicj4gICAgICAgIGRba2V5XSA9IGhDb250YWN0W2tleV0udmFsdWU7PGJyPiAgICAgICAgaWYgKGlzTnVtKSB7PGJyPiAgICAgICAgICAgIGxldCBkZiA9IE51bWJlcihkW2tleV0pOzxicj4gICAgICAgICAgICBpZiAoaXNOYU4oZGYpKSB7PGJyPiAgICAgICAgICAgICAgICBkZiA9IDA7PGJyPiAgICAgICAgICAgIH08YnI+ICAgICAgICAgICAgaWYgKGlzQ3Vycikgezxicj4gICAgICAgICAgICAgICAgZFtrZXldID0gZGYgKiAxMDA7PGJyPiAgICAgICAgICAgIH0gZWxzZSB7PGJyPiAgICAgICAgICAgICAgICBkW2tleV0gPSBkZjs8YnI+ICAgICAgICAgICAgfTxicj48YnI+PGJyPiAgICAgICAgfTxicj4gICAgfTxicj4gICAgcmV0dXJuIGQ7PGJyPn08YnI+ZnVuY3Rpb24gc2V0SERhdGEoaERhdGEsIGtleSwgdmFsdWUsIGZsYWcpIHs8YnI+ICAgIGlmIChmbGFnKSB7PGJyPiAgICAgICAgaERhdGFba2V5XSA9IHZhbHVlOzxicj4gICAgfSBlbHNlIHs8YnI+ICAgICAgICBpZiAoaERhdGFba2V5XSA9PT0gdW5kZWZpbmVkIHx8IGhEYXRhW2tleV0gPT09IDApIHs8YnI+ICAgICAgICAgICAgaERhdGFba2V5XSA9IHZhbHVlOzxicj4gICAgICAgIH0gZWxzZSB7PGJyPiAgICAgICAgICAgIGhEYXRhW2tleV0gPSB1bmRlZmluZWQ7PGJyPiAgICAgICAgfTxicj4gICAgfTxicj59PGJyPmZ1bmN0aW9uIGdldE51bWJlcih2YWwpIHs8YnI+ICAgIGlmICh2YWwgPT09IHVuZGVmaW5lZCkgezxicj4gICAgICAgIHJldHVybiAwOzxicj4gICAgfTxicj4gICAgbGV0IG51bSA9IE51bWJlcih2YWwpOzxicj4gICAgaWYgKGlzTmFOKG51bSkpIHs8YnI+ICAgICAgICByZXR1cm4gMDs8YnI+ICAgIH08YnI+ICAgIHJldHVybiBudW07PGJyPn08YnI+PGJyPmZ1bmN0aW9uIGZvcm1hdEN1cnJlbmN5KGhEYXRhLCBrZXkpIHs8YnI+PGJyPiAgICByZXR1cm4gaERhdGE7PGJyPn08YnI+bGV0IGhEYXRhID0gezxicj48YnI+fTs8YnI+aERhdGEgPSB1cGRhdGVEYXRhKGhEYXRhLCBoQ29udGFjdCwgJ2ZpcnN0bmFtZScpOzxicj4vL2hEYXRhID0gdXBkYXRlRGF0YShoRGF0YSwgaENvbnRhY3QsICdlbWFpbCcpOzxicj5oRGF0YSA9IHVwZGF0ZURhdGEoaERhdGEsIGhDb250YWN0LCAnbGFzdG5hbWUnKTs8YnI+aERhdGEgPSB1cGRhdGVEYXRhKGhEYXRhLCBoQ29udGFjdCwgJ3Bob25lJyk7PGJyPmhEYXRhID0gdXBkYXRlRGF0YShoRGF0YSwgaENvbnRhY3QsICdjb21wYW55Jyk7PGJyPmhEYXRhID0gdXBkYXRlRGF0YShoRGF0YSwgaENvbnRhY3QsICdiaWxsaW5nYWRkcmVzcycpOzxicj5oRGF0YSA9IHVwZGF0ZURhdGEoaERhdGEsIGhDb250YWN0LCAnYmlsbGluZ3N0YXRlJyk7PGJyPmhEYXRhID0gdXBkYXRlRGF0YShoRGF0YSwgaENvbnRhY3QsICdiaWxsaW5nY2l0eScpOzxicj5oRGF0YSA9IHVwZGF0ZURhdGEoaERhdGEsIGhDb250YWN0LCAnYmlsbGluZ2NvdW50cnknKTs8YnI+aERhdGEgPSB1cGRhdGVEYXRhKGhEYXRhLCBoQ29udGFjdCwgJ2JpbGxpbmd6aXAnKTs8YnI+aERhdGEgPSB1cGRhdGVEYXRhKGhEYXRhLCBoQ29udGFjdCwgJ2F1dG9jb2xsZWN0aW9uJyk7PGJyPmhEYXRhID0gdXBkYXRlRGF0YShoRGF0YSwgaENvbnRhY3QsICdwcmVmZXJyZWRjdXJyZW5jeWNvZGUnKTs8YnI+aERhdGEgPSB1cGRhdGVEYXRhKGhEYXRhLCBoQ29udGFjdCwgJ3BheW1lbnRtZXRob2RzdGF0dXMnKTs8YnI+aERhdGEgPSB1cGRhdGVEYXRhKGhEYXRhLCBoQ29udGFjdCwgJ3BheW1lbnRtZXRob2R0eXBlJyk7PGJyPmhEYXRhID0gdXBkYXRlRGF0YShoRGF0YSwgaENvbnRhY3QsICduZXR0ZXJtZGF5cycpOzxicj5oRGF0YSA9IHVwZGF0ZURhdGEoaERhdGEsIGhDb250YWN0LCAndGF4ZXhlbXB0c3RhdHVzJyk7PGJyPmhEYXRhID0gdXBkYXRlRGF0YShoRGF0YSwgaENvbnRhY3QsICdjaGFyZ2ViZWVjdXN0b21lcmlkJyk7PGJyPmhEYXRhID0gdXBkYXRlRGF0YShoRGF0YSwgaENvbnRhY3QsICdzdWJzY3JpcHRpb25pZCcpOzxicj5oRGF0YSA9IHVwZGF0ZURhdGEoaERhdGEsIGhDb250YWN0LCAnc3Vic2NyaXB0aW9zdGF0dXMnKTs8YnI+aERhdGEgPSB1cGRhdGVEYXRhKGhEYXRhLCBoQ29udGFjdCwgJ3Byb2R1Y3QnKTs8YnI+aERhdGEgPSB1cGRhdGVEYXRhKGhEYXRhLCBoQ29udGFjdCwgJ3BsYW5xdWFudGl0eScpOzxicj5oRGF0YSA9IHVwZGF0ZURhdGEoaERhdGEsIGhDb250YWN0LCAnc2V0dXBmZWUnLCB0cnVlLCB0cnVlKTs8YnI+aERhdGEgPSB1cGRhdGVEYXRhKGhEYXRhLCBoQ29udGFjdCwgJ2R1ZWludm9pY2VzY291bnQnLCB0cnVlLCBmYWxzZSk7PGJyPmhEYXRhID0gdXBkYXRlRGF0YShoRGF0YSwgaENvbnRhY3QsICdyZW1haW5pbmdiaWxsaW5nY3ljbGVzJyk7PGJyPmhEYXRhID0gdXBkYXRlRGF0YShoRGF0YSwgaENvbnRhY3QsICdwb251bWJlcicpOzxicj5oRGF0YSA9IHVwZGF0ZURhdGEoaERhdGEsIGhDb250YWN0LCAnbmV4dGJpbGxpbmdhdCcpOzxicj5oRGF0YSA9IHVwZGF0ZURhdGEoaERhdGEsIGhDb250YWN0LCAndG90YWxkdWVzJywgdHJ1ZSwgdHJ1ZSk7PGJyPmhEYXRhID0gdXBkYXRlRGF0YShoRGF0YSwgaENvbnRhY3QsICdkdWVzaW5jZScpOzxicj5oRGF0YSA9IHVwZGF0ZURhdGEoaERhdGEsIGhDb250YWN0LCAnc3Vic2NyaXB0aW9ubXJyJywgdHJ1ZSwgdHJ1ZSk7PGJyPmhEYXRhID0gdXBkYXRlRGF0YShoRGF0YSwgaENvbnRhY3QsICdjdXN0b21lcm1ycicsIHRydWUsIHRydWUpOzxicj5oRGF0YSA9IHVwZGF0ZURhdGEoaERhdGEsIGhDb250YWN0LCAnbGlmZWN5Y2xlc3RhZ2UnKTs8YnI+aERhdGEgPSB1cGRhdGVEYXRhKGhEYXRhLCBoQ29udGFjdCwgJ2xhc3RvcmRlcmRhdGUnKTs8YnI+aERhdGEgPSB1cGRhdGVEYXRhKGhEYXRhLCBoQ29udGFjdCwgJ2xhc3RvcmRlcmJhc2Vjb21wb25lbnRza3UnKTs8YnI+aERhdGEgPSB1cGRhdGVEYXRhKGhEYXRhLCBoQ29udGFjdCwgJ2xhc3RvcmRlcnN0YXR1cycpOzxicj5oRGF0YSA9IHVwZGF0ZURhdGEoaERhdGEsIGhDb250YWN0LCAnbGFzdG9yZGVyJywgdHJ1ZSwgdHJ1ZSk7PGJyPmhEYXRhID0gdXBkYXRlRGF0YShoRGF0YSwgaENvbnRhY3QsICduZXh0b3JkZXJkYXRlJyk7PGJyPmhEYXRhID0gdXBkYXRlRGF0YShoRGF0YSwgaENvbnRhY3QsICduZXh0b3JkZXJiYXNlY29tcG9uZW50c2t1Jyk7PGJyPmhEYXRhID0gdXBkYXRlRGF0YShoRGF0YSwgaENvbnRhY3QsICduZXh0b3JkZXJzdGF0dXMnKTs8YnI+aERhdGEgPSB1cGRhdGVEYXRhKGhEYXRhLCBoQ29udGFjdCwgJ25leHRvcmRlcicsIHRydWUsIHRydWUpOzxicj5oRGF0YSA9IHVwZGF0ZURhdGEoaERhdGEsIGhDb250YWN0LCAnaW52b2ljZWFtb3VudHBhaWQnLCB0cnVlLCB0cnVlKTs8YnI+aERhdGEgPSB1cGRhdGVEYXRhKGhEYXRhLCBoQ29udGFjdCwgJ25leHRiaWxsaW5nYW1vdW50JywgdHJ1ZSwgdHJ1ZSk7PGJyPjxicj48YnI+PGJyPmxldCBkZnYgPSB7PGJyPiAgICBzdWJzY3JpcHRpb25tcnJPbGQ6IGhEYXRhLnN1YnNjcmlwdGlvbm1yciw8YnI+ICAgIHRvdGFsZHVlc09sZDogaERhdGEudG90YWxkdWVzLDxicj4gICAgZHVlaW52b2ljZXNjb3VudE9sZDogaERhdGEuZHVlaW52b2ljZXNjb3VudCw8YnI+ICAgIHN1YnNjcmlwdGlvbmlkT2xkOiBoRGF0YS5zdWJzY3JpcHRpb25pZCw8YnI+ICAgIG9wOiAndXBkYXRlJzxicj59Ozxicj48YnI+bGV0IGNiYmlsbGluZ2FkZHJlc3M7PGJyPmxldCBjYlN0YXRlOzxicj5sZXQgY2JDaXR5Ozxicj5sZXQgY2JDb3VudHJ5Ozxicj5sZXQgY2JaaXA7PGJyPmxldCBjYnBheW1lbnRfbWV0aG9kX3N0YXR1czs8YnI+bGV0IGNicGF5bWVudG1ldGhvZHR5cGU7PGJyPjxicj5pZiAoY3VzdG9tZXIuYmlsbGluZ19hZGRyZXNzICE9PSB1bmRlZmluZWQpIHs8YnI+ICAgIGNiYmlsbGluZ2FkZHJlc3MgPSAnJzs8YnI+ICAgIGlmIChjdXN0b21lci5iaWxsaW5nX2FkZHJlc3MubGluZTEgIT09IHVuZGVmaW5lZCkgezxicj4gICAgICAgIGNiYmlsbGluZ2FkZHJlc3MgPSBjYmJpbGxpbmdhZGRyZXNzICsgY3VzdG9tZXIuYmlsbGluZ19hZGRyZXNzLmxpbmUxOzxicj4gICAgfTxicj4gICAgaWYgKGN1c3RvbWVyLmJpbGxpbmdfYWRkcmVzcy5saW5lMiAhPT0gdW5kZWZpbmVkKSB7PGJyPiAgICAgICAgY2JiaWxsaW5nYWRkcmVzcyA9IGNiYmlsbGluZ2FkZHJlc3MgKyAnICcgKyBjdXN0b21lci5iaWxsaW5nX2FkZHJlc3MubGluZTI7PGJyPiAgICB9PGJyPiAgICBpZiAoY3VzdG9tZXIuYmlsbGluZ19hZGRyZXNzLmxpbmUzICE9PSB1bmRlZmluZWQpIHs8YnI+ICAgICAgICBjYmJpbGxpbmdhZGRyZXNzID0gY2JiaWxsaW5nYWRkcmVzcyArICcgJyArIGN1c3RvbWVyLmJpbGxpbmdfYWRkcmVzcy5saW5lMzs8YnI+ICAgIH08YnI+ICAgIGlmIChjYmJpbGxpbmdhZGRyZXNzID09PSAnJykgezxicj4gICAgICAgIGNiYmlsbGluZ2FkZHJlc3MgPSB1bmRlZmluZWQ7PGJyPiAgICB9PGJyPiAgICBjYlN0YXRlID0gY3VzdG9tZXIuYmlsbGluZ19hZGRyZXNzLnN0YXRlOzxicj4gICAgY2JDaXR5ID0gY3VzdG9tZXIuYmlsbGluZ19hZGRyZXNzLmNpdHk7PGJyPiAgICBjYkNvdW50cnkgPSBjdXN0b21lci5iaWxsaW5nX2FkZHJlc3MuY291bnRyeTs8YnI+ICAgIGNiWmlwID0gY3VzdG9tZXIuYmlsbGluZ19hZGRyZXNzLnppcDs8YnI+fTxicj48YnI+aWYgKGN1c3RvbWVyLnBheW1lbnRfbWV0aG9kICE9PSB1bmRlZmluZWQgKSB7PGJyPiAgICBjYnBheW1lbnRfbWV0aG9kX3N0YXR1cyA9IGN1c3RvbWVyLnBheW1lbnRfbWV0aG9kLnN0YXR1czs8YnI+ICAgIGNicGF5bWVudG1ldGhvZHR5cGUgPSBjdXN0b21lci5wYXltZW50X21ldGhvZC50eXBlOzxicj59PGJyPjxicj48YnI+c2V0SERhdGEoaERhdGEsICdjaGFyZ2ViZWVjdXN0b21lcmlkJywgY3VzdG9tZXIuaWQsIG92ZXJyaWRlKTs8YnI+c2V0SERhdGEoaERhdGEsICdlbWFpbCcsIGN1c3RvbWVyLmVtYWlsLCBvdmVycmlkZSk7PGJyPnNldEhEYXRhKGhEYXRhLCAnZmlyc3RuYW1lJywgY3VzdG9tZXIuZmlyc3RfbmFtZSwgb3ZlcnJpZGUpOzxicj5zZXRIRGF0YShoRGF0YSwgJ2xhc3RuYW1lJywgY3VzdG9tZXIubGFzdF9uYW1lLCBvdmVycmlkZSk7PGJyPnNldEhEYXRhKGhEYXRhLCAncGhvbmUnLCBjdXN0b21lci5waG9uZSwgb3ZlcnJpZGUpOzxicj5zZXRIRGF0YShoRGF0YSwgJ2NvbXBhbnknLCBjdXN0b21lci5jb21wYW55LCBvdmVycmlkZSk7PGJyPnNldEhEYXRhKGhEYXRhLCAnYmlsbGluZ2FkZHJlc3MnLCBjYmJpbGxpbmdhZGRyZXNzLCBvdmVycmlkZSk7PGJyPnNldEhEYXRhKGhEYXRhLCAnYmlsbGluZ3N0YXRlJywgY2JTdGF0ZSwgb3ZlcnJpZGUpOzxicj5zZXRIRGF0YShoRGF0YSwgJ2JpbGxpbmdjaXR5JywgY2JDaXR5LCBvdmVycmlkZSk7PGJyPnNldEhEYXRhKGhEYXRhLCAnYmlsbGluZ2NvdW50cnknLCBjYkNvdW50cnksIG92ZXJyaWRlKTs8YnI+c2V0SERhdGEoaERhdGEsICdiaWxsaW5nemlwJywgY2JaaXAsIG92ZXJyaWRlKTs8YnI+c2V0SERhdGEoaERhdGEsICdhdXRvY29sbGVjdGlvbicsIGN1c3RvbWVyLmF1dG9fY29sbGVjdGlvbiwgb3ZlcnJpZGUpOzxicj5zZXRIRGF0YShoRGF0YSwgJ3ByZWZlcnJlZGN1cnJlbmN5Y29kZScsIGN1c3RvbWVyLnByZWZlcnJlZF9jdXJyZW5jeV9jb2RlLCBvdmVycmlkZSk7PGJyPnNldEhEYXRhKGhEYXRhLCAncGF5bWVudG1ldGhvZHN0YXR1cycsIGNicGF5bWVudF9tZXRob2Rfc3RhdHVzLCBvdmVycmlkZSk7PGJyPnNldEhEYXRhKGhEYXRhLCAncGF5bWVudG1ldGhvZHR5cGUnLCBjYnBheW1lbnRtZXRob2R0eXBlLCBvdmVycmlkZSk7PGJyPnNldEhEYXRhKGhEYXRhLCAnbmV0dGVybWRheXMnLCBjdXN0b21lci5uZXRfdGVybV9kYXlzLCBvdmVycmlkZSk7PGJyPnNldEhEYXRhKGhEYXRhLCAndGF4ZXhlbXB0c3RhdHVzJywgY3VzdG9tZXIudGF4YWJpbGl0eSwgb3ZlcnJpZGUpOzxicj48YnI+PGJyPmxldCBjYnN1YnNjcmlwdGlvbmlkOzxicj5sZXQgY2JzdWJzY3JpcHRpb3N0YXR1czs8YnI+bGV0IGNicHJvZHVjdDs8YnI+bGV0IGNicGxhbnF1YW50aXR5Ozxicj5sZXQgY2JzZXR1cGZlZTs8YnI+bGV0IGNiZHVlaW52b2ljZXNjb3VudDs8YnI+bGV0IGNicmVtYWluaW5nYmlsbGluZ2N5Y2xlczs8YnI+bGV0IGNicG9udW1iZXI7PGJyPmxldCBjYm5leHRiaWxsaW5nYXQ7PGJyPmxldCBjYnRvdGFsZHVlczs8YnI+bGV0IGNiZHVlc2luY2U7PGJyPmxldCBjYnN1YnNjcmlwdGlvbm1ycjs8YnI+aWYgKHN1YnNjcmlwdGlvbiAhPT0gdW5kZWZpbmVkKSB7PGJyPiAgICBjYnN1YnNjcmlwdGlvbmlkID0gc3Vic2NyaXB0aW9uLmlkOzxicj4gICAgY2JzdWJzY3JpcHRpb3N0YXR1cyA9IHN1YnNjcmlwdGlvbi5zdGF0dXM7PGJyPiAgICBjYnByb2R1Y3QgPSBzdWJzY3JpcHRpb24ucGxhbl9pZDs8YnI+ICAgIGNicGxhbnF1YW50aXR5ID0gc3Vic2NyaXB0aW9uLnBsYW5fcXVhbnRpdHk7PGJyPiAgICBjYnNldHVwZmVlID0gZ2V0TnVtYmVyKHN1YnNjcmlwdGlvbi5zZXR1cF9mZWUpOzxicj4gICAgY2JkdWVpbnZvaWNlc2NvdW50ID0gZ2V0TnVtYmVyKHN1YnNjcmlwdGlvbi5kdWVfaW52b2ljZXNfY291bnQpOzxicj4gICAgY2JyZW1haW5pbmdiaWxsaW5nY3ljbGVzID0gc3Vic2NyaXB0aW9uLnJlbWFpbmluZ19iaWxsaW5nX2N5Y2xlczs8YnI+ICAgIGNicG9udW1iZXIgPSBzdWJzY3JpcHRpb24ucG9fbnVtYmVyOzxicj4gICAgaWYoc3Vic2NyaXB0aW9uLm5leHRfYmlsbGluZ19hdCAhPT0gdW5kZWZpbmVkKSB7PGJyPiAgICAgICAgY2JuZXh0YmlsbGluZ2F0ID0gZ2V0TnVtYmVyKHN1YnNjcmlwdGlvbi5uZXh0X2JpbGxpbmdfYXQpICogMTAwMDs8YnI+ICAgIH08YnI+ICA8YnI+ICAgIGNidG90YWxkdWVzID0gZ2V0TnVtYmVyKHN1YnNjcmlwdGlvbi50b3RhbF9kdWVzKTs8YnI+ICAgIGlmKHN1YnNjcmlwdGlvbi5kdWVfc2luY2UgIT09IHVuZGVmaW5lZCkgezxicj4gICAgICBjYmR1ZXNpbmNlID0gZ2V0TnVtYmVyKHN1YnNjcmlwdGlvbi5kdWVfc2luY2UpICogMTAwMDs8YnI+ICAgIH08YnI+ICAgIDxicj4gICAgY2JzdWJzY3JpcHRpb25tcnIgPSBnZXROdW1iZXIoc3Vic2NyaXB0aW9uLm1ycik7PGJyPn08YnI+PGJyPjxicj5sZXQgbkxpZmVjeWNsZXN0YWdlOzxicj48YnI+Ly9pZiAoaERhdGEubGlmZWN5Y2xlc3RhZ2UgPT09IHVuZGVmaW5lZCkgezxicj4gICBpZiAoY2JzdWJzY3JpcHRpb3N0YXR1cyA9PT0gJ2NhbmNlbGxlZCcpIHs8YnI+ICAgICAgICBpZiAoc3luY1J1bGVzQ29udGFjdHMuTGlmZWN5Y2xlU3RhZ2UuQ2FuY2VsZWRTdWJzY3JpcHRpb24gIT09IHVuZGVmaW5lZCAmJiBzeW5jUnVsZXNDb250YWN0cy5MaWZlY3ljbGVTdGFnZS5DYW5jZWxlZFN1YnNjcmlwdGlvbiAhPT0gJ3NlbGVjdCcpIHs8YnI+ICAgICAgICAgICAgbkxpZmVjeWNsZXN0YWdlID0gc3luY1J1bGVzQ29udGFjdHMuTGlmZWN5Y2xlU3RhZ2UuQ2FuY2VsZWRTdWJzY3JpcHRpb247PGJyPiAgICAgICAgfTxicj48YnI+ICAgIH0gZWxzZSBpZiAoY2JzdWJzY3JpcHRpb3N0YXR1cyA9PT0gJ2FjdGl2ZScpIHs8YnI+ICAgICAgICBpZiAoc3luY1J1bGVzQ29udGFjdHMuTGlmZWN5Y2xlU3RhZ2UuQWN0aXZlU3Vic2NyaXB0aW9uICE9PSB1bmRlZmluZWQgJiYgc3luY1J1bGVzQ29udGFjdHMuTGlmZWN5Y2xlU3RhZ2UuQWN0aXZlU3Vic2NyaXB0aW9uICE9PSAnc2VsZWN0Jykgezxicj4gICAgICAgICAgICBuTGlmZWN5Y2xlc3RhZ2UgPSBzeW5jUnVsZXNDb250YWN0cy5MaWZlY3ljbGVTdGFnZS5BY3RpdmVTdWJzY3JpcHRpb247PGJyPiAgICAgICAgfTxicj48YnI+ICAgIH0gZWxzZSBpZiAoY2JzdWJzY3JpcHRpb3N0YXR1cyA9PT0gJ2luX3RyaWFsJykgezxicj4gICAgICAgIGlmIChzeW5jUnVsZXNDb250YWN0cy5MaWZlY3ljbGVTdGFnZS5UcmlhbFN1YnNjcmlwdGlvbiAhPT0gdW5kZWZpbmVkICYmIHN5bmNSdWxlc0NvbnRhY3RzLkxpZmVjeWNsZVN0YWdlLlRyaWFsU3Vic2NyaXB0aW9uICE9PSAnc2VsZWN0Jykgezxicj4gICAgICAgICAgICBuTGlmZWN5Y2xlc3RhZ2UgPSBzeW5jUnVsZXNDb250YWN0cy5MaWZlY3ljbGVTdGFnZS5UcmlhbFN1YnNjcmlwdGlvbjs8YnI+ICAgICAgICB9PGJyPiAgICB9IGVsc2UgaWYgKGNic3Vic2NyaXB0aW9zdGF0dXMgPT09IHVuZGVmaW5lZCkgezxicj4gICAgICAgIGlmIChzeW5jUnVsZXNDb250YWN0cy5MaWZlY3ljbGVTdGFnZS5Ob1N1YnNjcmlwdGlvbiAhPT0gdW5kZWZpbmVkICYmIHN5bmNSdWxlc0NvbnRhY3RzLkxpZmVjeWNsZVN0YWdlLk5vU3Vic2NyaXB0aW9uICE9PSAnc2VsZWN0Jykgezxicj4gICAgICAgICAgICBuTGlmZWN5Y2xlc3RhZ2UgPSBzeW5jUnVsZXNDb250YWN0cy5MaWZlY3ljbGVTdGFnZS5Ob1N1YnNjcmlwdGlvbjs8YnI+ICAgICAgICB9PGJyPiAgICB9PGJyPi8vfSBlbHNlIHs8YnI+Ly8gICAgaWYgKHN0ZXBzLkNCRGF0YS5odWJzcG90X3N1Yl9zdGF0dXMgIT09ICdhY3RpdmUnICYmIGNic3Vic2NyaXB0aW9zdGF0dXMgPT09ICdhY3RpdmUnICYmIHN5bmNSdWxlc0NvbnRhY3RzLkxpZmVjeWNsZVN0YWdlLkFjdGl2ZVN1YnNjcmlwdGlvbiAhPT0gdW5kZWZpbmVkKSB7PGJyPiAvLyAgICAgICBuTGlmZWN5Y2xlc3RhZ2UgPSBzeW5jUnVsZXNDb250YWN0cy5MaWZlY3ljbGVTdGFnZS5BY3RpdmVTdWJzY3JpcHRpb247PGJyPiAvLyAgIH0gZWxzZSB7PGJyPiAgIC8vICAgICBuTGlmZWN5Y2xlc3RhZ2UgPSB1bmRlZmluZWQ7PGJyPiAgLy8gIH08YnI+PGJyPi8vfTxicj48YnI+c3RlcHMuSHViRGF0YS5jTWV0cmljcyA9IHs8YnI+ICAgIHN1YnNjcmlwdGlvbm1ycjogY2JzdWJzY3JpcHRpb25tcnIsPGJyPiAgICBzdWJzY3JpcHRpb25tcnJPbGQ6IGhEYXRhLnN1YnNjcmlwdGlvbm1yciw8YnI+ICAgIHRvdGFsZHVlczogY2J0b3RhbGR1ZXMsPGJyPiAgICB0b3RhbGR1ZXNPbGQ6IGhEYXRhLnRvdGFsZHVlcyw8YnI+ICAgIGR1ZWludm9pY2VzY291bnQ6IGNiZHVlaW52b2ljZXNjb3VudCw8YnI+ICAgIGR1ZWludm9pY2VzY291bnRPbGQ6IGhEYXRhLmR1ZWludm9pY2VzY291bnQsPGJyPiAgICBzdWJzY3JpcHRpb25pZDogY2JzdWJzY3JpcHRpb25pZCw8YnI+ICAgIHN1YnNjcmlwdGlvbmlkT2xkOiBoRGF0YS5zdWJzY3JpcHRpb25pZCw8YnI+ICAgIG9wOiAndXBkYXRlJzxicj59Ozxicj48YnI+c2V0SERhdGEoaERhdGEsICdsaWZlY3ljbGVzdGFnZScsIG5MaWZlY3ljbGVzdGFnZSwgdHJ1ZSk7PGJyPnNldEhEYXRhKGhEYXRhLCAnc3Vic2NyaXB0aW9uaWQnLCBjYnN1YnNjcmlwdGlvbmlkLCB0cnVlKTs8YnI+c2V0SERhdGEoaERhdGEsICdzdWJzY3JpcHRpb3N0YXR1cycsIGNic3Vic2NyaXB0aW9zdGF0dXMsIHRydWUpOzxicj5zZXRIRGF0YShoRGF0YSwgJ3Byb2R1Y3QnLCBjYnByb2R1Y3QsIHRydWUpOzxicj5zZXRIRGF0YShoRGF0YSwgJ3BsYW5xdWFudGl0eScsIGNicGxhbnF1YW50aXR5LCB0cnVlKTs8YnI+c2V0SERhdGEoaERhdGEsICdyZW1haW5pbmdiaWxsaW5nY3ljbGVzJywgY2JyZW1haW5pbmdiaWxsaW5nY3ljbGVzLCB0cnVlKTs8YnI+c2V0SERhdGEoaERhdGEsICdwb251bWJlcicsIGNicG9udW1iZXIsIHRydWUpOzxicj5zZXRIRGF0YShoRGF0YSwgJ25leHRiaWxsaW5nYXQnLCBjYm5leHRiaWxsaW5nYXQsIHRydWUpOzxicj5zZXRIRGF0YShoRGF0YSwgJ2R1ZXNpbmNlJywgY2JkdWVzaW5jZSwgdHJ1ZSk7PGJyPnNldEhEYXRhKGhEYXRhLCAnZHVlaW52b2ljZXNjb3VudCcsIGNiZHVlaW52b2ljZXNjb3VudCwgdHJ1ZSk7PGJyPnNldEhEYXRhKGhEYXRhLCAndG90YWxkdWVzJywgY2J0b3RhbGR1ZXMsIHRydWUpOzxicj5zZXRIRGF0YShoRGF0YSwgJ3NldHVwZmVlJywgY2JzZXR1cGZlZSwgdHJ1ZSk7PGJyPnNldEhEYXRhKGhEYXRhLCAnc3Vic2NyaXB0aW9ubXJyJywgY2JzdWJzY3JpcHRpb25tcnIsIHRydWUpOzxicj5zZXRIRGF0YShoRGF0YSwgJ2N1c3RvbWVybXJyJywgZ2V0TnVtYmVyKHN0ZXBzLkh1YkRhdGEuY21ycikqMTAwLCB0cnVlKTs8YnI+PGJyPjxicj48YnI+bGV0IGNibGFzdG9yZGVyZGF0ZTs8YnI+bGV0IGNibGFzdG9yZGVyYmFzZWNvbXBvbmVudHNrdTs8YnI+bGV0IGNibGFzdG9yZGVyc3RhdHVzOzxicj5sZXQgY2JsYXN0b3JkZXI7PGJyPmxldCBjYm5leHRvcmRlcmRhdGU7PGJyPmxldCBjYm5leHRvcmRlcmJhc2Vjb21wb25lbnRza3U7PGJyPmxldCBjYm5leHRvcmRlcnN0YXR1czs8YnI+bGV0IGNibmV4dG9yZGVyOzxicj48YnI+bGV0IG15T3JkZXI7PGJyPjxicj5pZiAoc3RlcHMuSHViRGF0YS5vcmRlciAhPT0gdW5kZWZpbmVkKSB7PGJyPiAgICBsZXQgb3JkZXJCZWZvcmUgPSBzdGVwcy5IdWJEYXRhLm9yZGVyLmJlZm9yZTs8YnI+ICAgIG15T3JkZXIgPSBvcmRlckJlZm9yZTs8YnI+ICAgIGlmKG9yZGVyQmVmb3JlICE9PSB1bmRlZmluZWQpIHs8YnI+ICAgICAgICBpZiAob3JkZXJCZWZvcmUub3JkZXJfZGF0ZSAhPT0gdW5kZWZpbmVkKSB7PGJyPiAgICAgICAgICAgIGNibGFzdG9yZGVyZGF0ZSA9IGdldE51bWJlcihvcmRlckJlZm9yZS5vcmRlcl9kYXRlKSAqIDEwMDA7PGJyPiAgICAgICAgfTxicj4gICAgICAgIGNibGFzdG9yZGVyYmFzZWNvbXBvbmVudHNrdSA9IG9yZGVyQmVmb3JlLnNrdTs8YnI+ICAgICAgICBjYmxhc3RvcmRlcnN0YXR1cyA9IG9yZGVyQmVmb3JlLnN0YXR1czs8YnI+ICAgICAgICBjYmxhc3RvcmRlciA9IGdldE51bWJlcihvcmRlckJlZm9yZS50b3RhbCk7PGJyPiAgICB9PGJyPiAgIDxicj48YnI+ICAgIGxldCBvcmRlckFmdGVyID0gc3RlcHMuSHViRGF0YS5vcmRlci5hZnRlcjs8YnI+ICAgIGlmKG9yZGVyQWZ0ZXIgIT09IHVuZGVmaW5lZCkgezxicj4gICAgICAgIGlmIChvcmRlckFmdGVyLm9yZGVyX2RhdGUgIT09IHVuZGVmaW5lZCkgezxicj4gICAgICAgICAgICBjYm5leHRvcmRlcmRhdGUgPSBnZXROdW1iZXIob3JkZXJBZnRlci5vcmRlcl9kYXRlKSAqIDEwMDA7PGJyPiAgICAgICAgfTxicj4gICAgICAgIGNibmV4dG9yZGVyYmFzZWNvbXBvbmVudHNrdSA9IG9yZGVyQWZ0ZXIuc2t1Ozxicj4gICAgICAgIGNibmV4dG9yZGVyc3RhdHVzID0gb3JkZXJBZnRlci5zdGF0dXM7PGJyPiAgICAgICAgY2JuZXh0b3JkZXIgPSBnZXROdW1iZXIob3JkZXJBZnRlci50b3RhbCk7PGJyPiAgICB9PGJyPiAgIDxicj59PGJyPjxicj5zZXRIRGF0YShoRGF0YSwgJ2xhc3RvcmRlcmRhdGUnLCBjYmxhc3RvcmRlcmRhdGUsIHRydWUpOzxicj5zZXRIRGF0YShoRGF0YSwgJ2xhc3RvcmRlcmJhc2Vjb21wb25lbnRza3UnLCBjYmxhc3RvcmRlcmJhc2Vjb21wb25lbnRza3UsIHRydWUpOzxicj5zZXRIRGF0YShoRGF0YSwgJ2xhc3RvcmRlcnN0YXR1cycsIGNibGFzdG9yZGVyc3RhdHVzLCB0cnVlKTs8YnI+c2V0SERhdGEoaERhdGEsICdsYXN0b3JkZXInLCBjYmxhc3RvcmRlciwgdHJ1ZSk7PGJyPnNldEhEYXRhKGhEYXRhLCAnbmV4dG9yZGVyZGF0ZScsIGNibmV4dG9yZGVyZGF0ZSwgdHJ1ZSk7PGJyPnNldEhEYXRhKGhEYXRhLCAnbmV4dG9yZGVyYmFzZWNvbXBvbmVudHNrdScsIGNibmV4dG9yZGVyYmFzZWNvbXBvbmVudHNrdSwgdHJ1ZSk7PGJyPnNldEhEYXRhKGhEYXRhLCAnbmV4dG9yZGVyc3RhdHVzJywgY2JuZXh0b3JkZXJzdGF0dXMsIHRydWUpOzxicj5zZXRIRGF0YShoRGF0YSwgJ25leHRvcmRlcicsIGNibmV4dG9yZGVyLCB0cnVlKTs8YnI+PGJyPjxicj5sZXQgY2JpbnZvaWNlYW1vdW50cGFpZDs8YnI+bGV0IGNiaW52b2ljZWVzdGltYXRlOzxicj5pZiAoc3RlcHMuSHViRGF0YS5pbnZvaWNlICE9PSB1bmRlZmluZWQpIHs8YnI+ICAgIGNiaW52b2ljZWFtb3VudHBhaWQgPSBnZXROdW1iZXIoc3RlcHMuSHViRGF0YS5pbnZvaWNlLnRvdGFsKTs8YnI+ICAgIGNiaW52b2ljZWVzdGltYXRlID0gZ2V0TnVtYmVyKHN0ZXBzLkh1YkRhdGEuaW52b2ljZS5lc3RpbWF0ZSk7PGJyPn08YnI+PGJyPnN0ZXBzLkh1YkRhdGEuY01ldHJpY3MuaW52b2ljZWFtb3VudHBhaWQgPSBjYmludm9pY2VhbW91bnRwYWlkOzxicj5zdGVwcy5IdWJEYXRhLmNNZXRyaWNzLmludm9pY2VhbW91bnRwYWlkT2xkID0gaERhdGEuaW52b2ljZWFtb3VudHBhaWQ7PGJyPjxicj5zZXRIRGF0YShoRGF0YSwgJ2ludm9pY2VhbW91bnRwYWlkJywgY2JpbnZvaWNlYW1vdW50cGFpZCwgdHJ1ZSk7PGJyPnNldEhEYXRhKGhEYXRhLCAnbmV4dGJpbGxpbmdhbW91bnQnLCBjYmludm9pY2Vlc3RpbWF0ZSwgdHJ1ZSk7PGJyPjxicj4vL2N1c3RvbTxicj5sZXQgc3luY1J1bGVzRmllbGRzID0gc3RlcHMuR2V0VHBJbnRlZ0NvbmYuZGF0YS5jb25maWdfanNvbi5jbG91ZEVsZW1lbnRzLnN5bmNSdWxlc0ZpZWxkczs8YnI+aWYgKHN5bmNSdWxlc0ZpZWxkcyA9PT0gdW5kZWZpbmVkKSB7PGJyPiAgICBzeW5jUnVsZXNGaWVsZHMgPSB7PGJyPiAgICAgICAgJ2NvbXBhbnknOiB7PGJyPjxicj4gICAgICAgIH0sPGJyPiAgICAgICAgJ2NvbnRhY3QnOiB7PGJyPjxicj4gICAgICAgIH0sPGJyPiAgICAgICAgJ2RlYWwnOiB7PGJyPiAgICAgICAgfSw8YnI+ICAgICAgICAnc3luYyc6ICdmYWxzZSc8YnI+ICAgIH07PGJyPjxicj59IGVsc2Ugezxicj4gICAgaWYgKHN5bmNSdWxlc0ZpZWxkcy5jb21wYW55ID09PSB1bmRlZmluZWQgfHwgc3luY1J1bGVzRmllbGRzLmNvbXBhbnkgPT09ICcnKSB7PGJyPiAgICAgICAgc3luY1J1bGVzRmllbGRzLmNvbXBhbnkgPSB7fTs8YnI+ICAgIH08YnI+ICAgIGlmIChzeW5jUnVsZXNGaWVsZHMuY29udGFjdCA9PT0gdW5kZWZpbmVkIHx8IHN5bmNSdWxlc0ZpZWxkcy5jb250YWN0ID09PSAnJykgezxicj4gICAgICAgIHN5bmNSdWxlc0ZpZWxkcy5jb250YWN0ID0ge307PGJyPiAgICB9PGJyPiAgICBpZiAoc3luY1J1bGVzRmllbGRzLmRlYWwgPT09IHVuZGVmaW5lZCB8fCBzeW5jUnVsZXNGaWVsZHMuZGVhbCA9PT0gJycpIHs8YnI+ICAgICAgICBzeW5jUnVsZXNGaWVsZHMuZGVhbCA9IHt9Ozxicj4gICAgfTxicj59PGJyPnN5bmNSdWxlc0ZpZWxkcyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoc3luY1J1bGVzRmllbGRzKSk7PGJyPjxicj5sZXQgY29tcGFueUtleXMgPSBPYmplY3Qua2V5cyhzeW5jUnVsZXNGaWVsZHMuY29tcGFueSk7PGJyPjxicj5mb3IgKHZhciBpID0gMDsgaSA8c3Bhbj48PC9zcGFuPiBjb21wYW55S2V5cy5sZW5ndGg7IGkrKykgezxicj4gICAgc3luY1J1bGVzRmllbGRzLmNvbnRhY3RbY29tcGFueUtleXNbaV1dID0gc3luY1J1bGVzRmllbGRzLmNvbXBhbnlbY29tcGFueUtleXNbaV1dOzxicj59PGJyPjxicj48YnI+bGV0IGN1c3RvbWVmaWVsZHMgPSBzdGVwcy5TeW5jTG9nLmN1c3RvbWVmaWVsZHM7PGJyPmZvciAodmFyIGkgPSAwOyBpIDxzcGFuPjw8L3NwYW4+IGN1c3RvbWVmaWVsZHMubGVuZ3RoOyBpKyspIHs8YnI+ICAgIGxldCBmbGQgPSBjdXN0b21lZmllbGRzW2ldOzxicj48YnI+ICAgIGZvciAodmFyIGogPSAwOyBqIDxzcGFuPjw8L3NwYW4+IGZsZC5maWVsZHMubGVuZ3RoOyBqKyspIHs8YnI+ICAgICAgICB2YXIgZXMgPSBmbGQuZmllbGRzW2pdOzxicj4gICAgICAgIHZhciBkZXNjID0gZmxkLmxhYmVsICsgJyAnICsgZXNbMF0ucmVwbGFjZSgvXy9nLCAnICcpOzxicj4gICAgICAgIHZhciBpZCA9IGZsZC5rZXkgKyAnXycgKyBlc1swXTs8YnI+ICAgICAgICBpZiAoc3luY1J1bGVzRmllbGRzLmNvbnRhY3RbaWRdICE9PSB1bmRlZmluZWQpIHs8YnI+ICAgICAgICAgICAgc3luY1J1bGVzRmllbGRzLmNvbnRhY3RbaWRdID0gZXM7PGJyPiAgICAgICAgfTxicj4gICAgfTxicj59PGJyPmxldCBjdXN0b21LZXlzID0gT2JqZWN0LmtleXMoc3luY1J1bGVzRmllbGRzLmNvbnRhY3QpOzxicj5mb3IgKHZhciBpID0gMDsgaSA8c3Bhbj48PC9zcGFuPiBjdXN0b21LZXlzLmxlbmd0aDsgaSsrKSB7PGJyPiAgICB2YXIgY0tleSA9IGN1c3RvbUtleXNbaV07PGJyPiAgICB2YXIgY1ZhbCA9IHN5bmNSdWxlc0ZpZWxkcy5jb250YWN0W2NLZXldOzxicj4gICAgbGV0IHN1YlZhbDs8YnI+ICAgIGlmIChjS2V5LnN0YXJ0c1dpdGgoJ3N1YmNzdCcpKSB7PGJyPiAgICAgICAgaWYgKHN1YnNjcmlwdGlvbiAhPT0gdW5kZWZpbmVkKSB7PGJyPiAgICAgICAgICAgIHN1YlZhbCA9IHN1YnNjcmlwdGlvbltjVmFsWzBdXTs8YnI+ICAgICAgICB9PGJyPiAgICB9IGVsc2UgaWYgKGNLZXkuc3RhcnRzV2l0aCgnb3JkZXJjc3QnKSkgezxicj4gICAgICAgIGlmIChteU9yZGVyICE9PSB1bmRlZmluZWQpIHs8YnI+ICAgICAgICAgICAgc3ViVmFsID0gbXlPcmRlcltjVmFsWzBdXTs8YnI+ICAgICAgICB9PGJyPjxicj4gICAgfSBlbHNlIGlmIChjS2V5LnN0YXJ0c1dpdGgoJ2N1c3Rjc3QnKSkgezxicj4gICAgICAgIGlmIChjdXN0b21lciAhPT0gdW5kZWZpbmVkKSB7PGJyPiAgICAgICAgICAgIHN1YlZhbCA9IGN1c3RvbWVyW2NWYWxbMF1dOzxicj4gICAgICAgIH08YnI+ICAgIH08YnI+ICAgIGlmIChjVmFsWzFdID09PSAnbnVtYmVyJykgezxicj4gICAgICAgIHN1YlZhbCA9IGdldE51bWJlcihzdWJWYWwpOzxicj4gICAgICAgPGJyPiAgICAgICAgaWYgKGNWYWwubGVuZ3RoID09IDQpIHs8YnI+ICAgICAgICAgICAgaERhdGEgPSB1cGRhdGVEYXRhKGhEYXRhLCBoQ29udGFjdCwgY0tleSx0cnVlLHRydWUpOzxicj4gICAgICAgICAgICBzdGVwcy5IdWJEYXRhLmNNZXRyaWNzW2NLZXkrJ09sZCddID0gaERhdGFbY0tleV07PGJyPiAgICAgICAgICAgICBzZXRIRGF0YShoRGF0YSwgY0tleSwgc3ViVmFsKTs8YnI+ICAgICAgICAgICAgIDxicj4gICAgICAgICAgICBwcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgY0tleSwgdHJ1ZSk7PGJyPiAgICAgICAgfSBlbHNlIHs8YnI+ICAgICAgICAgIGhEYXRhID0gdXBkYXRlRGF0YShoRGF0YSwgaENvbnRhY3QsIGNLZXksdHJ1ZSk7PGJyPiAgICAgICAgICBzdGVwcy5IdWJEYXRhLmNNZXRyaWNzW2NLZXldID0gc3ViVmFsOzxicj4gICAgICAgICAgIHNldEhEYXRhKGhEYXRhLCBjS2V5LCBzdWJWYWwpOzxicj4gICAgICAgICAgICBwcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgY0tleSk7PGJyPiAgICAgICAgfTxicj4gICAgICAgICBzdGVwcy5IdWJEYXRhLmNNZXRyaWNzW2NLZXkrJ09sZCddID0gaERhdGFbY0tleV07PGJyPiAgICB9IGVsc2UgaWYgKGNWYWxbMV0gPT09ICdkYXRldGltZScpIHs8YnI+ICAgICAgaWYoc3ViVmFsICE9PSB1bmRlZmluZWQpIHs8YnI+ICAgICAgICAgc3ViVmFsID0gZ2V0TnVtYmVyKHN1YlZhbCkgKiAxMDAwOzxicj4gICAgICAgIHNldEhEYXRhKGhEYXRhLCBjS2V5LCBzdWJWYWwpOzxicj4gICAgICAgIHByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCBjS2V5KTs8YnI+ICAgICAgfTxicj4gICAgICAgPGJyPjxicj4gICAgfSBlbHNlIHs8YnI+ICAgICAgICBpZiAoc3ViVmFsID09PSB1bmRlZmluZWQpIHs8YnI+ICAgICAgICAgICAgc3ViVmFsID0gJyc7PGJyPjxicj4gICAgICAgIH08YnI+ICAgICAgICBzZXRIRGF0YShoRGF0YSwgY0tleSwgc3ViVmFsKTs8YnI+ICAgICAgICBwcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgY0tleSk7PGJyPiAgICB9PGJyPjxicj48YnI+fTxicj4vL2N1c3RvbTxicj5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ2ZpcnN0bmFtZScpOzxicj4vL3Byb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAnZW1haWwnKTs8YnI+cHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdsYXN0bmFtZScpOzxicj5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ3Bob25lJyk7PGJyPnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAnY29tcGFueScpOzxicj5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ2JpbGxpbmdhZGRyZXNzJyk7PGJyPnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAnYmlsbGluZ3N0YXRlJyk7PGJyPnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAnYmlsbGluZ2NpdHknKTs8YnI+cHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdiaWxsaW5nY291bnRyeScpOzxicj5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ2JpbGxpbmd6aXAnKTs8YnI+cHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdhdXRvY29sbGVjdGlvbicpOzxicj5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ3ByZWZlcnJlZGN1cnJlbmN5Y29kZScpOzxicj5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ3BheW1lbnRtZXRob2RzdGF0dXMnKTs8YnI+cHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdwYXltZW50bWV0aG9kdHlwZScpOzxicj5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ25ldHRlcm1kYXlzJyk7PGJyPnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAndGF4ZXhlbXB0c3RhdHVzJyk7PGJyPnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAnY2hhcmdlYmVlY3VzdG9tZXJpZCcpOzxicj5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ3N1YnNjcmlwdGlvbmlkJyk7PGJyPnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAnc3Vic2NyaXB0aW9zdGF0dXMnKTs8YnI+cHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdwcm9kdWN0Jyk7PGJyPnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAncGxhbnF1YW50aXR5Jyk7PGJyPnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAnc2V0dXBmZWUnLCB0cnVlKTs8YnI+cHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdkdWVpbnZvaWNlc2NvdW50Jyk7PGJyPnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAncmVtYWluaW5nYmlsbGluZ2N5Y2xlcycpOzxicj5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ3BvbnVtYmVyJyk7PGJyPnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAnbmV4dGJpbGxpbmdhdCcpOzxicj5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ3RvdGFsZHVlcycsIHRydWUpOzxicj5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ2R1ZXNpbmNlJyk7PGJyPnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAnc3Vic2NyaXB0aW9ubXJyJywgdHJ1ZSk7PGJyPnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAnY3VzdG9tZXJtcnInLCB0cnVlKTs8YnI+cHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdsaWZlY3ljbGVzdGFnZScpOzxicj5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ2xhc3RvcmRlcmRhdGUnKTs8YnI+cHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdsYXN0b3JkZXJiYXNlY29tcG9uZW50c2t1Jyk7PGJyPnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAnbGFzdG9yZGVyc3RhdHVzJyk7PGJyPnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAnbGFzdG9yZGVyJywgdHJ1ZSk7PGJyPnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAnbmV4dG9yZGVyZGF0ZScpOzxicj5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ25leHRvcmRlcmJhc2Vjb21wb25lbnRza3UnKTs8YnI+cHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICduZXh0b3JkZXJzdGF0dXMnKTs8YnI+cHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICduZXh0b3JkZXInLCB0cnVlKTs8YnI+cHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdpbnZvaWNlYW1vdW50cGFpZCcsIHRydWUpOzxicj5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ25leHRiaWxsaW5nYW1vdW50JywgdHJ1ZSk7PGJyPjxicj5zdGVwcy5IdWJTcG90SW5wdXQuaW5wdXRzLnByb3BlcnRpZXMgPSBwcm9wZXJ0aWVzOzxicj48YnI+bGV0IGdmZyA9IHs8YnI+ICAgIHByb3BlcnRpZXM6IHByb3BlcnRpZXMsPGJyPiAgICBtZXRyaWNzOiBzdGVwcy5IdWJEYXRhLmNNZXRyaWNzLDxicj4gICAgaERhdGE6IGhEYXRhPGJyPn08YnI+PGJyPmRvbmUoZ2ZnKTs8L3ByZT48YnI+PGI+UkFXIEpTT046PC9iPjxicj48YnI+PHByZT57PGJyPiAgJ29uU3VjY2Vzcyc6IFs8YnI+ICAgICdVcGRhdGVIdWJzcG90Q29udGFjdFBhcmFtJzxicj4gIF0sPGJyPiAgJ29uRmFpbHVyZSc6IFtdLDxicj4gICduYW1lJzogJ1ByZXBhcmVVcGRhdGVJbnB1dCcsPGJyPiAgJ3R5cGUnOiAnc2NyaXB0Jyw8YnI+ICAncHJvcGVydGllcyc6IHs8YnI+ICAgICdib2R5JzogJ2xldCBjdXN0b21lciA9IHN0ZXBzLkh1YkRhdGEuY3VzdG9tZXI7XG5sZXQgc3Vic2NyaXB0aW9uID0gc3RlcHMuSHViRGF0YS5zdWJzY3JpcHRpb247XG5sZXQgc3luY1J1bGVzQ29udGFjdHMgPSBzdGVwcy5DdXN0b21lcnNQYXJhbS5zeW5jUnVsZXNDb250YWN0cztcbmxldCBjb250YWN0ID0gc3RlcHMuQ0JEYXRhLmh1YnNwb3QuY29udGFjdDtcbnN0ZXBzLkh1YlNwb3RJbnB1dC51cmwgPSBcJ2h0dHBzOi8vYXBpLmh1YmFwaS5jb20vY29udGFjdHMvdjEvY29udGFjdC92aWQvXCcgKyBjb250YWN0LnZpZCArIFwnL3Byb2ZpbGVcJztcblxubGV0IGhDb250YWN0ID0gY29udGFjdC5wcm9wZXJ0aWVzO1xubGV0IG92ZXJyaWRlID0gc3luY1J1bGVzQ29udGFjdHMuSHViU3BvdENvbnRhY3RNYXRjaCA9PT0gXCdPdmVycmlkZV90aGVfZmllbGRzXCc7XG5sZXQgcHJlZml4ID0gXCdjYl9cJztcbi8vbGV0IHByZWZpeCA9IFwnXCc7XG5sZXQgcHJvcGVydGllcyA9IFtdO1xubGV0IGNia2V5cyA9IFsnYmlsbGluZ2FkZHJlc3MnLCdiaWxsaW5nc3RhdGUnLCdiaWxsaW5nY2l0eScsJ2JpbGxpbmdjb3VudHJ5JywnYmlsbGluZ3ppcCcsJ2F1dG9jb2xsZWN0aW9uJywncHJlZmVycmVkY3VycmVuY3ljb2RlJywncGF5bWVudG1ldGhvZHN0YXR1cycsJ3BheW1lbnRtZXRob2R0eXBlJywnbmV0dGVybWRheXMnLCd0YXhleGVtcHRzdGF0dXMnLCdzdWJzY3JpcHRpb25pZCcsJ3N1YnNjcmlwdGlvc3RhdHVzJywncHJvZHVjdCcsJ3BsYW5xdWFudGl0eScsJ3NldHVwZmVlJywnZHVlaW52b2ljZXNjb3VudCcsJ3JlbWFpbmluZ2JpbGxpbmdjeWNsZXMnLCdwb251bWJlcicsJ25leHRiaWxsaW5nYXQnLCd0b3RhbGR1ZXMnLCdkdWVzaW5jZScsJ3N1YnNjcmlwdGlvbm1ycicsJ2xhc3RvcmRlcmRhdGUnLCdsYXN0b3JkZXJiYXNlY29tcG9uZW50c2t1JywnbGFzdG9yZGVyc3RhdHVzJywnbGFzdG9yZGVyJywnbmV4dG9yZGVyZGF0ZScsJ25leHRvcmRlcmJhc2Vjb21wb25lbnRza3UnLCduZXh0b3JkZXJzdGF0dXMnLCduZXh0b3JkZXInLCdpbnZvaWNlYW1vdW50cGFpZCcsJ25leHRiaWxsaW5nYW1vdW50J107XG5cbmxldCBjYk1hcCA9IHtcbiAgXCdmaXJzdG5hbWVcJzp0cnVlLFxuICBcJ2xhc3RuYW1lXCcgOnRydWUsXG4gIFwnZW1haWxcJyA6dHJ1ZSxcbiAgXCdjb21wYW55XCc6dHJ1ZSxcbiAgXCdwaG9uZVwnOnRydWUsXG4gICBcJ2NoYXJnZWJlZWN1c3RvbWVyaWRcJzp0cnVlLFxuICAgXCdsaWZlY3ljbGVzdGFnZVwnOnRydWUsXG59O1xuaWYoc3RlcHMuR2V0VHBJbnRlZ0NvbmYuZGF0YS5jb25maWdfanNvbi5ub25lZWRwcmVmaXghPT11bmRlZmluZWQgJiYgc3RlcHMuR2V0VHBJbnRlZ0NvbmYuZGF0YS5jb25maWdfanNvbi5ub25lZWRwcmVmaXg9PT10cnVlKVxue1xuICAgcHJlZml4PVwnXCc7XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsIGtleSwgaXNDdXJyZW5jeSkge1xuICAgIGxldCB2YWwgPSBoRGF0YVtrZXldO1xuICAgIGlmICh2YWwgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAoaXNDdXJyZW5jeSkge1xuICAgICAgICAgICAgdmFsID0gcGFyc2VGbG9hdChwYXJzZUludCh2YWwsIDEwKSAvIDEwMCkudG9GaXhlZCgyKTtcbiAgICAgICAgfVxuICAgICAgICBpZihjYk1hcFtrZXldID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAga2V5ID0gcHJlZml4K2tleTtcbiAgICAgICAgfVxuICAgICAgIFxuICAgICAgICBwcm9wZXJ0aWVzLnB1c2goe1xuICAgICAgICAgICAgXCdwcm9wZXJ0eVwnOiBrZXksXG4gICAgICAgICAgICBcJ3ZhbHVlXCc6IHZhbFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHByb3BlcnRpZXM7XG59XG5mdW5jdGlvbiB1cGRhdGVEYXRhKGQsIGhDb250YWN0LCBrZXksIGlzTnVtLCBpc0N1cnIpIHtcbiAgICBpZiAoaENvbnRhY3Rba2V5XSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGRba2V5XSA9IGhDb250YWN0W2tleV0udmFsdWU7XG4gICAgICAgIGlmIChpc051bSkge1xuICAgICAgICAgICAgbGV0IGRmID0gTnVtYmVyKGRba2V5XSk7XG4gICAgICAgICAgICBpZiAoaXNOYU4oZGYpKSB7XG4gICAgICAgICAgICAgICAgZGYgPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzQ3Vycikge1xuICAgICAgICAgICAgICAgIGRba2V5XSA9IGRmICogMTAwO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBkW2tleV0gPSBkZjtcbiAgICAgICAgICAgIH1cblxuXG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGQ7XG59XG5mdW5jdGlvbiBzZXRIRGF0YShoRGF0YSwga2V5LCB2YWx1ZSwgZmxhZykge1xuICAgIGlmIChmbGFnKSB7XG4gICAgICAgIGhEYXRhW2tleV0gPSB2YWx1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoaERhdGFba2V5XSA9PT0gdW5kZWZpbmVkIHx8IGhEYXRhW2tleV0gPT09IDApIHtcbiAgICAgICAgICAgIGhEYXRhW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGhEYXRhW2tleV0gPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBnZXROdW1iZXIodmFsKSB7XG4gICAgaWYgKHZhbCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgICBsZXQgbnVtID0gTnVtYmVyKHZhbCk7XG4gICAgaWYgKGlzTmFOKG51bSkpIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICAgIHJldHVybiBudW07XG59XG5cbmZ1bmN0aW9uIGZvcm1hdEN1cnJlbmN5KGhEYXRhLCBrZXkpIHtcblxuICAgIHJldHVybiBoRGF0YTtcbn1cbmxldCBoRGF0YSA9IHtcblxufTtcbmhEYXRhID0gdXBkYXRlRGF0YShoRGF0YSwgaENvbnRhY3QsICdmaXJzdG5hbWUnKTtcbi8vaERhdGEgPSB1cGRhdGVEYXRhKGhEYXRhLCBoQ29udGFjdCwgJ2VtYWlsJyk7XG5oRGF0YSA9IHVwZGF0ZURhdGEoaERhdGEsIGhDb250YWN0LCAnbGFzdG5hbWUnKTtcbmhEYXRhID0gdXBkYXRlRGF0YShoRGF0YSwgaENvbnRhY3QsICdwaG9uZScpO1xuaERhdGEgPSB1cGRhdGVEYXRhKGhEYXRhLCBoQ29udGFjdCwgJ2NvbXBhbnknKTtcbmhEYXRhID0gdXBkYXRlRGF0YShoRGF0YSwgaENvbnRhY3QsICdiaWxsaW5nYWRkcmVzcycpO1xuaERhdGEgPSB1cGRhdGVEYXRhKGhEYXRhLCBoQ29udGFjdCwgJ2JpbGxpbmdzdGF0ZScpO1xuaERhdGEgPSB1cGRhdGVEYXRhKGhEYXRhLCBoQ29udGFjdCwgJ2JpbGxpbmdjaXR5Jyk7XG5oRGF0YSA9IHVwZGF0ZURhdGEoaERhdGEsIGhDb250YWN0LCAnYmlsbGluZ2NvdW50cnknKTtcbmhEYXRhID0gdXBkYXRlRGF0YShoRGF0YSwgaENvbnRhY3QsICdiaWxsaW5nemlwJyk7XG5oRGF0YSA9IHVwZGF0ZURhdGEoaERhdGEsIGhDb250YWN0LCAnYXV0b2NvbGxlY3Rpb24nKTtcbmhEYXRhID0gdXBkYXRlRGF0YShoRGF0YSwgaENvbnRhY3QsICdwcmVmZXJyZWRjdXJyZW5jeWNvZGUnKTtcbmhEYXRhID0gdXBkYXRlRGF0YShoRGF0YSwgaENvbnRhY3QsICdwYXltZW50bWV0aG9kc3RhdHVzJyk7XG5oRGF0YSA9IHVwZGF0ZURhdGEoaERhdGEsIGhDb250YWN0LCAncGF5bWVudG1ldGhvZHR5cGUnKTtcbmhEYXRhID0gdXBkYXRlRGF0YShoRGF0YSwgaENvbnRhY3QsICduZXR0ZXJtZGF5cycpO1xuaERhdGEgPSB1cGRhdGVEYXRhKGhEYXRhLCBoQ29udGFjdCwgJ3RheGV4ZW1wdHN0YXR1cycpO1xuaERhdGEgPSB1cGRhdGVEYXRhKGhEYXRhLCBoQ29udGFjdCwgJ2NoYXJnZWJlZWN1c3RvbWVyaWQnKTtcbmhEYXRhID0gdXBkYXRlRGF0YShoRGF0YSwgaENvbnRhY3QsICdzdWJzY3JpcHRpb25pZCcpO1xuaERhdGEgPSB1cGRhdGVEYXRhKGhEYXRhLCBoQ29udGFjdCwgJ3N1YnNjcmlwdGlvc3RhdHVzJyk7XG5oRGF0YSA9IHVwZGF0ZURhdGEoaERhdGEsIGhDb250YWN0LCAncHJvZHVjdCcpO1xuaERhdGEgPSB1cGRhdGVEYXRhKGhEYXRhLCBoQ29udGFjdCwgJ3BsYW5xdWFudGl0eScpO1xuaERhdGEgPSB1cGRhdGVEYXRhKGhEYXRhLCBoQ29udGFjdCwgJ3NldHVwZmVlJywgdHJ1ZSwgdHJ1ZSk7XG5oRGF0YSA9IHVwZGF0ZURhdGEoaERhdGEsIGhDb250YWN0LCAnZHVlaW52b2ljZXNjb3VudCcsIHRydWUsIGZhbHNlKTtcbmhEYXRhID0gdXBkYXRlRGF0YShoRGF0YSwgaENvbnRhY3QsICdyZW1haW5pbmdiaWxsaW5nY3ljbGVzJyk7XG5oRGF0YSA9IHVwZGF0ZURhdGEoaERhdGEsIGhDb250YWN0LCAncG9udW1iZXInKTtcbmhEYXRhID0gdXBkYXRlRGF0YShoRGF0YSwgaENvbnRhY3QsICduZXh0YmlsbGluZ2F0Jyk7XG5oRGF0YSA9IHVwZGF0ZURhdGEoaERhdGEsIGhDb250YWN0LCAndG90YWxkdWVzJywgdHJ1ZSwgdHJ1ZSk7XG5oRGF0YSA9IHVwZGF0ZURhdGEoaERhdGEsIGhDb250YWN0LCAnZHVlc2luY2UnKTtcbmhEYXRhID0gdXBkYXRlRGF0YShoRGF0YSwgaENvbnRhY3QsICdzdWJzY3JpcHRpb25tcnInLCB0cnVlLCB0cnVlKTtcbmhEYXRhID0gdXBkYXRlRGF0YShoRGF0YSwgaENvbnRhY3QsICdjdXN0b21lcm1ycicsIHRydWUsIHRydWUpO1xuaERhdGEgPSB1cGRhdGVEYXRhKGhEYXRhLCBoQ29udGFjdCwgJ2xpZmVjeWNsZXN0YWdlJyk7XG5oRGF0YSA9IHVwZGF0ZURhdGEoaERhdGEsIGhDb250YWN0LCAnbGFzdG9yZGVyZGF0ZScpO1xuaERhdGEgPSB1cGRhdGVEYXRhKGhEYXRhLCBoQ29udGFjdCwgJ2xhc3RvcmRlcmJhc2Vjb21wb25lbnRza3UnKTtcbmhEYXRhID0gdXBkYXRlRGF0YShoRGF0YSwgaENvbnRhY3QsICdsYXN0b3JkZXJzdGF0dXMnKTtcbmhEYXRhID0gdXBkYXRlRGF0YShoRGF0YSwgaENvbnRhY3QsICdsYXN0b3JkZXInLCB0cnVlLCB0cnVlKTtcbmhEYXRhID0gdXBkYXRlRGF0YShoRGF0YSwgaENvbnRhY3QsICduZXh0b3JkZXJkYXRlJyk7XG5oRGF0YSA9IHVwZGF0ZURhdGEoaERhdGEsIGhDb250YWN0LCAnbmV4dG9yZGVyYmFzZWNvbXBvbmVudHNrdScpO1xuaERhdGEgPSB1cGRhdGVEYXRhKGhEYXRhLCBoQ29udGFjdCwgJ25leHRvcmRlcnN0YXR1cycpO1xuaERhdGEgPSB1cGRhdGVEYXRhKGhEYXRhLCBoQ29udGFjdCwgJ25leHRvcmRlcicsIHRydWUsIHRydWUpO1xuaERhdGEgPSB1cGRhdGVEYXRhKGhEYXRhLCBoQ29udGFjdCwgJ2ludm9pY2VhbW91bnRwYWlkJywgdHJ1ZSwgdHJ1ZSk7XG5oRGF0YSA9IHVwZGF0ZURhdGEoaERhdGEsIGhDb250YWN0LCAnbmV4dGJpbGxpbmdhbW91bnQnLCB0cnVlLCB0cnVlKTtcblxuXG5cbmxldCBkZnYgPSB7XG4gICAgc3Vic2NyaXB0aW9ubXJyT2xkOiBoRGF0YS5zdWJzY3JpcHRpb25tcnIsXG4gICAgdG90YWxkdWVzT2xkOiBoRGF0YS50b3RhbGR1ZXMsXG4gICAgZHVlaW52b2ljZXNjb3VudE9sZDogaERhdGEuZHVlaW52b2ljZXNjb3VudCxcbiAgICBzdWJzY3JpcHRpb25pZE9sZDogaERhdGEuc3Vic2NyaXB0aW9uaWQsXG4gICAgb3A6IFwndXBkYXRlXCdcbn07XG5cbmxldCBjYmJpbGxpbmdhZGRyZXNzO1xubGV0IGNiU3RhdGU7XG5sZXQgY2JDaXR5O1xubGV0IGNiQ291bnRyeTtcbmxldCBjYlppcDtcbmxldCBjYnBheW1lbnRfbWV0aG9kX3N0YXR1cztcbmxldCBjYnBheW1lbnRtZXRob2R0eXBlO1xuXG5pZiAoY3VzdG9tZXIuYmlsbGluZ19hZGRyZXNzICE9PSB1bmRlZmluZWQpIHtcbiAgICBjYmJpbGxpbmdhZGRyZXNzID0gXCdcJztcbiAgICBpZiAoY3VzdG9tZXIuYmlsbGluZ19hZGRyZXNzLmxpbmUxICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY2JiaWxsaW5nYWRkcmVzcyA9IGNiYmlsbGluZ2FkZHJlc3MgKyBjdXN0b21lci5iaWxsaW5nX2FkZHJlc3MubGluZTE7XG4gICAgfVxuICAgIGlmIChjdXN0b21lci5iaWxsaW5nX2FkZHJlc3MubGluZTIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjYmJpbGxpbmdhZGRyZXNzID0gY2JiaWxsaW5nYWRkcmVzcyArIFwnIFwnICsgY3VzdG9tZXIuYmlsbGluZ19hZGRyZXNzLmxpbmUyO1xuICAgIH1cbiAgICBpZiAoY3VzdG9tZXIuYmlsbGluZ19hZGRyZXNzLmxpbmUzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY2JiaWxsaW5nYWRkcmVzcyA9IGNiYmlsbGluZ2FkZHJlc3MgKyBcJyBcJyArIGN1c3RvbWVyLmJpbGxpbmdfYWRkcmVzcy5saW5lMztcbiAgICB9XG4gICAgaWYgKGNiYmlsbGluZ2FkZHJlc3MgPT09IFwnXCcpIHtcbiAgICAgICAgY2JiaWxsaW5nYWRkcmVzcyA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgY2JTdGF0ZSA9IGN1c3RvbWVyLmJpbGxpbmdfYWRkcmVzcy5zdGF0ZTtcbiAgICBjYkNpdHkgPSBjdXN0b21lci5iaWxsaW5nX2FkZHJlc3MuY2l0eTtcbiAgICBjYkNvdW50cnkgPSBjdXN0b21lci5iaWxsaW5nX2FkZHJlc3MuY291bnRyeTtcbiAgICBjYlppcCA9IGN1c3RvbWVyLmJpbGxpbmdfYWRkcmVzcy56aXA7XG59XG5cbmlmIChjdXN0b21lci5wYXltZW50X21ldGhvZCAhPT0gdW5kZWZpbmVkICkge1xuICAgIGNicGF5bWVudF9tZXRob2Rfc3RhdHVzID0gY3VzdG9tZXIucGF5bWVudF9tZXRob2Quc3RhdHVzO1xuICAgIGNicGF5bWVudG1ldGhvZHR5cGUgPSBjdXN0b21lci5wYXltZW50X21ldGhvZC50eXBlO1xufVxuXG5cbnNldEhEYXRhKGhEYXRhLCAnY2hhcmdlYmVlY3VzdG9tZXJpZCcsIGN1c3RvbWVyLmlkLCBvdmVycmlkZSk7XG5zZXRIRGF0YShoRGF0YSwgJ2VtYWlsJywgY3VzdG9tZXIuZW1haWwsIG92ZXJyaWRlKTtcbnNldEhEYXRhKGhEYXRhLCAnZmlyc3RuYW1lJywgY3VzdG9tZXIuZmlyc3RfbmFtZSwgb3ZlcnJpZGUpO1xuc2V0SERhdGEoaERhdGEsICdsYXN0bmFtZScsIGN1c3RvbWVyLmxhc3RfbmFtZSwgb3ZlcnJpZGUpO1xuc2V0SERhdGEoaERhdGEsICdwaG9uZScsIGN1c3RvbWVyLnBob25lLCBvdmVycmlkZSk7XG5zZXRIRGF0YShoRGF0YSwgJ2NvbXBhbnknLCBjdXN0b21lci5jb21wYW55LCBvdmVycmlkZSk7XG5zZXRIRGF0YShoRGF0YSwgJ2JpbGxpbmdhZGRyZXNzJywgY2JiaWxsaW5nYWRkcmVzcywgb3ZlcnJpZGUpO1xuc2V0SERhdGEoaERhdGEsICdiaWxsaW5nc3RhdGUnLCBjYlN0YXRlLCBvdmVycmlkZSk7XG5zZXRIRGF0YShoRGF0YSwgJ2JpbGxpbmdjaXR5JywgY2JDaXR5LCBvdmVycmlkZSk7XG5zZXRIRGF0YShoRGF0YSwgJ2JpbGxpbmdjb3VudHJ5JywgY2JDb3VudHJ5LCBvdmVycmlkZSk7XG5zZXRIRGF0YShoRGF0YSwgJ2JpbGxpbmd6aXAnLCBjYlppcCwgb3ZlcnJpZGUpO1xuc2V0SERhdGEoaERhdGEsICdhdXRvY29sbGVjdGlvbicsIGN1c3RvbWVyLmF1dG9fY29sbGVjdGlvbiwgb3ZlcnJpZGUpO1xuc2V0SERhdGEoaERhdGEsICdwcmVmZXJyZWRjdXJyZW5jeWNvZGUnLCBjdXN0b21lci5wcmVmZXJyZWRfY3VycmVuY3lfY29kZSwgb3ZlcnJpZGUpO1xuc2V0SERhdGEoaERhdGEsICdwYXltZW50bWV0aG9kc3RhdHVzJywgY2JwYXltZW50X21ldGhvZF9zdGF0dXMsIG92ZXJyaWRlKTtcbnNldEhEYXRhKGhEYXRhLCAncGF5bWVudG1ldGhvZHR5cGUnLCBjYnBheW1lbnRtZXRob2R0eXBlLCBvdmVycmlkZSk7XG5zZXRIRGF0YShoRGF0YSwgJ25ldHRlcm1kYXlzJywgY3VzdG9tZXIubmV0X3Rlcm1fZGF5cywgb3ZlcnJpZGUpO1xuc2V0SERhdGEoaERhdGEsICd0YXhleGVtcHRzdGF0dXMnLCBjdXN0b21lci50YXhhYmlsaXR5LCBvdmVycmlkZSk7XG5cblxubGV0IGNic3Vic2NyaXB0aW9uaWQ7XG5sZXQgY2JzdWJzY3JpcHRpb3N0YXR1cztcbmxldCBjYnByb2R1Y3Q7XG5sZXQgY2JwbGFucXVhbnRpdHk7XG5sZXQgY2JzZXR1cGZlZTtcbmxldCBjYmR1ZWludm9pY2VzY291bnQ7XG5sZXQgY2JyZW1haW5pbmdiaWxsaW5nY3ljbGVzO1xubGV0IGNicG9udW1iZXI7XG5sZXQgY2JuZXh0YmlsbGluZ2F0O1xubGV0IGNidG90YWxkdWVzO1xubGV0IGNiZHVlc2luY2U7XG5sZXQgY2JzdWJzY3JpcHRpb25tcnI7XG5pZiAoc3Vic2NyaXB0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICBjYnN1YnNjcmlwdGlvbmlkID0gc3Vic2NyaXB0aW9uLmlkO1xuICAgIGNic3Vic2NyaXB0aW9zdGF0dXMgPSBzdWJzY3JpcHRpb24uc3RhdHVzO1xuICAgIGNicHJvZHVjdCA9IHN1YnNjcmlwdGlvbi5wbGFuX2lkO1xuICAgIGNicGxhbnF1YW50aXR5ID0gc3Vic2NyaXB0aW9uLnBsYW5fcXVhbnRpdHk7XG4gICAgY2JzZXR1cGZlZSA9IGdldE51bWJlcihzdWJzY3JpcHRpb24uc2V0dXBfZmVlKTtcbiAgICBjYmR1ZWludm9pY2VzY291bnQgPSBnZXROdW1iZXIoc3Vic2NyaXB0aW9uLmR1ZV9pbnZvaWNlc19jb3VudCk7XG4gICAgY2JyZW1haW5pbmdiaWxsaW5nY3ljbGVzID0gc3Vic2NyaXB0aW9uLnJlbWFpbmluZ19iaWxsaW5nX2N5Y2xlcztcbiAgICBjYnBvbnVtYmVyID0gc3Vic2NyaXB0aW9uLnBvX251bWJlcjtcbiAgICBpZihzdWJzY3JpcHRpb24ubmV4dF9iaWxsaW5nX2F0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY2JuZXh0YmlsbGluZ2F0ID0gZ2V0TnVtYmVyKHN1YnNjcmlwdGlvbi5uZXh0X2JpbGxpbmdfYXQpICogMTAwMDtcbiAgICB9XG4gIFxuICAgIGNidG90YWxkdWVzID0gZ2V0TnVtYmVyKHN1YnNjcmlwdGlvbi50b3RhbF9kdWVzKTtcbiAgICBpZihzdWJzY3JpcHRpb24uZHVlX3NpbmNlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGNiZHVlc2luY2UgPSBnZXROdW1iZXIoc3Vic2NyaXB0aW9uLmR1ZV9zaW5jZSkgKiAxMDAwO1xuICAgIH1cbiAgICBcbiAgICBjYnN1YnNjcmlwdGlvbm1yciA9IGdldE51bWJlcihzdWJzY3JpcHRpb24ubXJyKTtcbn1cblxuXG5sZXQgbkxpZmVjeWNsZXN0YWdlO1xuXG4vL2lmIChoRGF0YS5saWZlY3ljbGVzdGFnZSA9PT0gdW5kZWZpbmVkKSB7XG4gICBpZiAoY2JzdWJzY3JpcHRpb3N0YXR1cyA9PT0gXCdjYW5jZWxsZWRcJykge1xuICAgICAgICBpZiAoc3luY1J1bGVzQ29udGFjdHMuTGlmZWN5Y2xlU3RhZ2UuQ2FuY2VsZWRTdWJzY3JpcHRpb24gIT09IHVuZGVmaW5lZCAmJiBzeW5jUnVsZXNDb250YWN0cy5MaWZlY3ljbGVTdGFnZS5DYW5jZWxlZFN1YnNjcmlwdGlvbiAhPT0gXCdzZWxlY3RcJykge1xuICAgICAgICAgICAgbkxpZmVjeWNsZXN0YWdlID0gc3luY1J1bGVzQ29udGFjdHMuTGlmZWN5Y2xlU3RhZ2UuQ2FuY2VsZWRTdWJzY3JpcHRpb247XG4gICAgICAgIH1cblxuICAgIH0gZWxzZSBpZiAoY2JzdWJzY3JpcHRpb3N0YXR1cyA9PT0gXCdhY3RpdmVcJykge1xuICAgICAgICBpZiAoc3luY1J1bGVzQ29udGFjdHMuTGlmZWN5Y2xlU3RhZ2UuQWN0aXZlU3Vic2NyaXB0aW9uICE9PSB1bmRlZmluZWQgJiYgc3luY1J1bGVzQ29udGFjdHMuTGlmZWN5Y2xlU3RhZ2UuQWN0aXZlU3Vic2NyaXB0aW9uICE9PSBcJ3NlbGVjdFwnKSB7XG4gICAgICAgICAgICBuTGlmZWN5Y2xlc3RhZ2UgPSBzeW5jUnVsZXNDb250YWN0cy5MaWZlY3ljbGVTdGFnZS5BY3RpdmVTdWJzY3JpcHRpb247XG4gICAgICAgIH1cblxuICAgIH0gZWxzZSBpZiAoY2JzdWJzY3JpcHRpb3N0YXR1cyA9PT0gXCdpbl90cmlhbFwnKSB7XG4gICAgICAgIGlmIChzeW5jUnVsZXNDb250YWN0cy5MaWZlY3ljbGVTdGFnZS5UcmlhbFN1YnNjcmlwdGlvbiAhPT0gdW5kZWZpbmVkICYmIHN5bmNSdWxlc0NvbnRhY3RzLkxpZmVjeWNsZVN0YWdlLlRyaWFsU3Vic2NyaXB0aW9uICE9PSBcJ3NlbGVjdFwnKSB7XG4gICAgICAgICAgICBuTGlmZWN5Y2xlc3RhZ2UgPSBzeW5jUnVsZXNDb250YWN0cy5MaWZlY3ljbGVTdGFnZS5UcmlhbFN1YnNjcmlwdGlvbjtcbiAgICAgICAgfVxuICAgIH0gZWxzZSBpZiAoY2JzdWJzY3JpcHRpb3N0YXR1cyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGlmIChzeW5jUnVsZXNDb250YWN0cy5MaWZlY3ljbGVTdGFnZS5Ob1N1YnNjcmlwdGlvbiAhPT0gdW5kZWZpbmVkICYmIHN5bmNSdWxlc0NvbnRhY3RzLkxpZmVjeWNsZVN0YWdlLk5vU3Vic2NyaXB0aW9uICE9PSBcJ3NlbGVjdFwnKSB7XG4gICAgICAgICAgICBuTGlmZWN5Y2xlc3RhZ2UgPSBzeW5jUnVsZXNDb250YWN0cy5MaWZlY3ljbGVTdGFnZS5Ob1N1YnNjcmlwdGlvbjtcbiAgICAgICAgfVxuICAgIH1cbi8vfSBlbHNlIHtcbi8vICAgIGlmIChzdGVwcy5DQkRhdGEuaHVic3BvdF9zdWJfc3RhdHVzICE9PSBcJ2FjdGl2ZVwnICYmIGNic3Vic2NyaXB0aW9zdGF0dXMgPT09IFwnYWN0aXZlXCcgJiYgc3luY1J1bGVzQ29udGFjdHMuTGlmZWN5Y2xlU3RhZ2UuQWN0aXZlU3Vic2NyaXB0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAvLyAgICAgICBuTGlmZWN5Y2xlc3RhZ2UgPSBzeW5jUnVsZXNDb250YWN0cy5MaWZlY3ljbGVTdGFnZS5BY3RpdmVTdWJzY3JpcHRpb247XG4gLy8gICB9IGVsc2Uge1xuICAgLy8gICAgIG5MaWZlY3ljbGVzdGFnZSA9IHVuZGVmaW5lZDtcbiAgLy8gIH1cblxuLy99XG5cbnN0ZXBzLkh1YkRhdGEuY01ldHJpY3MgPSB7XG4gICAgc3Vic2NyaXB0aW9ubXJyOiBjYnN1YnNjcmlwdGlvbm1ycixcbiAgICBzdWJzY3JpcHRpb25tcnJPbGQ6IGhEYXRhLnN1YnNjcmlwdGlvbm1ycixcbiAgICB0b3RhbGR1ZXM6IGNidG90YWxkdWVzLFxuICAgIHRvdGFsZHVlc09sZDogaERhdGEudG90YWxkdWVzLFxuICAgIGR1ZWludm9pY2VzY291bnQ6IGNiZHVlaW52b2ljZXNjb3VudCxcbiAgICBkdWVpbnZvaWNlc2NvdW50T2xkOiBoRGF0YS5kdWVpbnZvaWNlc2NvdW50LFxuICAgIHN1YnNjcmlwdGlvbmlkOiBjYnN1YnNjcmlwdGlvbmlkLFxuICAgIHN1YnNjcmlwdGlvbmlkT2xkOiBoRGF0YS5zdWJzY3JpcHRpb25pZCxcbiAgICBvcDogXCd1cGRhdGVcJ1xufTtcblxuc2V0SERhdGEoaERhdGEsICdsaWZlY3ljbGVzdGFnZScsIG5MaWZlY3ljbGVzdGFnZSwgdHJ1ZSk7XG5zZXRIRGF0YShoRGF0YSwgJ3N1YnNjcmlwdGlvbmlkJywgY2JzdWJzY3JpcHRpb25pZCwgdHJ1ZSk7XG5zZXRIRGF0YShoRGF0YSwgJ3N1YnNjcmlwdGlvc3RhdHVzJywgY2JzdWJzY3JpcHRpb3N0YXR1cywgdHJ1ZSk7XG5zZXRIRGF0YShoRGF0YSwgJ3Byb2R1Y3QnLCBjYnByb2R1Y3QsIHRydWUpO1xuc2V0SERhdGEoaERhdGEsICdwbGFucXVhbnRpdHknLCBjYnBsYW5xdWFudGl0eSwgdHJ1ZSk7XG5zZXRIRGF0YShoRGF0YSwgJ3JlbWFpbmluZ2JpbGxpbmdjeWNsZXMnLCBjYnJlbWFpbmluZ2JpbGxpbmdjeWNsZXMsIHRydWUpO1xuc2V0SERhdGEoaERhdGEsICdwb251bWJlcicsIGNicG9udW1iZXIsIHRydWUpO1xuc2V0SERhdGEoaERhdGEsICduZXh0YmlsbGluZ2F0JywgY2JuZXh0YmlsbGluZ2F0LCB0cnVlKTtcbnNldEhEYXRhKGhEYXRhLCAnZHVlc2luY2UnLCBjYmR1ZXNpbmNlLCB0cnVlKTtcbnNldEhEYXRhKGhEYXRhLCAnZHVlaW52b2ljZXNjb3VudCcsIGNiZHVlaW52b2ljZXNjb3VudCwgdHJ1ZSk7XG5zZXRIRGF0YShoRGF0YSwgJ3RvdGFsZHVlcycsIGNidG90YWxkdWVzLCB0cnVlKTtcbnNldEhEYXRhKGhEYXRhLCAnc2V0dXBmZWUnLCBjYnNldHVwZmVlLCB0cnVlKTtcbnNldEhEYXRhKGhEYXRhLCAnc3Vic2NyaXB0aW9ubXJyJywgY2JzdWJzY3JpcHRpb25tcnIsIHRydWUpO1xuc2V0SERhdGEoaERhdGEsICdjdXN0b21lcm1ycicsIGdldE51bWJlcihzdGVwcy5IdWJEYXRhLmNtcnIpKjEwMCwgdHJ1ZSk7XG5cblxuXG5sZXQgY2JsYXN0b3JkZXJkYXRlO1xubGV0IGNibGFzdG9yZGVyYmFzZWNvbXBvbmVudHNrdTtcbmxldCBjYmxhc3RvcmRlcnN0YXR1cztcbmxldCBjYmxhc3RvcmRlcjtcbmxldCBjYm5leHRvcmRlcmRhdGU7XG5sZXQgY2JuZXh0b3JkZXJiYXNlY29tcG9uZW50c2t1O1xubGV0IGNibmV4dG9yZGVyc3RhdHVzO1xubGV0IGNibmV4dG9yZGVyO1xuXG5sZXQgbXlPcmRlcjtcblxuaWYgKHN0ZXBzLkh1YkRhdGEub3JkZXIgIT09IHVuZGVmaW5lZCkge1xuICAgIGxldCBvcmRlckJlZm9yZSA9IHN0ZXBzLkh1YkRhdGEub3JkZXIuYmVmb3JlO1xuICAgIG15T3JkZXIgPSBvcmRlckJlZm9yZTtcbiAgICBpZihvcmRlckJlZm9yZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGlmIChvcmRlckJlZm9yZS5vcmRlcl9kYXRlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNibGFzdG9yZGVyZGF0ZSA9IGdldE51bWJlcihvcmRlckJlZm9yZS5vcmRlcl9kYXRlKSAqIDEwMDA7XG4gICAgICAgIH1cbiAgICAgICAgY2JsYXN0b3JkZXJiYXNlY29tcG9uZW50c2t1ID0gb3JkZXJCZWZvcmUuc2t1O1xuICAgICAgICBjYmxhc3RvcmRlcnN0YXR1cyA9IG9yZGVyQmVmb3JlLnN0YXR1cztcbiAgICAgICAgY2JsYXN0b3JkZXIgPSBnZXROdW1iZXIob3JkZXJCZWZvcmUudG90YWwpO1xuICAgIH1cbiAgIFxuXG4gICAgbGV0IG9yZGVyQWZ0ZXIgPSBzdGVwcy5IdWJEYXRhLm9yZGVyLmFmdGVyO1xuICAgIGlmKG9yZGVyQWZ0ZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAob3JkZXJBZnRlci5vcmRlcl9kYXRlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNibmV4dG9yZGVyZGF0ZSA9IGdldE51bWJlcihvcmRlckFmdGVyLm9yZGVyX2RhdGUpICogMTAwMDtcbiAgICAgICAgfVxuICAgICAgICBjYm5leHRvcmRlcmJhc2Vjb21wb25lbnRza3UgPSBvcmRlckFmdGVyLnNrdTtcbiAgICAgICAgY2JuZXh0b3JkZXJzdGF0dXMgPSBvcmRlckFmdGVyLnN0YXR1cztcbiAgICAgICAgY2JuZXh0b3JkZXIgPSBnZXROdW1iZXIob3JkZXJBZnRlci50b3RhbCk7XG4gICAgfVxuICAgXG59XG5cbnNldEhEYXRhKGhEYXRhLCAnbGFzdG9yZGVyZGF0ZScsIGNibGFzdG9yZGVyZGF0ZSwgdHJ1ZSk7XG5zZXRIRGF0YShoRGF0YSwgJ2xhc3RvcmRlcmJhc2Vjb21wb25lbnRza3UnLCBjYmxhc3RvcmRlcmJhc2Vjb21wb25lbnRza3UsIHRydWUpO1xuc2V0SERhdGEoaERhdGEsICdsYXN0b3JkZXJzdGF0dXMnLCBjYmxhc3RvcmRlcnN0YXR1cywgdHJ1ZSk7XG5zZXRIRGF0YShoRGF0YSwgJ2xhc3RvcmRlcicsIGNibGFzdG9yZGVyLCB0cnVlKTtcbnNldEhEYXRhKGhEYXRhLCAnbmV4dG9yZGVyZGF0ZScsIGNibmV4dG9yZGVyZGF0ZSwgdHJ1ZSk7XG5zZXRIRGF0YShoRGF0YSwgJ25leHRvcmRlcmJhc2Vjb21wb25lbnRza3UnLCBjYm5leHRvcmRlcmJhc2Vjb21wb25lbnRza3UsIHRydWUpO1xuc2V0SERhdGEoaERhdGEsICduZXh0b3JkZXJzdGF0dXMnLCBjYm5leHRvcmRlcnN0YXR1cywgdHJ1ZSk7XG5zZXRIRGF0YShoRGF0YSwgJ25leHRvcmRlcicsIGNibmV4dG9yZGVyLCB0cnVlKTtcblxuXG5sZXQgY2JpbnZvaWNlYW1vdW50cGFpZDtcbmxldCBjYmludm9pY2Vlc3RpbWF0ZTtcbmlmIChzdGVwcy5IdWJEYXRhLmludm9pY2UgIT09IHVuZGVmaW5lZCkge1xuICAgIGNiaW52b2ljZWFtb3VudHBhaWQgPSBnZXROdW1iZXIoc3RlcHMuSHViRGF0YS5pbnZvaWNlLnRvdGFsKTtcbiAgICBjYmludm9pY2Vlc3RpbWF0ZSA9IGdldE51bWJlcihzdGVwcy5IdWJEYXRhLmludm9pY2UuZXN0aW1hdGUpO1xufVxuXG5zdGVwcy5IdWJEYXRhLmNNZXRyaWNzLmludm9pY2VhbW91bnRwYWlkID0gY2JpbnZvaWNlYW1vdW50cGFpZDtcbnN0ZXBzLkh1YkRhdGEuY01ldHJpY3MuaW52b2ljZWFtb3VudHBhaWRPbGQgPSBoRGF0YS5pbnZvaWNlYW1vdW50cGFpZDtcblxuc2V0SERhdGEoaERhdGEsICdpbnZvaWNlYW1vdW50cGFpZCcsIGNiaW52b2ljZWFtb3VudHBhaWQsIHRydWUpO1xuc2V0SERhdGEoaERhdGEsICduZXh0YmlsbGluZ2Ftb3VudCcsIGNiaW52b2ljZWVzdGltYXRlLCB0cnVlKTtcblxuLy9jdXN0b21cbmxldCBzeW5jUnVsZXNGaWVsZHMgPSBzdGVwcy5HZXRUcEludGVnQ29uZi5kYXRhLmNvbmZpZ19qc29uLmNsb3VkRWxlbWVudHMuc3luY1J1bGVzRmllbGRzO1xuaWYgKHN5bmNSdWxlc0ZpZWxkcyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgc3luY1J1bGVzRmllbGRzID0ge1xuICAgICAgICBcJ2NvbXBhbnlcJzoge1xuXG4gICAgICAgIH0sXG4gICAgICAgIFwnY29udGFjdFwnOiB7XG5cbiAgICAgICAgfSxcbiAgICAgICAgXCdkZWFsXCc6IHtcbiAgICAgICAgfSxcbiAgICAgICAgXCdzeW5jXCc6IFwnZmFsc2VcJ1xuICAgIH07XG5cbn0gZWxzZSB7XG4gICAgaWYgKHN5bmNSdWxlc0ZpZWxkcy5jb21wYW55ID09PSB1bmRlZmluZWQgfHwgc3luY1J1bGVzRmllbGRzLmNvbXBhbnkgPT09IFwnXCcpIHtcbiAgICAgICAgc3luY1J1bGVzRmllbGRzLmNvbXBhbnkgPSB7fTtcbiAgICB9XG4gICAgaWYgKHN5bmNSdWxlc0ZpZWxkcy5jb250YWN0ID09PSB1bmRlZmluZWQgfHwgc3luY1J1bGVzRmllbGRzLmNvbnRhY3QgPT09IFwnXCcpIHtcbiAgICAgICAgc3luY1J1bGVzRmllbGRzLmNvbnRhY3QgPSB7fTtcbiAgICB9XG4gICAgaWYgKHN5bmNSdWxlc0ZpZWxkcy5kZWFsID09PSB1bmRlZmluZWQgfHwgc3luY1J1bGVzRmllbGRzLmRlYWwgPT09IFwnXCcpIHtcbiAgICAgICAgc3luY1J1bGVzRmllbGRzLmRlYWwgPSB7fTtcbiAgICB9XG59XG5zeW5jUnVsZXNGaWVsZHMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHN5bmNSdWxlc0ZpZWxkcykpO1xuXG5sZXQgY29tcGFueUtleXMgPSBPYmplY3Qua2V5cyhzeW5jUnVsZXNGaWVsZHMuY29tcGFueSk7XG5cbmZvciAodmFyIGkgPSAwOyBpIDxzcGFuPjw8L3NwYW4+IGNvbXBhbnlLZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgc3luY1J1bGVzRmllbGRzLmNvbnRhY3RbY29tcGFueUtleXNbaV1dID0gc3luY1J1bGVzRmllbGRzLmNvbXBhbnlbY29tcGFueUtleXNbaV1dO1xufVxuXG5cbmxldCBjdXN0b21lZmllbGRzID0gc3RlcHMuU3luY0xvZy5jdXN0b21lZmllbGRzO1xuZm9yICh2YXIgaSA9IDA7IGkgPHNwYW4+PDwvc3Bhbj4gY3VzdG9tZWZpZWxkcy5sZW5ndGg7IGkrKykge1xuICAgIGxldCBmbGQgPSBjdXN0b21lZmllbGRzW2ldO1xuXG4gICAgZm9yICh2YXIgaiA9IDA7IGogPHNwYW4+PDwvc3Bhbj4gZmxkLmZpZWxkcy5sZW5ndGg7IGorKykge1xuICAgICAgICB2YXIgZXMgPSBmbGQuZmllbGRzW2pdO1xuICAgICAgICB2YXIgZGVzYyA9IGZsZC5sYWJlbCArIFwnIFwnICsgZXNbMF0ucmVwbGFjZSgvXy9nLCBcJyBcJyk7XG4gICAgICAgIHZhciBpZCA9IGZsZC5rZXkgKyBcJ19cJyArIGVzWzBdO1xuICAgICAgICBpZiAoc3luY1J1bGVzRmllbGRzLmNvbnRhY3RbaWRdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHN5bmNSdWxlc0ZpZWxkcy5jb250YWN0W2lkXSA9IGVzO1xuICAgICAgICB9XG4gICAgfVxufVxubGV0IGN1c3RvbUtleXMgPSBPYmplY3Qua2V5cyhzeW5jUnVsZXNGaWVsZHMuY29udGFjdCk7XG5mb3IgKHZhciBpID0gMDsgaSA8c3Bhbj48PC9zcGFuPiBjdXN0b21LZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGNLZXkgPSBjdXN0b21LZXlzW2ldO1xuICAgIHZhciBjVmFsID0gc3luY1J1bGVzRmllbGRzLmNvbnRhY3RbY0tleV07XG4gICAgbGV0IHN1YlZhbDtcbiAgICBpZiAoY0tleS5zdGFydHNXaXRoKFwnc3ViY3N0XCcpKSB7XG4gICAgICAgIGlmIChzdWJzY3JpcHRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgc3ViVmFsID0gc3Vic2NyaXB0aW9uW2NWYWxbMF1dO1xuICAgICAgICB9XG4gICAgfSBlbHNlIGlmIChjS2V5LnN0YXJ0c1dpdGgoXCdvcmRlcmNzdFwnKSkge1xuICAgICAgICBpZiAobXlPcmRlciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBzdWJWYWwgPSBteU9yZGVyW2NWYWxbMF1dO1xuICAgICAgICB9XG5cbiAgICB9IGVsc2UgaWYgKGNLZXkuc3RhcnRzV2l0aChcJ2N1c3Rjc3RcJykpIHtcbiAgICAgICAgaWYgKGN1c3RvbWVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHN1YlZhbCA9IGN1c3RvbWVyW2NWYWxbMF1dO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChjVmFsWzFdID09PSBcJ251bWJlclwnKSB7XG4gICAgICAgIHN1YlZhbCA9IGdldE51bWJlcihzdWJWYWwpO1xuICAgICAgIFxuICAgICAgICBpZiAoY1ZhbC5sZW5ndGggPT0gNCkge1xuICAgICAgICAgICAgaERhdGEgPSB1cGRhdGVEYXRhKGhEYXRhLCBoQ29udGFjdCwgY0tleSx0cnVlLHRydWUpO1xuICAgICAgICAgICAgc3RlcHMuSHViRGF0YS5jTWV0cmljc1tjS2V5K1wnT2xkXCddID0gaERhdGFbY0tleV07XG4gICAgICAgICAgICAgc2V0SERhdGEoaERhdGEsIGNLZXksIHN1YlZhbCk7XG4gICAgICAgICAgICAgXG4gICAgICAgICAgICBwcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgY0tleSwgdHJ1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaERhdGEgPSB1cGRhdGVEYXRhKGhEYXRhLCBoQ29udGFjdCwgY0tleSx0cnVlKTtcbiAgICAgICAgICBzdGVwcy5IdWJEYXRhLmNNZXRyaWNzW2NLZXldID0gc3ViVmFsO1xuICAgICAgICAgICBzZXRIRGF0YShoRGF0YSwgY0tleSwgc3ViVmFsKTtcbiAgICAgICAgICAgIHByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCBjS2V5KTtcbiAgICAgICAgfVxuICAgICAgICAgc3RlcHMuSHViRGF0YS5jTWV0cmljc1tjS2V5K1wnT2xkXCddID0gaERhdGFbY0tleV07XG4gICAgfSBlbHNlIGlmIChjVmFsWzFdID09PSBcJ2RhdGV0aW1lXCcpIHtcbiAgICAgIGlmKHN1YlZhbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICBzdWJWYWwgPSBnZXROdW1iZXIoc3ViVmFsKSAqIDEwMDA7XG4gICAgICAgIHNldEhEYXRhKGhEYXRhLCBjS2V5LCBzdWJWYWwpO1xuICAgICAgICBwcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgY0tleSk7XG4gICAgICB9XG4gICAgICAgXG5cbiAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoc3ViVmFsID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHN1YlZhbCA9IFwnXCc7XG5cbiAgICAgICAgfVxuICAgICAgICBzZXRIRGF0YShoRGF0YSwgY0tleSwgc3ViVmFsKTtcbiAgICAgICAgcHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsIGNLZXkpO1xuICAgIH1cblxuXG59XG4vL2N1c3RvbVxucHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdmaXJzdG5hbWUnKTtcbi8vcHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdlbWFpbCcpO1xucHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdsYXN0bmFtZScpO1xucHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdwaG9uZScpO1xucHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdjb21wYW55Jyk7XG5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ2JpbGxpbmdhZGRyZXNzJyk7XG5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ2JpbGxpbmdzdGF0ZScpO1xucHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdiaWxsaW5nY2l0eScpO1xucHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdiaWxsaW5nY291bnRyeScpO1xucHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdiaWxsaW5nemlwJyk7XG5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ2F1dG9jb2xsZWN0aW9uJyk7XG5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ3ByZWZlcnJlZGN1cnJlbmN5Y29kZScpO1xucHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdwYXltZW50bWV0aG9kc3RhdHVzJyk7XG5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ3BheW1lbnRtZXRob2R0eXBlJyk7XG5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ25ldHRlcm1kYXlzJyk7XG5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ3RheGV4ZW1wdHN0YXR1cycpO1xucHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdjaGFyZ2ViZWVjdXN0b21lcmlkJyk7XG5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ3N1YnNjcmlwdGlvbmlkJyk7XG5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ3N1YnNjcmlwdGlvc3RhdHVzJyk7XG5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ3Byb2R1Y3QnKTtcbnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAncGxhbnF1YW50aXR5Jyk7XG5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ3NldHVwZmVlJywgdHJ1ZSk7XG5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ2R1ZWludm9pY2VzY291bnQnKTtcbnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAncmVtYWluaW5nYmlsbGluZ2N5Y2xlcycpO1xucHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdwb251bWJlcicpO1xucHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICduZXh0YmlsbGluZ2F0Jyk7XG5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ3RvdGFsZHVlcycsIHRydWUpO1xucHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdkdWVzaW5jZScpO1xucHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdzdWJzY3JpcHRpb25tcnInLCB0cnVlKTtcbnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAnY3VzdG9tZXJtcnInLCB0cnVlKTtcbnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAnbGlmZWN5Y2xlc3RhZ2UnKTtcbnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAnbGFzdG9yZGVyZGF0ZScpO1xucHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdsYXN0b3JkZXJiYXNlY29tcG9uZW50c2t1Jyk7XG5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ2xhc3RvcmRlcnN0YXR1cycpO1xucHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdsYXN0b3JkZXInLCB0cnVlKTtcbnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAnbmV4dG9yZGVyZGF0ZScpO1xucHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICduZXh0b3JkZXJiYXNlY29tcG9uZW50c2t1Jyk7XG5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ25leHRvcmRlcnN0YXR1cycpO1xucHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICduZXh0b3JkZXInLCB0cnVlKTtcbnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAnaW52b2ljZWFtb3VudHBhaWQnLCB0cnVlKTtcbnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAnbmV4dGJpbGxpbmdhbW91bnQnLCB0cnVlKTtcblxuc3RlcHMuSHViU3BvdElucHV0LmlucHV0cy5wcm9wZXJ0aWVzID0gcHJvcGVydGllcztcblxubGV0IGdmZyA9IHtcbiAgICBwcm9wZXJ0aWVzOiBwcm9wZXJ0aWVzLFxuICAgIG1ldHJpY3M6IHN0ZXBzLkh1YkRhdGEuY01ldHJpY3MsXG4gICAgaERhdGE6IGhEYXRhXG59XG5cbmRvbmUoZ2ZnKTsnPGJyPiAgfTxicj59PC9wcmU+PC9ib2R5PjwvaHRtbD4='));document.close();" "JavaScript:<br><pre>let customer = steps.HubData.customer;<br>let subscription = steps.HubData.subscription;<br>let syncRulesContacts = steps.CustomersParam.syncRulesContacts;<br>let contact = steps.CBData.hubspot.contact;<br>steps.HubSpotInput.url = 'https://api.hubapi.com/contacts/v1/contact/vid/' + contact.vid + '/profile';<br><br>let hContact = contact.properties;<br>let override = syncRulesContacts.HubSpotContactMatch === 'Override_the_fields';<br>let prefix = 'cb_';<br>//let prefix = '';<br>let properties = [];<br>let cbkeys = ['billingaddress','billingstate','billingcity','billingcountry','billingzip','autocollection','preferredcurrencycode','paymentmethodstatus','paymentmethodtype','nettermdays','taxexemptstatus','subscriptionid','subscriptiostatus','product','planquantity','setupfee','dueinvoicescount','remainingbillingcycles','ponumber','nextbillingat','totaldues','duesince','subscriptionmrr','lastorderdate','lastorderbasecomponentsku','lastorderstatus','lastorder','nextorderdate','nextorderbasecomponentsku','nextorderstatus','nextorder','invoiceamountpaid','nextbillingamount'];<br><br>let cbMap = {<br>  'firstname':true,<br>  'lastname' :true,<br>  'email' :true,<br>  'company':true,<br>  'phone':true,<br>   'chargebeecustomerid':true,<br>   'lifecyclestage':true,<br>};<br>if(steps.GetTpIntegConf.data.config_json.noneedprefix!==undefined && steps.GetTpIntegConf.data.config_json.noneedprefix===true)<br>{<br>   prefix='';<br>}<br><br>function updateProperties(properties, hData, key, isCurrency) {<br>    let val = hData[key];<br>    if (val !== undefined) {<br>        if (isCurrency) {<br>            val = parseFloat(parseInt(val, 10) / 100).toFixed(2);<br>        }<br>        if(cbMap[key] === undefined) {<br>           key = prefix+key;<br>        }<br>       <br>        properties.push({<br>            'property': key,<br>            'value': val<br>        });<br>    }<br>    return properties;<br>}<br>function updateData(d, hContact, key, isNum, isCurr) {<br>    if (hContact[key] !== undefined) {<br>        d[key] = hContact[key].value;<br>        if (isNum) {<br>            let df = Number(d[key]);<br>            if (isNaN(df)) {<br>                df = 0;<br>            }<br>            if (isCurr) {<br>                d[key] = df * 100;<br>            } else {<br>                d[key] = df;<br>            }<br><br><br>        }<br>    }<br>    return d;<br>}<br>function setHData(hData, key, value, flag) {<br>    if (flag) {<br>        hData[key] = value;<br>    } else {<br>        if (hData[key] === undefined || hData[key] === 0) {<br>            hData[key] = value;<br>        } else {<br>            hData[key] = undefined;<br>        }<br>    }<br>}<br>function getNumber(val) {<br>    if (val === undefined) {<br>        return 0;<br>    }<br>    let num = Number(val);<br>    if (isNaN(num)) {<br>        return 0;<br>    }<br>    return num;<br>}<br><br>function formatCurrency(hData, key) {<br><br>    return hData;<br>}<br>let hData = {<br><br>};<br>hData = updateData(hData, hContact, 'firstname');<br>//hData = updateData(hData, hContact, 'email');<br>hData = updateData(hData, hContact, 'lastname');<br>hData = updateData(hData, hContact, 'phone');<br>hData = updateData(hData, hContact, 'company');<br>hData = updateData(hData, hContact, 'billingaddress');<br>hData = updateData(hData, hContact, 'billingstate');<br>hData = updateData(hData, hContact, 'billingcity');<br>hData = updateData(hData, hContact, 'billingcountry');<br>hData = updateData(hData, hContact, 'billingzip');<br>hData = updateData(hData, hContact, 'autocollection');<br>hData = updateData(hData, hContact, 'preferredcurrencycode');<br>hData = updateData(hData, hContact, 'paymentmethodstatus');<br>hData = updateData(hData, hContact, 'paymentmethodtype');<br>hData = updateData(hData, hContact, 'nettermdays');<br>hData = updateData(hData, hContact, 'taxexemptstatus');<br>hData = updateData(hData, hContact, 'chargebeecustomerid');<br>hData = updateData(hData, hContact, 'subscriptionid');<br>hData = updateData(hData, hContact, 'subscriptiostatus');<br>hData = updateData(hData, hContact, 'product');<br>hData = updateData(hData, hContact, 'planquantity');<br>hData = updateData(hData, hContact, 'setupfee', true, true);<br>hData = updateData(hData, hContact, 'dueinvoicescount', true, false);<br>hData = updateData(hData, hContact, 'remainingbillingcycles');<br>hData = updateData(hData, hContact, 'ponumber');<br>hData = updateData(hData, hContact, 'nextbillingat');<br>hData = updateData(hData, hContact, 'totaldues', true, true);<br>hData = updateData(hData, hContact, 'duesince');<br>hData = updateData(hData, hContact, 'subscriptionmrr', true, true);<br>hData = updateData(hData, hContact, 'customermrr', true, true);<br>hData = updateData(hData, hContact, 'lifecyclestage');<br>hData = updateData(hData, hContact, 'lastorderdate');<br>hData = updateData(hData, hContact, 'lastorderbasecomponentsku');<br>hData = updateData(hData, hContact, 'lastorderstatus');<br>hData = updateData(hData, hContact, 'lastorder', true, true);<br>hData = updateData(hData, hContact, 'nextorderdate');<br>hData = updateData(hData, hContact, 'nextorderbasecomponentsku');<br>hData = updateData(hData, hContact, 'nextorderstatus');<br>hData = updateData(hData, hContact, 'nextorder', true, true);<br>hData = updateData(hData, hContact, 'invoiceamountpaid', true, true);<br>hData = updateData(hData, hContact, 'nextbillingamount', true, true);<br><br><br><br>let dfv = {<br>    subscriptionmrrOld: hData.subscriptionmrr,<br>    totalduesOld: hData.totaldues,<br>    dueinvoicescountOld: hData.dueinvoicescount,<br>    subscriptionidOld: hData.subscriptionid,<br>    op: 'update'<br>};<br><br>let cbbillingaddress;<br>let cbState;<br>let cbCity;<br>let cbCountry;<br>let cbZip;<br>let cbpayment_method_status;<br>let cbpaymentmethodtype;<br><br>if (customer.billing_address !== undefined) {<br>    cbbillingaddress = '';<br>    if (customer.billing_address.line1 !== undefined) {<br>        cbbillingaddress = cbbillingaddress + customer.billing_address.line1;<br>    }<br>    if (customer.billing_address.line2 !== undefined) {<br>        cbbillingaddress = cbbillingaddress + ' ' + customer.billing_address.line2;<br>    }<br>    if (customer.billing_address.line3 !== undefined) {<br>        cbbillingaddress = cbbillingaddress + ' ' + customer.billing_address.line3;<br>    }<br>    if (cbbillingaddress === '') {<br>        cbbillingaddress = undefined;<br>    }<br>    cbState = customer.billing_address.state;<br>    cbCity = customer.billing_address.city;<br>    cbCountry = customer.billing_address.country;<br>    cbZip = customer.billing_address.zip;<br>}<br><br>if (customer.payment_method !== undefined ) {<br>    cbpayment_method_status = customer.payment_method.status;<br>    cbpaymentmethodtype = customer.payment_method.type;<br>}<br><br><br>setHData(hData, 'chargebeecustomerid', customer.id, override);<br>setHData(hData, 'email', customer.email, override);<br>setHData(hData, 'firstname', customer.first_name, override);<br>setHData(hData, 'lastname', customer.last_name, override);<br>setHData(hData, 'phone', customer.phone, override);<br>setHData(hData, 'company', customer.company, override);<br>setHData(hData, 'billingaddress', cbbillingaddress, override);<br>setHData(hData, 'billingstate', cbState, override);<br>setHData(hData, 'billingcity', cbCity, override);<br>setHData(hData, 'billingcountry', cbCountry, override);<br>setHData(hData, 'billingzip', cbZip, override);<br>setHData(hData, 'autocollection', customer.auto_collection, override);<br>setHData(hData, 'preferredcurrencycode', customer.preferred_currency_code, override);<br>setHData(hData, 'paymentmethodstatus', cbpayment_method_status, override);<br>setHData(hData, 'paymentmethodtype', cbpaymentmethodtype, override);<br>setHData(hData, 'nettermdays', customer.net_term_days, override);<br>setHData(hData, 'taxexemptstatus', customer.taxability, override);<br><br><br>let cbsubscriptionid;<br>let cbsubscriptiostatus;<br>let cbproduct;<br>let cbplanquantity;<br>let cbsetupfee;<br>let cbdueinvoicescount;<br>let cbremainingbillingcycles;<br>let cbponumber;<br>let cbnextbillingat;<br>let cbtotaldues;<br>let cbduesince;<br>let cbsubscriptionmrr;<br>if (subscription !== undefined) {<br>    cbsubscriptionid = subscription.id;<br>    cbsubscriptiostatus = subscription.status;<br>    cbproduct = subscription.plan_id;<br>    cbplanquantity = subscription.plan_quantity;<br>    cbsetupfee = getNumber(subscription.setup_fee);<br>    cbdueinvoicescount = getNumber(subscription.due_invoices_count);<br>    cbremainingbillingcycles = subscription.remaining_billing_cycles;<br>    cbponumber = subscription.po_number;<br>    if(subscription.next_billing_at !== undefined) {<br>        cbnextbillingat = getNumber(subscription.next_billing_at) * 1000;<br>    }<br>  <br>    cbtotaldues = getNumber(subscription.total_dues);<br>    if(subscription.due_since !== undefined) {<br>      cbduesince = getNumber(subscription.due_since) * 1000;<br>    }<br>    <br>    cbsubscriptionmrr = getNumber(subscription.mrr);<br>}<br><br><br>let nLifecyclestage;<br><br>//if (hData.lifecyclestage === undefined) {<br>   if (cbsubscriptiostatus === 'cancelled') {<br>        if (syncRulesContacts.LifecycleStage.CanceledSubscription !== undefined && syncRulesContacts.LifecycleStage.CanceledSubscription !== 'select') {<br>            nLifecyclestage = syncRulesContacts.LifecycleStage.CanceledSubscription;<br>        }<br><br>    } else if (cbsubscriptiostatus === 'active') {<br>        if (syncRulesContacts.LifecycleStage.ActiveSubscription !== undefined && syncRulesContacts.LifecycleStage.ActiveSubscription !== 'select') {<br>            nLifecyclestage = syncRulesContacts.LifecycleStage.ActiveSubscription;<br>        }<br><br>    } else if (cbsubscriptiostatus === 'in_trial') {<br>        if (syncRulesContacts.LifecycleStage.TrialSubscription !== undefined && syncRulesContacts.LifecycleStage.TrialSubscription !== 'select') {<br>            nLifecyclestage = syncRulesContacts.LifecycleStage.TrialSubscription;<br>        }<br>    } else if (cbsubscriptiostatus === undefined) {<br>        if (syncRulesContacts.LifecycleStage.NoSubscription !== undefined && syncRulesContacts.LifecycleStage.NoSubscription !== 'select') {<br>            nLifecyclestage = syncRulesContacts.LifecycleStage.NoSubscription;<br>        }<br>    }<br>//} else {<br>//    if (steps.CBData.hubspot_sub_status !== 'active' && cbsubscriptiostatus === 'active' && syncRulesContacts.LifecycleStage.ActiveSubscription !== undefined) {<br> //       nLifecyclestage = syncRulesContacts.LifecycleStage.ActiveSubscription;<br> //   } else {<br>   //     nLifecyclestage = undefined;<br>  //  }<br><br>//}<br><br>steps.HubData.cMetrics = {<br>    subscriptionmrr: cbsubscriptionmrr,<br>    subscriptionmrrOld: hData.subscriptionmrr,<br>    totaldues: cbtotaldues,<br>    totalduesOld: hData.totaldues,<br>    dueinvoicescount: cbdueinvoicescount,<br>    dueinvoicescountOld: hData.dueinvoicescount,<br>    subscriptionid: cbsubscriptionid,<br>    subscriptionidOld: hData.subscriptionid,<br>    op: 'update'<br>};<br><br>setHData(hData, 'lifecyclestage', nLifecyclestage, true);<br>setHData(hData, 'subscriptionid', cbsubscriptionid, true);<br>setHData(hData, 'subscriptiostatus', cbsubscriptiostatus, true);<br>setHData(hData, 'product', cbproduct, true);<br>setHData(hData, 'planquantity', cbplanquantity, true);<br>setHData(hData, 'remainingbillingcycles', cbremainingbillingcycles, true);<br>setHData(hData, 'ponumber', cbponumber, true);<br>setHData(hData, 'nextbillingat', cbnextbillingat, true);<br>setHData(hData, 'duesince', cbduesince, true);<br>setHData(hData, 'dueinvoicescount', cbdueinvoicescount, true);<br>setHData(hData, 'totaldues', cbtotaldues, true);<br>setHData(hData, 'setupfee', cbsetupfee, true);<br>setHData(hData, 'subscriptionmrr', cbsubscriptionmrr, true);<br>setHData(hData, 'customermrr', getNumber(steps.HubData.cmrr)*100, true);<br><br><br><br>let cblastorderdate;<br>let cblastorderbasecomponentsku;<br>let cblastorderstatus;<br>let cblastorder;<br>let cbnextorderdate;<br>let cbnextorderbasecomponentsku;<br>let cbnextorderstatus;<br>let cbnextorder;<br><br>let myOrder;<br><br>if (steps.HubData.order !== undefined) {<br>    let orderBefore = steps.HubData.order.before;<br>    myOrder = orderBefore;<br>    if(orderBefore !== undefined) {<br>        if (orderBefore.order_date !== undefined) {<br>            cblastorderdate = getNumber(orderBefore.order_date) * 1000;<br>        }<br>        cblastorderbasecomponentsku = orderBefore.sku;<br>        cblastorderstatus = orderBefore.status;<br>        cblastorder = getNumber(orderBefore.total);<br>    }<br>   <br><br>    let orderAfter = steps.HubData.order.after;<br>    if(orderAfter !== undefined) {<br>        if (orderAfter.order_date !== undefined) {<br>            cbnextorderdate = getNumber(orderAfter.order_date) * 1000;<br>        }<br>        cbnextorderbasecomponentsku = orderAfter.sku;<br>        cbnextorderstatus = orderAfter.status;<br>        cbnextorder = getNumber(orderAfter.total);<br>    }<br>   <br>}<br><br>setHData(hData, 'lastorderdate', cblastorderdate, true);<br>setHData(hData, 'lastorderbasecomponentsku', cblastorderbasecomponentsku, true);<br>setHData(hData, 'lastorderstatus', cblastorderstatus, true);<br>setHData(hData, 'lastorder', cblastorder, true);<br>setHData(hData, 'nextorderdate', cbnextorderdate, true);<br>setHData(hData, 'nextorderbasecomponentsku', cbnextorderbasecomponentsku, true);<br>setHData(hData, 'nextorderstatus', cbnextorderstatus, true);<br>setHData(hData, 'nextorder', cbnextorder, true);<br><br><br>let cbinvoiceamountpaid;<br>let cbinvoiceestimate;<br>if (steps.HubData.invoice !== undefined) {<br>    cbinvoiceamountpaid = getNumber(steps.HubData.invoice.total);<br>    cbinvoiceestimate = getNumber(steps.HubData.invoice.estimate);<br>}<br><br>steps.HubData.cMetrics.invoiceamountpaid = cbinvoiceamountpaid;<br>steps.HubData.cMetrics.invoiceamountpaidOld = hData.invoiceamountpaid;<br><br>setHData(hData, 'invoiceamountpaid', cbinvoiceamountpaid, true);<br>setHData(hData, 'nextbillingamount', cbinvoiceestimate, true);<br><br>//custom<br>let syncRulesFields = steps.GetTpIntegConf.data.config_json.cloudElements.syncRulesFields;<br>if (syncRulesFields === undefined) {<br>    syncRulesFields = {<br>        'company': {<br><br>        },<br>        'contact': {<br><br>        },<br>        'deal': {<br>        },<br>        'sync': 'false'<br>    };<br><br>} else {<br>    if (syncRulesFields.company === undefined || syncRulesFields.company === '') {<br>        syncRulesFields.company = {};<br>    }<br>    if (syncRulesFields.contact === undefined || syncRulesFields.contact === '') {<br>        syncRulesFields.contact = {};<br>    }<br>    if (syncRulesFields.deal === undefined || syncRulesFields.deal === '') {<br>        syncRulesFields.deal = {};<br>    }<br>}<br>syncRulesFields = JSON.parse(JSON.stringify(syncRulesFields));<br><br>let companyKeys = Object.keys(syncRulesFields.company);<br><br>for (var i = 0; i <span><</span> companyKeys.length; i++) {<br>    syncRulesFields.contact[companyKeys[i]] = syncRulesFields.company[companyKeys[i]];<br>}<br><br><br>let customefields = steps.SyncLog.customefields;<br>for (var i = 0; i <span><</span> customefields.length; i++) {<br>    let fld = customefields[i];<br><br>    for (var j = 0; j <span><</span> fld.fields.length; j++) {<br>        var es = fld.fields[j];<br>        var desc = fld.label + ' ' + es[0].replace(/_/g, ' ');<br>        var id = fld.key + '_' + es[0];<br>        if (syncRulesFields.contact[id] !== undefined) {<br>            syncRulesFields.contact[id] = es;<br>        }<br>    }<br>}<br>let customKeys = Object.keys(syncRulesFields.contact);<br>for (var i = 0; i <span><</span> customKeys.length; i++) {<br>    var cKey = customKeys[i];<br>    var cVal = syncRulesFields.contact[cKey];<br>    let subVal;<br>    if (cKey.startsWith('subcst')) {<br>        if (subscription !== undefined) {<br>            subVal = subscription[cVal[0]];<br>        }<br>    } else if (cKey.startsWith('ordercst')) {<br>        if (myOrder !== undefined) {<br>            subVal = myOrder[cVal[0]];<br>        }<br><br>    } else if (cKey.startsWith('custcst')) {<br>        if (customer !== undefined) {<br>            subVal = customer[cVal[0]];<br>        }<br>    }<br>    if (cVal[1] === 'number') {<br>        subVal = getNumber(subVal);<br>       <br>        if (cVal.length == 4) {<br>            hData = updateData(hData, hContact, cKey,true,true);<br>            steps.HubData.cMetrics[cKey+'Old'] = hData[cKey];<br>             setHData(hData, cKey, subVal);<br>             <br>            properties = updateProperties(properties, hData, cKey, true);<br>        } else {<br>          hData = updateData(hData, hContact, cKey,true);<br>          steps.HubData.cMetrics[cKey] = subVal;<br>           setHData(hData, cKey, subVal);<br>            properties = updateProperties(properties, hData, cKey);<br>        }<br>         steps.HubData.cMetrics[cKey+'Old'] = hData[cKey];<br>    } else if (cVal[1] === 'datetime') {<br>      if(subVal !== undefined) {<br>         subVal = getNumber(subVal) * 1000;<br>        setHData(hData, cKey, subVal);<br>        properties = updateProperties(properties, hData, cKey);<br>      }<br>       <br><br>    } else {<br>        if (subVal === undefined) {<br>            subVal = '';<br><br>        }<br>        setHData(hData, cKey, subVal);<br>        properties = updateProperties(properties, hData, cKey);<br>    }<br><br><br>}<br>//custom<br>properties = updateProperties(properties, hData, 'firstname');<br>//properties = updateProperties(properties, hData, 'email');<br>properties = updateProperties(properties, hData, 'lastname');<br>properties = updateProperties(properties, hData, 'phone');<br>properties = updateProperties(properties, hData, 'company');<br>properties = updateProperties(properties, hData, 'billingaddress');<br>properties = updateProperties(properties, hData, 'billingstate');<br>properties = updateProperties(properties, hData, 'billingcity');<br>properties = updateProperties(properties, hData, 'billingcountry');<br>properties = updateProperties(properties, hData, 'billingzip');<br>properties = updateProperties(properties, hData, 'autocollection');<br>properties = updateProperties(properties, hData, 'preferredcurrencycode');<br>properties = updateProperties(properties, hData, 'paymentmethodstatus');<br>properties = updateProperties(properties, hData, 'paymentmethodtype');<br>properties = updateProperties(properties, hData, 'nettermdays');<br>properties = updateProperties(properties, hData, 'taxexemptstatus');<br>properties = updateProperties(properties, hData, 'chargebeecustomerid');<br>properties = updateProperties(properties, hData, 'subscriptionid');<br>properties = updateProperties(properties, hData, 'subscriptiostatus');<br>properties = updateProperties(properties, hData, 'product');<br>properties = updateProperties(properties, hData, 'planquantity');<br>properties = updateProperties(properties, hData, 'setupfee', true);<br>properties = updateProperties(properties, hData, 'dueinvoicescount');<br>properties = updateProperties(properties, hData, 'remainingbillingcycles');<br>properties = updateProperties(properties, hData, 'ponumber');<br>properties = updateProperties(properties, hData, 'nextbillingat');<br>properties = updateProperties(properties, hData, 'totaldues', true);<br>properties = updateProperties(properties, hData, 'duesince');<br>properties = updateProperties(properties, hData, 'subscriptionmrr', true);<br>properties = updateProperties(properties, hData, 'customermrr', true);<br>properties = updateProperties(properties, hData, 'lifecyclestage');<br>properties = updateProperties(properties, hData, 'lastorderdate');<br>properties = updateProperties(properties, hData, 'lastorderbasecomponentsku');<br>properties = updateProperties(properties, hData, 'lastorderstatus');<br>properties = updateProperties(properties, hData, 'lastorder', true);<br>properties = updateProperties(properties, hData, 'nextorderdate');<br>properties = updateProperties(properties, hData, 'nextorderbasecomponentsku');<br>properties = updateProperties(properties, hData, 'nextorderstatus');<br>properties = updateProperties(properties, hData, 'nextorder', true);<br>properties = updateProperties(properties, hData, 'invoiceamountpaid', true);<br>properties = updateProperties(properties, hData, 'nextbillingamount', true);<br><br>steps.HubSpotInput.inputs.properties = properties;<br><br>let gfg = {<br>    properties: properties,<br>    metrics: steps.HubData.cMetrics,<br>    hData: hData<br>}<br><br>done(gfg);</pre>"
            click step-049 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPlVwZGF0ZVRQTWFwcGluZ0Vycm9yMjwvdGl0bGU+PC9oZWFkPjxib2R5PjxiPk90aGVyIChmb3JtdWxhKTo8L2I+PGJyPjxicj48cHJlPiAgZm9ybXVsYUlkIDogMzEzMzE8YnI+ICAgICAgIGFyZ3MgOiAke3N0ZXBzLlVwZGF0ZUR1cGxpY2F0ZUVtYWlsfTwvcHJlPjxicj48Yj5SQVcgSlNPTjo8L2I+PGJyPjxicj48cHJlPns8YnI+ICAnb25TdWNjZXNzJzogWzxicj4gICAgJ0xvb3BPdmVyQ3VzdG9tZXInPGJyPiAgXSw8YnI+ICAnb25GYWlsdXJlJzogW10sPGJyPiAgJ25hbWUnOiAnVXBkYXRlVFBNYXBwaW5nRXJyb3IyJyw8YnI+ICAndHlwZSc6ICdmb3JtdWxhJyw8YnI+ICAncHJvcGVydGllcyc6IHs8YnI+ICAgICdmb3JtdWxhSWQnOiAnMzEzMzEnLDxicj4gICAgJ2FyZ3MnOiAnJHtzdGVwcy5VcGRhdGVEdXBsaWNhdGVFbWFpbH0nPGJyPiAgfTxicj59PC9wcmU+PC9ib2R5PjwvaHRtbD4='));document.close();" "Other (formula):<br><pre>  formulaId : 31331<br>       args : ${steps.UpdateDuplicateEmail}</pre>"
            click step-050 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkNyZWF0ZUh1YnNwb3RDb250YWN0UGFyYW08L3RpdGxlPjwvaGVhZD48Ym9keT48Yj5KYXZhU2NyaXB0OjwvYj48YnI+PGJyPjxwcmU+bGV0IHBhcmFtID0gezxicj4gIHVybCA6IHN0ZXBzLkh1YlNwb3RJbnB1dC51cmwsPGJyPiAgaGVhZGVycyA6IHN0ZXBzLkN1c3RvbWVyc1BhcmFtLmh1YnNwb3RBdXRoLDxicj4gIGJvZHkgOiBzdGVwcy5IdWJTcG90SW5wdXQuaW5wdXRzLDxicj4gIHNpdGVOYW1lIDogc3RlcHMuQ29udGFjdElucHV0UGFyYW1zLmlucHV0LnNpdGVOYW1lLDxicj4gIHNpdGVEb21haW4gOiBzdGVwcy5Db250YWN0SW5wdXRQYXJhbXMuaW5wdXQuc2l0ZURvbWFpbiw8YnI+ICBhcGlLZXkgOiBzdGVwcy5Db250YWN0SW5wdXRQYXJhbXMuaW5wdXQuYXBpS2V5LDxicj4gIHR5cGUgOiBzdGVwcy5Db250YWN0SW5wdXRQYXJhbXMuaW5wdXQudHlwZTxicj59Ozxicj48YnI+ZG9uZShwYXJhbSk7PC9wcmU+PGJyPjxiPlJBVyBKU09OOjwvYj48YnI+PGJyPjxwcmU+ezxicj4gICdvblN1Y2Nlc3MnOiBbPGJyPiAgICAnQ3JlYXRlSHVic3BvdENvbnRhY3QnPGJyPiAgXSw8YnI+ICAnb25GYWlsdXJlJzogW10sPGJyPiAgJ25hbWUnOiAnQ3JlYXRlSHVic3BvdENvbnRhY3RQYXJhbScsPGJyPiAgJ3R5cGUnOiAnc2NyaXB0Jyw8YnI+ICAncHJvcGVydGllcyc6IHs8YnI+ICAgICdib2R5JzogJ2xldCBwYXJhbSA9IHtcbiAgdXJsIDogc3RlcHMuSHViU3BvdElucHV0LnVybCxcbiAgaGVhZGVycyA6IHN0ZXBzLkN1c3RvbWVyc1BhcmFtLmh1YnNwb3RBdXRoLFxuICBib2R5IDogc3RlcHMuSHViU3BvdElucHV0LmlucHV0cyxcbiAgc2l0ZU5hbWUgOiBzdGVwcy5Db250YWN0SW5wdXRQYXJhbXMuaW5wdXQuc2l0ZU5hbWUsXG4gIHNpdGVEb21haW4gOiBzdGVwcy5Db250YWN0SW5wdXRQYXJhbXMuaW5wdXQuc2l0ZURvbWFpbixcbiAgYXBpS2V5IDogc3RlcHMuQ29udGFjdElucHV0UGFyYW1zLmlucHV0LmFwaUtleSxcbiAgdHlwZSA6IHN0ZXBzLkNvbnRhY3RJbnB1dFBhcmFtcy5pbnB1dC50eXBlXG59O1xuXG5kb25lKHBhcmFtKTsnPGJyPiAgfTxicj59PC9wcmU+PC9ib2R5PjwvaHRtbD4='));document.close();" "JavaScript:<br><pre>let param = {<br>  url : steps.HubSpotInput.url,<br>  headers : steps.CustomersParam.hubspotAuth,<br>  body : steps.HubSpotInput.inputs,<br>  siteName : steps.ContactInputParams.input.siteName,<br>  siteDomain : steps.ContactInputParams.input.siteDomain,<br>  apiKey : steps.ContactInputParams.input.apiKey,<br>  type : steps.ContactInputParams.input.type<br>};<br><br>done(param);</pre>"
            click step-051 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPlVwZGF0ZUh1YnNwb3RDb250YWN0UGFyYW08L3RpdGxlPjwvaGVhZD48Ym9keT48Yj5KYXZhU2NyaXB0OjwvYj48YnI+PGJyPjxwcmU+bGV0IHBhcmFtID0gezxicj4gIHVybCA6IHN0ZXBzLkh1YlNwb3RJbnB1dC51cmwsPGJyPiAgaGVhZGVycyA6IHN0ZXBzLkN1c3RvbWVyc1BhcmFtLmh1YnNwb3RBdXRoLDxicj4gIGJvZHkgOiBzdGVwcy5IdWJTcG90SW5wdXQuaW5wdXRzLDxicj4gIHNpdGVOYW1lIDogc3RlcHMuQ29udGFjdElucHV0UGFyYW1zLmlucHV0LnNpdGVOYW1lLDxicj4gIHNpdGVEb21haW4gOiBzdGVwcy5Db250YWN0SW5wdXRQYXJhbXMuaW5wdXQuc2l0ZURvbWFpbiw8YnI+ICAgYXBpS2V5IDogc3RlcHMuQ29udGFjdElucHV0UGFyYW1zLmlucHV0LmFwaUtleSw8YnI+ICB0eXBlIDogc3RlcHMuQ29udGFjdElucHV0UGFyYW1zLmlucHV0LnR5cGU8YnI+fTs8YnI+PGJyPmRvbmUocGFyYW0pOzwvcHJlPjxicj48Yj5SQVcgSlNPTjo8L2I+PGJyPjxicj48cHJlPns8YnI+ICAnb25TdWNjZXNzJzogWzxicj4gICAgJ1VwZGF0ZUh1YnNwb3RDb250YWN0Jzxicj4gIF0sPGJyPiAgJ29uRmFpbHVyZSc6IFtdLDxicj4gICduYW1lJzogJ1VwZGF0ZUh1YnNwb3RDb250YWN0UGFyYW0nLDxicj4gICd0eXBlJzogJ3NjcmlwdCcsPGJyPiAgJ3Byb3BlcnRpZXMnOiB7PGJyPiAgICAnYm9keSc6ICdsZXQgcGFyYW0gPSB7XG4gIHVybCA6IHN0ZXBzLkh1YlNwb3RJbnB1dC51cmwsXG4gIGhlYWRlcnMgOiBzdGVwcy5DdXN0b21lcnNQYXJhbS5odWJzcG90QXV0aCxcbiAgYm9keSA6IHN0ZXBzLkh1YlNwb3RJbnB1dC5pbnB1dHMsXG4gIHNpdGVOYW1lIDogc3RlcHMuQ29udGFjdElucHV0UGFyYW1zLmlucHV0LnNpdGVOYW1lLFxuICBzaXRlRG9tYWluIDogc3RlcHMuQ29udGFjdElucHV0UGFyYW1zLmlucHV0LnNpdGVEb21haW4sXG4gICBhcGlLZXkgOiBzdGVwcy5Db250YWN0SW5wdXRQYXJhbXMuaW5wdXQuYXBpS2V5LFxuICB0eXBlIDogc3RlcHMuQ29udGFjdElucHV0UGFyYW1zLmlucHV0LnR5cGVcbn07XG5cbmRvbmUocGFyYW0pOyc8YnI+ICB9PGJyPn08L3ByZT48L2JvZHk+PC9odG1sPg=='));document.close();" "JavaScript:<br><pre>let param = {<br>  url : steps.HubSpotInput.url,<br>  headers : steps.CustomersParam.hubspotAuth,<br>  body : steps.HubSpotInput.inputs,<br>  siteName : steps.ContactInputParams.input.siteName,<br>  siteDomain : steps.ContactInputParams.input.siteDomain,<br>   apiKey : steps.ContactInputParams.input.apiKey,<br>  type : steps.ContactInputParams.input.type<br>};<br><br>done(param);</pre>"
            click step-052 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkNyZWF0ZUh1YnNwb3RDb250YWN0PC90aXRsZT48L2hlYWQ+PGJvZHk+PGI+T3RoZXIgKGZvcm11bGEpOjwvYj48YnI+PGJyPjxwcmU+ICBmb3JtdWxhSWQgOiAzMTMzMzxicj4gICAgICAgYXJncyA6ICR7c3RlcHMuQ3JlYXRlSHVic3BvdENvbnRhY3RQYXJhbX08L3ByZT48YnI+PGI+UkFXIEpTT046PC9iPjxicj48YnI+PHByZT57PGJyPiAgJ29uU3VjY2Vzcyc6IFs8YnI+ICAgICdDcmVhdGVIdWJTUG90RmlsdGVyJzxicj4gIF0sPGJyPiAgJ29uRmFpbHVyZSc6IFtdLDxicj4gICduYW1lJzogJ0NyZWF0ZUh1YnNwb3RDb250YWN0Jyw8YnI+ICAndHlwZSc6ICdmb3JtdWxhJyw8YnI+ICAncHJvcGVydGllcyc6IHs8YnI+ICAgICdmb3JtdWxhSWQnOiAnMzEzMzMnLDxicj4gICAgJ2FyZ3MnOiAnJHtzdGVwcy5DcmVhdGVIdWJzcG90Q29udGFjdFBhcmFtfSc8YnI+ICB9PGJyPn08L3ByZT48L2JvZHk+PC9odG1sPg=='));document.close();" "Other (formula):<br><pre>  formulaId : 31333<br>       args : ${steps.CreateHubspotContactParam}</pre>"
            click step-053 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPlVwZGF0ZUh1YnNwb3RDb250YWN0PC90aXRsZT48L2hlYWQ+PGJvZHk+PGI+T3RoZXIgKGZvcm11bGEpOjwvYj48YnI+PGJyPjxwcmU+ICBmb3JtdWxhSWQgOiAzMTMzMzxicj4gICAgICAgYXJncyA6ICR7c3RlcHMuVXBkYXRlSHVic3BvdENvbnRhY3RQYXJhbX08L3ByZT48YnI+PGI+UkFXIEpTT046PC9iPjxicj48YnI+PHByZT57PGJyPiAgJ29uU3VjY2Vzcyc6IFs8YnI+ICAgICdVcGRhdGVIdWJTcG90RmlsdGVyJzxicj4gIF0sPGJyPiAgJ29uRmFpbHVyZSc6IFtdLDxicj4gICduYW1lJzogJ1VwZGF0ZUh1YnNwb3RDb250YWN0Jyw8YnI+ICAndHlwZSc6ICdmb3JtdWxhJyw8YnI+ICAncHJvcGVydGllcyc6IHs8YnI+ICAgICdmb3JtdWxhSWQnOiAnMzEzMzMnLDxicj4gICAgJ2FyZ3MnOiAnJHtzdGVwcy5VcGRhdGVIdWJzcG90Q29udGFjdFBhcmFtfSc8YnI+ICB9PGJyPn08L3ByZT48L2JvZHk+PC9odG1sPg=='));document.close();" "Other (formula):<br><pre>  formulaId : 31333<br>       args : ${steps.UpdateHubspotContactParam}</pre>"
            click step-054 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkNyZWF0ZUh1YlNQb3RGaWx0ZXI8L3RpdGxlPjwvaGVhZD48Ym9keT48Yj5KYXZhU2NyaXB0OjwvYj48YnI+PGJyPjxwcmU+aWYoc3RlcHMuQ3JlYXRlSHVic3BvdENvbnRhY3QuY2Jfc3RhdHVzPT0gJ3N1Y2Nlc3MnKSB7PGJyPiAgZG9uZSh0cnVlKTs8YnI+fWVsc2Ugezxicj4gIGRvbmUoZmFsc2UpOzxicj59PC9wcmU+PGJyPjxiPlJBVyBKU09OOjwvYj48YnI+PGJyPjxwcmU+ezxicj4gICdvblN1Y2Nlc3MnOiBbPGJyPiAgICAnVXBkYXRlVFBBZnRlckNyZWF0ZSc8YnI+ICBdLDxicj4gICdvbkZhaWx1cmUnOiBbPGJyPiAgICAnU3luY0NyZWF0ZUVycm9yJzxicj4gIF0sPGJyPiAgJ25hbWUnOiAnQ3JlYXRlSHViU1BvdEZpbHRlcicsPGJyPiAgJ3R5cGUnOiAnZmlsdGVyJyw8YnI+ICAncHJvcGVydGllcyc6IHs8YnI+ICAgICdib2R5JzogJ2lmKHN0ZXBzLkNyZWF0ZUh1YnNwb3RDb250YWN0LmNiX3N0YXR1cz09IFwnc3VjY2Vzc1wnKSB7XG4gIGRvbmUodHJ1ZSk7XG59ZWxzZSB7XG4gIGRvbmUoZmFsc2UpO1xufSc8YnI+ICB9PGJyPn08L3ByZT48L2JvZHk+PC9odG1sPg=='));document.close();" "JavaScript:<br><pre>if(steps.CreateHubspotContact.cb_status== 'success') {<br>  done(true);<br>}else {<br>  done(false);<br>}</pre>"
            click step-055 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPlVwZGF0ZUh1YlNwb3RGaWx0ZXI8L3RpdGxlPjwvaGVhZD48Ym9keT48Yj5KYXZhU2NyaXB0OjwvYj48YnI+PGJyPjxwcmU+aWYoc3RlcHMuVXBkYXRlSHVic3BvdENvbnRhY3QuY2Jfc3RhdHVzID09ICdzdWNjZXNzJykgezxicj4gIGRvbmUodHJ1ZSk7PGJyPn1lbHNlIHs8YnI+ICBkb25lKGZhbHNlKTs8YnI+fTwvcHJlPjxicj48Yj5SQVcgSlNPTjo8L2I+PGJyPjxicj48cHJlPns8YnI+ICAnb25TdWNjZXNzJzogWzxicj4gICAgJ1VwZGF0ZVRQQWZ0ZXJVcGRhdGUnPGJyPiAgXSw8YnI+ICAnb25GYWlsdXJlJzogWzxicj4gICAgJ1N5bmNVcGRhdGVFcnJvcic8YnI+ICBdLDxicj4gICduYW1lJzogJ1VwZGF0ZUh1YlNwb3RGaWx0ZXInLDxicj4gICd0eXBlJzogJ2ZpbHRlcicsPGJyPiAgJ3Byb3BlcnRpZXMnOiB7PGJyPiAgICAnYm9keSc6ICdpZihzdGVwcy5VcGRhdGVIdWJzcG90Q29udGFjdC5jYl9zdGF0dXMgPT0gXCdzdWNjZXNzXCcpIHtcbiAgZG9uZSh0cnVlKTtcbn1lbHNlIHtcbiAgZG9uZShmYWxzZSk7XG59Jzxicj4gIH08YnI+fTwvcHJlPjwvYm9keT48L2h0bWw+'));document.close();" "JavaScript:<br><pre>if(steps.UpdateHubspotContact.cb_status == 'success') {<br>  done(true);<br>}else {<br>  done(false);<br>}</pre>"
            click step-056 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPlVwZGF0ZVRQQWZ0ZXJDcmVhdGU8L3RpdGxlPjwvaGVhZD48Ym9keT48Yj5KYXZhU2NyaXB0OjwvYj48YnI+PGJyPjxwcmU+bGV0IGNvbnRhY3QgPSBzdGVwcy5DcmVhdGVIdWJzcG90Q29udGFjdC5kYXRhOzxicj5sZXQgc3Vic2NyaXB0aW9uID0gc3RlcHMuSHViRGF0YS5zdWJzY3JpcHRpb247PGJyPmxldCBjdXN0b21lciA9IHN0ZXBzLkh1YkRhdGEuY3VzdG9tZXI7PGJyPnN0ZXBzLlN5bmNMb2cuc3luY0NvdW50LnNDb3VudCA9IHN0ZXBzLlN5bmNMb2cuc3luY0NvdW50LnNDb3VudCArMTs8YnI+PGJyPmxldCBvbGRfcmVzb3VyY2UgPSB7PGJyPiAgICBjdXN0b21lcjogY3VzdG9tZXIsPGJyPiAgICBodWJzcG90OiB7PGJyPjxicj4gICAgfTxicj59Ozxicj48YnI+aWYgKHN1YnNjcmlwdGlvbiAhPT0gdW5kZWZpbmVkKSB7PGJyPiAgICBvbGRfcmVzb3VyY2UuaHVic3BvdC5zdWJzY3JpcHRpb25faWQgPSBzdWJzY3JpcHRpb24uaWQ7PGJyPiAgICBvbGRfcmVzb3VyY2UuaHVic3BvdC5odWJzcG90X3N1Yl9zdGF0dXMgPSBzdWJzY3JpcHRpb24uc3RhdHVzOzxicj59PGJyPnN0ZXBzLkh1YlNwb3RJbnB1dC50cC50aGlyZF9wYXJ0eV9lbnRpdHlfaWQgPSBjb250YWN0LnZpZDs8YnI+c3RlcHMuSHViU3BvdElucHV0LnRwLm9sZF9yZXNvdXJjZSA9IEpTT04uc3RyaW5naWZ5KG9sZF9yZXNvdXJjZSk7PGJyPjxicj48YnI+bGV0IHBhcmFtID0gezxicj4gIDxicj4gIHVybCA6IHN0ZXBzLkNCU3Vic2NyaXB0aW9uUGFyYW0uY2JlbVVwZGF0ZS51cmwsPGJyPiAgaGVhZGVycyA6IHN0ZXBzLkNCU3Vic2NyaXB0aW9uUGFyYW0uY2JlbVVwZGF0ZS5oZWFkZXJzLDxicj4gIHF1ZXJ5IDogc3RlcHMuSHViU3BvdElucHV0LnRwLDxicj4gIHNpdGVOYW1lIDogc3RlcHMuQ29udGFjdElucHV0UGFyYW1zLmlucHV0LnNpdGVOYW1lLDxicj4gIHNpdGVEb21haW4gOiBzdGVwcy5Db250YWN0SW5wdXRQYXJhbXMuaW5wdXQuc2l0ZURvbWFpbiw8YnI+ICBhcGlLZXkgOiBzdGVwcy5Db250YWN0SW5wdXRQYXJhbXMuaW5wdXQuYXBpS2V5LDxicj4gIHR5cGUgOiBzdGVwcy5Db250YWN0SW5wdXRQYXJhbXMuaW5wdXQudHlwZTxicj4gIDxicj59PGJyPjxicj5kb25lKHBhcmFtKTs8L3ByZT48YnI+PGI+UkFXIEpTT046PC9iPjxicj48YnI+PHByZT57PGJyPiAgJ29uU3VjY2Vzcyc6IFs8YnI+ICAgICdVcGRhdGVUUE1hcHBpbmdzJzxicj4gIF0sPGJyPiAgJ29uRmFpbHVyZSc6IFtdLDxicj4gICduYW1lJzogJ1VwZGF0ZVRQQWZ0ZXJDcmVhdGUnLDxicj4gICd0eXBlJzogJ3NjcmlwdCcsPGJyPiAgJ3Byb3BlcnRpZXMnOiB7PGJyPiAgICAnYm9keSc6ICdsZXQgY29udGFjdCA9IHN0ZXBzLkNyZWF0ZUh1YnNwb3RDb250YWN0LmRhdGE7XG5sZXQgc3Vic2NyaXB0aW9uID0gc3RlcHMuSHViRGF0YS5zdWJzY3JpcHRpb247XG5sZXQgY3VzdG9tZXIgPSBzdGVwcy5IdWJEYXRhLmN1c3RvbWVyO1xuc3RlcHMuU3luY0xvZy5zeW5jQ291bnQuc0NvdW50ID0gc3RlcHMuU3luY0xvZy5zeW5jQ291bnQuc0NvdW50ICsxO1xuXG5sZXQgb2xkX3Jlc291cmNlID0ge1xuICAgIGN1c3RvbWVyOiBjdXN0b21lcixcbiAgICBodWJzcG90OiB7XG5cbiAgICB9XG59O1xuXG5pZiAoc3Vic2NyaXB0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICBvbGRfcmVzb3VyY2UuaHVic3BvdC5zdWJzY3JpcHRpb25faWQgPSBzdWJzY3JpcHRpb24uaWQ7XG4gICAgb2xkX3Jlc291cmNlLmh1YnNwb3QuaHVic3BvdF9zdWJfc3RhdHVzID0gc3Vic2NyaXB0aW9uLnN0YXR1cztcbn1cbnN0ZXBzLkh1YlNwb3RJbnB1dC50cC50aGlyZF9wYXJ0eV9lbnRpdHlfaWQgPSBjb250YWN0LnZpZDtcbnN0ZXBzLkh1YlNwb3RJbnB1dC50cC5vbGRfcmVzb3VyY2UgPSBKU09OLnN0cmluZ2lmeShvbGRfcmVzb3VyY2UpO1xuXG5cbmxldCBwYXJhbSA9IHtcbiAgXG4gIHVybCA6IHN0ZXBzLkNCU3Vic2NyaXB0aW9uUGFyYW0uY2JlbVVwZGF0ZS51cmwsXG4gIGhlYWRlcnMgOiBzdGVwcy5DQlN1YnNjcmlwdGlvblBhcmFtLmNiZW1VcGRhdGUuaGVhZGVycyxcbiAgcXVlcnkgOiBzdGVwcy5IdWJTcG90SW5wdXQudHAsXG4gIHNpdGVOYW1lIDogc3RlcHMuQ29udGFjdElucHV0UGFyYW1zLmlucHV0LnNpdGVOYW1lLFxuICBzaXRlRG9tYWluIDogc3RlcHMuQ29udGFjdElucHV0UGFyYW1zLmlucHV0LnNpdGVEb21haW4sXG4gIGFwaUtleSA6IHN0ZXBzLkNvbnRhY3RJbnB1dFBhcmFtcy5pbnB1dC5hcGlLZXksXG4gIHR5cGUgOiBzdGVwcy5Db250YWN0SW5wdXRQYXJhbXMuaW5wdXQudHlwZVxuICBcbn1cblxuZG9uZShwYXJhbSk7Jzxicj4gIH08YnI+fTwvcHJlPjwvYm9keT48L2h0bWw+'));document.close();" "JavaScript:<br><pre>let contact = steps.CreateHubspotContact.data;<br>let subscription = steps.HubData.subscription;<br>let customer = steps.HubData.customer;<br>steps.SyncLog.syncCount.sCount = steps.SyncLog.syncCount.sCount +1;<br><br>let old_resource = {<br>    customer: customer,<br>    hubspot: {<br><br>    }<br>};<br><br>if (subscription !== undefined) {<br>    old_resource.hubspot.subscription_id = subscription.id;<br>    old_resource.hubspot.hubspot_sub_status = subscription.status;<br>}<br>steps.HubSpotInput.tp.third_party_entity_id = contact.vid;<br>steps.HubSpotInput.tp.old_resource = JSON.stringify(old_resource);<br><br><br>let param = {<br>  <br>  url : steps.CBSubscriptionParam.cbemUpdate.url,<br>  headers : steps.CBSubscriptionParam.cbemUpdate.headers,<br>  query : steps.HubSpotInput.tp,<br>  siteName : steps.ContactInputParams.input.siteName,<br>  siteDomain : steps.ContactInputParams.input.siteDomain,<br>  apiKey : steps.ContactInputParams.input.apiKey,<br>  type : steps.ContactInputParams.input.type<br>  <br>}<br><br>done(param);</pre>"
            click step-057 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPlN5bmNDcmVhdGVFcnJvcjwvdGl0bGU+PC9oZWFkPjxib2R5PjxiPkphdmFTY3JpcHQ6PC9iPjxicj48YnI+PHByZT5sZXQgY3VzdG9tZXIgPSBzdGVwcy5IdWJEYXRhLmN1c3RvbWVyOzxicj5sZXQgYXBpS2V5PXN0ZXBzLkNvbnRhY3RJbnB1dFBhcmFtcy5pbnB1dC5hcGlLZXk7PGJyPmxldCBzaXRlTmFtZT1zdGVwcy5Db250YWN0SW5wdXRQYXJhbXMuaW5wdXQuc2l0ZU5hbWU7PGJyPmxldCBzaXRlRG9tYWluPXN0ZXBzLkNvbnRhY3RJbnB1dFBhcmFtcy5pbnB1dC5zaXRlRG9tYWluOzxicj5sZXQgdHlwZSA9IHN0ZXBzLkNvbnRhY3RJbnB1dFBhcmFtcy5pbnB1dC50eXBlOzxicj5sZXQgcGFzc3dvcmQgPSAnJzs8YnI+PGJyPnN0ZXBzLlN5bmNMb2cuc3luY0NvdW50LmVDb3VudCA9IHN0ZXBzLlN5bmNMb2cuc3luY0NvdW50LmVDb3VudCArMTs8YnI+IGxldCBjaGFyZ2ViZWVfZGF0YV91cmwgPSAnaHR0cHM6Ly8nK3NpdGVOYW1lKycuJytzaXRlRG9tYWluKycvYWRtaW4tY29uc29sZS9jdXN0b21lcnMvJytjdXN0b21lci5pZDs8YnI+IGxldCBjYl9saW5rID0gJzxzcGFuPjw8L3NwYW4+YSBocmVmPScnK2NoYXJnZWJlZV9kYXRhX3VybCsnJyB0YXJnZXQ9J2JsYW5rJzxzcGFuPj48L3NwYW4+JytjdXN0b21lci5pZCsnPHNwYW4+PDwvc3Bhbj4vYTxzcGFuPj48L3NwYW4+IEZhaWxlZCB0byBjcmVhdGUgYSBjb250YWN0IGluIEh1YlNwb3Rcbic7PGJyPiA8YnI+IGxldCBkYXRhID0gezxicj4gICB1cmw6ICdodHRwczovLycgKyBzaXRlTmFtZSArICcuJyArIHNpdGVEb21haW4gKyAnL2FwaS92Mi90aGlyZF9wYXJ0eV9lbnRpdHlfbWFwcGluZ3MvdXBkYXRlX2VudGl0eScsPGJyPiAgaGVhZGVyczp7PGJyPiAgICAgICAgQXV0aG9yaXphdGlvbjogJ0Jhc2ljICcgKyBDRS5iNjQoYXBpS2V5ICsgJzonICsgcGFzc3dvcmQpPGJyPiAgICAgIH0sPGJyPiAgICAgIHF1ZXJ5Ons8YnI+ICAgICAgICBpbnRlZ3JhdGlvbl9uYW1lOiB0eXBlLDxicj4gICAgICAgIGVudGl0eV9pZDogY3VzdG9tZXIuaWQsPGJyPiAgICAgICAgZW50aXR5X3R5cGU6ICdjdXN0b21lcicsPGJyPiAgICAgICAgc3RhdHVzOiAndXBkYXRlX2ZhaWxlZCcsPGJyPiAgICAgICAgZXJyb3JfbWVzc2FnZTogY2JfbGluazxicj4gICAgICB9LDxicj4gICAgICBzaXRlTmFtZSA6IHN0ZXBzLkNvbnRhY3RJbnB1dFBhcmFtcy5pbnB1dC5zaXRlTmFtZSw8YnI+ICBzaXRlRG9tYWluIDogc3RlcHMuQ29udGFjdElucHV0UGFyYW1zLmlucHV0LnNpdGVEb21haW4sPGJyPiAgYXBpS2V5IDogc3RlcHMuQ29udGFjdElucHV0UGFyYW1zLmlucHV0LmFwaUtleSw8YnI+ICB0eXBlIDogc3RlcHMuQ29udGFjdElucHV0UGFyYW1zLmlucHV0LnR5cGU8YnI+ICA8YnI+fTs8YnI+PGJyPmRvbmUoZGF0YSk7PC9wcmU+PGJyPjxiPlJBVyBKU09OOjwvYj48YnI+PGJyPjxwcmU+ezxicj4gICdvblN1Y2Nlc3MnOiBbPGJyPiAgICAnVXBkYXRlVFBNYXBwaW5nRXJyb3IzJzxicj4gIF0sPGJyPiAgJ29uRmFpbHVyZSc6IFtdLDxicj4gICduYW1lJzogJ1N5bmNDcmVhdGVFcnJvcicsPGJyPiAgJ3R5cGUnOiAnc2NyaXB0Jyw8YnI+ICAncHJvcGVydGllcyc6IHs8YnI+ICAgICdib2R5JzogJ2xldCBjdXN0b21lciA9IHN0ZXBzLkh1YkRhdGEuY3VzdG9tZXI7XG5sZXQgYXBpS2V5PXN0ZXBzLkNvbnRhY3RJbnB1dFBhcmFtcy5pbnB1dC5hcGlLZXk7XG5sZXQgc2l0ZU5hbWU9c3RlcHMuQ29udGFjdElucHV0UGFyYW1zLmlucHV0LnNpdGVOYW1lO1xubGV0IHNpdGVEb21haW49c3RlcHMuQ29udGFjdElucHV0UGFyYW1zLmlucHV0LnNpdGVEb21haW47XG5sZXQgdHlwZSA9IHN0ZXBzLkNvbnRhY3RJbnB1dFBhcmFtcy5pbnB1dC50eXBlO1xubGV0IHBhc3N3b3JkID0gXCdcJztcblxuc3RlcHMuU3luY0xvZy5zeW5jQ291bnQuZUNvdW50ID0gc3RlcHMuU3luY0xvZy5zeW5jQ291bnQuZUNvdW50ICsxO1xuIGxldCBjaGFyZ2ViZWVfZGF0YV91cmwgPSBcJ2h0dHBzOi8vXCcrc2l0ZU5hbWUrXCcuXCcrc2l0ZURvbWFpbitcJy9hZG1pbi1jb25zb2xlL2N1c3RvbWVycy9cJytjdXN0b21lci5pZDtcbiBsZXQgY2JfbGluayA9IFwnPHNwYW4+PDwvc3Bhbj5hIGhyZWY9J1wnK2NoYXJnZWJlZV9kYXRhX3VybCtcJycgdGFyZ2V0PSdibGFuayc8c3Bhbj4+PC9zcGFuPlwnK2N1c3RvbWVyLmlkK1wnPHNwYW4+PDwvc3Bhbj4vYTxzcGFuPj48L3NwYW4+IEZhaWxlZCB0byBjcmVhdGUgYSBjb250YWN0IGluIEh1YlNwb3RcXG5cJztcbiBcbiBsZXQgZGF0YSA9IHtcbiAgIHVybDogXCdodHRwczovL1wnICsgc2l0ZU5hbWUgKyBcJy5cJyArIHNpdGVEb21haW4gKyBcJy9hcGkvdjIvdGhpcmRfcGFydHlfZW50aXR5X21hcHBpbmdzL3VwZGF0ZV9lbnRpdHlcJyxcbiAgaGVhZGVyczp7XG4gICAgICAgIEF1dGhvcml6YXRpb246IFwnQmFzaWMgXCcgKyBDRS5iNjQoYXBpS2V5ICsgXCc6XCcgKyBwYXNzd29yZClcbiAgICAgIH0sXG4gICAgICBxdWVyeTp7XG4gICAgICAgIGludGVncmF0aW9uX25hbWU6IHR5cGUsXG4gICAgICAgIGVudGl0eV9pZDogY3VzdG9tZXIuaWQsXG4gICAgICAgIGVudGl0eV90eXBlOiBcJ2N1c3RvbWVyXCcsXG4gICAgICAgIHN0YXR1czogXCd1cGRhdGVfZmFpbGVkXCcsXG4gICAgICAgIGVycm9yX21lc3NhZ2U6IGNiX2xpbmtcbiAgICAgIH0sXG4gICAgICBzaXRlTmFtZSA6IHN0ZXBzLkNvbnRhY3RJbnB1dFBhcmFtcy5pbnB1dC5zaXRlTmFtZSxcbiAgc2l0ZURvbWFpbiA6IHN0ZXBzLkNvbnRhY3RJbnB1dFBhcmFtcy5pbnB1dC5zaXRlRG9tYWluLFxuICBhcGlLZXkgOiBzdGVwcy5Db250YWN0SW5wdXRQYXJhbXMuaW5wdXQuYXBpS2V5LFxuICB0eXBlIDogc3RlcHMuQ29udGFjdElucHV0UGFyYW1zLmlucHV0LnR5cGVcbiAgXG59O1xuXG5kb25lKGRhdGEpOyc8YnI+ICB9PGJyPn08L3ByZT48L2JvZHk+PC9odG1sPg=='));document.close();" "JavaScript:<br><pre>let customer = steps.HubData.customer;<br>let apiKey=steps.ContactInputParams.input.apiKey;<br>let siteName=steps.ContactInputParams.input.siteName;<br>let siteDomain=steps.ContactInputParams.input.siteDomain;<br>let type = steps.ContactInputParams.input.type;<br>let password = '';<br><br>steps.SyncLog.syncCount.eCount = steps.SyncLog.syncCount.eCount +1;<br> let chargebee_data_url = 'https://'+siteName+'.'+siteDomain+'/admin-console/customers/'+customer.id;<br> let cb_link = '<span><</span>a href=''+chargebee_data_url+'' target='blank'<span>></span>'+customer.id+'<span><</span>/a<span>></span> Failed to create a contact in HubSpot\n';<br> <br> let data = {<br>   url: 'https://' + siteName + '.' + siteDomain + '/api/v2/third_party_entity_mappings/update_entity',<br>  headers:{<br>        Authorization: 'Basic ' + CE.b64(apiKey + ':' + password)<br>      },<br>      query:{<br>        integration_name: type,<br>        entity_id: customer.id,<br>        entity_type: 'customer',<br>        status: 'update_failed',<br>        error_message: cb_link<br>      },<br>      siteName : steps.ContactInputParams.input.siteName,<br>  siteDomain : steps.ContactInputParams.input.siteDomain,<br>  apiKey : steps.ContactInputParams.input.apiKey,<br>  type : steps.ContactInputParams.input.type<br>  <br>};<br><br>done(data);</pre>"
            click step-058 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPlVwZGF0ZVRQQWZ0ZXJVcGRhdGU8L3RpdGxlPjwvaGVhZD48Ym9keT48Yj5KYXZhU2NyaXB0OjwvYj48YnI+PGJyPjxwcmU+bGV0IGNvbnRhY3QgPSBzdGVwcy5DQkRhdGEuaHVic3BvdC5jb250YWN0Ozxicj5sZXQgc3Vic2NyaXB0aW9uID0gc3RlcHMuSHViRGF0YS5zdWJzY3JpcHRpb247PGJyPmxldCBjdXN0b21lciA9IHN0ZXBzLkh1YkRhdGEuY3VzdG9tZXI7PGJyPnN0ZXBzLlN5bmNMb2cuc3luY0NvdW50LnNDb3VudCA9IHN0ZXBzLlN5bmNMb2cuc3luY0NvdW50LnNDb3VudCArMTs8YnI+bGV0IG9sZF9yZXNvdXJjZSA9IHs8YnI+ICAgIGN1c3RvbWVyOiBjdXN0b21lciw8YnI+ICAgIGh1YnNwb3Q6IHs8YnI+PGJyPiAgICB9PGJyPn07PGJyPjxicj48YnI+aWYgKHN1YnNjcmlwdGlvbiAhPT0gdW5kZWZpbmVkKSB7PGJyPiAgICBvbGRfcmVzb3VyY2UuaHVic3BvdC5zdWJzY3JpcHRpb25faWQgPSBzdWJzY3JpcHRpb24uaWQ7PGJyPiAgICBvbGRfcmVzb3VyY2UuaHVic3BvdC5odWJzcG90X3N1Yl9zdGF0dXMgPSBzdWJzY3JpcHRpb24uc3RhdHVzOzxicj59PGJyPnN0ZXBzLkh1YlNwb3RJbnB1dC50cC50aGlyZF9wYXJ0eV9lbnRpdHlfaWQgPSAgY29udGFjdC52aWQ7PGJyPnN0ZXBzLkh1YlNwb3RJbnB1dC50cC5vbGRfcmVzb3VyY2UgPSBKU09OLnN0cmluZ2lmeShvbGRfcmVzb3VyY2UpOzxicj48YnI+PGJyPmxldCBwYXJhbSA9IHs8YnI+ICA8YnI+ICB1cmwgOiBzdGVwcy5DQlN1YnNjcmlwdGlvblBhcmFtLmNiZW1VcGRhdGUudXJsLDxicj4gIGhlYWRlcnMgOiBzdGVwcy5DQlN1YnNjcmlwdGlvblBhcmFtLmNiZW1VcGRhdGUuaGVhZGVycyw8YnI+ICBxdWVyeSA6IHN0ZXBzLkh1YlNwb3RJbnB1dC50cCw8YnI+ICBzaXRlTmFtZSA6IHN0ZXBzLkNvbnRhY3RJbnB1dFBhcmFtcy5pbnB1dC5zaXRlTmFtZSw8YnI+ICBzaXRlRG9tYWluIDogc3RlcHMuQ29udGFjdElucHV0UGFyYW1zLmlucHV0LnNpdGVEb21haW4sPGJyPiAgYXBpS2V5IDogc3RlcHMuQ29udGFjdElucHV0UGFyYW1zLmlucHV0LmFwaUtleSw8YnI+ICB0eXBlIDogc3RlcHMuQ29udGFjdElucHV0UGFyYW1zLmlucHV0LnR5cGU8YnI+ICA8YnI+fTxicj48YnI+ZG9uZShwYXJhbSk7PC9wcmU+PGJyPjxiPlJBVyBKU09OOjwvYj48YnI+PGJyPjxwcmU+ezxicj4gICdvblN1Y2Nlc3MnOiBbPGJyPiAgICAnVXBkYXRlVFBNYXBwaW5nJzxicj4gIF0sPGJyPiAgJ29uRmFpbHVyZSc6IFtdLDxicj4gICduYW1lJzogJ1VwZGF0ZVRQQWZ0ZXJVcGRhdGUnLDxicj4gICd0eXBlJzogJ3NjcmlwdCcsPGJyPiAgJ3Byb3BlcnRpZXMnOiB7PGJyPiAgICAnYm9keSc6ICdsZXQgY29udGFjdCA9IHN0ZXBzLkNCRGF0YS5odWJzcG90LmNvbnRhY3Q7XG5sZXQgc3Vic2NyaXB0aW9uID0gc3RlcHMuSHViRGF0YS5zdWJzY3JpcHRpb247XG5sZXQgY3VzdG9tZXIgPSBzdGVwcy5IdWJEYXRhLmN1c3RvbWVyO1xuc3RlcHMuU3luY0xvZy5zeW5jQ291bnQuc0NvdW50ID0gc3RlcHMuU3luY0xvZy5zeW5jQ291bnQuc0NvdW50ICsxO1xubGV0IG9sZF9yZXNvdXJjZSA9IHtcbiAgICBjdXN0b21lcjogY3VzdG9tZXIsXG4gICAgaHVic3BvdDoge1xuXG4gICAgfVxufTtcblxuXG5pZiAoc3Vic2NyaXB0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICBvbGRfcmVzb3VyY2UuaHVic3BvdC5zdWJzY3JpcHRpb25faWQgPSBzdWJzY3JpcHRpb24uaWQ7XG4gICAgb2xkX3Jlc291cmNlLmh1YnNwb3QuaHVic3BvdF9zdWJfc3RhdHVzID0gc3Vic2NyaXB0aW9uLnN0YXR1cztcbn1cbnN0ZXBzLkh1YlNwb3RJbnB1dC50cC50aGlyZF9wYXJ0eV9lbnRpdHlfaWQgPSAgY29udGFjdC52aWQ7XG5zdGVwcy5IdWJTcG90SW5wdXQudHAub2xkX3Jlc291cmNlID0gSlNPTi5zdHJpbmdpZnkob2xkX3Jlc291cmNlKTtcblxuXG5sZXQgcGFyYW0gPSB7XG4gIFxuICB1cmwgOiBzdGVwcy5DQlN1YnNjcmlwdGlvblBhcmFtLmNiZW1VcGRhdGUudXJsLFxuICBoZWFkZXJzIDogc3RlcHMuQ0JTdWJzY3JpcHRpb25QYXJhbS5jYmVtVXBkYXRlLmhlYWRlcnMsXG4gIHF1ZXJ5IDogc3RlcHMuSHViU3BvdElucHV0LnRwLFxuICBzaXRlTmFtZSA6IHN0ZXBzLkNvbnRhY3RJbnB1dFBhcmFtcy5pbnB1dC5zaXRlTmFtZSxcbiAgc2l0ZURvbWFpbiA6IHN0ZXBzLkNvbnRhY3RJbnB1dFBhcmFtcy5pbnB1dC5zaXRlRG9tYWluLFxuICBhcGlLZXkgOiBzdGVwcy5Db250YWN0SW5wdXRQYXJhbXMuaW5wdXQuYXBpS2V5LFxuICB0eXBlIDogc3RlcHMuQ29udGFjdElucHV0UGFyYW1zLmlucHV0LnR5cGVcbiAgXG59XG5cbmRvbmUocGFyYW0pOyc8YnI+ICB9PGJyPn08L3ByZT48L2JvZHk+PC9odG1sPg=='));document.close();" "JavaScript:<br><pre>let contact = steps.CBData.hubspot.contact;<br>let subscription = steps.HubData.subscription;<br>let customer = steps.HubData.customer;<br>steps.SyncLog.syncCount.sCount = steps.SyncLog.syncCount.sCount +1;<br>let old_resource = {<br>    customer: customer,<br>    hubspot: {<br><br>    }<br>};<br><br><br>if (subscription !== undefined) {<br>    old_resource.hubspot.subscription_id = subscription.id;<br>    old_resource.hubspot.hubspot_sub_status = subscription.status;<br>}<br>steps.HubSpotInput.tp.third_party_entity_id =  contact.vid;<br>steps.HubSpotInput.tp.old_resource = JSON.stringify(old_resource);<br><br><br>let param = {<br>  <br>  url : steps.CBSubscriptionParam.cbemUpdate.url,<br>  headers : steps.CBSubscriptionParam.cbemUpdate.headers,<br>  query : steps.HubSpotInput.tp,<br>  siteName : steps.ContactInputParams.input.siteName,<br>  siteDomain : steps.ContactInputParams.input.siteDomain,<br>  apiKey : steps.ContactInputParams.input.apiKey,<br>  type : steps.ContactInputParams.input.type<br>  <br>}<br><br>done(param);</pre>"
            click step-059 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPlN5bmNVcGRhdGVFcnJvcjwvdGl0bGU+PC9oZWFkPjxib2R5PjxiPkphdmFTY3JpcHQ6PC9iPjxicj48YnI+PHByZT5sZXQgY3VzdG9tZXIgPSBzdGVwcy5IdWJEYXRhLmN1c3RvbWVyOzxicj5sZXQgYXBpS2V5PXN0ZXBzLkNvbnRhY3RJbnB1dFBhcmFtcy5pbnB1dC5hcGlLZXk7PGJyPmxldCBzaXRlTmFtZT1zdGVwcy5Db250YWN0SW5wdXRQYXJhbXMuaW5wdXQuc2l0ZU5hbWU7PGJyPmxldCBzaXRlRG9tYWluPXN0ZXBzLkNvbnRhY3RJbnB1dFBhcmFtcy5pbnB1dC5zaXRlRG9tYWluOzxicj5sZXQgdHlwZSA9IHN0ZXBzLkNvbnRhY3RJbnB1dFBhcmFtcy5pbnB1dC50eXBlOzxicj5sZXQgcGFzc3dvcmQgPSAnJzs8YnI+c3RlcHMuU3luY0xvZy5zeW5jQ291bnQuZUNvdW50ID0gc3RlcHMuU3luY0xvZy5zeW5jQ291bnQuZUNvdW50ICsxOzxicj48YnI+IGxldCBjaGFyZ2ViZWVfZGF0YV91cmwgPSAnaHR0cHM6Ly8nK3NpdGVOYW1lKycuJytzaXRlRG9tYWluKycvYWRtaW4tY29uc29sZS9jdXN0b21lcnMvJytjdXN0b21lci5pZDs8YnI+IGxldCBjYl9saW5rID0gJzxzcGFuPjw8L3NwYW4+YSBocmVmPScnK2NoYXJnZWJlZV9kYXRhX3VybCsnJyB0YXJnZXQ9J2JsYW5rJzxzcGFuPj48L3NwYW4+JytjdXN0b21lci5pZCsnPHNwYW4+PDwvc3Bhbj4vYTxzcGFuPj48L3NwYW4+IEZhaWxlZCB0byB1cGRhdGUgY29udGFjdCBpbiBIdWJTcG90XG4nOzxicj4gPGJyPiBsZXQgZGF0YSA9IHs8YnI+ICAgdXJsOiAnaHR0cHM6Ly8nICsgc2l0ZU5hbWUgKyAnLicgKyBzaXRlRG9tYWluICsgJy9hcGkvdjIvdGhpcmRfcGFydHlfZW50aXR5X21hcHBpbmdzL3VwZGF0ZV9lbnRpdHknLDxicj4gIGhlYWRlcnM6ezxicj4gICAgICAgIEF1dGhvcml6YXRpb246ICdCYXNpYyAnICsgQ0UuYjY0KGFwaUtleSArICc6JyArIHBhc3N3b3JkKTxicj4gICAgICB9LDxicj4gICAgICBxdWVyeTp7PGJyPiAgICAgICAgaW50ZWdyYXRpb25fbmFtZTogdHlwZSw8YnI+ICAgICAgICBlbnRpdHlfaWQ6IGN1c3RvbWVyLmlkLDxicj4gICAgICAgIGVudGl0eV90eXBlOiAnY3VzdG9tZXInLDxicj4gICAgICAgIHN0YXR1czogJ3VwZGF0ZV9mYWlsZWQnLDxicj4gICAgICAgIGVycm9yX21lc3NhZ2U6IGNiX2xpbms8YnI+ICAgICAgfSw8YnI+ICAgICAgc2l0ZU5hbWUgOiBzdGVwcy5Db250YWN0SW5wdXRQYXJhbXMuaW5wdXQuc2l0ZU5hbWUsPGJyPiAgc2l0ZURvbWFpbiA6IHN0ZXBzLkNvbnRhY3RJbnB1dFBhcmFtcy5pbnB1dC5zaXRlRG9tYWluLDxicj4gIGFwaUtleSA6IHN0ZXBzLkNvbnRhY3RJbnB1dFBhcmFtcy5pbnB1dC5hcGlLZXksPGJyPiAgdHlwZSA6IHN0ZXBzLkNvbnRhY3RJbnB1dFBhcmFtcy5pbnB1dC50eXBlPGJyPiAgPGJyPn07PGJyPjxicj5kb25lKGRhdGEpOzwvcHJlPjxicj48Yj5SQVcgSlNPTjo8L2I+PGJyPjxicj48cHJlPns8YnI+ICAnb25TdWNjZXNzJzogWzxicj4gICAgJ1VwZGF0ZVRQTWFwcGluZ0Vycm9yNCc8YnI+ICBdLDxicj4gICdvbkZhaWx1cmUnOiBbXSw8YnI+ICAnbmFtZSc6ICdTeW5jVXBkYXRlRXJyb3InLDxicj4gICd0eXBlJzogJ3NjcmlwdCcsPGJyPiAgJ3Byb3BlcnRpZXMnOiB7PGJyPiAgICAnYm9keSc6ICdsZXQgY3VzdG9tZXIgPSBzdGVwcy5IdWJEYXRhLmN1c3RvbWVyO1xubGV0IGFwaUtleT1zdGVwcy5Db250YWN0SW5wdXRQYXJhbXMuaW5wdXQuYXBpS2V5O1xubGV0IHNpdGVOYW1lPXN0ZXBzLkNvbnRhY3RJbnB1dFBhcmFtcy5pbnB1dC5zaXRlTmFtZTtcbmxldCBzaXRlRG9tYWluPXN0ZXBzLkNvbnRhY3RJbnB1dFBhcmFtcy5pbnB1dC5zaXRlRG9tYWluO1xubGV0IHR5cGUgPSBzdGVwcy5Db250YWN0SW5wdXRQYXJhbXMuaW5wdXQudHlwZTtcbmxldCBwYXNzd29yZCA9IFwnXCc7XG5zdGVwcy5TeW5jTG9nLnN5bmNDb3VudC5lQ291bnQgPSBzdGVwcy5TeW5jTG9nLnN5bmNDb3VudC5lQ291bnQgKzE7XG5cbiBsZXQgY2hhcmdlYmVlX2RhdGFfdXJsID0gXCdodHRwczovL1wnK3NpdGVOYW1lK1wnLlwnK3NpdGVEb21haW4rXCcvYWRtaW4tY29uc29sZS9jdXN0b21lcnMvXCcrY3VzdG9tZXIuaWQ7XG4gbGV0IGNiX2xpbmsgPSBcJzxzcGFuPjw8L3NwYW4+YSBocmVmPSdcJytjaGFyZ2ViZWVfZGF0YV91cmwrXCcnIHRhcmdldD0nYmxhbmsnPHNwYW4+Pjwvc3Bhbj5cJytjdXN0b21lci5pZCtcJzxzcGFuPjw8L3NwYW4+L2E8c3Bhbj4+PC9zcGFuPiBGYWlsZWQgdG8gdXBkYXRlIGNvbnRhY3QgaW4gSHViU3BvdFxcblwnO1xuIFxuIGxldCBkYXRhID0ge1xuICAgdXJsOiBcJ2h0dHBzOi8vXCcgKyBzaXRlTmFtZSArIFwnLlwnICsgc2l0ZURvbWFpbiArIFwnL2FwaS92Mi90aGlyZF9wYXJ0eV9lbnRpdHlfbWFwcGluZ3MvdXBkYXRlX2VudGl0eVwnLFxuICBoZWFkZXJzOntcbiAgICAgICAgQXV0aG9yaXphdGlvbjogXCdCYXNpYyBcJyArIENFLmI2NChhcGlLZXkgKyBcJzpcJyArIHBhc3N3b3JkKVxuICAgICAgfSxcbiAgICAgIHF1ZXJ5OntcbiAgICAgICAgaW50ZWdyYXRpb25fbmFtZTogdHlwZSxcbiAgICAgICAgZW50aXR5X2lkOiBjdXN0b21lci5pZCxcbiAgICAgICAgZW50aXR5X3R5cGU6IFwnY3VzdG9tZXJcJyxcbiAgICAgICAgc3RhdHVzOiBcJ3VwZGF0ZV9mYWlsZWRcJyxcbiAgICAgICAgZXJyb3JfbWVzc2FnZTogY2JfbGlua1xuICAgICAgfSxcbiAgICAgIHNpdGVOYW1lIDogc3RlcHMuQ29udGFjdElucHV0UGFyYW1zLmlucHV0LnNpdGVOYW1lLFxuICBzaXRlRG9tYWluIDogc3RlcHMuQ29udGFjdElucHV0UGFyYW1zLmlucHV0LnNpdGVEb21haW4sXG4gIGFwaUtleSA6IHN0ZXBzLkNvbnRhY3RJbnB1dFBhcmFtcy5pbnB1dC5hcGlLZXksXG4gIHR5cGUgOiBzdGVwcy5Db250YWN0SW5wdXRQYXJhbXMuaW5wdXQudHlwZVxuICBcbn07XG5cbmRvbmUoZGF0YSk7Jzxicj4gIH08YnI+fTwvcHJlPjwvYm9keT48L2h0bWw+'));document.close();" "JavaScript:<br><pre>let customer = steps.HubData.customer;<br>let apiKey=steps.ContactInputParams.input.apiKey;<br>let siteName=steps.ContactInputParams.input.siteName;<br>let siteDomain=steps.ContactInputParams.input.siteDomain;<br>let type = steps.ContactInputParams.input.type;<br>let password = '';<br>steps.SyncLog.syncCount.eCount = steps.SyncLog.syncCount.eCount +1;<br><br> let chargebee_data_url = 'https://'+siteName+'.'+siteDomain+'/admin-console/customers/'+customer.id;<br> let cb_link = '<span><</span>a href=''+chargebee_data_url+'' target='blank'<span>></span>'+customer.id+'<span><</span>/a<span>></span> Failed to update contact in HubSpot\n';<br> <br> let data = {<br>   url: 'https://' + siteName + '.' + siteDomain + '/api/v2/third_party_entity_mappings/update_entity',<br>  headers:{<br>        Authorization: 'Basic ' + CE.b64(apiKey + ':' + password)<br>      },<br>      query:{<br>        integration_name: type,<br>        entity_id: customer.id,<br>        entity_type: 'customer',<br>        status: 'update_failed',<br>        error_message: cb_link<br>      },<br>      siteName : steps.ContactInputParams.input.siteName,<br>  siteDomain : steps.ContactInputParams.input.siteDomain,<br>  apiKey : steps.ContactInputParams.input.apiKey,<br>  type : steps.ContactInputParams.input.type<br>  <br>};<br><br>done(data);</pre>"
            click step-060 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPlVwZGF0ZVRQTWFwcGluZ3M8L3RpdGxlPjwvaGVhZD48Ym9keT48Yj5PdGhlciAoZm9ybXVsYSk6PC9iPjxicj48YnI+PHByZT4gIGZvcm11bGFJZCA6IDMxMzMxPGJyPiAgICAgICBhcmdzIDogJHtzdGVwcy5VcGRhdGVUUEFmdGVyQ3JlYXRlfTwvcHJlPjxicj48Yj5SQVcgSlNPTjo8L2I+PGJyPjxicj48cHJlPns8YnI+ICAnb25TdWNjZXNzJzogWzxicj4gICAgJ0xvb3BPdmVyQ3VzdG9tZXInPGJyPiAgXSw8YnI+ICAnb25GYWlsdXJlJzogW10sPGJyPiAgJ25hbWUnOiAnVXBkYXRlVFBNYXBwaW5ncycsPGJyPiAgJ3R5cGUnOiAnZm9ybXVsYScsPGJyPiAgJ3Byb3BlcnRpZXMnOiB7PGJyPiAgICAnZm9ybXVsYUlkJzogJzMxMzMxJyw8YnI+ICAgICdhcmdzJzogJyR7c3RlcHMuVXBkYXRlVFBBZnRlckNyZWF0ZX0nPGJyPiAgfTxicj59PC9wcmU+PC9ib2R5PjwvaHRtbD4='));document.close();" "Other (formula):<br><pre>  formulaId : 31331<br>       args : ${steps.UpdateTPAfterCreate}</pre>"
            click step-061 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPlVwZGF0ZVRQTWFwcGluZ0Vycm9yMzwvdGl0bGU+PC9oZWFkPjxib2R5PjxiPk90aGVyIChmb3JtdWxhKTo8L2I+PGJyPjxicj48cHJlPiAgZm9ybXVsYUlkIDogMzEzMzE8YnI+ICAgICAgIGFyZ3MgOiAke3N0ZXBzLlN5bmNDcmVhdGVFcnJvcn08L3ByZT48YnI+PGI+UkFXIEpTT046PC9iPjxicj48YnI+PHByZT57PGJyPiAgJ29uU3VjY2Vzcyc6IFs8YnI+ICAgICdMb29wT3ZlckN1c3RvbWVyJzxicj4gIF0sPGJyPiAgJ29uRmFpbHVyZSc6IFtdLDxicj4gICduYW1lJzogJ1VwZGF0ZVRQTWFwcGluZ0Vycm9yMycsPGJyPiAgJ3R5cGUnOiAnZm9ybXVsYScsPGJyPiAgJ3Byb3BlcnRpZXMnOiB7PGJyPiAgICAnZm9ybXVsYUlkJzogJzMxMzMxJyw8YnI+ICAgICdhcmdzJzogJyR7c3RlcHMuU3luY0NyZWF0ZUVycm9yfSc8YnI+ICB9PGJyPn08L3ByZT48L2JvZHk+PC9odG1sPg=='));document.close();" "Other (formula):<br><pre>  formulaId : 31331<br>       args : ${steps.SyncCreateError}</pre>"
            click step-062 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPlVwZGF0ZVRQTWFwcGluZzwvdGl0bGU+PC9oZWFkPjxib2R5PjxiPk90aGVyIChmb3JtdWxhKTo8L2I+PGJyPjxicj48cHJlPiAgZm9ybXVsYUlkIDogMzEzMzE8YnI+ICAgICAgIGFyZ3MgOiAke3N0ZXBzLlVwZGF0ZVRQQWZ0ZXJVcGRhdGV9PC9wcmU+PGJyPjxiPlJBVyBKU09OOjwvYj48YnI+PGJyPjxwcmU+ezxicj4gICdvblN1Y2Nlc3MnOiBbPGJyPiAgICAnTG9vcE92ZXJDdXN0b21lcic8YnI+ICBdLDxicj4gICdvbkZhaWx1cmUnOiBbXSw8YnI+ICAnbmFtZSc6ICdVcGRhdGVUUE1hcHBpbmcnLDxicj4gICd0eXBlJzogJ2Zvcm11bGEnLDxicj4gICdwcm9wZXJ0aWVzJzogezxicj4gICAgJ2Zvcm11bGFJZCc6ICczMTMzMScsPGJyPiAgICAnYXJncyc6ICcke3N0ZXBzLlVwZGF0ZVRQQWZ0ZXJVcGRhdGV9Jzxicj4gIH08YnI+fTwvcHJlPjwvYm9keT48L2h0bWw+'));document.close();" "Other (formula):<br><pre>  formulaId : 31331<br>       args : ${steps.UpdateTPAfterUpdate}</pre>"
            click step-063 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPlVwZGF0ZVRQTWFwcGluZ0Vycm9yNDwvdGl0bGU+PC9oZWFkPjxib2R5PjxiPk90aGVyIChmb3JtdWxhKTo8L2I+PGJyPjxicj48cHJlPiAgZm9ybXVsYUlkIDogMzEzMzE8YnI+ICAgICAgIGFyZ3MgOiAke3N0ZXBzLlN5bmNVcGRhdGVFcnJvcn08L3ByZT48YnI+PGI+UkFXIEpTT046PC9iPjxicj48YnI+PHByZT57PGJyPiAgJ29uU3VjY2Vzcyc6IFs8YnI+ICAgICdMb29wT3ZlckN1c3RvbWVyJzxicj4gIF0sPGJyPiAgJ29uRmFpbHVyZSc6IFtdLDxicj4gICduYW1lJzogJ1VwZGF0ZVRQTWFwcGluZ0Vycm9yNCcsPGJyPiAgJ3R5cGUnOiAnZm9ybXVsYScsPGJyPiAgJ3Byb3BlcnRpZXMnOiB7PGJyPiAgICAnZm9ybXVsYUlkJzogJzMxMzMxJyw8YnI+ICAgICdhcmdzJzogJyR7c3RlcHMuU3luY1VwZGF0ZUVycm9yfSc8YnI+ICB9PGJyPn08L3ByZT48L2JvZHk+PC9odG1sPg=='));document.close();" "Other (formula):<br><pre>  formulaId : 31331<br>       args : ${steps.SyncUpdateError}</pre>"

        </div>
    </div>
    <h2>
        Formula Configuration
    </h2>
    <div class="container">
        <h3>Basic</h3><table><tr><th>key</th><th>value</th></tr><tr><td>Name</td><td>HubSpotFullSyncContacts-Revamped-Ajai</td></tr><tr><td>Single Threaded?</td><td>false</td></tr><tr><td>Active?</td><td>true</td></tr><tr><td>Number of Steps</td><td>59</td></tr><tr><td>Number of Triggers</td><td>1</td></tr></table>
    <br/><h3>Elements</h3><table><tr><th>key</th><th>name</th><th>required</th></tr></table>
    <br/><h3>Values</h3><table><tr><th>key</th><th>name</th><th>required</th></tr></table><br/>
    </div>
    <div class="key">
        <h2>
            Key
        </h2>
        <table>
            <tr>
                <th>Description</th>
                <th>Symbol</th>
                <th>Description</th>
                <th>Symbol</th>
                <th>Description</th>
                <th>Symbol</th>
            </tr>

            <tr>
                <td>Filter Steps</td>
                <td>
                    <div class="mermaid">
                        graph TD
                        A{Step Name}
                    </div>
                </td>
                <td>Trigger/End</td>
                <td>
                    <div class="mermaid">
                        graph TD
                        B((Actual))
                        C((Generated))
                        style C stroke-width:2px,stroke-dasharray: 5, 5;
                    </div>
                </td>
                <td>Request Step</td>
                <td>
                    <div class="mermaid">
                        graph TD
                        A>GET]
                        style A stroke:#0f6ab4;
                    </div>
                    <div class="mermaid">
                        graph TD
                        B>POST]
                        style B stroke:#10a54a;
                    </div>
                    <div class="mermaid">
                        graph TD
                        C>PATCH]
                        style C stroke:#D38042;
                    </div>
                    <div class="mermaid">
                        graph TD
                        C>PUT]
                        style C stroke:#C5862B;
                    </div>
                    <div class="mermaid">
                        graph TD
                        D>DELETE]
                        style D stroke:#a41e22;
                    </div>
                </td>
            </tr>
            <tr>
                <td>Script</td>
                <td>
                    <div class="mermaid">
                        graph TD
                        D(Step Name)
                    </div>
                </td>
                <td>Loop</td>
                <td>
                    <div class="mermaid">
                        graph TD
                        D(-Step Name-)
                    </div>
                </td>
                <td>Other(TYPE)</td>
                <td>
                    <div class="mermaid">
                        graph TD
                        D[Step Name]
                    </div>
                </td>
            </tr>
            <tr>
                <td>Pass/Fail Connection</td>
                <td>
                    <div class="mermaid">
                        graph LR
                        AL(A)
                        BL(B)
                        AL-->BL
                    </div>
                </td>
                <td>Generated Connection</td>
                <td>
                    <div class="mermaid">
                        graph LR
                        AL(A)
                        BL((B))
                        AL-.->BL
                        style BL stroke-width:2px,stroke-dasharray: 5, 5;
                    </div>
                </td>
                <td>Continue Connection</td>
                <td>
                    <div class="mermaid">
                        graph LR
                        AL(A)
                        BL(B)
                        AL==>BL
                    </div>
                </td>
            </tr>
        </table>
    </div>
    <div>
        <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
    </div>
</body>
</html>