<!DOCTYPE html>
<html lang="en">
<head>
    <title>HubSpotFullSyncContacts</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/mermaid/6.0.0/mermaid.css" rel="stylesheet" type="text/css"/>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/6.0.0/mermaid.min.js"></script>
    <script>mermaid.initialize({startOnLoad:true});</script>
    <script>
        var callback = function(){}
    </script>
    <style>
        div.mermaidTooltip {
                    margin-left: 50px;
                    text-align: left;
                    max-width: none;
                }
        .node rect,
        .node circle,
        .node ellipse,
        .node polygon {
                    fill: #ffffff;
                    stroke: rgb(200,200,200);
                    stroke-width: 2px;
                }
        .mermaid .label {
                  max-width: 50px;
                }
        table, th, td {
                    border: 1px solid black;
                }
        table {
                    border-spacing: 5px;
                    border-radius: 5px;
                    margin: auto;
                }
        th, td {
                    padding-left: 15px;
                    padding-right: 15px;
                    border-radius: 5px;
                }
        th {
                    color: blue;
                }
        td {
                    width: 180px;
                    text-align: center;
                    background-color: rgb(237, 241, 242);
                }
        h2 {
                    text-align: center;
                    border: 1px solid black;
                    border-radius: 5px;
                    padding: 1em;
                }
        .container {
                    text-align: center;
                    background-color: rgb(237, 241, 242);
                    font-size: 11px;
                    font-weight: 900;
                }
        body {
                    font-family: 'Arial';
                }
        .edgeLabel {
                    font-size: 9px;
                }
    </style>
</head>
<body>
    <h2>
        HubSpotFullSyncContacts
    </h2>
    <div class="container">
        <div class="mermaid">
            graph TD

                step-000((Trigger))
            step-001(InputParams)
            step-002(SyncLog)
            step-003[ChargebeeConfigParams]
            step-004[GetCBCustomFields]
            step-005(UpdateCustomFieldInfo)
            step-006(CustomersParam)
            step-007(-LoopOverCustomer-)
            step-008{HasEmail}
            step-009(SyncDone)
            step-010((END))
            step-011(CBData)
            step-012(UpdateNoEmail)
            step-013(CBSubsciptionParam)
            step-014[UpdateThirdPartyMappingError]
            step-015[GetCustomerCBEM]
            step-016[GetHubSpotSubscription]
            step-017{SyncOnlyActiveSubscrption}
            step-018{DoSyncOrder}
            step-019(OrderParam)
            step-020{HasContactInCBEM}
            step-021[GetOrderBefore]
            step-022[GetHubSpotContactByID]
            step-023[GetHubSpotContactByEmail]
            step-024[GetOrderAfter]
            step-025{IsContactFound}
            step-026{DoCreateContact}
            step-027(UpdateOrder)
            step-028(HubSpotInput)
            step-029{IsError}
            step-030(HubData)
            step-031(UpdateDuplicateEmail)
            step-032{IsHubSpotCreate}
            step-033[UpdateThirdPartyMappingError2]
            step-034(PrepareCreateInput)
            step-035(PrepareUpdateInput)
            step-036[CreateHubSpotContact]
            step-037[UpdateHubSpotContact]
            step-038{CreateHubSPotFilter}
            step-039{UpdateHubSpotFilter}
            step-040(UpdateTPAfterCreate)
            step-041(SyncCreateError)
            step-042(UpdateTPAfterUpdate)
            step-043(SyncUpdateError)
            step-044[UpdateThirdPartyMapping]
            step-045[UpdateThirdPartyMappingError3]
            step-046[UpdateThirdPartyMappingError4]
            step-047(LoopOverCustomer)
            step-048(LoopOverCustomer)
            step-049(LoopOverCustomer)
            step-050(LoopOverCustomer)
            step-051(LoopOverCustomer)
            step-052(LoopOverCustomer)
            step-053(LoopOverCustomer)
            step-054(LoopOverCustomer)

                step-000== continue ==>step-001
            step-001-- success -->step-002
            step-002-- success -->step-003
            step-003-- success -->step-004
            step-004-- success -->step-005
            step-005-- success -->step-006
            step-006-- success -->step-047
            step-007-- success -->step-008
            step-007-- failure -->step-009
            step-008-- success -->step-011
            step-008-- failure -->step-012
            step-009-. done .->step-010
            step-011-- success -->step-013
            step-012-- success -->step-014
            step-013-- success -->step-015
            step-014-- success -->step-048
            step-015-- success -->step-016
            step-016-- success -->step-017
            step-017-- success -->step-018
            step-017-- failure -->step-049
            step-018-- success -->step-019
            step-018-- failure -->step-020
            step-019-- success -->step-021
            step-020-- success -->step-022
            step-020-- failure -->step-023
            step-021-- success -->step-024
            step-022-- success -->step-025
            step-023-- success -->step-026
            step-024-- success -->step-027
            step-025-- success -->step-028
            step-025-- failure -->step-023
            step-026-- success -->step-028
            step-026-- failure -->step-029
            step-027-- success -->step-020
            step-028-- success -->step-030
            step-029-- success -->step-031
            step-029-- failure -->step-050
            step-030-- success -->step-032
            step-031-- success -->step-033
            step-032-- success -->step-034
            step-032-- failure -->step-035
            step-033-- success -->step-051
            step-034-- success -->step-036
            step-035-- success -->step-037
            step-036== continue ==>step-038
            step-037== continue ==>step-039
            step-038-- success -->step-040
            step-038-- failure -->step-041
            step-039-- success -->step-042
            step-039-- failure -->step-043
            step-040-- success -->step-044
            step-041-- success -->step-045
            step-042-- success -->step-044
            step-043-- success -->step-046
            step-044-- success -->step-052
            step-045-- success -->step-053
            step-046-- success -->step-054

                style step-007 fill:#dda7f9;
            style step-010 stroke-width:3px,stroke-dasharray: 5, 5;
            style step-047 fill:#dda7f9,stroke-width:3px,stroke-dasharray: 5, 5;
            style step-048 fill:#dda7f9,stroke-width:3px,stroke-dasharray: 5, 5;
            style step-049 fill:#dda7f9,stroke-width:3px,stroke-dasharray: 5, 5;
            style step-050 fill:#dda7f9,stroke-width:3px,stroke-dasharray: 5, 5;
            style step-051 fill:#dda7f9,stroke-width:3px,stroke-dasharray: 5, 5;
            style step-052 fill:#dda7f9,stroke-width:3px,stroke-dasharray: 5, 5;
            style step-053 fill:#dda7f9,stroke-width:3px,stroke-dasharray: 5, 5;
            style step-054 fill:#dda7f9,stroke-width:3px,stroke-dasharray: 5, 5;

                click step-000 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPnRyaWdnZXI8L3RpdGxlPjwvaGVhZD48Ym9keT48Yj5UcmlnZ2VyIEVsZW1lbnQ6PC9iPjxicj48YnI+PHByZT4gICB0eXBlIDogbWFudWFsPGJyPiAgYXN5bmMgOiB0cnVlPC9wcmU+PGJyPjxiPlJBVyBKU09OOjwvYj48YnI+PGJyPjxwcmU+ezxicj4gICdvblN1Y2Nlc3MnOiBbPGJyPiAgICAnSW5wdXRQYXJhbXMnPGJyPiAgXSw8YnI+ICAnb25GYWlsdXJlJzogW10sPGJyPiAgJ3R5cGUnOiAnbWFudWFsJyw8YnI+ICAnYXN5bmMnOiB0cnVlLDxicj4gICduYW1lJzogJ3RyaWdnZXInLDxicj4gICdwcm9wZXJ0aWVzJzoge308YnI+fTwvcHJlPjwvYm9keT48L2h0bWw+'));document.close();" "Trigger Element:<br><pre>   type : manual<br>  async : true</pre>"
            click step-001 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPklucHV0UGFyYW1zPC90aXRsZT48L2hlYWQ+PGJvZHk+PGI+SmF2YVNjcmlwdDo8L2I+PGJyPjxicj48cHJlPmxldCBhcGlLZXkgPSB0cmlnZ2VyLmFyZ3NbJ2NiLWFwaS1rZXknXTs8YnI+bGV0IHNpdGVOYW1lID0gdHJpZ2dlci5hcmdzWydjYi1zaXRlLW5hbWUnXTs8YnI+bGV0IHR5cGUgPSB0cmlnZ2VyLmFyZ3MudHlwZTs8YnI+bGV0IHNpdGVEb21haW4gPSB0cmlnZ2VyLmFyZ3NbJ2NiLWRvbWFpbiddOzxicj5sZXQgYXV0b1N5bmMgPSB0cmlnZ2VyLmFyZ3MuYXV0b1N5bmM7PGJyPmxldCBjdXN0b21lcnMgPSB0cmlnZ2VyLmFyZ3MuY3VzdG9tZXJzOzxicj5pZihhdXRvU3luYz09PXVuZGVmaW5lZCkgezxicj4gIGF1dG9TeW5jID0gZmFsc2U7PGJyPn08YnI+PGJyPmlmKGF1dG9TeW5jPT09J3RydWUnIHx8IGF1dG9TeW5jID09PSB0cnVlKXs8YnI+ICBhdXRvU3luYyA9IHRydWU7PGJyPn1lbHNlIHs8YnI+ICBhdXRvU3luYyA9IGZhbHNlOzxicj59PGJyPjxicj5sZXQgcGFzc3dvcmQgPSAnJzs8YnI+bGV0IGRhdGEgPSB7PGJyPiAgIGlucHV0OiB7PGJyPiAgICAgICAgYXBpS2V5OiBhcGlLZXksPGJyPiAgICAgICAgc2l0ZU5hbWU6IHNpdGVOYW1lLDxicj4gICAgICAgIHNpdGVEb21haW46IHNpdGVEb21haW4sPGJyPiAgICAgICAgYXV0b1N5bmM6IGF1dG9TeW5jLDxicj4gICAgICAgIHR5cGU6IHR5cGUsPGJyPiAgICAgICAgY3VzdG9tZXJzOmN1c3RvbWVyczxicj4gICAgfSw8YnI+ICAgIGNvbmZpZzogezxicj4gICAgICAgIHVybDogJ2h0dHBzOi8vJyArIHNpdGVOYW1lICsgJy4nICsgc2l0ZURvbWFpbiArICcvYXBpL3YyL3RoaXJkX3BhcnR5X2NvbmZpZ3VyYXRpb25zJyw8YnI+ICAgICAgICBzeW5jVXJsOiAnaHR0cHM6Ly8nICsgc2l0ZU5hbWUgKyAnLicgKyBzaXRlRG9tYWluICsgJy9hcGkvdjIvdGhpcmRfcGFydHlfc3luY19kZXRhaWxzL3JldHJpZXZlX2xhdGVzdF9zeW5jJyw8YnI+ICAgICAgICBjdXN0b21GaWVsZFVybDogJ2h0dHBzOi8vJyArIHNpdGVOYW1lICsgJy4nICsgc2l0ZURvbWFpbiArICcvYXBpL3YyL2N1c3RvbV9maWVsZF9jb25maWdzJyw8YnI+ICAgICAgICBhdXRoOiB7PGJyPiAgICAgICAgICAgIEF1dGhvcml6YXRpb246ICdCYXNpYyAnICsgQ0UuYjY0KGFwaUtleSArICc6JyArIHBhc3N3b3JkKTxicj4gICAgICAgIH0sPGJyPiAgICAgICAgcXVlcnk6IHs8YnI+ICAgICAgICAgICAgaW50ZWdyYXRpb25fbmFtZTogdHlwZTxicj4gICAgICAgIH08YnI+ICAgIH0sPGJyPiAgICB1cGRhdGU6IHs8YnI+ICAgICAgICB1cmw6ICdodHRwczovLycgKyBzaXRlTmFtZSArICcuaW50ZWdyYXRpb25zLicgKyBzaXRlRG9tYWluICsgJy9pbnRlZ3JhdGlvbnMvdXBkYXRlX3RwX2ludGVnX2NvbmYnLDxicj4gICAgICAgIGhlYWRlcnM6IHs8YnI+ICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyw8YnI+ICAgICAgICAgICAgJ2NhY2hlLWNvbnRyb2wnOiAnbm8tY2FjaGUnPGJyPiAgICAgICAgfSw8YnI+ICAgICAgICBib2R5OiB7PGJyPiAgICAgICAgICAgIGludGVncmF0aW9uX25hbWU6IHR5cGUsPGJyPiAgICAgICAgICAgIHNpdGVfbmFtZTogc2l0ZU5hbWUsPGJyPiAgICAgICAgICAgIGFwaV9rZXk6IGFwaUtleTxicj4gICAgICAgIH08YnI+ICAgIH0sPGJyPn07PGJyPjxicj5kb25lKGRhdGEpOzwvcHJlPjxicj48Yj5SQVcgSlNPTjo8L2I+PGJyPjxicj48cHJlPns8YnI+ICAnb25TdWNjZXNzJzogWzxicj4gICAgJ1N5bmNMb2cnPGJyPiAgXSw8YnI+ICAnb25GYWlsdXJlJzogW10sPGJyPiAgJ25hbWUnOiAnSW5wdXRQYXJhbXMnLDxicj4gICd0eXBlJzogJ3NjcmlwdCcsPGJyPiAgJ3Byb3BlcnRpZXMnOiB7PGJyPiAgICAnYm9keSc6ICdsZXQgYXBpS2V5ID0gdHJpZ2dlci5hcmdzWydjYi1hcGkta2V5J107XG5sZXQgc2l0ZU5hbWUgPSB0cmlnZ2VyLmFyZ3NbJ2NiLXNpdGUtbmFtZSddO1xubGV0IHR5cGUgPSB0cmlnZ2VyLmFyZ3MudHlwZTtcbmxldCBzaXRlRG9tYWluID0gdHJpZ2dlci5hcmdzWydjYi1kb21haW4nXTtcbmxldCBhdXRvU3luYyA9IHRyaWdnZXIuYXJncy5hdXRvU3luYztcbmxldCBjdXN0b21lcnMgPSB0cmlnZ2VyLmFyZ3MuY3VzdG9tZXJzO1xuaWYoYXV0b1N5bmM9PT11bmRlZmluZWQpIHtcbiAgYXV0b1N5bmMgPSBmYWxzZTtcbn1cblxuaWYoYXV0b1N5bmM9PT1cJ3RydWVcJyB8fCBhdXRvU3luYyA9PT0gdHJ1ZSl7XG4gIGF1dG9TeW5jID0gdHJ1ZTtcbn1lbHNlIHtcbiAgYXV0b1N5bmMgPSBmYWxzZTtcbn1cblxubGV0IHBhc3N3b3JkID0gXCdcJztcbmxldCBkYXRhID0ge1xuICAgaW5wdXQ6IHtcbiAgICAgICAgYXBpS2V5OiBhcGlLZXksXG4gICAgICAgIHNpdGVOYW1lOiBzaXRlTmFtZSxcbiAgICAgICAgc2l0ZURvbWFpbjogc2l0ZURvbWFpbixcbiAgICAgICAgYXV0b1N5bmM6IGF1dG9TeW5jLFxuICAgICAgICB0eXBlOiB0eXBlLFxuICAgICAgICBjdXN0b21lcnM6Y3VzdG9tZXJzXG4gICAgfSxcbiAgICBjb25maWc6IHtcbiAgICAgICAgdXJsOiBcJ2h0dHBzOi8vXCcgKyBzaXRlTmFtZSArIFwnLlwnICsgc2l0ZURvbWFpbiArIFwnL2FwaS92Mi90aGlyZF9wYXJ0eV9jb25maWd1cmF0aW9uc1wnLFxuICAgICAgICBzeW5jVXJsOiBcJ2h0dHBzOi8vXCcgKyBzaXRlTmFtZSArIFwnLlwnICsgc2l0ZURvbWFpbiArIFwnL2FwaS92Mi90aGlyZF9wYXJ0eV9zeW5jX2RldGFpbHMvcmV0cmlldmVfbGF0ZXN0X3N5bmNcJyxcbiAgICAgICAgY3VzdG9tRmllbGRVcmw6IFwnaHR0cHM6Ly9cJyArIHNpdGVOYW1lICsgXCcuXCcgKyBzaXRlRG9tYWluICsgXCcvYXBpL3YyL2N1c3RvbV9maWVsZF9jb25maWdzXCcsXG4gICAgICAgIGF1dGg6IHtcbiAgICAgICAgICAgIEF1dGhvcml6YXRpb246IFwnQmFzaWMgXCcgKyBDRS5iNjQoYXBpS2V5ICsgXCc6XCcgKyBwYXNzd29yZClcbiAgICAgICAgfSxcbiAgICAgICAgcXVlcnk6IHtcbiAgICAgICAgICAgIGludGVncmF0aW9uX25hbWU6IHR5cGVcbiAgICAgICAgfVxuICAgIH0sXG4gICAgdXBkYXRlOiB7XG4gICAgICAgIHVybDogXCdodHRwczovL1wnICsgc2l0ZU5hbWUgKyBcJy5pbnRlZ3JhdGlvbnMuXCcgKyBzaXRlRG9tYWluICsgXCcvaW50ZWdyYXRpb25zL3VwZGF0ZV90cF9pbnRlZ19jb25mXCcsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIFwnQ29udGVudC1UeXBlXCc6IFwnYXBwbGljYXRpb24vanNvblwnLFxuICAgICAgICAgICAgXCdjYWNoZS1jb250cm9sXCc6IFwnbm8tY2FjaGVcJ1xuICAgICAgICB9LFxuICAgICAgICBib2R5OiB7XG4gICAgICAgICAgICBpbnRlZ3JhdGlvbl9uYW1lOiB0eXBlLFxuICAgICAgICAgICAgc2l0ZV9uYW1lOiBzaXRlTmFtZSxcbiAgICAgICAgICAgIGFwaV9rZXk6IGFwaUtleVxuICAgICAgICB9XG4gICAgfSxcbn07XG5cbmRvbmUoZGF0YSk7Jzxicj4gIH08YnI+fTwvcHJlPjwvYm9keT48L2h0bWw+'));document.close();" "JavaScript:<br><pre>let apiKey = trigger.args['cb-api-key'];<br>let siteName = trigger.args['cb-site-name'];<br>let type = trigger.args.type;<br>let siteDomain = trigger.args['cb-domain'];<br>let autoSync = trigger.args.autoSync;<br>let customers = trigger.args.customers;<br>if(autoSync===undefined) {<br>  autoSync = false;<br>}<br><br>if(autoSync==='true' || autoSync === true){<br>  autoSync = true;<br>}else {<br>  autoSync = false;<br>}<br><br>let password = '';<br>let data = {<br>   input: {<br>        apiKey: apiKey,<br>        siteName: siteName,<br>        siteDomain: siteDomain,<br>        autoSync: autoSync,<br>        type: type,<br>        customers:customers<br>    },<br>    config: {<br>        url: 'https://' + siteName + '.' + siteDomain + '/api/v2/third_party_configurations',<br>        syncUrl: 'https://' + siteName + '.' + siteDomain + '/api/v2/third_party_sync_details/retrieve_latest_sync',<br>        customFieldUrl: 'https://' + siteName + '.' + siteDomain + '/api/v2/custom_field_configs',<br>        auth: {<br>            Authorization: 'Basic ' + CE.b64(apiKey + ':' + password)<br>        },<br>        query: {<br>            integration_name: type<br>        }<br>    },<br>    update: {<br>        url: 'https://' + siteName + '.integrations.' + siteDomain + '/integrations/update_tp_integ_conf',<br>        headers: {<br>            'Content-Type': 'application/json',<br>            'cache-control': 'no-cache'<br>        },<br>        body: {<br>            integration_name: type,<br>            site_name: siteName,<br>            api_key: apiKey<br>        }<br>    },<br>};<br><br>done(data);</pre>"
            click step-002 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPlN5bmNMb2c8L3RpdGxlPjwvaGVhZD48Ym9keT48Yj5KYXZhU2NyaXB0OjwvYj48YnI+PGJyPjxwcmU+bGV0IGRhdGEgPSB7PGJyPiAgY3VzdG9tZWZpZWxkczogWzxicj4gICAgICAgICAgICB7PGJyPiAgICAgICAgICAgICAgICBsYWJlbDogJ1N1YnNjcmlwdGlvbicsPGJyPiAgICAgICAgICAgICAgICBrZXk6ICdzdWJjc3QnLDxicj4gICAgICAgICAgICAgICAgZmllbGRzOiBbPGJyPiAgICAgICAgICAgICAgICAgICAgWydjdXJyZW5jeV9jb2RlJywgJ3N0cmluZycsICd0ZXh0J10sPGJyPiAgICAgICAgICAgICAgICAgICAgWydwbGFuX3F1YW50aXR5JywgJ251bWJlcicsICd0ZXh0J10sPGJyPiAgICAgICAgICAgICAgICAgICAgWydwbGFuX3VuaXRfcHJpY2UnLCAnbnVtYmVyJywgJ3RleHQnLCAnY3VycmVuY3knXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ3BsYW5fYW1vdW50JywgJ251bWJlcicsICd0ZXh0JywgJ2N1cnJlbmN5J10sPGJyPiAgICAgICAgICAgICAgICAgICAgWydiaWxsaW5nX3BlcmlvZCcsICdudW1iZXInLCAndGV4dCddLDxicj4gICAgICAgICAgICAgICAgICAgIFsnYmlsbGluZ19wZXJpb2RfdW5pdCcsICdzdHJpbmcnLCAndGV4dCddLDxicj4gICAgICAgICAgICAgICAgICAgIFsncGxhbl9mcmVlX3F1YW50aXR5JywgJ251bWJlcicsICd0ZXh0J10sPGJyPiAgICAgICAgICAgICAgICAgICAgWydzdGFydF9kYXRlJywgJ2RhdGV0aW1lJywgJ2RhdGUnXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ3RyaWFsX3N0YXJ0JywgJ2RhdGV0aW1lJywgJ2RhdGUnXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ3RyaWFsX2VuZCcsICdkYXRldGltZScsICdkYXRlJ10sPGJyPiAgICAgICAgICAgICAgICAgICAgWydjdXJyZW50X3Rlcm1fc3RhcnQnLCAnZGF0ZXRpbWUnLCAnZGF0ZSddLDxicj4gICAgICAgICAgICAgICAgICAgIFsnY3VycmVudF90ZXJtX2VuZCcsICdkYXRldGltZScsICdkYXRlJ10sPGJyPiAgICAgICAgICAgICAgICAgICAgWydjcmVhdGVkX2F0JywgJ2RhdGV0aW1lJywgJ2RhdGUnXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ3N0YXJ0ZWRfYXQnLCAnZGF0ZXRpbWUnLCAnZGF0ZSddLDxicj4gICAgICAgICAgICAgICAgICAgIFsnYWN0aXZhdGVkX2F0JywgJ2RhdGV0aW1lJywgJ2RhdGUnXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ2dpZnRfaWQnLCAnc3RyaW5nJywgJ3RleHQnXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ292ZXJyaWRlX3JlbGF0aW9uc2hpcCcsICdzdHJpbmcnLCAndGV4dCddLDxicj4gICAgICAgICAgICAgICAgICAgIFsncGF1c2VfZGF0ZScsICdkYXRldGltZScsICdkYXRlJ10sPGJyPiAgICAgICAgICAgICAgICAgICAgWydyZXN1bWVfZGF0ZScsICdkYXRldGltZScsICdkYXRlJ10sPGJyPiAgICAgICAgICAgICAgICAgICAgWydjYW5jZWxsZWRfYXQnLCAnZGF0ZXRpbWUnLCAnZGF0ZSddLDxicj4gICAgICAgICAgICAgICAgICAgIFsnY2FuY2VsX3JlYXNvbicsICdzdHJpbmcnLCAndGV4dCddLDxicj4gICAgICAgICAgICAgICAgICAgIFsnYWZmaWxpYXRlX3Rva2VuJywgJ3N0cmluZycsICd0ZXh0J10sPGJyPiAgICAgICAgICAgICAgICAgICAgWydjcmVhdGVkX2Zyb21faXAnLCAnc3RyaW5nJywgJ3RleHQnXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ3Jlc291cmNlX3ZlcnNpb24nLCAnbnVtYmVyJywgJ3RleHQnXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ3VwZGF0ZWRfYXQnLCAnZGF0ZXRpbWUnLCAnZGF0ZSddLDxicj4gICAgICAgICAgICAgICAgICAgIFsnaGFzX3NjaGVkdWxlZF9jaGFuZ2VzJywgJ3N0cmluZycsICd0ZXh0J10sPGJyPiAgICAgICAgICAgICAgICAgICAgWydwYXltZW50X3NvdXJjZV9pZCcsICdzdHJpbmcnLCAndGV4dCddLDxicj4gICAgICAgICAgICAgICAgICAgIFsnZXhjaGFuZ2VfcmF0ZScsICdudW1iZXInLCAndGV4dCddLDxicj4gICAgICAgICAgICAgICAgICAgIFsnYmFzZV9jdXJyZW5jeV9jb2RlJywgJ3N0cmluZycsICd0ZXh0J108YnI+ICAgICAgICAgICAgICAgIF08YnI+ICAgICAgICAgICAgfSw8YnI+ICAgICAgICAgICAgezxicj4gICAgICAgICAgICAgICAgbGFiZWw6ICdDdXN0b21lcicsPGJyPiAgICAgICAgICAgICAgICBrZXk6ICdjdXN0Y3N0Jyw8YnI+ICAgICAgICAgICAgICAgIGZpZWxkczogWzxicj4gICAgICAgICAgICAgICAgICAgIFsndmF0X251bWJlcicsICdzdHJpbmcnLCAndGV4dCddLDxicj4gICAgICAgICAgICAgICAgICAgIFsndmF0X251bWJlcl92YWxpZGF0ZWRfdGltZScsICdkYXRldGltZScsICdkYXRlJ10sPGJyPiAgICAgICAgICAgICAgICAgICAgWyd2YXRfbnVtYmVyX3N0YXR1cycsICdzdHJpbmcnLCAndGV4dCddLDxicj4gICAgICAgICAgICAgICAgICAgIFsnYWxsb3dfZGlyZWN0X2RlYml0JywgJ3N0cmluZycsICd0ZXh0J10sPGJyPiAgICAgICAgICAgICAgICAgICAgWydpc19sb2NhdGlvbl92YWxpZCcsICdzdHJpbmcnLCAndGV4dCddLDxicj4gICAgICAgICAgICAgICAgICAgIFsnY3JlYXRlZF9hdCcsICdkYXRldGltZScsICdkYXRlJ10sPGJyPiAgICAgICAgICAgICAgICAgICAgWydjcmVhdGVkX2Zyb21faXAnLCAnc3RyaW5nJywgJ3RleHQnXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ3RheGFiaWxpdHknLCAnc3RyaW5nJywgJ3RleHQnXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ2VudGl0eV9jb2RlJywgJ3N0cmluZycsICd0ZXh0J10sPGJyPiAgICAgICAgICAgICAgICAgICAgWydleGVtcHRfbnVtYmVyJywgJ3N0cmluZycsICd0ZXh0J10sPGJyPiAgICAgICAgICAgICAgICAgICAgWydyZXNvdXJjZV92ZXJzaW9uJywgJ251bWJlcicsICd0ZXh0J10sPGJyPiAgICAgICAgICAgICAgICAgICAgWyd1cGRhdGVkX2F0JywgJ2RhdGV0aW1lJywgJ2RhdGUnXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ2xvY2FsZScsICdzdHJpbmcnLCAndGV4dCddLDxicj4gICAgICAgICAgICAgICAgICAgIFsnY29uc29saWRhdGVkX2ludm9pY2luZycsICdzdHJpbmcnLCAndGV4dCddLDxicj4gICAgICAgICAgICAgICAgICAgIFsnYmlsbGluZ19kYXRlX21vZGUnLCAnc3RyaW5nJywgJ3RleHQnXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ2JpbGxpbmdfZGF5X29mX3dlZWsnLCAnc3RyaW5nJywgJ3RleHQnXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ2JpbGxpbmdfZGF5X29mX3dlZWtfbW9kZScsICdzdHJpbmcnLCAndGV4dCddLDxicj4gICAgICAgICAgICAgICAgICAgIFsncGlpX2NsZWFyZWQnLCAnc3RyaW5nJywgJ3RleHQnXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ2ZyYXVkX2ZsYWcnLCAnc3RyaW5nJywgJ3RleHQnXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ3ByaW1hcnlfcGF5bWVudF9zb3VyY2VfaWQnLCAnc3RyaW5nJywgJ3RleHQnXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ2JhY2t1cF9wYXltZW50X3NvdXJjZV9pZCcsICdzdHJpbmcnLCAndGV4dCddLDxicj4gICAgICAgICAgICAgICAgICAgIFsncHJvbW90aW9uYWxfY3JlZGl0cycsICdudW1iZXInLCAndGV4dCcsICdjdXJyZW5jeSddLDxicj4gICAgICAgICAgICAgICAgICAgIFsndW5iaWxsZWRfY2hhcmdlcycsICdudW1iZXInLCAndGV4dCcsICdjdXJyZW5jeSddLDxicj4gICAgICAgICAgICAgICAgICAgIFsncmVmdW5kYWJsZV9jcmVkaXRzJywgJ251bWJlcicsICd0ZXh0JywgJ2N1cnJlbmN5J10sPGJyPiAgICAgICAgICAgICAgICAgICAgWydleGNlc3NfcGF5bWVudHMnLCAnbnVtYmVyJywgJ3RleHQnLCAnY3VycmVuY3knXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ2RlbGV0ZWQnLCAnc3RyaW5nJywgJ3RleHQnXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ3JlZ2lzdGVyZWRfZm9yX2dzdCcsICdzdHJpbmcnLCAndGV4dCddLDxicj4gICAgICAgICAgICAgICAgICAgIFsnYnVzaW5lc3NfY3VzdG9tZXJfd2l0aG91dF92YXRfbnVtYmVyJywgJ3N0cmluZycsICd0ZXh0J10sPGJyPiAgICAgICAgICAgICAgICAgICAgWydjdXN0b21lcl90eXBlJywgJ3N0cmluZycsICd0ZXh0J10sPGJyPiAgICAgICAgICAgICAgICAgICAgWydjbGllbnRfcHJvZmlsZV9pZCcsICdzdHJpbmcnLCAndGV4dCddLDxicj4gICAgICAgICAgICAgICAgXTxicj4gICAgICAgICAgICB9LDxicj4gICAgICAgICAgICB7PGJyPiAgICAgICAgICAgICAgICBsYWJlbDogJ09yZGVyJyw8YnI+ICAgICAgICAgICAgICAgIGtleTogJ29yZGVyY3N0Jyw8YnI+ICAgICAgICAgICAgICAgIGZpZWxkczogWzxicj4gICAgICAgICAgICAgICAgICAgIFsnZG9jdW1lbnRfbnVtYmVyJywgJ3N0cmluZycsICd0ZXh0J10sPGJyPiAgICAgICAgICAgICAgICAgICAgWydpbnZvaWNlX2lkJywgJ3N0cmluZycsICd0ZXh0J10sPGJyPiAgICAgICAgICAgICAgICAgICAgWydjYW5jZWxsYXRpb25fcmVhc29uJywgJ3N0cmluZycsICd0ZXh0J10sPGJyPiAgICAgICAgICAgICAgICAgICAgWydwYXltZW50X3N0YXR1cycsICdzdHJpbmcnLCAndGV4dCddLDxicj4gICAgICAgICAgICAgICAgICAgIFsnb3JkZXJfdHlwZScsICdzdHJpbmcnLCAndGV4dCddLDxicj4gICAgICAgICAgICAgICAgICAgIFsncHJpY2VfdHlwZScsICdzdHJpbmcnLCAndGV4dCddLDxicj4gICAgICAgICAgICAgICAgICAgIFsncmVmZXJlbmNlX2lkJywgJ3N0cmluZycsICd0ZXh0J10sPGJyPiAgICAgICAgICAgICAgICAgICAgWydmdWxmaWxsbWVudF9zdGF0dXMnLCAnc3RyaW5nJywgJ3RleHQnXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ3NoaXBwaW5nX2RhdGUnLCAnZGF0ZXRpbWUnLCAnZGF0ZSddLDxicj4gICAgICAgICAgICAgICAgICAgIFsndHJhY2tpbmdfaWQnLCAnc3RyaW5nJywgJ3RleHQnXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ2JhdGNoX2lkJywgJ3N0cmluZycsICd0ZXh0J10sPGJyPiAgICAgICAgICAgICAgICAgICAgWydjcmVhdGVkX2J5JywgJ3N0cmluZycsICd0ZXh0J10sPGJyPiAgICAgICAgICAgICAgICAgICAgWydzaGlwbWVudF9jYXJyaWVyJywgJ3N0cmluZycsICd0ZXh0J10sPGJyPiAgICAgICAgICAgICAgICAgICAgWydpbnZvaWNlX3JvdW5kX29mZl9hbW91bnQnLCAnbnVtYmVyJywgJ3RleHQnLCAnY3VycmVuY3knXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ3RheCcsICdudW1iZXInLCAndGV4dCcsICdjdXJyZW5jeSddLDxicj4gICAgICAgICAgICAgICAgICAgIFsnYW1vdW50X2FkanVzdGVkJywgJ251bWJlcicsICd0ZXh0JywgJ2N1cnJlbmN5J10sPGJyPiAgICAgICAgICAgICAgICAgICAgWydyZWZ1bmRhYmxlX2NyZWRpdHNfaXNzdWVkJywgJ251bWJlcicsICd0ZXh0JywgJ2N1cnJlbmN5J10sPGJyPiAgICAgICAgICAgICAgICAgICAgWydyZWZ1bmRhYmxlX2NyZWRpdHMnLCAnbnVtYmVyJywgJ3RleHQnLCAnY3VycmVuY3knXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ3JvdW5kaW5nX2FkanVzdGVtZW50JywgJ251bWJlcicsICd0ZXh0JywgJ2N1cnJlbmN5J10sPGJyPiAgICAgICAgICAgICAgICAgICAgWydwYWlkX29uJywgJ2RhdGV0aW1lJywgJ2RhdGUnXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ3NoaXBwaW5nX2N1dF9vZmZfZGF0ZScsICdkYXRldGltZScsICdkYXRlJ10sPGJyPiAgICAgICAgICAgICAgICAgICAgWydjcmVhdGVkX2F0JywgJ2RhdGV0aW1lJywgJ2RhdGUnXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ3N0YXR1c191cGRhdGVfYXQnLCAnZGF0ZXRpbWUnLCAnZGF0ZSddLDxicj4gICAgICAgICAgICAgICAgICAgIFsnZGVsaXZlcmVkX2F0JywgJ2RhdGV0aW1lJywgJ2RhdGUnXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ3NoaXBwZWRfYXQnLCAnZGF0ZXRpbWUnLCAnZGF0ZSddLDxicj4gICAgICAgICAgICAgICAgICAgIFsncmVzb3VyY2VfdmVyc2lvbicsICdudW1iZXInLCAndGV4dCddLDxicj4gICAgICAgICAgICAgICAgICAgIFsndXBkYXRlZF9hdCcsICdkYXRldGltZScsICdkYXRlJ10sPGJyPiAgICAgICAgICAgICAgICAgICAgWydjYW5jZWxsZWRfYXQnLCAnZGF0ZXRpbWUnLCAnZGF0ZSddLDxicj4gICAgICAgICAgICAgICAgICAgIFsnZGlzY291bnQnLCAnbnVtYmVyJywgJ3RleHQnLCAnY3VycmVuY3knXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ3N1Yl90b3RhbCcsICdudW1iZXInLCAndGV4dCcsICdjdXJyZW5jeSddLDxicj4gICAgICAgICAgICAgICAgICAgIFsndG90YWwnLCAnbnVtYmVyJywgJ3RleHQnLCAnY3VycmVuY3knXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ2RlbGV0ZWQnLCAnc3RyaW5nJywgJ3RleHQnXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ2N1cnJlbmN5X2NvZGUnLCAnc3RyaW5nJywgJ3RleHQnXSw8YnI+ICAgICAgICAgICAgICAgICAgICBbJ2lzX2dpZnRlZCcsICdzdHJpbmcnLCAndGV4dCddLDxicj4gICAgICAgICAgICAgICAgICAgIFsnZ2lmdF9pZCcsICdzdHJpbmcnLCAndGV4dCddPGJyPiAgICAgICAgICAgICAgICBdPGJyPiAgICAgICAgICAgIH0sPGJyPiAgICAgICAgXSw8YnI+ICBlbGlzdDpbXSw8YnI+ICBlbWFwOnt9LDxicj4gIHNsaXN0OltdLDxicj4gIHNtYXA6e30sPGJyPiAgc3luY0NvdW50Ons8YnI+ICAgIGVDb3VudDowLDxicj4gICAgc0NvdW50OjA8YnI+ICB9PGJyPn07PGJyPmRvbmUoZGF0YSk7PC9wcmU+PGJyPjxiPlJBVyBKU09OOjwvYj48YnI+PGJyPjxwcmU+ezxicj4gICdvblN1Y2Nlc3MnOiBbPGJyPiAgICAnQ2hhcmdlYmVlQ29uZmlnUGFyYW1zJzxicj4gIF0sPGJyPiAgJ29uRmFpbHVyZSc6IFtdLDxicj4gICduYW1lJzogJ1N5bmNMb2cnLDxicj4gICd0eXBlJzogJ3NjcmlwdCcsPGJyPiAgJ3Byb3BlcnRpZXMnOiB7PGJyPiAgICAnYm9keSc6ICdsZXQgZGF0YSA9IHtcbiAgY3VzdG9tZWZpZWxkczogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGxhYmVsOiBcJ1N1YnNjcmlwdGlvblwnLFxuICAgICAgICAgICAgICAgIGtleTogXCdzdWJjc3RcJyxcbiAgICAgICAgICAgICAgICBmaWVsZHM6IFtcbiAgICAgICAgICAgICAgICAgICAgWydjdXJyZW5jeV9jb2RlJywgJ3N0cmluZycsICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsncGxhbl9xdWFudGl0eScsICdudW1iZXInLCAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ3BsYW5fdW5pdF9wcmljZScsICdudW1iZXInLCAndGV4dCcsICdjdXJyZW5jeSddLFxuICAgICAgICAgICAgICAgICAgICBbJ3BsYW5fYW1vdW50JywgJ251bWJlcicsICd0ZXh0JywgJ2N1cnJlbmN5J10sXG4gICAgICAgICAgICAgICAgICAgIFsnYmlsbGluZ19wZXJpb2QnLCAnbnVtYmVyJywgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydiaWxsaW5nX3BlcmlvZF91bml0JywgJ3N0cmluZycsICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsncGxhbl9mcmVlX3F1YW50aXR5JywgJ251bWJlcicsICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsnc3RhcnRfZGF0ZScsICdkYXRldGltZScsICdkYXRlJ10sXG4gICAgICAgICAgICAgICAgICAgIFsndHJpYWxfc3RhcnQnLCAnZGF0ZXRpbWUnLCAnZGF0ZSddLFxuICAgICAgICAgICAgICAgICAgICBbJ3RyaWFsX2VuZCcsICdkYXRldGltZScsICdkYXRlJ10sXG4gICAgICAgICAgICAgICAgICAgIFsnY3VycmVudF90ZXJtX3N0YXJ0JywgJ2RhdGV0aW1lJywgJ2RhdGUnXSxcbiAgICAgICAgICAgICAgICAgICAgWydjdXJyZW50X3Rlcm1fZW5kJywgJ2RhdGV0aW1lJywgJ2RhdGUnXSxcbiAgICAgICAgICAgICAgICAgICAgWydjcmVhdGVkX2F0JywgJ2RhdGV0aW1lJywgJ2RhdGUnXSxcbiAgICAgICAgICAgICAgICAgICAgWydzdGFydGVkX2F0JywgJ2RhdGV0aW1lJywgJ2RhdGUnXSxcbiAgICAgICAgICAgICAgICAgICAgWydhY3RpdmF0ZWRfYXQnLCAnZGF0ZXRpbWUnLCAnZGF0ZSddLFxuICAgICAgICAgICAgICAgICAgICBbJ2dpZnRfaWQnLCAnc3RyaW5nJywgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydvdmVycmlkZV9yZWxhdGlvbnNoaXAnLCAnc3RyaW5nJywgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydwYXVzZV9kYXRlJywgJ2RhdGV0aW1lJywgJ2RhdGUnXSxcbiAgICAgICAgICAgICAgICAgICAgWydyZXN1bWVfZGF0ZScsICdkYXRldGltZScsICdkYXRlJ10sXG4gICAgICAgICAgICAgICAgICAgIFsnY2FuY2VsbGVkX2F0JywgJ2RhdGV0aW1lJywgJ2RhdGUnXSxcbiAgICAgICAgICAgICAgICAgICAgWydjYW5jZWxfcmVhc29uJywgJ3N0cmluZycsICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsnYWZmaWxpYXRlX3Rva2VuJywgJ3N0cmluZycsICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsnY3JlYXRlZF9mcm9tX2lwJywgJ3N0cmluZycsICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsncmVzb3VyY2VfdmVyc2lvbicsICdudW1iZXInLCAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ3VwZGF0ZWRfYXQnLCAnZGF0ZXRpbWUnLCAnZGF0ZSddLFxuICAgICAgICAgICAgICAgICAgICBbJ2hhc19zY2hlZHVsZWRfY2hhbmdlcycsICdzdHJpbmcnLCAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ3BheW1lbnRfc291cmNlX2lkJywgJ3N0cmluZycsICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsnZXhjaGFuZ2VfcmF0ZScsICdudW1iZXInLCAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2Jhc2VfY3VycmVuY3lfY29kZScsICdzdHJpbmcnLCAndGV4dCddXG4gICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBsYWJlbDogXCdDdXN0b21lclwnLFxuICAgICAgICAgICAgICAgIGtleTogXCdjdXN0Y3N0XCcsXG4gICAgICAgICAgICAgICAgZmllbGRzOiBbXG4gICAgICAgICAgICAgICAgICAgIFsndmF0X251bWJlcicsICdzdHJpbmcnLCAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ3ZhdF9udW1iZXJfdmFsaWRhdGVkX3RpbWUnLCAnZGF0ZXRpbWUnLCAnZGF0ZSddLFxuICAgICAgICAgICAgICAgICAgICBbJ3ZhdF9udW1iZXJfc3RhdHVzJywgJ3N0cmluZycsICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsnYWxsb3dfZGlyZWN0X2RlYml0JywgJ3N0cmluZycsICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsnaXNfbG9jYXRpb25fdmFsaWQnLCAnc3RyaW5nJywgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydjcmVhdGVkX2F0JywgJ2RhdGV0aW1lJywgJ2RhdGUnXSxcbiAgICAgICAgICAgICAgICAgICAgWydjcmVhdGVkX2Zyb21faXAnLCAnc3RyaW5nJywgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWyd0YXhhYmlsaXR5JywgJ3N0cmluZycsICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsnZW50aXR5X2NvZGUnLCAnc3RyaW5nJywgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydleGVtcHRfbnVtYmVyJywgJ3N0cmluZycsICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsncmVzb3VyY2VfdmVyc2lvbicsICdudW1iZXInLCAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ3VwZGF0ZWRfYXQnLCAnZGF0ZXRpbWUnLCAnZGF0ZSddLFxuICAgICAgICAgICAgICAgICAgICBbJ2xvY2FsZScsICdzdHJpbmcnLCAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2NvbnNvbGlkYXRlZF9pbnZvaWNpbmcnLCAnc3RyaW5nJywgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydiaWxsaW5nX2RhdGVfbW9kZScsICdzdHJpbmcnLCAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2JpbGxpbmdfZGF5X29mX3dlZWsnLCAnc3RyaW5nJywgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydiaWxsaW5nX2RheV9vZl93ZWVrX21vZGUnLCAnc3RyaW5nJywgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydwaWlfY2xlYXJlZCcsICdzdHJpbmcnLCAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2ZyYXVkX2ZsYWcnLCAnc3RyaW5nJywgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydwcmltYXJ5X3BheW1lbnRfc291cmNlX2lkJywgJ3N0cmluZycsICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsnYmFja3VwX3BheW1lbnRfc291cmNlX2lkJywgJ3N0cmluZycsICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsncHJvbW90aW9uYWxfY3JlZGl0cycsICdudW1iZXInLCAndGV4dCcsICdjdXJyZW5jeSddLFxuICAgICAgICAgICAgICAgICAgICBbJ3VuYmlsbGVkX2NoYXJnZXMnLCAnbnVtYmVyJywgJ3RleHQnLCAnY3VycmVuY3knXSxcbiAgICAgICAgICAgICAgICAgICAgWydyZWZ1bmRhYmxlX2NyZWRpdHMnLCAnbnVtYmVyJywgJ3RleHQnLCAnY3VycmVuY3knXSxcbiAgICAgICAgICAgICAgICAgICAgWydleGNlc3NfcGF5bWVudHMnLCAnbnVtYmVyJywgJ3RleHQnLCAnY3VycmVuY3knXSxcbiAgICAgICAgICAgICAgICAgICAgWydkZWxldGVkJywgJ3N0cmluZycsICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsncmVnaXN0ZXJlZF9mb3JfZ3N0JywgJ3N0cmluZycsICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsnYnVzaW5lc3NfY3VzdG9tZXJfd2l0aG91dF92YXRfbnVtYmVyJywgJ3N0cmluZycsICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsnY3VzdG9tZXJfdHlwZScsICdzdHJpbmcnLCAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2NsaWVudF9wcm9maWxlX2lkJywgJ3N0cmluZycsICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBsYWJlbDogXCdPcmRlclwnLFxuICAgICAgICAgICAgICAgIGtleTogXCdvcmRlcmNzdFwnLFxuICAgICAgICAgICAgICAgIGZpZWxkczogW1xuICAgICAgICAgICAgICAgICAgICBbJ2RvY3VtZW50X251bWJlcicsICdzdHJpbmcnLCAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2ludm9pY2VfaWQnLCAnc3RyaW5nJywgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydjYW5jZWxsYXRpb25fcmVhc29uJywgJ3N0cmluZycsICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsncGF5bWVudF9zdGF0dXMnLCAnc3RyaW5nJywgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydvcmRlcl90eXBlJywgJ3N0cmluZycsICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsncHJpY2VfdHlwZScsICdzdHJpbmcnLCAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ3JlZmVyZW5jZV9pZCcsICdzdHJpbmcnLCAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2Z1bGZpbGxtZW50X3N0YXR1cycsICdzdHJpbmcnLCAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ3NoaXBwaW5nX2RhdGUnLCAnZGF0ZXRpbWUnLCAnZGF0ZSddLFxuICAgICAgICAgICAgICAgICAgICBbJ3RyYWNraW5nX2lkJywgJ3N0cmluZycsICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsnYmF0Y2hfaWQnLCAnc3RyaW5nJywgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydjcmVhdGVkX2J5JywgJ3N0cmluZycsICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsnc2hpcG1lbnRfY2FycmllcicsICdzdHJpbmcnLCAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2ludm9pY2Vfcm91bmRfb2ZmX2Ftb3VudCcsICdudW1iZXInLCAndGV4dCcsICdjdXJyZW5jeSddLFxuICAgICAgICAgICAgICAgICAgICBbJ3RheCcsICdudW1iZXInLCAndGV4dCcsICdjdXJyZW5jeSddLFxuICAgICAgICAgICAgICAgICAgICBbJ2Ftb3VudF9hZGp1c3RlZCcsICdudW1iZXInLCAndGV4dCcsICdjdXJyZW5jeSddLFxuICAgICAgICAgICAgICAgICAgICBbJ3JlZnVuZGFibGVfY3JlZGl0c19pc3N1ZWQnLCAnbnVtYmVyJywgJ3RleHQnLCAnY3VycmVuY3knXSxcbiAgICAgICAgICAgICAgICAgICAgWydyZWZ1bmRhYmxlX2NyZWRpdHMnLCAnbnVtYmVyJywgJ3RleHQnLCAnY3VycmVuY3knXSxcbiAgICAgICAgICAgICAgICAgICAgWydyb3VuZGluZ19hZGp1c3RlbWVudCcsICdudW1iZXInLCAndGV4dCcsICdjdXJyZW5jeSddLFxuICAgICAgICAgICAgICAgICAgICBbJ3BhaWRfb24nLCAnZGF0ZXRpbWUnLCAnZGF0ZSddLFxuICAgICAgICAgICAgICAgICAgICBbJ3NoaXBwaW5nX2N1dF9vZmZfZGF0ZScsICdkYXRldGltZScsICdkYXRlJ10sXG4gICAgICAgICAgICAgICAgICAgIFsnY3JlYXRlZF9hdCcsICdkYXRldGltZScsICdkYXRlJ10sXG4gICAgICAgICAgICAgICAgICAgIFsnc3RhdHVzX3VwZGF0ZV9hdCcsICdkYXRldGltZScsICdkYXRlJ10sXG4gICAgICAgICAgICAgICAgICAgIFsnZGVsaXZlcmVkX2F0JywgJ2RhdGV0aW1lJywgJ2RhdGUnXSxcbiAgICAgICAgICAgICAgICAgICAgWydzaGlwcGVkX2F0JywgJ2RhdGV0aW1lJywgJ2RhdGUnXSxcbiAgICAgICAgICAgICAgICAgICAgWydyZXNvdXJjZV92ZXJzaW9uJywgJ251bWJlcicsICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsndXBkYXRlZF9hdCcsICdkYXRldGltZScsICdkYXRlJ10sXG4gICAgICAgICAgICAgICAgICAgIFsnY2FuY2VsbGVkX2F0JywgJ2RhdGV0aW1lJywgJ2RhdGUnXSxcbiAgICAgICAgICAgICAgICAgICAgWydkaXNjb3VudCcsICdudW1iZXInLCAndGV4dCcsICdjdXJyZW5jeSddLFxuICAgICAgICAgICAgICAgICAgICBbJ3N1Yl90b3RhbCcsICdudW1iZXInLCAndGV4dCcsICdjdXJyZW5jeSddLFxuICAgICAgICAgICAgICAgICAgICBbJ3RvdGFsJywgJ251bWJlcicsICd0ZXh0JywgJ2N1cnJlbmN5J10sXG4gICAgICAgICAgICAgICAgICAgIFsnZGVsZXRlZCcsICdzdHJpbmcnLCAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2N1cnJlbmN5X2NvZGUnLCAnc3RyaW5nJywgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydpc19naWZ0ZWQnLCAnc3RyaW5nJywgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydnaWZ0X2lkJywgJ3N0cmluZycsICd0ZXh0J11cbiAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICB9LFxuICAgICAgICBdLFxuICBlbGlzdDpbXSxcbiAgZW1hcDp7fSxcbiAgc2xpc3Q6W10sXG4gIHNtYXA6e30sXG4gIHN5bmNDb3VudDp7XG4gICAgZUNvdW50OjAsXG4gICAgc0NvdW50OjBcbiAgfVxufTtcbmRvbmUoZGF0YSk7Jzxicj4gIH08YnI+fTwvcHJlPjwvYm9keT48L2h0bWw+'));document.close();" "JavaScript:<br><pre>let data = {<br>  customefields: [<br>            {<br>                label: 'Subscription',<br>                key: 'subcst',<br>                fields: [<br>                    ['currency_code', 'string', 'text'],<br>                    ['plan_quantity', 'number', 'text'],<br>                    ['plan_unit_price', 'number', 'text', 'currency'],<br>                    ['plan_amount', 'number', 'text', 'currency'],<br>                    ['billing_period', 'number', 'text'],<br>                    ['billing_period_unit', 'string', 'text'],<br>                    ['plan_free_quantity', 'number', 'text'],<br>                    ['start_date', 'datetime', 'date'],<br>                    ['trial_start', 'datetime', 'date'],<br>                    ['trial_end', 'datetime', 'date'],<br>                    ['current_term_start', 'datetime', 'date'],<br>                    ['current_term_end', 'datetime', 'date'],<br>                    ['created_at', 'datetime', 'date'],<br>                    ['started_at', 'datetime', 'date'],<br>                    ['activated_at', 'datetime', 'date'],<br>                    ['gift_id', 'string', 'text'],<br>                    ['override_relationship', 'string', 'text'],<br>                    ['pause_date', 'datetime', 'date'],<br>                    ['resume_date', 'datetime', 'date'],<br>                    ['cancelled_at', 'datetime', 'date'],<br>                    ['cancel_reason', 'string', 'text'],<br>                    ['affiliate_token', 'string', 'text'],<br>                    ['created_from_ip', 'string', 'text'],<br>                    ['resource_version', 'number', 'text'],<br>                    ['updated_at', 'datetime', 'date'],<br>                    ['has_scheduled_changes', 'string', 'text'],<br>                    ['payment_source_id', 'string', 'text'],<br>                    ['exchange_rate', 'number', 'text'],<br>                    ['base_currency_code', 'string', 'text']<br>                ]<br>            },<br>            {<br>                label: 'Customer',<br>                key: 'custcst',<br>                fields: [<br>                    ['vat_number', 'string', 'text'],<br>                    ['vat_number_validated_time', 'datetime', 'date'],<br>                    ['vat_number_status', 'string', 'text'],<br>                    ['allow_direct_debit', 'string', 'text'],<br>                    ['is_location_valid', 'string', 'text'],<br>                    ['created_at', 'datetime', 'date'],<br>                    ['created_from_ip', 'string', 'text'],<br>                    ['taxability', 'string', 'text'],<br>                    ['entity_code', 'string', 'text'],<br>                    ['exempt_number', 'string', 'text'],<br>                    ['resource_version', 'number', 'text'],<br>                    ['updated_at', 'datetime', 'date'],<br>                    ['locale', 'string', 'text'],<br>                    ['consolidated_invoicing', 'string', 'text'],<br>                    ['billing_date_mode', 'string', 'text'],<br>                    ['billing_day_of_week', 'string', 'text'],<br>                    ['billing_day_of_week_mode', 'string', 'text'],<br>                    ['pii_cleared', 'string', 'text'],<br>                    ['fraud_flag', 'string', 'text'],<br>                    ['primary_payment_source_id', 'string', 'text'],<br>                    ['backup_payment_source_id', 'string', 'text'],<br>                    ['promotional_credits', 'number', 'text', 'currency'],<br>                    ['unbilled_charges', 'number', 'text', 'currency'],<br>                    ['refundable_credits', 'number', 'text', 'currency'],<br>                    ['excess_payments', 'number', 'text', 'currency'],<br>                    ['deleted', 'string', 'text'],<br>                    ['registered_for_gst', 'string', 'text'],<br>                    ['business_customer_without_vat_number', 'string', 'text'],<br>                    ['customer_type', 'string', 'text'],<br>                    ['client_profile_id', 'string', 'text'],<br>                ]<br>            },<br>            {<br>                label: 'Order',<br>                key: 'ordercst',<br>                fields: [<br>                    ['document_number', 'string', 'text'],<br>                    ['invoice_id', 'string', 'text'],<br>                    ['cancellation_reason', 'string', 'text'],<br>                    ['payment_status', 'string', 'text'],<br>                    ['order_type', 'string', 'text'],<br>                    ['price_type', 'string', 'text'],<br>                    ['reference_id', 'string', 'text'],<br>                    ['fulfillment_status', 'string', 'text'],<br>                    ['shipping_date', 'datetime', 'date'],<br>                    ['tracking_id', 'string', 'text'],<br>                    ['batch_id', 'string', 'text'],<br>                    ['created_by', 'string', 'text'],<br>                    ['shipment_carrier', 'string', 'text'],<br>                    ['invoice_round_off_amount', 'number', 'text', 'currency'],<br>                    ['tax', 'number', 'text', 'currency'],<br>                    ['amount_adjusted', 'number', 'text', 'currency'],<br>                    ['refundable_credits_issued', 'number', 'text', 'currency'],<br>                    ['refundable_credits', 'number', 'text', 'currency'],<br>                    ['rounding_adjustement', 'number', 'text', 'currency'],<br>                    ['paid_on', 'datetime', 'date'],<br>                    ['shipping_cut_off_date', 'datetime', 'date'],<br>                    ['created_at', 'datetime', 'date'],<br>                    ['status_update_at', 'datetime', 'date'],<br>                    ['delivered_at', 'datetime', 'date'],<br>                    ['shipped_at', 'datetime', 'date'],<br>                    ['resource_version', 'number', 'text'],<br>                    ['updated_at', 'datetime', 'date'],<br>                    ['cancelled_at', 'datetime', 'date'],<br>                    ['discount', 'number', 'text', 'currency'],<br>                    ['sub_total', 'number', 'text', 'currency'],<br>                    ['total', 'number', 'text', 'currency'],<br>                    ['deleted', 'string', 'text'],<br>                    ['currency_code', 'string', 'text'],<br>                    ['is_gifted', 'string', 'text'],<br>                    ['gift_id', 'string', 'text']<br>                ]<br>            },<br>        ],<br>  elist:[],<br>  emap:{},<br>  slist:[],<br>  smap:{},<br>  syncCount:{<br>    eCount:0,<br>    sCount:0<br>  }<br>};<br>done(data);</pre>"
            click step-003 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkNoYXJnZWJlZUNvbmZpZ1BhcmFtczwvdGl0bGU+PC9oZWFkPjxib2R5PjxiPk90aGVyIChodHRwUmVxdWVzdCk6PC9iPjxicj48YnI+PHByZT4gICAgICB1cmwgOiAke3N0ZXBzLklucHV0UGFyYW1zLmNvbmZpZy51cmx9PGJyPiAgICBxdWVyeSA6ICR7c3RlcHMuSW5wdXRQYXJhbXMuY29uZmlnLnF1ZXJ5fTxicj4gIGhlYWRlcnMgOiAke3N0ZXBzLklucHV0UGFyYW1zLmNvbmZpZy5hdXRofTxicj4gICBtZXRob2QgOiBHRVQ8L3ByZT48YnI+PGI+UkFXIEpTT046PC9iPjxicj48YnI+PHByZT57PGJyPiAgJ29uU3VjY2Vzcyc6IFs8YnI+ICAgICdHZXRDQkN1c3RvbUZpZWxkcyc8YnI+ICBdLDxicj4gICdvbkZhaWx1cmUnOiBbXSw8YnI+ICAnbmFtZSc6ICdDaGFyZ2ViZWVDb25maWdQYXJhbXMnLDxicj4gICd0eXBlJzogJ2h0dHBSZXF1ZXN0Jyw8YnI+ICAncHJvcGVydGllcyc6IHs8YnI+ICAgICd1cmwnOiAnJHtzdGVwcy5JbnB1dFBhcmFtcy5jb25maWcudXJsfScsPGJyPiAgICAncXVlcnknOiAnJHtzdGVwcy5JbnB1dFBhcmFtcy5jb25maWcucXVlcnl9Jyw8YnI+ICAgICdoZWFkZXJzJzogJyR7c3RlcHMuSW5wdXRQYXJhbXMuY29uZmlnLmF1dGh9Jyw8YnI+ICAgICdtZXRob2QnOiAnR0VUJzxicj4gIH08YnI+fTwvcHJlPjwvYm9keT48L2h0bWw+'));document.close();" "Other (httpRequest):<br><pre>      url : ${steps.InputParams.config.url}<br>    query : ${steps.InputParams.config.query}<br>  headers : ${steps.InputParams.config.auth}<br>   method : GET</pre>"
            click step-004 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkdldENCQ3VzdG9tRmllbGRzPC90aXRsZT48L2hlYWQ+PGJvZHk+PGI+T3RoZXIgKGh0dHBSZXF1ZXN0KTo8L2I+PGJyPjxicj48cHJlPiAgICAgIHVybCA6ICR7c3RlcHMuSW5wdXRQYXJhbXMuY29uZmlnLmN1c3RvbUZpZWxkVXJsfTxicj4gIGhlYWRlcnMgOiAke3N0ZXBzLklucHV0UGFyYW1zLmNvbmZpZy5hdXRofTxicj4gICBtZXRob2QgOiBHRVQ8L3ByZT48YnI+PGI+UkFXIEpTT046PC9iPjxicj48YnI+PHByZT57PGJyPiAgJ29uU3VjY2Vzcyc6IFs8YnI+ICAgICdVcGRhdGVDdXN0b21GaWVsZEluZm8nPGJyPiAgXSw8YnI+ICAnb25GYWlsdXJlJzogW10sPGJyPiAgJ25hbWUnOiAnR2V0Q0JDdXN0b21GaWVsZHMnLDxicj4gICd0eXBlJzogJ2h0dHBSZXF1ZXN0Jyw8YnI+ICAncHJvcGVydGllcyc6IHs8YnI+ICAgICd1cmwnOiAnJHtzdGVwcy5JbnB1dFBhcmFtcy5jb25maWcuY3VzdG9tRmllbGRVcmx9Jyw8YnI+ICAgICdoZWFkZXJzJzogJyR7c3RlcHMuSW5wdXRQYXJhbXMuY29uZmlnLmF1dGh9Jyw8YnI+ICAgICdtZXRob2QnOiAnR0VUJzxicj4gIH08YnI+fTwvcHJlPjwvYm9keT48L2h0bWw+'));document.close();" "Other (httpRequest):<br><pre>      url : ${steps.InputParams.config.customFieldUrl}<br>  headers : ${steps.InputParams.config.auth}<br>   method : GET</pre>"
            click step-005 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPlVwZGF0ZUN1c3RvbUZpZWxkSW5mbzwvdGl0bGU+PC9oZWFkPjxib2R5PjxiPkphdmFTY3JpcHQ6PC9iPjxicj48YnI+PHByZT5sZXQgY3VzdG9tZWZpZWxkcyA9IHN0ZXBzLlN5bmNMb2cuY3VzdG9tZWZpZWxkczs8YnI+bGV0IGxpc3QgPSBzdGVwcy5HZXRDQkN1c3RvbUZpZWxkcy5yZXNwb25zZS5ib2R5Ozxicj5pZihsaXN0IT09dW5kZWZpbmVkICYmIGxpc3QubGlzdCE9PXVuZGVmaW5lZCAmJiBsaXN0Lmxpc3QubGVuZ3RoPHNwYW4+Pjwvc3Bhbj4wKSB7PGJyPiAgbGlzdCA9IGxpc3QubGlzdDs8YnI+fTxicj5pZihsaXN0IT09dW5kZWZpbmVkKXs8YnI+ICBsZXQgbGlzdE1hcCA9IHt9Ozxicj4gIGZvcih2YXIgaT0wO2k8c3Bhbj48PC9zcGFuPmxpc3QubGVuZ3RoO2krKyl7PGJyPiAgICBsZXQgb2JqID0gbGlzdFtpXTs8YnI+ICAgIGlmKG9iai5jdXN0b21fZmllbGRfY29uZmlnICE9PSB1bmRlZmluZWQpIHs8YnI+ICAgICAgaWYob2JqLmN1c3RvbV9maWVsZF9jb25maWcuZW50aXR5X3R5cGUgPT09ICdjdXN0b21lcicpIHs8YnI+ICAgICAgICBsaXN0TWFwWydjdXN0Y3N0Xycrb2JqLmN1c3RvbV9maWVsZF9jb25maWcuYXBpX25hbWVdID0gb2JqLmN1c3RvbV9maWVsZF9jb25maWc7PGJyPiAgICAgIH1lbHNlIGlmKG9iai5jdXN0b21fZmllbGRfY29uZmlnLmVudGl0eV90eXBlID09PSAnc3Vic2NyaXB0aW9uJykgezxicj4gICAgICAgIGxpc3RNYXBbJ3N1YmNzdF8nK29iai5jdXN0b21fZmllbGRfY29uZmlnLmFwaV9uYW1lXSA9IG9iai5jdXN0b21fZmllbGRfY29uZmlnOzxicj4gICAgICB9PGJyPiAgICB9PGJyPiAgICA8YnI+ICB9PGJyPiAgICBsZXQgc3luY1J1bGVzRmllbGRzID0gc3RlcHMuQ2hhcmdlYmVlQ29uZmlnUGFyYW1zLnJlc3BvbnNlLmJvZHkudGhpcmRfcGFydHlfY29uZmlndXJhdGlvbi5jb25maWdfanNvbi5jbG91ZEVsZW1lbnRzLnN5bmNSdWxlc0ZpZWxkczs8YnI+ICBpZiAoc3luY1J1bGVzRmllbGRzID09PSB1bmRlZmluZWQpIHs8YnI+ICAgIHN5bmNSdWxlc0ZpZWxkcyA9IHs8YnI+ICAgICAgJ2NvbXBhbnknOiB7PGJyPjxicj4gICAgICB9LDxicj4gICAgICAnY29udGFjdCc6IHs8YnI+PGJyPiAgICAgIH0sPGJyPiAgICAgICdkZWFsJzogezxicj4gICAgICB9LDxicj4gICAgICAnc3luYyc6ICdmYWxzZSc8YnI+ICAgIH07PGJyPjxicj4gIH0gZWxzZSB7PGJyPiAgICBpZiAoc3luY1J1bGVzRmllbGRzLmNvbXBhbnkgPT09IHVuZGVmaW5lZCB8fCBzeW5jUnVsZXNGaWVsZHMuY29tcGFueSA9PT0gJycpIHs8YnI+ICAgICAgc3luY1J1bGVzRmllbGRzLmNvbXBhbnkgPSB7fTs8YnI+ICAgIH08YnI+ICAgIGlmIChzeW5jUnVsZXNGaWVsZHMuY29udGFjdCA9PT0gdW5kZWZpbmVkIHx8IHN5bmNSdWxlc0ZpZWxkcy5jb250YWN0ID09PSAnJykgezxicj4gICAgICBzeW5jUnVsZXNGaWVsZHMuY29udGFjdCA9IHt9Ozxicj4gICAgfTxicj4gICAgaWYgKHN5bmNSdWxlc0ZpZWxkcy5kZWFsID09PSB1bmRlZmluZWQgfHwgc3luY1J1bGVzRmllbGRzLmRlYWwgPT09ICcnKSB7PGJyPiAgICAgIHN5bmNSdWxlc0ZpZWxkcy5kZWFsID0ge307PGJyPiAgICB9PGJyPiAgfTxicj4gIDxicj4gIGxldCBjb250YWN0S2V5cyA9IE9iamVjdC5rZXlzKHN5bmNSdWxlc0ZpZWxkcy5jb250YWN0KTs8YnI+ICBsZXQgc3ViS2V5cyA9IE9iamVjdC5rZXlzKHN5bmNSdWxlc0ZpZWxkcy5kZWFsKTs8YnI+ICBsZXQgY0tleXMgPVtdOzxicj4gIGxldCBjTWFwID0ge307PGJyPiAgZm9yICh2YXIgaSA9IDA7IGkgPHNwYW4+PDwvc3Bhbj4gY29udGFjdEtleXMubGVuZ3RoOyBpKyspIHs8YnI+ICAgIGlmKGNvbnRhY3RLZXlzW2ldLnN0YXJ0c1dpdGgoJ2N1c3Rjc3RfY2ZfJykgfHwgY29udGFjdEtleXNbaV0uc3RhcnRzV2l0aCgnc3ViY3N0X2NmXycpICkgezxicj4gICAgICBpZihjTWFwW2NvbnRhY3RLZXlzW2ldXSA9PT0gdW5kZWZpbmVkKXs8YnI+ICAgICAgICBjS2V5cy5wdXNoKGNvbnRhY3RLZXlzW2ldKTs8YnI+ICAgICAgICBjTWFwW2NvbnRhY3RLZXlzW2ldXSA9Y29udGFjdEtleXNbaV07PGJyPiAgICAgIH08YnI+ICAgIH08YnI+ICB9PGJyPiAgZm9yICh2YXIgaSA9IDA7IGkgPHNwYW4+PDwvc3Bhbj4gc3ViS2V5cy5sZW5ndGg7IGkrKykgezxicj4gICAgaWYoc3ViS2V5c1tpXS5zdGFydHNXaXRoKCdjdXN0Y3N0X2NmXycpIHx8IHN1YktleXNbaV0uc3RhcnRzV2l0aCgnc3ViY3N0X2NmXycpICkgezxicj4gICAgICBpZihjTWFwW3N1YktleXNbaV1dID09PSB1bmRlZmluZWQpezxicj4gICAgICAgIGNLZXlzLnB1c2goc3ViS2V5c1tpXSk7PGJyPiAgICAgICAgY01hcFtzdWJLZXlzW2ldXSA9c3ViS2V5c1tpXTs8YnI+ICAgICAgfTxicj4gICAgfTxicj4gIH08YnI+ICA8YnI+ICAgIGZvciAodmFyIGkgPSAwOyBpIDxzcGFuPjw8L3NwYW4+IGNLZXlzLmxlbmd0aDsgaSsrKSB7PGJyPiAgICAgIGlmKGxpc3RNYXBbY0tleXNbaV1dICE9PSB1bmRlZmluZWQpIHs8YnI+ICAgICAgICAgbGV0IHR5cGUgPSBsaXN0TWFwW2NLZXlzW2ldXS5maWVsZF9kYXRhdHlwZTs8YnI+ICAgICAgICAgbGV0IGtleW5hbWUgPSBsaXN0TWFwW2NLZXlzW2ldXS5hcGlfbmFtZTs8YnI+ICAgICAgICAgaWYobGlzdE1hcFtjS2V5c1tpXV0uZW50aXR5X3R5cGUgPT09ICdjdXN0b21lcicpIHs8YnI+ICAgICAgICAgIDxicj4gICAgICAgICAgIGlmKHR5cGUgPT09J2RhdGUnIHx8IHR5cGUgPT09J3RpbWVzdGFtcCcpIHs8YnI+ICAgICAgICAgICAgIGN1c3RvbWVmaWVsZHNbMV0uZmllbGRzLnB1c2goW2tleW5hbWUsICdkYXRldGltZScsICdkYXRlJ10pOzxicj4gICAgICAgICAgIH1lbHNlIGlmKHR5cGUgPT09J2xvbmcnKXs8YnI+ICAgICAgICAgICAgIGN1c3RvbWVmaWVsZHNbMV0uZmllbGRzLnB1c2goW2tleW5hbWUsICdudW1iZXInLCAndGV4dCddKTs8YnI+ICAgICAgICAgICB9ZWxzZSB7PGJyPiAgICAgICAgICAgICBjdXN0b21lZmllbGRzWzFdLmZpZWxkcy5wdXNoKFtrZXluYW1lLCAnc3RyaW5nJywgJ3RleHQnXSk7PGJyPiAgICAgICAgICAgfTxicj4gICAgICAgICAgIDxicj4gICAgICAgICB9ZWxzZSBpZihsaXN0TWFwW2NLZXlzW2ldXS5lbnRpdHlfdHlwZSA9PT0gJ3N1YnNjcmlwdGlvbicpIHs8YnI+ICAgICAgICAgICAgaWYodHlwZSA9PT0nZGF0ZScgfHwgdHlwZSA9PT0ndGltZXN0YW1wJykgezxicj4gICAgICAgICAgICAgY3VzdG9tZWZpZWxkc1swXS5maWVsZHMucHVzaChba2V5bmFtZSwgJ2RhdGV0aW1lJywgJ2RhdGUnXSk7PGJyPiAgICAgICAgICAgfWVsc2UgaWYodHlwZSA9PT0nbG9uZycpezxicj4gICAgICAgICAgICAgY3VzdG9tZWZpZWxkc1swXS5maWVsZHMucHVzaChba2V5bmFtZSwgJ251bWJlcicsICd0ZXh0J10pOzxicj4gICAgICAgICAgIH1lbHNlIHs8YnI+ICAgICAgICAgICAgIGN1c3RvbWVmaWVsZHNbMF0uZmllbGRzLnB1c2goW2tleW5hbWUsICdzdHJpbmcnLCAndGV4dCddKTs8YnI+ICAgICAgICAgICB9PGJyPiAgICAgICAgIH08YnI+ICAgICAgfTxicj4gICAgfTxicj4gIDxicj4gIDxicj5zdGVwcy5TeW5jTG9nLmN1c3RvbWVmaWVsZHM9IGN1c3RvbWVmaWVsZHM7PGJyPiAgPGJyPn08YnI+ZG9uZShzdGVwcy5TeW5jTG9nLmN1c3RvbWVmaWVsZHMpOzwvcHJlPjxicj48Yj5SQVcgSlNPTjo8L2I+PGJyPjxicj48cHJlPns8YnI+ICAnb25TdWNjZXNzJzogWzxicj4gICAgJ0N1c3RvbWVyc1BhcmFtJzxicj4gIF0sPGJyPiAgJ29uRmFpbHVyZSc6IFtdLDxicj4gICduYW1lJzogJ1VwZGF0ZUN1c3RvbUZpZWxkSW5mbycsPGJyPiAgJ3R5cGUnOiAnc2NyaXB0Jyw8YnI+ICAncHJvcGVydGllcyc6IHs8YnI+ICAgICdib2R5JzogJ2xldCBjdXN0b21lZmllbGRzID0gc3RlcHMuU3luY0xvZy5jdXN0b21lZmllbGRzO1xubGV0IGxpc3QgPSBzdGVwcy5HZXRDQkN1c3RvbUZpZWxkcy5yZXNwb25zZS5ib2R5O1xuaWYobGlzdCE9PXVuZGVmaW5lZCAmJiBsaXN0Lmxpc3QhPT11bmRlZmluZWQgJiYgbGlzdC5saXN0Lmxlbmd0aDxzcGFuPj48L3NwYW4+MCkge1xuICBsaXN0ID0gbGlzdC5saXN0O1xufVxuaWYobGlzdCE9PXVuZGVmaW5lZCl7XG4gIGxldCBsaXN0TWFwID0ge307XG4gIGZvcih2YXIgaT0wO2k8c3Bhbj48PC9zcGFuPmxpc3QubGVuZ3RoO2krKyl7XG4gICAgbGV0IG9iaiA9IGxpc3RbaV07XG4gICAgaWYob2JqLmN1c3RvbV9maWVsZF9jb25maWcgIT09IHVuZGVmaW5lZCkge1xuICAgICAgaWYob2JqLmN1c3RvbV9maWVsZF9jb25maWcuZW50aXR5X3R5cGUgPT09IFwnY3VzdG9tZXJcJykge1xuICAgICAgICBsaXN0TWFwW1wnY3VzdGNzdF9cJytvYmouY3VzdG9tX2ZpZWxkX2NvbmZpZy5hcGlfbmFtZV0gPSBvYmouY3VzdG9tX2ZpZWxkX2NvbmZpZztcbiAgICAgIH1lbHNlIGlmKG9iai5jdXN0b21fZmllbGRfY29uZmlnLmVudGl0eV90eXBlID09PSBcJ3N1YnNjcmlwdGlvblwnKSB7XG4gICAgICAgIGxpc3RNYXBbXCdzdWJjc3RfXCcrb2JqLmN1c3RvbV9maWVsZF9jb25maWcuYXBpX25hbWVdID0gb2JqLmN1c3RvbV9maWVsZF9jb25maWc7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICB9XG4gICAgbGV0IHN5bmNSdWxlc0ZpZWxkcyA9IHN0ZXBzLkNoYXJnZWJlZUNvbmZpZ1BhcmFtcy5yZXNwb25zZS5ib2R5LnRoaXJkX3BhcnR5X2NvbmZpZ3VyYXRpb24uY29uZmlnX2pzb24uY2xvdWRFbGVtZW50cy5zeW5jUnVsZXNGaWVsZHM7XG4gIGlmIChzeW5jUnVsZXNGaWVsZHMgPT09IHVuZGVmaW5lZCkge1xuICAgIHN5bmNSdWxlc0ZpZWxkcyA9IHtcbiAgICAgIFwnY29tcGFueVwnOiB7XG5cbiAgICAgIH0sXG4gICAgICBcJ2NvbnRhY3RcJzoge1xuXG4gICAgICB9LFxuICAgICAgXCdkZWFsXCc6IHtcbiAgICAgIH0sXG4gICAgICBcJ3N5bmNcJzogXCdmYWxzZVwnXG4gICAgfTtcblxuICB9IGVsc2Uge1xuICAgIGlmIChzeW5jUnVsZXNGaWVsZHMuY29tcGFueSA9PT0gdW5kZWZpbmVkIHx8IHN5bmNSdWxlc0ZpZWxkcy5jb21wYW55ID09PSBcJ1wnKSB7XG4gICAgICBzeW5jUnVsZXNGaWVsZHMuY29tcGFueSA9IHt9O1xuICAgIH1cbiAgICBpZiAoc3luY1J1bGVzRmllbGRzLmNvbnRhY3QgPT09IHVuZGVmaW5lZCB8fCBzeW5jUnVsZXNGaWVsZHMuY29udGFjdCA9PT0gXCdcJykge1xuICAgICAgc3luY1J1bGVzRmllbGRzLmNvbnRhY3QgPSB7fTtcbiAgICB9XG4gICAgaWYgKHN5bmNSdWxlc0ZpZWxkcy5kZWFsID09PSB1bmRlZmluZWQgfHwgc3luY1J1bGVzRmllbGRzLmRlYWwgPT09IFwnXCcpIHtcbiAgICAgIHN5bmNSdWxlc0ZpZWxkcy5kZWFsID0ge307XG4gICAgfVxuICB9XG4gIFxuICBsZXQgY29udGFjdEtleXMgPSBPYmplY3Qua2V5cyhzeW5jUnVsZXNGaWVsZHMuY29udGFjdCk7XG4gIGxldCBzdWJLZXlzID0gT2JqZWN0LmtleXMoc3luY1J1bGVzRmllbGRzLmRlYWwpO1xuICBsZXQgY0tleXMgPVtdO1xuICBsZXQgY01hcCA9IHt9O1xuICBmb3IgKHZhciBpID0gMDsgaSA8c3Bhbj48PC9zcGFuPiBjb250YWN0S2V5cy5sZW5ndGg7IGkrKykge1xuICAgIGlmKGNvbnRhY3RLZXlzW2ldLnN0YXJ0c1dpdGgoXCdjdXN0Y3N0X2NmX1wnKSB8fCBjb250YWN0S2V5c1tpXS5zdGFydHNXaXRoKFwnc3ViY3N0X2NmX1wnKSApIHtcbiAgICAgIGlmKGNNYXBbY29udGFjdEtleXNbaV1dID09PSB1bmRlZmluZWQpe1xuICAgICAgICBjS2V5cy5wdXNoKGNvbnRhY3RLZXlzW2ldKTtcbiAgICAgICAgY01hcFtjb250YWN0S2V5c1tpXV0gPWNvbnRhY3RLZXlzW2ldO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBmb3IgKHZhciBpID0gMDsgaSA8c3Bhbj48PC9zcGFuPiBzdWJLZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYoc3ViS2V5c1tpXS5zdGFydHNXaXRoKFwnY3VzdGNzdF9jZl9cJykgfHwgc3ViS2V5c1tpXS5zdGFydHNXaXRoKFwnc3ViY3N0X2NmX1wnKSApIHtcbiAgICAgIGlmKGNNYXBbc3ViS2V5c1tpXV0gPT09IHVuZGVmaW5lZCl7XG4gICAgICAgIGNLZXlzLnB1c2goc3ViS2V5c1tpXSk7XG4gICAgICAgIGNNYXBbc3ViS2V5c1tpXV0gPXN1YktleXNbaV07XG4gICAgICB9XG4gICAgfVxuICB9XG4gIFxuICAgIGZvciAodmFyIGkgPSAwOyBpIDxzcGFuPjw8L3NwYW4+IGNLZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZihsaXN0TWFwW2NLZXlzW2ldXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICBsZXQgdHlwZSA9IGxpc3RNYXBbY0tleXNbaV1dLmZpZWxkX2RhdGF0eXBlO1xuICAgICAgICAgbGV0IGtleW5hbWUgPSBsaXN0TWFwW2NLZXlzW2ldXS5hcGlfbmFtZTtcbiAgICAgICAgIGlmKGxpc3RNYXBbY0tleXNbaV1dLmVudGl0eV90eXBlID09PSBcJ2N1c3RvbWVyXCcpIHtcbiAgICAgICAgICBcbiAgICAgICAgICAgaWYodHlwZSA9PT1cJ2RhdGVcJyB8fCB0eXBlID09PVwndGltZXN0YW1wXCcpIHtcbiAgICAgICAgICAgICBjdXN0b21lZmllbGRzWzFdLmZpZWxkcy5wdXNoKFtrZXluYW1lLCAnZGF0ZXRpbWUnLCAnZGF0ZSddKTtcbiAgICAgICAgICAgfWVsc2UgaWYodHlwZSA9PT1cJ2xvbmdcJyl7XG4gICAgICAgICAgICAgY3VzdG9tZWZpZWxkc1sxXS5maWVsZHMucHVzaChba2V5bmFtZSwgJ251bWJlcicsICd0ZXh0J10pO1xuICAgICAgICAgICB9ZWxzZSB7XG4gICAgICAgICAgICAgY3VzdG9tZWZpZWxkc1sxXS5maWVsZHMucHVzaChba2V5bmFtZSwgJ3N0cmluZycsICd0ZXh0J10pO1xuICAgICAgICAgICB9XG4gICAgICAgICAgIFxuICAgICAgICAgfWVsc2UgaWYobGlzdE1hcFtjS2V5c1tpXV0uZW50aXR5X3R5cGUgPT09IFwnc3Vic2NyaXB0aW9uXCcpIHtcbiAgICAgICAgICAgIGlmKHR5cGUgPT09XCdkYXRlXCcgfHwgdHlwZSA9PT1cJ3RpbWVzdGFtcFwnKSB7XG4gICAgICAgICAgICAgY3VzdG9tZWZpZWxkc1swXS5maWVsZHMucHVzaChba2V5bmFtZSwgJ2RhdGV0aW1lJywgJ2RhdGUnXSk7XG4gICAgICAgICAgIH1lbHNlIGlmKHR5cGUgPT09XCdsb25nXCcpe1xuICAgICAgICAgICAgIGN1c3RvbWVmaWVsZHNbMF0uZmllbGRzLnB1c2goW2tleW5hbWUsICdudW1iZXInLCAndGV4dCddKTtcbiAgICAgICAgICAgfWVsc2Uge1xuICAgICAgICAgICAgIGN1c3RvbWVmaWVsZHNbMF0uZmllbGRzLnB1c2goW2tleW5hbWUsICdzdHJpbmcnLCAndGV4dCddKTtcbiAgICAgICAgICAgfVxuICAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgXG4gIFxuc3RlcHMuU3luY0xvZy5jdXN0b21lZmllbGRzPSBjdXN0b21lZmllbGRzO1xuICBcbn1cbmRvbmUoc3RlcHMuU3luY0xvZy5jdXN0b21lZmllbGRzKTsnPGJyPiAgfTxicj59PC9wcmU+PC9ib2R5PjwvaHRtbD4='));document.close();" "JavaScript:<br><pre>let customefields = steps.SyncLog.customefields;<br>let list = steps.GetCBCustomFields.response.body;<br>if(list!==undefined && list.list!==undefined && list.list.length<span>></span>0) {<br>  list = list.list;<br>}<br>if(list!==undefined){<br>  let listMap = {};<br>  for(var i=0;i<span><</span>list.length;i++){<br>    let obj = list[i];<br>    if(obj.custom_field_config !== undefined) {<br>      if(obj.custom_field_config.entity_type === 'customer') {<br>        listMap['custcst_'+obj.custom_field_config.api_name] = obj.custom_field_config;<br>      }else if(obj.custom_field_config.entity_type === 'subscription') {<br>        listMap['subcst_'+obj.custom_field_config.api_name] = obj.custom_field_config;<br>      }<br>    }<br>    <br>  }<br>    let syncRulesFields = steps.ChargebeeConfigParams.response.body.third_party_configuration.config_json.cloudElements.syncRulesFields;<br>  if (syncRulesFields === undefined) {<br>    syncRulesFields = {<br>      'company': {<br><br>      },<br>      'contact': {<br><br>      },<br>      'deal': {<br>      },<br>      'sync': 'false'<br>    };<br><br>  } else {<br>    if (syncRulesFields.company === undefined || syncRulesFields.company === '') {<br>      syncRulesFields.company = {};<br>    }<br>    if (syncRulesFields.contact === undefined || syncRulesFields.contact === '') {<br>      syncRulesFields.contact = {};<br>    }<br>    if (syncRulesFields.deal === undefined || syncRulesFields.deal === '') {<br>      syncRulesFields.deal = {};<br>    }<br>  }<br>  <br>  let contactKeys = Object.keys(syncRulesFields.contact);<br>  let subKeys = Object.keys(syncRulesFields.deal);<br>  let cKeys =[];<br>  let cMap = {};<br>  for (var i = 0; i <span><</span> contactKeys.length; i++) {<br>    if(contactKeys[i].startsWith('custcst_cf_') || contactKeys[i].startsWith('subcst_cf_') ) {<br>      if(cMap[contactKeys[i]] === undefined){<br>        cKeys.push(contactKeys[i]);<br>        cMap[contactKeys[i]] =contactKeys[i];<br>      }<br>    }<br>  }<br>  for (var i = 0; i <span><</span> subKeys.length; i++) {<br>    if(subKeys[i].startsWith('custcst_cf_') || subKeys[i].startsWith('subcst_cf_') ) {<br>      if(cMap[subKeys[i]] === undefined){<br>        cKeys.push(subKeys[i]);<br>        cMap[subKeys[i]] =subKeys[i];<br>      }<br>    }<br>  }<br>  <br>    for (var i = 0; i <span><</span> cKeys.length; i++) {<br>      if(listMap[cKeys[i]] !== undefined) {<br>         let type = listMap[cKeys[i]].field_datatype;<br>         let keyname = listMap[cKeys[i]].api_name;<br>         if(listMap[cKeys[i]].entity_type === 'customer') {<br>          <br>           if(type ==='date' || type ==='timestamp') {<br>             customefields[1].fields.push([keyname, 'datetime', 'date']);<br>           }else if(type ==='long'){<br>             customefields[1].fields.push([keyname, 'number', 'text']);<br>           }else {<br>             customefields[1].fields.push([keyname, 'string', 'text']);<br>           }<br>           <br>         }else if(listMap[cKeys[i]].entity_type === 'subscription') {<br>            if(type ==='date' || type ==='timestamp') {<br>             customefields[0].fields.push([keyname, 'datetime', 'date']);<br>           }else if(type ==='long'){<br>             customefields[0].fields.push([keyname, 'number', 'text']);<br>           }else {<br>             customefields[0].fields.push([keyname, 'string', 'text']);<br>           }<br>         }<br>      }<br>    }<br>  <br>  <br>steps.SyncLog.customefields= customefields;<br>  <br>}<br>done(steps.SyncLog.customefields);</pre>"
            click step-006 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkN1c3RvbWVyc1BhcmFtPC90aXRsZT48L2hlYWQ+PGJvZHk+PGI+SmF2YVNjcmlwdDo8L2I+PGJyPjxicj48cHJlPmxldCBwYXJhbXMgPSB7PGJyPiAgICBzeW5jUnVsZXNDb250YWN0czogc3RlcHMuQ2hhcmdlYmVlQ29uZmlnUGFyYW1zLnJlc3BvbnNlLmJvZHkudGhpcmRfcGFydHlfY29uZmlndXJhdGlvbi5jb25maWdfanNvbi5jbG91ZEVsZW1lbnRzLnN5bmNSdWxlc0NvbnRhY3RzLDxicj4gICAgc3luY1J1bGVzT3JkZXJzOiBzdGVwcy5DaGFyZ2ViZWVDb25maWdQYXJhbXMucmVzcG9uc2UuYm9keS50aGlyZF9wYXJ0eV9jb25maWd1cmF0aW9uLmNvbmZpZ19qc29uLmNsb3VkRWxlbWVudHMuc3luY1J1bGVGb3JPcmRlcnMsPGJyPiAgICBzeW5jUnVsZXNEZWFsczogc3RlcHMuQ2hhcmdlYmVlQ29uZmlnUGFyYW1zLnJlc3BvbnNlLmJvZHkudGhpcmRfcGFydHlfY29uZmlndXJhdGlvbi5jb25maWdfanNvbi5jbG91ZEVsZW1lbnRzLnN5bmNSdWxlc0RlYWxzLDxicj4gICAgcG9ydGFsSWQ6IHN0ZXBzLkNoYXJnZWJlZUNvbmZpZ1BhcmFtcy5yZXNwb25zZS5ib2R5LnRoaXJkX3BhcnR5X2NvbmZpZ3VyYXRpb24uY29uZmlnX2pzb24uY2xvdWRFbGVtZW50cy50aGlyZFBhcnR5LnBvcnRhbElkLDxicj4gICAgIGh1YnNwb3RBdXRoOiB7PGJyPiAgICAgICdBdXRob3JpemF0aW9uJzonQmVhcmVyICcrc3RlcHMuQ2hhcmdlYmVlQ29uZmlnUGFyYW1zLnJlc3BvbnNlLmJvZHkudGhpcmRfcGFydHlfY29uZmlndXJhdGlvbi5jb25maWdfanNvbi5jbG91ZEVsZW1lbnRzLnRoaXJkUGFydHkuYWNjZXNzVG9rZW4sPGJyPiAgICAgICBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJzxicj4gICAgfSw8YnI+fTs8YnI+ZG9uZShwYXJhbXMpOzxicj48YnI+PC9wcmU+PGJyPjxiPlJBVyBKU09OOjwvYj48YnI+PGJyPjxwcmU+ezxicj4gICdvblN1Y2Nlc3MnOiBbPGJyPiAgICAnTG9vcE92ZXJDdXN0b21lcic8YnI+ICBdLDxicj4gICdvbkZhaWx1cmUnOiBbXSw8YnI+ICAnbmFtZSc6ICdDdXN0b21lcnNQYXJhbScsPGJyPiAgJ3R5cGUnOiAnc2NyaXB0Jyw8YnI+ICAncHJvcGVydGllcyc6IHs8YnI+ICAgICdib2R5JzogJ2xldCBwYXJhbXMgPSB7XG4gICAgc3luY1J1bGVzQ29udGFjdHM6IHN0ZXBzLkNoYXJnZWJlZUNvbmZpZ1BhcmFtcy5yZXNwb25zZS5ib2R5LnRoaXJkX3BhcnR5X2NvbmZpZ3VyYXRpb24uY29uZmlnX2pzb24uY2xvdWRFbGVtZW50cy5zeW5jUnVsZXNDb250YWN0cyxcbiAgICBzeW5jUnVsZXNPcmRlcnM6IHN0ZXBzLkNoYXJnZWJlZUNvbmZpZ1BhcmFtcy5yZXNwb25zZS5ib2R5LnRoaXJkX3BhcnR5X2NvbmZpZ3VyYXRpb24uY29uZmlnX2pzb24uY2xvdWRFbGVtZW50cy5zeW5jUnVsZUZvck9yZGVycyxcbiAgICBzeW5jUnVsZXNEZWFsczogc3RlcHMuQ2hhcmdlYmVlQ29uZmlnUGFyYW1zLnJlc3BvbnNlLmJvZHkudGhpcmRfcGFydHlfY29uZmlndXJhdGlvbi5jb25maWdfanNvbi5jbG91ZEVsZW1lbnRzLnN5bmNSdWxlc0RlYWxzLFxuICAgIHBvcnRhbElkOiBzdGVwcy5DaGFyZ2ViZWVDb25maWdQYXJhbXMucmVzcG9uc2UuYm9keS50aGlyZF9wYXJ0eV9jb25maWd1cmF0aW9uLmNvbmZpZ19qc29uLmNsb3VkRWxlbWVudHMudGhpcmRQYXJ0eS5wb3J0YWxJZCxcbiAgICAgaHVic3BvdEF1dGg6IHtcbiAgICAgIFwnQXV0aG9yaXphdGlvblwnOlwnQmVhcmVyIFwnK3N0ZXBzLkNoYXJnZWJlZUNvbmZpZ1BhcmFtcy5yZXNwb25zZS5ib2R5LnRoaXJkX3BhcnR5X2NvbmZpZ3VyYXRpb24uY29uZmlnX2pzb24uY2xvdWRFbGVtZW50cy50aGlyZFBhcnR5LmFjY2Vzc1Rva2VuLFxuICAgICAgIEFjY2VwdDogXCdhcHBsaWNhdGlvbi9qc29uXCdcbiAgICB9LFxufTtcbmRvbmUocGFyYW1zKTtcblxuJzxicj4gIH08YnI+fTwvcHJlPjwvYm9keT48L2h0bWw+'));document.close();" "JavaScript:<br><pre>let params = {<br>    syncRulesContacts: steps.ChargebeeConfigParams.response.body.third_party_configuration.config_json.cloudElements.syncRulesContacts,<br>    syncRulesOrders: steps.ChargebeeConfigParams.response.body.third_party_configuration.config_json.cloudElements.syncRuleForOrders,<br>    syncRulesDeals: steps.ChargebeeConfigParams.response.body.third_party_configuration.config_json.cloudElements.syncRulesDeals,<br>    portalId: steps.ChargebeeConfigParams.response.body.third_party_configuration.config_json.cloudElements.thirdParty.portalId,<br>     hubspotAuth: {<br>      'Authorization':'Bearer '+steps.ChargebeeConfigParams.response.body.third_party_configuration.config_json.cloudElements.thirdParty.accessToken,<br>       Accept: 'application/json'<br>    },<br>};<br>done(params);<br><br></pre>"
            click step-007 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkxvb3BPdmVyQ3VzdG9tZXI8L3RpdGxlPjwvaGVhZD48Ym9keT48Yj5Mb29wOjwvYj48YnI+PGJyPjxwcmU+ICBsaXN0IDogJHtzdGVwcy5JbnB1dFBhcmFtcy5pbnB1dC5jdXN0b21lcnN9PC9wcmU+PGJyPjxiPlJBVyBKU09OOjwvYj48YnI+PGJyPjxwcmU+ezxicj4gICdvblN1Y2Nlc3MnOiBbPGJyPiAgICAnSGFzRW1haWwnPGJyPiAgXSw8YnI+ICAnb25GYWlsdXJlJzogWzxicj4gICAgJ1N5bmNEb25lJzxicj4gIF0sPGJyPiAgJ25hbWUnOiAnTG9vcE92ZXJDdXN0b21lcicsPGJyPiAgJ3R5cGUnOiAnbG9vcCcsPGJyPiAgJ3Byb3BlcnRpZXMnOiB7PGJyPiAgICAnbGlzdCc6ICcke3N0ZXBzLklucHV0UGFyYW1zLmlucHV0LmN1c3RvbWVyc30nPGJyPiAgfTxicj59PC9wcmU+PC9ib2R5PjwvaHRtbD4='));document.close();" "Loop:<br><pre>  list : ${steps.InputParams.input.customers}</pre>"
            click step-008 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkhhc0VtYWlsPC90aXRsZT48L2hlYWQ+PGJvZHk+PGI+SmF2YVNjcmlwdDo8L2I+PGJyPjxicj48cHJlPmxldCBjdXN0b21lciA9IHN0ZXBzLkxvb3BPdmVyQ3VzdG9tZXIuZW50cnk7PGJyPmRvbmUoY3VzdG9tZXIuZW1haWwgIT09IHVuZGVmaW5lZCk7PC9wcmU+PGJyPjxiPlJBVyBKU09OOjwvYj48YnI+PGJyPjxwcmU+ezxicj4gICdvblN1Y2Nlc3MnOiBbPGJyPiAgICAnQ0JEYXRhJzxicj4gIF0sPGJyPiAgJ29uRmFpbHVyZSc6IFs8YnI+ICAgICdVcGRhdGVOb0VtYWlsJzxicj4gIF0sPGJyPiAgJ25hbWUnOiAnSGFzRW1haWwnLDxicj4gICd0eXBlJzogJ2ZpbHRlcicsPGJyPiAgJ3Byb3BlcnRpZXMnOiB7PGJyPiAgICAnYm9keSc6ICdsZXQgY3VzdG9tZXIgPSBzdGVwcy5Mb29wT3ZlckN1c3RvbWVyLmVudHJ5O1xuZG9uZShjdXN0b21lci5lbWFpbCAhPT0gdW5kZWZpbmVkKTsnPGJyPiAgfTxicj59PC9wcmU+PC9ib2R5PjwvaHRtbD4='));document.close();" "JavaScript:<br><pre>let customer = steps.LoopOverCustomer.entry;<br>done(customer.email !== undefined);</pre>"
            click step-009 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPlN5bmNEb25lPC90aXRsZT48L2hlYWQ+PGJvZHk+PGI+SmF2YVNjcmlwdDo8L2I+PGJyPjxicj48cHJlPmRvbmUoc3RlcHMuU3luY0xvZy5zeW5jQ291bnQpOzwvcHJlPjxicj48Yj5SQVcgSlNPTjo8L2I+PGJyPjxicj48cHJlPns8YnI+ICAnb25TdWNjZXNzJzogW10sPGJyPiAgJ29uRmFpbHVyZSc6IFtdLDxicj4gICduYW1lJzogJ1N5bmNEb25lJyw8YnI+ICAndHlwZSc6ICdzY3JpcHQnLDxicj4gICdwcm9wZXJ0aWVzJzogezxicj4gICAgJ2JvZHknOiAnZG9uZShzdGVwcy5TeW5jTG9nLnN5bmNDb3VudCk7Jzxicj4gIH08YnI+fTwvcHJlPjwvYm9keT48L2h0bWw+'));document.close();" "JavaScript:<br><pre>done(steps.SyncLog.syncCount);</pre>"
            click step-011 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkNCRGF0YTwvdGl0bGU+PC9oZWFkPjxib2R5PjxiPkphdmFTY3JpcHQ6PC9iPjxicj48YnI+PHByZT5sZXQgZGF0YSA9IHs8YnI+ICBjdXN0b21lciA6IHN0ZXBzLkxvb3BPdmVyQ3VzdG9tZXIuZW50cnksPGJyPiAgaHVic3BvdDp7PGJyPiAgICBjb250YWN0QnlFbWFpbDonaHR0cHM6Ly9hcGkuaHViYXBpLmNvbS9jb250YWN0cy92MS9jb250YWN0L2VtYWlsLycrICBzdGVwcy5Mb29wT3ZlckN1c3RvbWVyLmVudHJ5LmVtYWlsKycvcHJvZmlsZSc8YnI+ICB9PGJyPn07PGJyPmRvbmUoZGF0YSk7PC9wcmU+PGJyPjxiPlJBVyBKU09OOjwvYj48YnI+PGJyPjxwcmU+ezxicj4gICdvblN1Y2Nlc3MnOiBbPGJyPiAgICAnQ0JTdWJzY2lwdGlvblBhcmFtJzxicj4gIF0sPGJyPiAgJ29uRmFpbHVyZSc6IFtdLDxicj4gICduYW1lJzogJ0NCRGF0YScsPGJyPiAgJ3R5cGUnOiAnc2NyaXB0Jyw8YnI+ICAncHJvcGVydGllcyc6IHs8YnI+ICAgICdib2R5JzogJ2xldCBkYXRhID0ge1xuICBjdXN0b21lciA6IHN0ZXBzLkxvb3BPdmVyQ3VzdG9tZXIuZW50cnksXG4gIGh1YnNwb3Q6e1xuICAgIGNvbnRhY3RCeUVtYWlsOlwnaHR0cHM6Ly9hcGkuaHViYXBpLmNvbS9jb250YWN0cy92MS9jb250YWN0L2VtYWlsL1wnKyAgc3RlcHMuTG9vcE92ZXJDdXN0b21lci5lbnRyeS5lbWFpbCtcJy9wcm9maWxlXCdcbiAgfVxufTtcbmRvbmUoZGF0YSk7Jzxicj4gIH08YnI+fTwvcHJlPjwvYm9keT48L2h0bWw+'));document.close();" "JavaScript:<br><pre>let data = {<br>  customer : steps.LoopOverCustomer.entry,<br>  hubspot:{<br>    contactByEmail:'https://api.hubapi.com/contacts/v1/contact/email/'+  steps.LoopOverCustomer.entry.email+'/profile'<br>  }<br>};<br>done(data);</pre>"
            click step-012 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPlVwZGF0ZU5vRW1haWw8L3RpdGxlPjwvaGVhZD48Ym9keT48Yj5KYXZhU2NyaXB0OjwvYj48YnI+PGJyPjxwcmU+bGV0IGN1c3RvbWVyID0gc3RlcHMuTG9vcE92ZXJDdXN0b21lci5lbnRyeTs8YnI+bGV0IGFwaUtleT1zdGVwcy5JbnB1dFBhcmFtcy5pbnB1dC5hcGlLZXk7PGJyPmxldCBzaXRlTmFtZT1zdGVwcy5JbnB1dFBhcmFtcy5pbnB1dC5zaXRlTmFtZTs8YnI+bGV0IHNpdGVEb21haW49c3RlcHMuSW5wdXRQYXJhbXMuaW5wdXQuc2l0ZURvbWFpbjs8YnI+bGV0IHR5cGUgPSBzdGVwcy5JbnB1dFBhcmFtcy5pbnB1dC50eXBlOzxicj5sZXQgcGFzc3dvcmQgPSAnJzs8YnI+PGJyPnN0ZXBzLlN5bmNMb2cuc3luY0NvdW50LmVDb3VudCA9IHN0ZXBzLlN5bmNMb2cuc3luY0NvdW50LmVDb3VudCArMTs8YnI+IGxldCBjaGFyZ2ViZWVfZGF0YV91cmwgPSAnaHR0cHM6Ly8nK3NpdGVOYW1lKycuJytzaXRlRG9tYWluKycvYWRtaW4tY29uc29sZS9jdXN0b21lcnMvJytjdXN0b21lci5pZDs8YnI+IGxldCBjYl9saW5rID0gJzxzcGFuPjw8L3NwYW4+YSBocmVmPScnK2NoYXJnZWJlZV9kYXRhX3VybCsnJyB0YXJnZXQ9J2JsYW5rJzxzcGFuPj48L3NwYW4+JytjdXN0b21lci5pZCsnPHNwYW4+PDwvc3Bhbj4vYTxzcGFuPj48L3NwYW4+IEVtYWlsIEFkZHJlc3MgTm90IEF2YWlsYWJsZVxuJzs8YnI+PGJyPjxicj5sZXQgZGF0YSA9IHs8YnI+ICB1cmw6ICdodHRwczovLycgKyBzaXRlTmFtZSArICcuJyArIHNpdGVEb21haW4gKyAnL2FwaS92Mi90aGlyZF9wYXJ0eV9lbnRpdHlfbWFwcGluZ3MvdXBkYXRlX2VudGl0eScsPGJyPiAgYXV0aDp7PGJyPiAgICAgICAgQXV0aG9yaXphdGlvbjogJ0Jhc2ljICcgKyBDRS5iNjQoYXBpS2V5ICsgJzonICsgcGFzc3dvcmQpPGJyPiAgICAgIH0sPGJyPiAgICAgIHF1ZXJ5Ons8YnI+ICAgICAgICBpbnRlZ3JhdGlvbl9uYW1lOiB0eXBlLDxicj4gICAgICAgIGVudGl0eV9pZDogY3VzdG9tZXIuaWQsPGJyPiAgICAgICAgZW50aXR5X3R5cGU6ICdjdXN0b21lcicsPGJyPiAgICAgICAgc3RhdHVzOiAndXBkYXRlX2ZhaWxlZCcsPGJyPiAgICAgICAgZXJyb3JfbWVzc2FnZTogY2JfbGluazxicj4gICAgICB9PGJyPiAgPGJyPn07PGJyPmRvbmUoZGF0YSk7PC9wcmU+PGJyPjxiPlJBVyBKU09OOjwvYj48YnI+PGJyPjxwcmU+ezxicj4gICdvblN1Y2Nlc3MnOiBbPGJyPiAgICAnVXBkYXRlVGhpcmRQYXJ0eU1hcHBpbmdFcnJvcic8YnI+ICBdLDxicj4gICdvbkZhaWx1cmUnOiBbXSw8YnI+ICAnbmFtZSc6ICdVcGRhdGVOb0VtYWlsJyw8YnI+ICAndHlwZSc6ICdzY3JpcHQnLDxicj4gICdwcm9wZXJ0aWVzJzogezxicj4gICAgJ2JvZHknOiAnbGV0IGN1c3RvbWVyID0gc3RlcHMuTG9vcE92ZXJDdXN0b21lci5lbnRyeTtcbmxldCBhcGlLZXk9c3RlcHMuSW5wdXRQYXJhbXMuaW5wdXQuYXBpS2V5O1xubGV0IHNpdGVOYW1lPXN0ZXBzLklucHV0UGFyYW1zLmlucHV0LnNpdGVOYW1lO1xubGV0IHNpdGVEb21haW49c3RlcHMuSW5wdXRQYXJhbXMuaW5wdXQuc2l0ZURvbWFpbjtcbmxldCB0eXBlID0gc3RlcHMuSW5wdXRQYXJhbXMuaW5wdXQudHlwZTtcbmxldCBwYXNzd29yZCA9IFwnXCc7XG5cbnN0ZXBzLlN5bmNMb2cuc3luY0NvdW50LmVDb3VudCA9IHN0ZXBzLlN5bmNMb2cuc3luY0NvdW50LmVDb3VudCArMTtcbiBsZXQgY2hhcmdlYmVlX2RhdGFfdXJsID0gXCdodHRwczovL1wnK3NpdGVOYW1lK1wnLlwnK3NpdGVEb21haW4rXCcvYWRtaW4tY29uc29sZS9jdXN0b21lcnMvXCcrY3VzdG9tZXIuaWQ7XG4gbGV0IGNiX2xpbmsgPSBcJzxzcGFuPjw8L3NwYW4+YSBocmVmPSdcJytjaGFyZ2ViZWVfZGF0YV91cmwrXCcnIHRhcmdldD0nYmxhbmsnPHNwYW4+Pjwvc3Bhbj5cJytjdXN0b21lci5pZCtcJzxzcGFuPjw8L3NwYW4+L2E8c3Bhbj4+PC9zcGFuPiBFbWFpbCBBZGRyZXNzIE5vdCBBdmFpbGFibGVcXG5cJztcblxuXG5sZXQgZGF0YSA9IHtcbiAgdXJsOiBcJ2h0dHBzOi8vXCcgKyBzaXRlTmFtZSArIFwnLlwnICsgc2l0ZURvbWFpbiArIFwnL2FwaS92Mi90aGlyZF9wYXJ0eV9lbnRpdHlfbWFwcGluZ3MvdXBkYXRlX2VudGl0eVwnLFxuICBhdXRoOntcbiAgICAgICAgQXV0aG9yaXphdGlvbjogXCdCYXNpYyBcJyArIENFLmI2NChhcGlLZXkgKyBcJzpcJyArIHBhc3N3b3JkKVxuICAgICAgfSxcbiAgICAgIHF1ZXJ5OntcbiAgICAgICAgaW50ZWdyYXRpb25fbmFtZTogdHlwZSxcbiAgICAgICAgZW50aXR5X2lkOiBjdXN0b21lci5pZCxcbiAgICAgICAgZW50aXR5X3R5cGU6IFwnY3VzdG9tZXJcJyxcbiAgICAgICAgc3RhdHVzOiBcJ3VwZGF0ZV9mYWlsZWRcJyxcbiAgICAgICAgZXJyb3JfbWVzc2FnZTogY2JfbGlua1xuICAgICAgfVxuICBcbn07XG5kb25lKGRhdGEpOyc8YnI+ICB9PGJyPn08L3ByZT48L2JvZHk+PC9odG1sPg=='));document.close();" "JavaScript:<br><pre>let customer = steps.LoopOverCustomer.entry;<br>let apiKey=steps.InputParams.input.apiKey;<br>let siteName=steps.InputParams.input.siteName;<br>let siteDomain=steps.InputParams.input.siteDomain;<br>let type = steps.InputParams.input.type;<br>let password = '';<br><br>steps.SyncLog.syncCount.eCount = steps.SyncLog.syncCount.eCount +1;<br> let chargebee_data_url = 'https://'+siteName+'.'+siteDomain+'/admin-console/customers/'+customer.id;<br> let cb_link = '<span><</span>a href=''+chargebee_data_url+'' target='blank'<span>></span>'+customer.id+'<span><</span>/a<span>></span> Email Address Not Available\n';<br><br><br>let data = {<br>  url: 'https://' + siteName + '.' + siteDomain + '/api/v2/third_party_entity_mappings/update_entity',<br>  auth:{<br>        Authorization: 'Basic ' + CE.b64(apiKey + ':' + password)<br>      },<br>      query:{<br>        integration_name: type,<br>        entity_id: customer.id,<br>        entity_type: 'customer',<br>        status: 'update_failed',<br>        error_message: cb_link<br>      }<br>  <br>};<br>done(data);</pre>"
            click step-013 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkNCU3Vic2NpcHRpb25QYXJhbTwvdGl0bGU+PC9oZWFkPjxib2R5PjxiPkphdmFTY3JpcHQ6PC9iPjxicj48YnI+PHByZT5sZXQgY0lkID0gZW5jb2RlVVJJQ29tcG9uZW50KHN0ZXBzLkNCRGF0YS5jdXN0b21lci5pZCk7PGJyPmxldCBkYXRhID0gezxicj4gIHVybDogJ2h0dHBzOi8vJytzdGVwcy5JbnB1dFBhcmFtcy5pbnB1dC5zaXRlTmFtZSsnLmludGVncmF0aW9ucy4nICsgc3RlcHMuSW5wdXRQYXJhbXMuaW5wdXQuc2l0ZURvbWFpbisnL2FwaS9odWJzcG90L3N1YnNjcmlwdGlvbj9jdXN0b21lcl9pZD0nK2NJZCw8YnI+ICAgaGVhZGVyczp7PGJyPiAgICBhcGlfa2V5OnN0ZXBzLklucHV0UGFyYW1zLmlucHV0LmFwaUtleTxicj4gIH0sPGJyPiAgY2JlbTp7PGJyPiAgICAgdXJsOiB7PGJyPiAgICAnZ2V0JzogJ2h0dHBzOi8vJyArIHN0ZXBzLklucHV0UGFyYW1zLmlucHV0LnNpdGVOYW1lICsgJy4nICsgc3RlcHMuSW5wdXRQYXJhbXMuaW5wdXQuc2l0ZURvbWFpbiArICcvYXBpL3YyL3RoaXJkX3BhcnR5X2VudGl0eV9tYXBwaW5ncy9yZXRyaWV2ZScsPGJyPiAgICB1cGRhdGU6ICdodHRwczovLycgKyBzdGVwcy5JbnB1dFBhcmFtcy5pbnB1dC5zaXRlTmFtZSArICcuJyArIHN0ZXBzLklucHV0UGFyYW1zLmlucHV0LnNpdGVEb21haW4gKyAnL2FwaS92Mi90aGlyZF9wYXJ0eV9lbnRpdHlfbWFwcGluZ3MvdXBkYXRlX2VudGl0eScsPGJyPiAgfSw8YnI+ICBhdXRoOiB7PGJyPiAgICBBdXRob3JpemF0aW9uOiAnQmFzaWMgJyArIENFLmI2NChzdGVwcy5JbnB1dFBhcmFtcy5pbnB1dC5hcGlLZXkgKyAnOicgKyAnJyk8YnI+ICB9LDxicj4gIHF1ZXJ5OiB7PGJyPiAgICBjdXN0b21lcjogezxicj4gICAgICAnaW50ZWdyYXRpb25fbmFtZSc6IHN0ZXBzLklucHV0UGFyYW1zLmlucHV0LnR5cGUsPGJyPiAgICAgICdlbnRpdHlfaWQnOiBjSWQsPGJyPiAgICAgICdlbnRpdHlfdHlwZSc6ICdjdXN0b21lcic8YnI+ICAgIH08YnI+ICB9LDxicj4gIH08YnI+fTs8YnI+PGJyPmRvbmUoZGF0YSk7PC9wcmU+PGJyPjxiPlJBVyBKU09OOjwvYj48YnI+PGJyPjxwcmU+ezxicj4gICdvblN1Y2Nlc3MnOiBbPGJyPiAgICAnR2V0Q3VzdG9tZXJDQkVNJzxicj4gIF0sPGJyPiAgJ29uRmFpbHVyZSc6IFtdLDxicj4gICduYW1lJzogJ0NCU3Vic2NpcHRpb25QYXJhbScsPGJyPiAgJ3R5cGUnOiAnc2NyaXB0Jyw8YnI+ICAncHJvcGVydGllcyc6IHs8YnI+ICAgICdib2R5JzogJ2xldCBjSWQgPSBlbmNvZGVVUklDb21wb25lbnQoc3RlcHMuQ0JEYXRhLmN1c3RvbWVyLmlkKTtcbmxldCBkYXRhID0ge1xuICB1cmw6IFwnaHR0cHM6Ly9cJytzdGVwcy5JbnB1dFBhcmFtcy5pbnB1dC5zaXRlTmFtZStcJy5pbnRlZ3JhdGlvbnMuXCcgKyBzdGVwcy5JbnB1dFBhcmFtcy5pbnB1dC5zaXRlRG9tYWluK1wnL2FwaS9odWJzcG90L3N1YnNjcmlwdGlvbj9jdXN0b21lcl9pZD1cJytjSWQsXG4gICBoZWFkZXJzOntcbiAgICBhcGlfa2V5OnN0ZXBzLklucHV0UGFyYW1zLmlucHV0LmFwaUtleVxuICB9LFxuICBjYmVtOntcbiAgICAgdXJsOiB7XG4gICAgXCdnZXRcJzogXCdodHRwczovL1wnICsgc3RlcHMuSW5wdXRQYXJhbXMuaW5wdXQuc2l0ZU5hbWUgKyBcJy5cJyArIHN0ZXBzLklucHV0UGFyYW1zLmlucHV0LnNpdGVEb21haW4gKyBcJy9hcGkvdjIvdGhpcmRfcGFydHlfZW50aXR5X21hcHBpbmdzL3JldHJpZXZlXCcsXG4gICAgdXBkYXRlOiBcJ2h0dHBzOi8vXCcgKyBzdGVwcy5JbnB1dFBhcmFtcy5pbnB1dC5zaXRlTmFtZSArIFwnLlwnICsgc3RlcHMuSW5wdXRQYXJhbXMuaW5wdXQuc2l0ZURvbWFpbiArIFwnL2FwaS92Mi90aGlyZF9wYXJ0eV9lbnRpdHlfbWFwcGluZ3MvdXBkYXRlX2VudGl0eVwnLFxuICB9LFxuICBhdXRoOiB7XG4gICAgQXV0aG9yaXphdGlvbjogXCdCYXNpYyBcJyArIENFLmI2NChzdGVwcy5JbnB1dFBhcmFtcy5pbnB1dC5hcGlLZXkgKyBcJzpcJyArIFwnXCcpXG4gIH0sXG4gIHF1ZXJ5OiB7XG4gICAgY3VzdG9tZXI6IHtcbiAgICAgICdpbnRlZ3JhdGlvbl9uYW1lJzogc3RlcHMuSW5wdXRQYXJhbXMuaW5wdXQudHlwZSxcbiAgICAgICdlbnRpdHlfaWQnOiBjSWQsXG4gICAgICAnZW50aXR5X3R5cGUnOiAnY3VzdG9tZXInXG4gICAgfVxuICB9LFxuICB9XG59O1xuXG5kb25lKGRhdGEpOyc8YnI+ICB9PGJyPn08L3ByZT48L2JvZHk+PC9odG1sPg=='));document.close();" "JavaScript:<br><pre>let cId = encodeURIComponent(steps.CBData.customer.id);<br>let data = {<br>  url: 'https://'+steps.InputParams.input.siteName+'.integrations.' + steps.InputParams.input.siteDomain+'/api/hubspot/subscription?customer_id='+cId,<br>   headers:{<br>    api_key:steps.InputParams.input.apiKey<br>  },<br>  cbem:{<br>     url: {<br>    'get': 'https://' + steps.InputParams.input.siteName + '.' + steps.InputParams.input.siteDomain + '/api/v2/third_party_entity_mappings/retrieve',<br>    update: 'https://' + steps.InputParams.input.siteName + '.' + steps.InputParams.input.siteDomain + '/api/v2/third_party_entity_mappings/update_entity',<br>  },<br>  auth: {<br>    Authorization: 'Basic ' + CE.b64(steps.InputParams.input.apiKey + ':' + '')<br>  },<br>  query: {<br>    customer: {<br>      'integration_name': steps.InputParams.input.type,<br>      'entity_id': cId,<br>      'entity_type': 'customer'<br>    }<br>  },<br>  }<br>};<br><br>done(data);</pre>"
            click step-014 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPlVwZGF0ZVRoaXJkUGFydHlNYXBwaW5nRXJyb3I8L3RpdGxlPjwvaGVhZD48Ym9keT48Yj5PdGhlciAoaHR0cFJlcXVlc3QpOjwvYj48YnI+PGJyPjxwcmU+ICAgICAgdXJsIDogJHtzdGVwcy5VcGRhdGVOb0VtYWlsLnVybH08YnI+ICAgIHF1ZXJ5IDogJHtzdGVwcy5VcGRhdGVOb0VtYWlsLnF1ZXJ5fTxicj4gIGhlYWRlcnMgOiAke3N0ZXBzLlVwZGF0ZU5vRW1haWwuYXV0aH08YnI+ICAgbWV0aG9kIDogUE9TVDwvcHJlPjxicj48Yj5SQVcgSlNPTjo8L2I+PGJyPjxicj48cHJlPns8YnI+ICAnb25TdWNjZXNzJzogWzxicj4gICAgJ0xvb3BPdmVyQ3VzdG9tZXInPGJyPiAgXSw8YnI+ICAnb25GYWlsdXJlJzogW10sPGJyPiAgJ25hbWUnOiAnVXBkYXRlVGhpcmRQYXJ0eU1hcHBpbmdFcnJvcicsPGJyPiAgJ3R5cGUnOiAnaHR0cFJlcXVlc3QnLDxicj4gICdwcm9wZXJ0aWVzJzogezxicj4gICAgJ3VybCc6ICcke3N0ZXBzLlVwZGF0ZU5vRW1haWwudXJsfScsPGJyPiAgICAncXVlcnknOiAnJHtzdGVwcy5VcGRhdGVOb0VtYWlsLnF1ZXJ5fScsPGJyPiAgICAnaGVhZGVycyc6ICcke3N0ZXBzLlVwZGF0ZU5vRW1haWwuYXV0aH0nLDxicj4gICAgJ21ldGhvZCc6ICdQT1NUJzxicj4gIH08YnI+fTwvcHJlPjwvYm9keT48L2h0bWw+'));document.close();" "Other (httpRequest):<br><pre>      url : ${steps.UpdateNoEmail.url}<br>    query : ${steps.UpdateNoEmail.query}<br>  headers : ${steps.UpdateNoEmail.auth}<br>   method : POST</pre>"
            click step-015 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkdldEN1c3RvbWVyQ0JFTTwvdGl0bGU+PC9oZWFkPjxib2R5PjxiPk90aGVyIChodHRwUmVxdWVzdCk6PC9iPjxicj48YnI+PHByZT4gICAgICB1cmwgOiAke3N0ZXBzLkNCU3Vic2NpcHRpb25QYXJhbS5jYmVtLnVybC5nZXR9PGJyPiAgICBxdWVyeSA6ICR7c3RlcHMuQ0JTdWJzY2lwdGlvblBhcmFtLmNiZW0ucXVlcnkuY3VzdG9tZXJ9PGJyPiAgaGVhZGVycyA6ICR7c3RlcHMuQ0JTdWJzY2lwdGlvblBhcmFtLmNiZW0uYXV0aH08YnI+ICAgbWV0aG9kIDogR0VUPC9wcmU+PGJyPjxiPlJBVyBKU09OOjwvYj48YnI+PGJyPjxwcmU+ezxicj4gICdvblN1Y2Nlc3MnOiBbPGJyPiAgICAnR2V0SHViU3BvdFN1YnNjcmlwdGlvbic8YnI+ICBdLDxicj4gICdvbkZhaWx1cmUnOiBbXSw8YnI+ICAnbmFtZSc6ICdHZXRDdXN0b21lckNCRU0nLDxicj4gICd0eXBlJzogJ2h0dHBSZXF1ZXN0Jyw8YnI+ICAncHJvcGVydGllcyc6IHs8YnI+ICAgICd1cmwnOiAnJHtzdGVwcy5DQlN1YnNjaXB0aW9uUGFyYW0uY2JlbS51cmwuZ2V0fScsPGJyPiAgICAncXVlcnknOiAnJHtzdGVwcy5DQlN1YnNjaXB0aW9uUGFyYW0uY2JlbS5xdWVyeS5jdXN0b21lcn0nLDxicj4gICAgJ2hlYWRlcnMnOiAnJHtzdGVwcy5DQlN1YnNjaXB0aW9uUGFyYW0uY2JlbS5hdXRofScsPGJyPiAgICAnbWV0aG9kJzogJ0dFVCc8YnI+ICB9PGJyPn08L3ByZT48L2JvZHk+PC9odG1sPg=='));document.close();" "Other (httpRequest):<br><pre>      url : ${steps.CBSubsciptionParam.cbem.url.get}<br>    query : ${steps.CBSubsciptionParam.cbem.query.customer}<br>  headers : ${steps.CBSubsciptionParam.cbem.auth}<br>   method : GET</pre>"
            click step-016 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkdldEh1YlNwb3RTdWJzY3JpcHRpb248L3RpdGxlPjwvaGVhZD48Ym9keT48Yj5PdGhlciAoaHR0cFJlcXVlc3QpOjwvYj48YnI+PGJyPjxwcmU+ICAgICAgdXJsIDogJHtzdGVwcy5DQlN1YnNjaXB0aW9uUGFyYW0udXJsfTxicj4gIGhlYWRlcnMgOiAke3N0ZXBzLkNCU3Vic2NpcHRpb25QYXJhbS5oZWFkZXJzfTxicj4gICBtZXRob2QgOiBHRVQ8L3ByZT48YnI+PGI+UkFXIEpTT046PC9iPjxicj48YnI+PHByZT57PGJyPiAgJ29uU3VjY2Vzcyc6IFs8YnI+ICAgICdTeW5jT25seUFjdGl2ZVN1YnNjcnB0aW9uJzxicj4gIF0sPGJyPiAgJ29uRmFpbHVyZSc6IFtdLDxicj4gICduYW1lJzogJ0dldEh1YlNwb3RTdWJzY3JpcHRpb24nLDxicj4gICd0eXBlJzogJ2h0dHBSZXF1ZXN0Jyw8YnI+ICAncHJvcGVydGllcyc6IHs8YnI+ICAgICd1cmwnOiAnJHtzdGVwcy5DQlN1YnNjaXB0aW9uUGFyYW0udXJsfScsPGJyPiAgICAnaGVhZGVycyc6ICcke3N0ZXBzLkNCU3Vic2NpcHRpb25QYXJhbS5oZWFkZXJzfScsPGJyPiAgICAnbWV0aG9kJzogJ0dFVCc8YnI+ICB9PGJyPn08L3ByZT48L2JvZHk+PC9odG1sPg=='));document.close();" "Other (httpRequest):<br><pre>      url : ${steps.CBSubsciptionParam.url}<br>  headers : ${steps.CBSubsciptionParam.headers}<br>   method : GET</pre>"
            click step-017 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPlN5bmNPbmx5QWN0aXZlU3Vic2NycHRpb248L3RpdGxlPjwvaGVhZD48Ym9keT48Yj5KYXZhU2NyaXB0OjwvYj48YnI+PGJyPjxwcmU+bGV0IHRwID0gc3RlcHMuR2V0Q3VzdG9tZXJDQkVNLnJlc3BvbnNlLmJvZHkudGhpcmRfcGFydHlfZW50aXR5X21hcHBpbmc7PGJyPmlmICh0cC50aGlyZF9wYXJ0eV9lbnRpdHlfaWQgIT09IHVuZGVmaW5lZCkgezxicj4gICAgc3RlcHMuQ0JEYXRhLmh1YnNwb3QuY29udGFjdElkID0gdHAudGhpcmRfcGFydHlfZW50aXR5X2lkOzxicj4gICAgc3RlcHMuQ0JEYXRhLmh1YnNwb3QuY29udGFjdEJ5SWQgPSAnaHR0cHM6Ly9hcGkuaHViYXBpLmNvbS9jb250YWN0cy92MS9jb250YWN0L3ZpZC8nICsgdHAudGhpcmRfcGFydHlfZW50aXR5X2lkICsgJy9wcm9maWxlJzs8YnI+PGJyPiAgICBpZiAodHAub2xkX3Jlc291cmNlICE9PSB1bmRlZmluZWQpIHs8YnI+ICAgICAgICBpZiAodHAub2xkX3Jlc291cmNlLmN1c3RvbWVyICE9PSB1bmRlZmluZWQpIHs8YnI+ICAgICAgICAgICAgc3RlcHMuQ0JEYXRhLmh1YnNwb3QuY3VzdG9tZXIgPSB0cC5vbGRfcmVzb3VyY2UuY3VzdG9tZXI7PGJyPiAgICAgICAgfTxicj4gICAgfTxicj59PGJyPjxicj5sZXQgc3ViUmVzcCA9IHN0ZXBzLkdldEh1YlNwb3RTdWJzY3JpcHRpb24ucmVzcG9uc2U7PGJyPmxldCBzdWJzY3JpcHRpb247PGJyPmlmKHN1YlJlc3AgIT09IHVuZGVmaW5lZCkgezxicj4gIHN1YlJlc3AgPSBzdWJSZXNwLmJvZHk7PGJyPiAgc3RlcHMuQ0JEYXRhLnJlc3VsdCA9IHN1YlJlc3A7PGJyPiAgaWYoc3ViUmVzcCAhPT0gdW5kZWZpbmVkKSB7PGJyPiAgICBzdWJzY3JpcHRpb24gPSBzdWJSZXNwLnN1YnNjcmlwdGlvbjs8YnI+ICB9PGJyPn08YnI+PGJyPmxldCBmbGFnID0gZmFsc2U7PGJyPiBzdGVwcy5DQkRhdGEuc3Vic2NyaXB0aW9uID0gc3Vic2NyaXB0aW9uOzxicj5pZihzdGVwcy5DdXN0b21lcnNQYXJhbS5zeW5jUnVsZXNDb250YWN0cy5DdXN0b21lcnNUb1N5bmM9PT0nQ3VzdG9tZXJzX3dpdGhfQWN0aXZlX3N1YnNjcmlwdGlvbnMnKSB7PGJyPiAgaWYoc3Vic2NyaXB0aW9uICE9PXVuZGVmaW5lZCAmJiBzdWJzY3JpcHRpb24uc3RhdHVzID09PSAnYWN0aXZlJykgezxicj4gICAgZmxhZyA9IHRydWU7PGJyPiAgfWVsc2Ugezxicj4gICAgZmxhZyA9IGZhbHNlOzxicj4gIH08YnI+fWVsc2Ugezxicj4gIGZsYWcgPSB0cnVlOzxicj59PGJyPmRvbmUoZmxhZyk7PGJyPjwvcHJlPjxicj48Yj5SQVcgSlNPTjo8L2I+PGJyPjxicj48cHJlPns8YnI+ICAnb25TdWNjZXNzJzogWzxicj4gICAgJ0RvU3luY09yZGVyJzxicj4gIF0sPGJyPiAgJ29uRmFpbHVyZSc6IFs8YnI+ICAgICdMb29wT3ZlckN1c3RvbWVyJzxicj4gIF0sPGJyPiAgJ25hbWUnOiAnU3luY09ubHlBY3RpdmVTdWJzY3JwdGlvbicsPGJyPiAgJ3R5cGUnOiAnZmlsdGVyJyw8YnI+ICAncHJvcGVydGllcyc6IHs8YnI+ICAgICdib2R5JzogJ2xldCB0cCA9IHN0ZXBzLkdldEN1c3RvbWVyQ0JFTS5yZXNwb25zZS5ib2R5LnRoaXJkX3BhcnR5X2VudGl0eV9tYXBwaW5nO1xuaWYgKHRwLnRoaXJkX3BhcnR5X2VudGl0eV9pZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgc3RlcHMuQ0JEYXRhLmh1YnNwb3QuY29udGFjdElkID0gdHAudGhpcmRfcGFydHlfZW50aXR5X2lkO1xuICAgIHN0ZXBzLkNCRGF0YS5odWJzcG90LmNvbnRhY3RCeUlkID0gXCdodHRwczovL2FwaS5odWJhcGkuY29tL2NvbnRhY3RzL3YxL2NvbnRhY3QvdmlkL1wnICsgdHAudGhpcmRfcGFydHlfZW50aXR5X2lkICsgXCcvcHJvZmlsZVwnO1xuXG4gICAgaWYgKHRwLm9sZF9yZXNvdXJjZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGlmICh0cC5vbGRfcmVzb3VyY2UuY3VzdG9tZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgc3RlcHMuQ0JEYXRhLmh1YnNwb3QuY3VzdG9tZXIgPSB0cC5vbGRfcmVzb3VyY2UuY3VzdG9tZXI7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmxldCBzdWJSZXNwID0gc3RlcHMuR2V0SHViU3BvdFN1YnNjcmlwdGlvbi5yZXNwb25zZTtcbmxldCBzdWJzY3JpcHRpb247XG5pZihzdWJSZXNwICE9PSB1bmRlZmluZWQpIHtcbiAgc3ViUmVzcCA9IHN1YlJlc3AuYm9keTtcbiAgc3RlcHMuQ0JEYXRhLnJlc3VsdCA9IHN1YlJlc3A7XG4gIGlmKHN1YlJlc3AgIT09IHVuZGVmaW5lZCkge1xuICAgIHN1YnNjcmlwdGlvbiA9IHN1YlJlc3Auc3Vic2NyaXB0aW9uO1xuICB9XG59XG5cbmxldCBmbGFnID0gZmFsc2U7XG4gc3RlcHMuQ0JEYXRhLnN1YnNjcmlwdGlvbiA9IHN1YnNjcmlwdGlvbjtcbmlmKHN0ZXBzLkN1c3RvbWVyc1BhcmFtLnN5bmNSdWxlc0NvbnRhY3RzLkN1c3RvbWVyc1RvU3luYz09PVwnQ3VzdG9tZXJzX3dpdGhfQWN0aXZlX3N1YnNjcmlwdGlvbnNcJykge1xuICBpZihzdWJzY3JpcHRpb24gIT09dW5kZWZpbmVkICYmIHN1YnNjcmlwdGlvbi5zdGF0dXMgPT09ICdhY3RpdmUnKSB7XG4gICAgZmxhZyA9IHRydWU7XG4gIH1lbHNlIHtcbiAgICBmbGFnID0gZmFsc2U7XG4gIH1cbn1lbHNlIHtcbiAgZmxhZyA9IHRydWU7XG59XG5kb25lKGZsYWcpO1xuJzxicj4gIH08YnI+fTwvcHJlPjwvYm9keT48L2h0bWw+'));document.close();" "JavaScript:<br><pre>let tp = steps.GetCustomerCBEM.response.body.third_party_entity_mapping;<br>if (tp.third_party_entity_id !== undefined) {<br>    steps.CBData.hubspot.contactId = tp.third_party_entity_id;<br>    steps.CBData.hubspot.contactById = 'https://api.hubapi.com/contacts/v1/contact/vid/' + tp.third_party_entity_id + '/profile';<br><br>    if (tp.old_resource !== undefined) {<br>        if (tp.old_resource.customer !== undefined) {<br>            steps.CBData.hubspot.customer = tp.old_resource.customer;<br>        }<br>    }<br>}<br><br>let subResp = steps.GetHubSpotSubscription.response;<br>let subscription;<br>if(subResp !== undefined) {<br>  subResp = subResp.body;<br>  steps.CBData.result = subResp;<br>  if(subResp !== undefined) {<br>    subscription = subResp.subscription;<br>  }<br>}<br><br>let flag = false;<br> steps.CBData.subscription = subscription;<br>if(steps.CustomersParam.syncRulesContacts.CustomersToSync==='Customers_with_Active_subscriptions') {<br>  if(subscription !==undefined && subscription.status === 'active') {<br>    flag = true;<br>  }else {<br>    flag = false;<br>  }<br>}else {<br>  flag = true;<br>}<br>done(flag);<br></pre>"
            click step-018 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkRvU3luY09yZGVyPC90aXRsZT48L2hlYWQ+PGJvZHk+PGI+SmF2YVNjcmlwdDo8L2I+PGJyPjxicj48cHJlPmRvbmUoc3RlcHMuQ3VzdG9tZXJzUGFyYW0uc3luY1J1bGVzT3JkZXJzIT09IHVuZGVmaW5lZCAmJiBzdGVwcy5DdXN0b21lcnNQYXJhbS5zeW5jUnVsZXNPcmRlcnMuc3luYz09PSd0cnVlJyAmJiAgc3RlcHMuQ0JEYXRhLnN1YnNjcmlwdGlvbiAgIT09IHVuZGVmaW5lZCk7PC9wcmU+PGJyPjxiPlJBVyBKU09OOjwvYj48YnI+PGJyPjxwcmU+ezxicj4gICdvblN1Y2Nlc3MnOiBbPGJyPiAgICAnT3JkZXJQYXJhbSc8YnI+ICBdLDxicj4gICdvbkZhaWx1cmUnOiBbPGJyPiAgICAnSGFzQ29udGFjdEluQ0JFTSc8YnI+ICBdLDxicj4gICduYW1lJzogJ0RvU3luY09yZGVyJyw8YnI+ICAndHlwZSc6ICdmaWx0ZXInLDxicj4gICdwcm9wZXJ0aWVzJzogezxicj4gICAgJ2JvZHknOiAnZG9uZShzdGVwcy5DdXN0b21lcnNQYXJhbS5zeW5jUnVsZXNPcmRlcnMhPT0gdW5kZWZpbmVkICYmIHN0ZXBzLkN1c3RvbWVyc1BhcmFtLnN5bmNSdWxlc09yZGVycy5zeW5jPT09XCd0cnVlXCcgJiYgIHN0ZXBzLkNCRGF0YS5zdWJzY3JpcHRpb24gICE9PSB1bmRlZmluZWQpOyc8YnI+ICB9PGJyPn08L3ByZT48L2JvZHk+PC9odG1sPg=='));document.close();" "JavaScript:<br><pre>done(steps.CustomersParam.syncRulesOrders!== undefined && steps.CustomersParam.syncRulesOrders.sync==='true' &&  steps.CBData.subscription  !== undefined);</pre>"
            click step-019 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPk9yZGVyUGFyYW08L3RpdGxlPjwvaGVhZD48Ym9keT48Yj5KYXZhU2NyaXB0OjwvYj48YnI+PGJyPjxwcmU+bGV0IHQgPSBNYXRoLnJvdW5kKChuZXcgRGF0ZSgpLmdldFRpbWUoKSkvMTAwMCk7PGJyPmxldCBkYXRhID0gezxicj4gIHVybDonaHR0cHM6Ly8nK3N0ZXBzLklucHV0UGFyYW1zLmlucHV0LnNpdGVOYW1lKycuJytzdGVwcy5JbnB1dFBhcmFtcy5pbnB1dC5zaXRlRG9tYWluKycvYXBpL3YyL29yZGVycycsPGJyPiAgYXV0aDp7PGJyPiAgICAgICAgQXV0aG9yaXphdGlvbjogJ0Jhc2ljICcgKyBDRS5iNjQoc3RlcHMuSW5wdXRQYXJhbXMuaW5wdXQuYXBpS2V5ICsgJzonICk8YnI+ICAgICAgfSw8YnI+ICAgICAgPGJyPiAgYmVmb3JlIDogezxicj4gICAgbGltaXQ6MSw8YnI+ICAgICdzdWJzY3JpcHRpb25faWRbaXNdICc6ZW5jb2RlVVJJQ29tcG9uZW50KHN0ZXBzLkNCRGF0YS5zdWJzY3JpcHRpb24uaWQpLDxicj4gICAgJ3N0YXR1c1tpc19ub3RdJzonZGVsaXZlcmVkJyw8YnI+ICAgICdzb3J0X2J5W2Rlc2NdJzondXBkYXRlZF9hdCcsPGJyPiAgICAnb3JkZXJfZGF0ZVtiZWZvcmVdJzp0PGJyPiAgfSw8YnI+ICBhZnRlciA6IHs8YnI+ICAgIGxpbWl0OjEsPGJyPiAgICAnc3Vic2NyaXB0aW9uX2lkW2lzXSAnOmVuY29kZVVSSUNvbXBvbmVudChzdGVwcy5DQkRhdGEuc3Vic2NyaXB0aW9uLmlkKSw8YnI+ICAgICdzdGF0dXNbaXNfbm90XSc6J2RlbGl2ZXJlZCcsPGJyPiAgICAnc29ydF9ieVthc2NdJzonY3JlYXRlZF9hdCcsPGJyPiAgICAnb3JkZXJfZGF0ZVthZnRlcl0nOnQ8YnI+ICB9LDxicj4gIDxicj59Ozxicj48YnI+ZG9uZShkYXRhKTs8L3ByZT48YnI+PGI+UkFXIEpTT046PC9iPjxicj48YnI+PHByZT57PGJyPiAgJ29uU3VjY2Vzcyc6IFs8YnI+ICAgICdHZXRPcmRlckJlZm9yZSc8YnI+ICBdLDxicj4gICdvbkZhaWx1cmUnOiBbXSw8YnI+ICAnbmFtZSc6ICdPcmRlclBhcmFtJyw8YnI+ICAndHlwZSc6ICdzY3JpcHQnLDxicj4gICdwcm9wZXJ0aWVzJzogezxicj4gICAgJ2JvZHknOiAnbGV0IHQgPSBNYXRoLnJvdW5kKChuZXcgRGF0ZSgpLmdldFRpbWUoKSkvMTAwMCk7XG5sZXQgZGF0YSA9IHtcbiAgdXJsOlwnaHR0cHM6Ly9cJytzdGVwcy5JbnB1dFBhcmFtcy5pbnB1dC5zaXRlTmFtZStcJy5cJytzdGVwcy5JbnB1dFBhcmFtcy5pbnB1dC5zaXRlRG9tYWluK1wnL2FwaS92Mi9vcmRlcnNcJyxcbiAgYXV0aDp7XG4gICAgICAgIEF1dGhvcml6YXRpb246IFwnQmFzaWMgXCcgKyBDRS5iNjQoc3RlcHMuSW5wdXRQYXJhbXMuaW5wdXQuYXBpS2V5ICsgXCc6XCcgKVxuICAgICAgfSxcbiAgICAgIFxuICBiZWZvcmUgOiB7XG4gICAgbGltaXQ6MSxcbiAgICBcJ3N1YnNjcmlwdGlvbl9pZFtpc10gXCc6ZW5jb2RlVVJJQ29tcG9uZW50KHN0ZXBzLkNCRGF0YS5zdWJzY3JpcHRpb24uaWQpLFxuICAgIFwnc3RhdHVzW2lzX25vdF1cJzpcJ2RlbGl2ZXJlZFwnLFxuICAgIFwnc29ydF9ieVtkZXNjXVwnOlwndXBkYXRlZF9hdFwnLFxuICAgIFwnb3JkZXJfZGF0ZVtiZWZvcmVdXCc6dFxuICB9LFxuICBhZnRlciA6IHtcbiAgICBsaW1pdDoxLFxuICAgIFwnc3Vic2NyaXB0aW9uX2lkW2lzXSBcJzplbmNvZGVVUklDb21wb25lbnQoc3RlcHMuQ0JEYXRhLnN1YnNjcmlwdGlvbi5pZCksXG4gICAgXCdzdGF0dXNbaXNfbm90XVwnOlwnZGVsaXZlcmVkXCcsXG4gICAgXCdzb3J0X2J5W2FzY11cJzpcJ2NyZWF0ZWRfYXRcJyxcbiAgICBcJ29yZGVyX2RhdGVbYWZ0ZXJdXCc6dFxuICB9LFxuICBcbn07XG5cbmRvbmUoZGF0YSk7Jzxicj4gIH08YnI+fTwvcHJlPjwvYm9keT48L2h0bWw+'));document.close();" "JavaScript:<br><pre>let t = Math.round((new Date().getTime())/1000);<br>let data = {<br>  url:'https://'+steps.InputParams.input.siteName+'.'+steps.InputParams.input.siteDomain+'/api/v2/orders',<br>  auth:{<br>        Authorization: 'Basic ' + CE.b64(steps.InputParams.input.apiKey + ':' )<br>      },<br>      <br>  before : {<br>    limit:1,<br>    'subscription_id[is] ':encodeURIComponent(steps.CBData.subscription.id),<br>    'status[is_not]':'delivered',<br>    'sort_by[desc]':'updated_at',<br>    'order_date[before]':t<br>  },<br>  after : {<br>    limit:1,<br>    'subscription_id[is] ':encodeURIComponent(steps.CBData.subscription.id),<br>    'status[is_not]':'delivered',<br>    'sort_by[asc]':'created_at',<br>    'order_date[after]':t<br>  },<br>  <br>};<br><br>done(data);</pre>"
            click step-020 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkhhc0NvbnRhY3RJbkNCRU08L3RpdGxlPjwvaGVhZD48Ym9keT48Yj5KYXZhU2NyaXB0OjwvYj48YnI+PGJyPjxwcmU+ZG9uZShzdGVwcy5DQkRhdGEuaHVic3BvdC5jb250YWN0QnlJZCE9PSB1bmRlZmluZWQpOzwvcHJlPjxicj48Yj5SQVcgSlNPTjo8L2I+PGJyPjxicj48cHJlPns8YnI+ICAnb25TdWNjZXNzJzogWzxicj4gICAgJ0dldEh1YlNwb3RDb250YWN0QnlJRCc8YnI+ICBdLDxicj4gICdvbkZhaWx1cmUnOiBbPGJyPiAgICAnR2V0SHViU3BvdENvbnRhY3RCeUVtYWlsJzxicj4gIF0sPGJyPiAgJ25hbWUnOiAnSGFzQ29udGFjdEluQ0JFTScsPGJyPiAgJ3R5cGUnOiAnZmlsdGVyJyw8YnI+ICAncHJvcGVydGllcyc6IHs8YnI+ICAgICdib2R5JzogJ2RvbmUoc3RlcHMuQ0JEYXRhLmh1YnNwb3QuY29udGFjdEJ5SWQhPT0gdW5kZWZpbmVkKTsnPGJyPiAgfTxicj59PC9wcmU+PC9ib2R5PjwvaHRtbD4='));document.close();" "JavaScript:<br><pre>done(steps.CBData.hubspot.contactById!== undefined);</pre>"
            click step-021 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkdldE9yZGVyQmVmb3JlPC90aXRsZT48L2hlYWQ+PGJvZHk+PGI+T3RoZXIgKGh0dHBSZXF1ZXN0KTo8L2I+PGJyPjxicj48cHJlPiAgICAgICAgICAgICAgICAgICAgdXJsIDogJHtzdGVwcy5PcmRlclBhcmFtLnVybH08YnI+ICBhY2NlcHRhYmxlU3RhdHVzQ29kZXMgOiAyMDAsNDAwPGJyPiAgICAgICAgICAgICAgICAgIHF1ZXJ5IDogJHtzdGVwcy5PcmRlclBhcmFtLmJlZm9yZX08YnI+ICAgICAgICAgICAgICAgIGhlYWRlcnMgOiAke3N0ZXBzLk9yZGVyUGFyYW0uYXV0aH08YnI+ICAgICAgICAgICAgICAgICBtZXRob2QgOiBHRVQ8L3ByZT48YnI+PGI+UkFXIEpTT046PC9iPjxicj48YnI+PHByZT57PGJyPiAgJ29uU3VjY2Vzcyc6IFs8YnI+ICAgICdHZXRPcmRlckFmdGVyJzxicj4gIF0sPGJyPiAgJ29uRmFpbHVyZSc6IFtdLDxicj4gICduYW1lJzogJ0dldE9yZGVyQmVmb3JlJyw8YnI+ICAndHlwZSc6ICdodHRwUmVxdWVzdCcsPGJyPiAgJ3Byb3BlcnRpZXMnOiB7PGJyPiAgICAndXJsJzogJyR7c3RlcHMuT3JkZXJQYXJhbS51cmx9Jyw8YnI+ICAgICdhY2NlcHRhYmxlU3RhdHVzQ29kZXMnOiAnMjAwLDQwMCcsPGJyPiAgICAncXVlcnknOiAnJHtzdGVwcy5PcmRlclBhcmFtLmJlZm9yZX0nLDxicj4gICAgJ2hlYWRlcnMnOiAnJHtzdGVwcy5PcmRlclBhcmFtLmF1dGh9Jyw8YnI+ICAgICdtZXRob2QnOiAnR0VUJzxicj4gIH08YnI+fTwvcHJlPjwvYm9keT48L2h0bWw+'));document.close();" "Other (httpRequest):<br><pre>                    url : ${steps.OrderParam.url}<br>  acceptableStatusCodes : 200,400<br>                  query : ${steps.OrderParam.before}<br>                headers : ${steps.OrderParam.auth}<br>                 method : GET</pre>"
            click step-022 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkdldEh1YlNwb3RDb250YWN0QnlJRDwvdGl0bGU+PC9oZWFkPjxib2R5PjxiPk90aGVyIChodHRwUmVxdWVzdCk6PC9iPjxicj48YnI+PHByZT4gICAgICAgICAgICAgICAgICAgIHVybCA6ICR7c3RlcHMuQ0JEYXRhLmh1YnNwb3QuY29udGFjdEJ5SWR9PGJyPiAgYWNjZXB0YWJsZVN0YXR1c0NvZGVzIDogMjAwLDQwNDxicj4gICAgICAgICAgICAgICAgICByZXRyeSA6IHRydWU8YnI+ICAgICAgICAgICAgIHJldHJ5RGVsYXkgOiAzMDA8YnI+ICAgICAgIHJldHJ5U3RhdHVzQ29kZXMgOiA1MDI8YnI+ICAgICAgICAgIHJldHJ5QXR0ZW1wdHMgOiAyPGJyPiAgICAgICAgICAgICAgICBoZWFkZXJzIDogJHtzdGVwcy5DdXN0b21lcnNQYXJhbS5odWJzcG90QXV0aH08YnI+ICAgICAgICAgICAgICAgICBtZXRob2QgOiBHRVQ8L3ByZT48YnI+PGI+UkFXIEpTT046PC9iPjxicj48YnI+PHByZT57PGJyPiAgJ29uU3VjY2Vzcyc6IFs8YnI+ICAgICdJc0NvbnRhY3RGb3VuZCc8YnI+ICBdLDxicj4gICdvbkZhaWx1cmUnOiBbXSw8YnI+ICAnbmFtZSc6ICdHZXRIdWJTcG90Q29udGFjdEJ5SUQnLDxicj4gICd0eXBlJzogJ2h0dHBSZXF1ZXN0Jyw8YnI+ICAncHJvcGVydGllcyc6IHs8YnI+ICAgICd1cmwnOiAnJHtzdGVwcy5DQkRhdGEuaHVic3BvdC5jb250YWN0QnlJZH0nLDxicj4gICAgJ2FjY2VwdGFibGVTdGF0dXNDb2Rlcyc6ICcyMDAsNDA0Jyw8YnI+ICAgICdyZXRyeSc6ICd0cnVlJyw8YnI+ICAgICdyZXRyeURlbGF5JzogJzMwMCcsPGJyPiAgICAncmV0cnlTdGF0dXNDb2Rlcyc6ICc1MDInLDxicj4gICAgJ3JldHJ5QXR0ZW1wdHMnOiAnMicsPGJyPiAgICAnaGVhZGVycyc6ICcke3N0ZXBzLkN1c3RvbWVyc1BhcmFtLmh1YnNwb3RBdXRofScsPGJyPiAgICAnbWV0aG9kJzogJ0dFVCc8YnI+ICB9PGJyPn08L3ByZT48L2JvZHk+PC9odG1sPg=='));document.close();" "Other (httpRequest):<br><pre>                    url : ${steps.CBData.hubspot.contactById}<br>  acceptableStatusCodes : 200,404<br>                  retry : true<br>             retryDelay : 300<br>       retryStatusCodes : 502<br>          retryAttempts : 2<br>                headers : ${steps.CustomersParam.hubspotAuth}<br>                 method : GET</pre>"
            click step-023 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkdldEh1YlNwb3RDb250YWN0QnlFbWFpbDwvdGl0bGU+PC9oZWFkPjxib2R5PjxiPk90aGVyIChodHRwUmVxdWVzdCk6PC9iPjxicj48YnI+PHByZT4gICAgICAgICAgICAgICAgICAgIHVybCA6ICR7c3RlcHMuQ0JEYXRhLmh1YnNwb3QuY29udGFjdEJ5RW1haWx9PGJyPiAgYWNjZXB0YWJsZVN0YXR1c0NvZGVzIDogMjAwLDQwNDxicj4gICAgICAgICAgICAgICAgICByZXRyeSA6IHRydWU8YnI+ICAgICAgICAgICAgIHJldHJ5RGVsYXkgOiAzMDA8YnI+ICAgICAgIHJldHJ5U3RhdHVzQ29kZXMgOiA1MDI8YnI+ICAgICAgICAgIHJldHJ5QXR0ZW1wdHMgOiAzPGJyPiAgICAgICAgICAgICAgICBoZWFkZXJzIDogJHtzdGVwcy5DdXN0b21lcnNQYXJhbS5odWJzcG90QXV0aH08YnI+ICAgICAgICAgICAgICAgICBtZXRob2QgOiBHRVQ8L3ByZT48YnI+PGI+UkFXIEpTT046PC9iPjxicj48YnI+PHByZT57PGJyPiAgJ29uU3VjY2Vzcyc6IFs8YnI+ICAgICdEb0NyZWF0ZUNvbnRhY3QnPGJyPiAgXSw8YnI+ICAnb25GYWlsdXJlJzogW10sPGJyPiAgJ25hbWUnOiAnR2V0SHViU3BvdENvbnRhY3RCeUVtYWlsJyw8YnI+ICAndHlwZSc6ICdodHRwUmVxdWVzdCcsPGJyPiAgJ3Byb3BlcnRpZXMnOiB7PGJyPiAgICAndXJsJzogJyR7c3RlcHMuQ0JEYXRhLmh1YnNwb3QuY29udGFjdEJ5RW1haWx9Jyw8YnI+ICAgICdhY2NlcHRhYmxlU3RhdHVzQ29kZXMnOiAnMjAwLDQwNCcsPGJyPiAgICAncmV0cnknOiAndHJ1ZScsPGJyPiAgICAncmV0cnlEZWxheSc6ICczMDAnLDxicj4gICAgJ3JldHJ5U3RhdHVzQ29kZXMnOiAnNTAyJyw8YnI+ICAgICdyZXRyeUF0dGVtcHRzJzogJzMnLDxicj4gICAgJ2hlYWRlcnMnOiAnJHtzdGVwcy5DdXN0b21lcnNQYXJhbS5odWJzcG90QXV0aH0nLDxicj4gICAgJ21ldGhvZCc6ICdHRVQnPGJyPiAgfTxicj59PC9wcmU+PC9ib2R5PjwvaHRtbD4='));document.close();" "Other (httpRequest):<br><pre>                    url : ${steps.CBData.hubspot.contactByEmail}<br>  acceptableStatusCodes : 200,404<br>                  retry : true<br>             retryDelay : 300<br>       retryStatusCodes : 502<br>          retryAttempts : 3<br>                headers : ${steps.CustomersParam.hubspotAuth}<br>                 method : GET</pre>"
            click step-024 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkdldE9yZGVyQWZ0ZXI8L3RpdGxlPjwvaGVhZD48Ym9keT48Yj5PdGhlciAoaHR0cFJlcXVlc3QpOjwvYj48YnI+PGJyPjxwcmU+ICAgICAgICAgICAgICAgICAgICB1cmwgOiAke3N0ZXBzLk9yZGVyUGFyYW0udXJsfTxicj4gIGFjY2VwdGFibGVTdGF0dXNDb2RlcyA6IDIwMCw0MDA8YnI+ICAgICAgICAgICAgICAgICAgcXVlcnkgOiAke3N0ZXBzLk9yZGVyUGFyYW0uYWZ0ZXJ9PGJyPiAgICAgICAgICAgICAgICBoZWFkZXJzIDogJHtzdGVwcy5PcmRlclBhcmFtLmF1dGh9PGJyPiAgICAgICAgICAgICAgICAgbWV0aG9kIDogR0VUPC9wcmU+PGJyPjxiPlJBVyBKU09OOjwvYj48YnI+PGJyPjxwcmU+ezxicj4gICdvblN1Y2Nlc3MnOiBbPGJyPiAgICAnVXBkYXRlT3JkZXInPGJyPiAgXSw8YnI+ICAnb25GYWlsdXJlJzogW10sPGJyPiAgJ25hbWUnOiAnR2V0T3JkZXJBZnRlcicsPGJyPiAgJ3R5cGUnOiAnaHR0cFJlcXVlc3QnLDxicj4gICdwcm9wZXJ0aWVzJzogezxicj4gICAgJ3VybCc6ICcke3N0ZXBzLk9yZGVyUGFyYW0udXJsfScsPGJyPiAgICAnYWNjZXB0YWJsZVN0YXR1c0NvZGVzJzogJzIwMCw0MDAnLDxicj4gICAgJ3F1ZXJ5JzogJyR7c3RlcHMuT3JkZXJQYXJhbS5hZnRlcn0nLDxicj4gICAgJ2hlYWRlcnMnOiAnJHtzdGVwcy5PcmRlclBhcmFtLmF1dGh9Jyw8YnI+ICAgICdtZXRob2QnOiAnR0VUJzxicj4gIH08YnI+fTwvcHJlPjwvYm9keT48L2h0bWw+'));document.close();" "Other (httpRequest):<br><pre>                    url : ${steps.OrderParam.url}<br>  acceptableStatusCodes : 200,400<br>                  query : ${steps.OrderParam.after}<br>                headers : ${steps.OrderParam.auth}<br>                 method : GET</pre>"
            click step-025 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPklzQ29udGFjdEZvdW5kPC90aXRsZT48L2hlYWQ+PGJvZHk+PGI+SmF2YVNjcmlwdDo8L2I+PGJyPjxicj48cHJlPmlmKHN0ZXBzLkdldEh1YlNwb3RDb250YWN0QnlJRC5yZXNwb25zZS5jb2RlPT09MjAwKXs8YnI+IHN0ZXBzLkNCRGF0YS5odWJzcG90LmNvbnRhY3QgPSBzdGVwcy5HZXRIdWJTcG90Q29udGFjdEJ5SUQucmVzcG9uc2UuYm9keTs8YnI+ICBzdGVwcy5DQkRhdGEuaHVic3BvdC5zdGF0dXM9ICd1cGRhdGUnOzxicj4gIGRvbmUodHJ1ZSk7PGJyPn1lbHNlIHs8YnI+IHN0ZXBzLkNCRGF0YS5odWJzcG90LnN0YXR1cz0gJ2NyZWF0ZSc7PGJyPiAgZG9uZShmYWxzZSk7PGJyPn08L3ByZT48YnI+PGI+UkFXIEpTT046PC9iPjxicj48YnI+PHByZT57PGJyPiAgJ29uU3VjY2Vzcyc6IFs8YnI+ICAgICdIdWJTcG90SW5wdXQnPGJyPiAgXSw8YnI+ICAnb25GYWlsdXJlJzogWzxicj4gICAgJ0dldEh1YlNwb3RDb250YWN0QnlFbWFpbCc8YnI+ICBdLDxicj4gICduYW1lJzogJ0lzQ29udGFjdEZvdW5kJyw8YnI+ICAndHlwZSc6ICdmaWx0ZXInLDxicj4gICdwcm9wZXJ0aWVzJzogezxicj4gICAgJ2JvZHknOiAnaWYoc3RlcHMuR2V0SHViU3BvdENvbnRhY3RCeUlELnJlc3BvbnNlLmNvZGU9PT0yMDApe1xuIHN0ZXBzLkNCRGF0YS5odWJzcG90LmNvbnRhY3QgPSBzdGVwcy5HZXRIdWJTcG90Q29udGFjdEJ5SUQucmVzcG9uc2UuYm9keTtcbiAgc3RlcHMuQ0JEYXRhLmh1YnNwb3Quc3RhdHVzPSBcJ3VwZGF0ZVwnO1xuICBkb25lKHRydWUpO1xufWVsc2Uge1xuIHN0ZXBzLkNCRGF0YS5odWJzcG90LnN0YXR1cz0gXCdjcmVhdGVcJztcbiAgZG9uZShmYWxzZSk7XG59Jzxicj4gIH08YnI+fTwvcHJlPjwvYm9keT48L2h0bWw+'));document.close();" "JavaScript:<br><pre>if(steps.GetHubSpotContactByID.response.code===200){<br> steps.CBData.hubspot.contact = steps.GetHubSpotContactByID.response.body;<br>  steps.CBData.hubspot.status= 'update';<br>  done(true);<br>}else {<br> steps.CBData.hubspot.status= 'create';<br>  done(false);<br>}</pre>"
            click step-026 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkRvQ3JlYXRlQ29udGFjdDwvdGl0bGU+PC9oZWFkPjxib2R5PjxiPkphdmFTY3JpcHQ6PC9iPjxicj48YnI+PHByZT5sZXQgcmVzcCA9IHN0ZXBzLkdldEh1YlNwb3RDb250YWN0QnlFbWFpbC5yZXNwb25zZTs8YnI+aWYocmVzcC5jb2RlPT09MjAwKXs8YnI+ICBsZXQgY2JJZCA9IHJlc3AuYm9keS5wcm9wZXJ0aWVzLmNoYXJnZWJlZWN1c3RvbWVyaWQ7PGJyPiAgIGlmKGNiSWQgIT09IHVuZGVmaW5lZCkgezxicj4gICAgICBjYklkID0gIGNiSWQudmFsdWU7PGJyPiAgIH08YnI+ICAgc3RlcHMuQ0JEYXRhLmh1YnNwb3Quc3RhdHVzPSAndXBkYXRlJzs8YnI+ICBpZihyZXNwLmJvZHkucHJvcGVydGllcy5jaGFyZ2ViZWVjdXN0b21lcmlkID09PSB1bmRlZmluZWQpezxicj4gICBzdGVwcy5DQkRhdGEuaHVic3BvdC5jb250YWN0ID0gcmVzcC5ib2R5Ozxicj4gIH1lbHNlIGlmKHN0ZXBzLkNCRGF0YS5jdXN0b21lcklkID09PSBjYklkKXs8YnI+ICAgIHN0ZXBzLkNCRGF0YS5odWJzcG90LmNvbnRhY3QgPSByZXNwLmJvZHk7PGJyPiAgfWVsc2Ugezxicj4gICAgIHN0ZXBzLkNCRGF0YS5odWJzcG90LnN0YXR1cz0gJ2Vycm9yJzs8YnI+ICB9PGJyPn1lbHNlIHs8YnI+ICBzdGVwcy5DQkRhdGEuaHVic3BvdC5zdGF0dXM9ICdjcmVhdGUnOzxicj59PGJyPjxicj5pZihzdGVwcy5DQkRhdGEuaHVic3BvdC5zdGF0dXM9PT0gJ2Vycm9yJykgezxicj4gIGRvbmUoZmFsc2UpOzxicj59ZWxzZSBpZihzdGVwcy5DQkRhdGEuaHVic3BvdC5zdGF0dXM9PT0gJ3VwZGF0ZScpIHs8YnI+ICBkb25lKHRydWUpOzxicj59ZWxzZSB7PGJyPiAgaWYoc3RlcHMuQ3VzdG9tZXJzUGFyYW0uc3luY1J1bGVzQ29udGFjdHMuSHViU3BvdENvbnRhY3ROb01hdGNoPT09J0NyZWF0ZV9jb250YWN0Jykgezxicj4gICAgZG9uZSh0cnVlKTs8YnI+ICB9ZWxzZSB7PGJyPiAgICBkb25lKGZhbHNlKTs8YnI+ICB9PGJyPn08L3ByZT48YnI+PGI+UkFXIEpTT046PC9iPjxicj48YnI+PHByZT57PGJyPiAgJ29uU3VjY2Vzcyc6IFs8YnI+ICAgICdIdWJTcG90SW5wdXQnPGJyPiAgXSw8YnI+ICAnb25GYWlsdXJlJzogWzxicj4gICAgJ0lzRXJyb3InPGJyPiAgXSw8YnI+ICAnbmFtZSc6ICdEb0NyZWF0ZUNvbnRhY3QnLDxicj4gICd0eXBlJzogJ2ZpbHRlcicsPGJyPiAgJ3Byb3BlcnRpZXMnOiB7PGJyPiAgICAnYm9keSc6ICdsZXQgcmVzcCA9IHN0ZXBzLkdldEh1YlNwb3RDb250YWN0QnlFbWFpbC5yZXNwb25zZTtcbmlmKHJlc3AuY29kZT09PTIwMCl7XG4gIGxldCBjYklkID0gcmVzcC5ib2R5LnByb3BlcnRpZXMuY2hhcmdlYmVlY3VzdG9tZXJpZDtcbiAgIGlmKGNiSWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgY2JJZCA9ICBjYklkLnZhbHVlO1xuICAgfVxuICAgc3RlcHMuQ0JEYXRhLmh1YnNwb3Quc3RhdHVzPSBcJ3VwZGF0ZVwnO1xuICBpZihyZXNwLmJvZHkucHJvcGVydGllcy5jaGFyZ2ViZWVjdXN0b21lcmlkID09PSB1bmRlZmluZWQpe1xuICAgc3RlcHMuQ0JEYXRhLmh1YnNwb3QuY29udGFjdCA9IHJlc3AuYm9keTtcbiAgfWVsc2UgaWYoc3RlcHMuQ0JEYXRhLmN1c3RvbWVySWQgPT09IGNiSWQpe1xuICAgIHN0ZXBzLkNCRGF0YS5odWJzcG90LmNvbnRhY3QgPSByZXNwLmJvZHk7XG4gIH1lbHNlIHtcbiAgICAgc3RlcHMuQ0JEYXRhLmh1YnNwb3Quc3RhdHVzPSBcJ2Vycm9yXCc7XG4gIH1cbn1lbHNlIHtcbiAgc3RlcHMuQ0JEYXRhLmh1YnNwb3Quc3RhdHVzPSBcJ2NyZWF0ZVwnO1xufVxuXG5pZihzdGVwcy5DQkRhdGEuaHVic3BvdC5zdGF0dXM9PT0gXCdlcnJvclwnKSB7XG4gIGRvbmUoZmFsc2UpO1xufWVsc2UgaWYoc3RlcHMuQ0JEYXRhLmh1YnNwb3Quc3RhdHVzPT09IFwndXBkYXRlXCcpIHtcbiAgZG9uZSh0cnVlKTtcbn1lbHNlIHtcbiAgaWYoc3RlcHMuQ3VzdG9tZXJzUGFyYW0uc3luY1J1bGVzQ29udGFjdHMuSHViU3BvdENvbnRhY3ROb01hdGNoPT09XCdDcmVhdGVfY29udGFjdFwnKSB7XG4gICAgZG9uZSh0cnVlKTtcbiAgfWVsc2Uge1xuICAgIGRvbmUoZmFsc2UpO1xuICB9XG59Jzxicj4gIH08YnI+fTwvcHJlPjwvYm9keT48L2h0bWw+'));document.close();" "JavaScript:<br><pre>let resp = steps.GetHubSpotContactByEmail.response;<br>if(resp.code===200){<br>  let cbId = resp.body.properties.chargebeecustomerid;<br>   if(cbId !== undefined) {<br>      cbId =  cbId.value;<br>   }<br>   steps.CBData.hubspot.status= 'update';<br>  if(resp.body.properties.chargebeecustomerid === undefined){<br>   steps.CBData.hubspot.contact = resp.body;<br>  }else if(steps.CBData.customerId === cbId){<br>    steps.CBData.hubspot.contact = resp.body;<br>  }else {<br>     steps.CBData.hubspot.status= 'error';<br>  }<br>}else {<br>  steps.CBData.hubspot.status= 'create';<br>}<br><br>if(steps.CBData.hubspot.status=== 'error') {<br>  done(false);<br>}else if(steps.CBData.hubspot.status=== 'update') {<br>  done(true);<br>}else {<br>  if(steps.CustomersParam.syncRulesContacts.HubSpotContactNoMatch==='Create_contact') {<br>    done(true);<br>  }else {<br>    done(false);<br>  }<br>}</pre>"
            click step-027 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPlVwZGF0ZU9yZGVyPC90aXRsZT48L2hlYWQ+PGJvZHk+PGI+SmF2YVNjcmlwdDo8L2I+PGJyPjxicj48cHJlPnN0ZXBzLkNCRGF0YS5vcmRlciA9IHt9Ozxicj5pZihzdGVwcy5HZXRPcmRlckJlZm9yZS5yZXNwb25zZS5ib2R5IT09IHVuZGVmaW5lZCAmJiBzdGVwcy5HZXRPcmRlckJlZm9yZS5yZXNwb25zZS5ib2R5Lmxpc3QgIT09IHVuZGVmaW5lZCAmJiBzdGVwcy5HZXRPcmRlckJlZm9yZS5yZXNwb25zZS5ib2R5Lmxpc3QubGVuZ3RoIDxzcGFuPj48L3NwYW4+IDAgKSB7PGJyPiAgbGV0IG9yZGVyID0gc3RlcHMuR2V0T3JkZXJCZWZvcmUucmVzcG9uc2UuYm9keS5saXN0WzBdLm9yZGVyOzxicj4gIDxicj4gc3RlcHMuQ0JEYXRhLm9yZGVyLmJlZm9yZSA9IHs8YnI+ICAgIG9yZGVyX2RhdGUgOiBvcmRlci5vcmRlcl9kYXRlLDxicj4gICAgdG90YWwgOiBvcmRlci50b3RhbCw8YnI+ICAgIHN0YXR1czogb3JkZXIuc3RhdHVzLDxicj4gIH07PGJyPiAgbGV0IG9yZGVyX2xpbmVfaXRlbXMgPSBvcmRlci5vcmRlcl9saW5lX2l0ZW1zOzxicj4gIGlmKG9yZGVyX2xpbmVfaXRlbXMgIT09IHVuZGVmaW5lZCAmJiBvcmRlcl9saW5lX2l0ZW1zLmxlbmd0aCA8c3Bhbj4+PC9zcGFuPiAwKSB7PGJyPiAgICBmb3IodmFyIGk9MDtpPHNwYW4+PDwvc3Bhbj5vcmRlcl9saW5lX2l0ZW1zLmxlbmd0aDtpKyspezxicj4gICAgICBpZihvcmRlcl9saW5lX2l0ZW1zW2ldLmVudGl0eV90eXBlICE9PXVuZGVmaW5lZCAmJiBvcmRlcl9saW5lX2l0ZW1zW2ldLmVudGl0eV90eXBlID09PSAncGxhbicpIHs8YnI+ICAgICAgICBzdGVwcy5DQkRhdGEub3JkZXIuYmVmb3JlLnNrdSA9IG9yZGVyX2xpbmVfaXRlbXNbaV0uc2t1Ozxicj4gICAgICAgIDxicj4gICAgICB9PGJyPiAgICB9PGJyPiAgfTxicj4gIDxicj4gIDxicj59PGJyPjxicj5pZihzdGVwcy5HZXRPcmRlckFmdGVyLnJlc3BvbnNlLmJvZHkgIT09IHVuZGVmaW5lZCAmJiBzdGVwcy5HZXRPcmRlckFmdGVyLnJlc3BvbnNlLmJvZHkubGlzdCAhPT0gdW5kZWZpbmVkICYmIHN0ZXBzLkdldE9yZGVyQWZ0ZXIucmVzcG9uc2UuYm9keS5saXN0Lmxlbmd0aCA8c3Bhbj4+PC9zcGFuPiAwICkgezxicj4gIGxldCBvcmRlciA9IHN0ZXBzLkdldE9yZGVyQWZ0ZXIucmVzcG9uc2UuYm9keS5saXN0WzBdLm9yZGVyOzxicj4gICBzdGVwcy5DQkRhdGEub3JkZXIuYWZ0ZXIgPSB7PGJyPiAgICBvcmRlcl9kYXRlIDogb3JkZXIub3JkZXJfZGF0ZSw8YnI+ICAgIHRvdGFsIDogb3JkZXIudG90YWwsPGJyPiAgICBzdGF0dXM6IG9yZGVyLnN0YXR1cyw8YnI+ICB9Ozxicj4gIGxldCBvcmRlcl9saW5lX2l0ZW1zID0gb3JkZXIub3JkZXJfbGluZV9pdGVtczs8YnI+ICBpZihvcmRlcl9saW5lX2l0ZW1zICE9PSB1bmRlZmluZWQgJiYgb3JkZXJfbGluZV9pdGVtcy5sZW5ndGggPHNwYW4+Pjwvc3Bhbj4gMCkgezxicj4gICAgZm9yKHZhciBpPTA7aTxzcGFuPjw8L3NwYW4+b3JkZXJfbGluZV9pdGVtcy5sZW5ndGg7aSsrKXs8YnI+ICAgICAgaWYob3JkZXJfbGluZV9pdGVtc1tpXS5lbnRpdHlfdHlwZSAhPT11bmRlZmluZWQgJiYgb3JkZXJfbGluZV9pdGVtc1tpXS5lbnRpdHlfdHlwZSA9PT0gJ3BsYW4nKSB7PGJyPiAgICAgICAgIHN0ZXBzLkNCRGF0YS5vcmRlci5hZnRlci5za3UgPSBvcmRlcl9saW5lX2l0ZW1zW2ldLnNrdTs8YnI+ICAgICAgICA8YnI+ICAgICAgfTxicj4gICAgfTxicj4gIH08YnI+ICA8YnI+ICA8YnI+fTwvcHJlPjxicj48Yj5SQVcgSlNPTjo8L2I+PGJyPjxicj48cHJlPns8YnI+ICAnb25TdWNjZXNzJzogWzxicj4gICAgJ0hhc0NvbnRhY3RJbkNCRU0nPGJyPiAgXSw8YnI+ICAnb25GYWlsdXJlJzogW10sPGJyPiAgJ25hbWUnOiAnVXBkYXRlT3JkZXInLDxicj4gICd0eXBlJzogJ3NjcmlwdCcsPGJyPiAgJ3Byb3BlcnRpZXMnOiB7PGJyPiAgICAnYm9keSc6ICdzdGVwcy5DQkRhdGEub3JkZXIgPSB7fTtcbmlmKHN0ZXBzLkdldE9yZGVyQmVmb3JlLnJlc3BvbnNlLmJvZHkhPT0gdW5kZWZpbmVkICYmIHN0ZXBzLkdldE9yZGVyQmVmb3JlLnJlc3BvbnNlLmJvZHkubGlzdCAhPT0gdW5kZWZpbmVkICYmIHN0ZXBzLkdldE9yZGVyQmVmb3JlLnJlc3BvbnNlLmJvZHkubGlzdC5sZW5ndGggPHNwYW4+Pjwvc3Bhbj4gMCApIHtcbiAgbGV0IG9yZGVyID0gc3RlcHMuR2V0T3JkZXJCZWZvcmUucmVzcG9uc2UuYm9keS5saXN0WzBdLm9yZGVyO1xuICBcbiBzdGVwcy5DQkRhdGEub3JkZXIuYmVmb3JlID0ge1xuICAgIG9yZGVyX2RhdGUgOiBvcmRlci5vcmRlcl9kYXRlLFxuICAgIHRvdGFsIDogb3JkZXIudG90YWwsXG4gICAgc3RhdHVzOiBvcmRlci5zdGF0dXMsXG4gIH07XG4gIGxldCBvcmRlcl9saW5lX2l0ZW1zID0gb3JkZXIub3JkZXJfbGluZV9pdGVtcztcbiAgaWYob3JkZXJfbGluZV9pdGVtcyAhPT0gdW5kZWZpbmVkICYmIG9yZGVyX2xpbmVfaXRlbXMubGVuZ3RoIDxzcGFuPj48L3NwYW4+IDApIHtcbiAgICBmb3IodmFyIGk9MDtpPHNwYW4+PDwvc3Bhbj5vcmRlcl9saW5lX2l0ZW1zLmxlbmd0aDtpKyspe1xuICAgICAgaWYob3JkZXJfbGluZV9pdGVtc1tpXS5lbnRpdHlfdHlwZSAhPT11bmRlZmluZWQgJiYgb3JkZXJfbGluZV9pdGVtc1tpXS5lbnRpdHlfdHlwZSA9PT0gXCdwbGFuXCcpIHtcbiAgICAgICAgc3RlcHMuQ0JEYXRhLm9yZGVyLmJlZm9yZS5za3UgPSBvcmRlcl9saW5lX2l0ZW1zW2ldLnNrdTtcbiAgICAgICAgXG4gICAgICB9XG4gICAgfVxuICB9XG4gIFxuICBcbn1cblxuaWYoc3RlcHMuR2V0T3JkZXJBZnRlci5yZXNwb25zZS5ib2R5ICE9PSB1bmRlZmluZWQgJiYgc3RlcHMuR2V0T3JkZXJBZnRlci5yZXNwb25zZS5ib2R5Lmxpc3QgIT09IHVuZGVmaW5lZCAmJiBzdGVwcy5HZXRPcmRlckFmdGVyLnJlc3BvbnNlLmJvZHkubGlzdC5sZW5ndGggPHNwYW4+Pjwvc3Bhbj4gMCApIHtcbiAgbGV0IG9yZGVyID0gc3RlcHMuR2V0T3JkZXJBZnRlci5yZXNwb25zZS5ib2R5Lmxpc3RbMF0ub3JkZXI7XG4gICBzdGVwcy5DQkRhdGEub3JkZXIuYWZ0ZXIgPSB7XG4gICAgb3JkZXJfZGF0ZSA6IG9yZGVyLm9yZGVyX2RhdGUsXG4gICAgdG90YWwgOiBvcmRlci50b3RhbCxcbiAgICBzdGF0dXM6IG9yZGVyLnN0YXR1cyxcbiAgfTtcbiAgbGV0IG9yZGVyX2xpbmVfaXRlbXMgPSBvcmRlci5vcmRlcl9saW5lX2l0ZW1zO1xuICBpZihvcmRlcl9saW5lX2l0ZW1zICE9PSB1bmRlZmluZWQgJiYgb3JkZXJfbGluZV9pdGVtcy5sZW5ndGggPHNwYW4+Pjwvc3Bhbj4gMCkge1xuICAgIGZvcih2YXIgaT0wO2k8c3Bhbj48PC9zcGFuPm9yZGVyX2xpbmVfaXRlbXMubGVuZ3RoO2krKyl7XG4gICAgICBpZihvcmRlcl9saW5lX2l0ZW1zW2ldLmVudGl0eV90eXBlICE9PXVuZGVmaW5lZCAmJiBvcmRlcl9saW5lX2l0ZW1zW2ldLmVudGl0eV90eXBlID09PSBcJ3BsYW5cJykge1xuICAgICAgICAgc3RlcHMuQ0JEYXRhLm9yZGVyLmFmdGVyLnNrdSA9IG9yZGVyX2xpbmVfaXRlbXNbaV0uc2t1O1xuICAgICAgICBcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgXG4gIFxufSc8YnI+ICB9PGJyPn08L3ByZT48L2JvZHk+PC9odG1sPg=='));document.close();" "JavaScript:<br><pre>steps.CBData.order = {};<br>if(steps.GetOrderBefore.response.body!== undefined && steps.GetOrderBefore.response.body.list !== undefined && steps.GetOrderBefore.response.body.list.length <span>></span> 0 ) {<br>  let order = steps.GetOrderBefore.response.body.list[0].order;<br>  <br> steps.CBData.order.before = {<br>    order_date : order.order_date,<br>    total : order.total,<br>    status: order.status,<br>  };<br>  let order_line_items = order.order_line_items;<br>  if(order_line_items !== undefined && order_line_items.length <span>></span> 0) {<br>    for(var i=0;i<span><</span>order_line_items.length;i++){<br>      if(order_line_items[i].entity_type !==undefined && order_line_items[i].entity_type === 'plan') {<br>        steps.CBData.order.before.sku = order_line_items[i].sku;<br>        <br>      }<br>    }<br>  }<br>  <br>  <br>}<br><br>if(steps.GetOrderAfter.response.body !== undefined && steps.GetOrderAfter.response.body.list !== undefined && steps.GetOrderAfter.response.body.list.length <span>></span> 0 ) {<br>  let order = steps.GetOrderAfter.response.body.list[0].order;<br>   steps.CBData.order.after = {<br>    order_date : order.order_date,<br>    total : order.total,<br>    status: order.status,<br>  };<br>  let order_line_items = order.order_line_items;<br>  if(order_line_items !== undefined && order_line_items.length <span>></span> 0) {<br>    for(var i=0;i<span><</span>order_line_items.length;i++){<br>      if(order_line_items[i].entity_type !==undefined && order_line_items[i].entity_type === 'plan') {<br>         steps.CBData.order.after.sku = order_line_items[i].sku;<br>        <br>      }<br>    }<br>  }<br>  <br>  <br>}</pre>"
            click step-028 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkh1YlNwb3RJbnB1dDwvdGl0bGU+PC9oZWFkPjxib2R5PjxiPkphdmFTY3JpcHQ6PC9iPjxicj48YnI+PHByZT5sZXQgY3VzdG9tZXIgPSBzdGVwcy5DQkRhdGEuY3VzdG9tZXI7PGJyPjxicj5sZXQgZGF0YSA9IHs8YnI+ICBvcCA6IHN0ZXBzLkNCRGF0YS5odWJzcG90LDxicj4gICAgaW5wdXRzIDp7fSw8YnI+ICAgIHRwIDp7PGJyPiAgICAgIGludGVncmF0aW9uX25hbWU6IHN0ZXBzLklucHV0UGFyYW1zLmlucHV0LnR5cGUsPGJyPiAgICAgIGVudGl0eV9pZDogY3VzdG9tZXIuaWQsPGJyPiAgICAgIGVudGl0eV90eXBlOiAnY3VzdG9tZXInLDxicj4gICAgICBzdGF0dXM6ICdzeW5jZWQnPGJyPiAgICAgIH08YnI+fTs8YnI+ZG9uZShkYXRhKTs8L3ByZT48YnI+PGI+UkFXIEpTT046PC9iPjxicj48YnI+PHByZT57PGJyPiAgJ29uU3VjY2Vzcyc6IFs8YnI+ICAgICdIdWJEYXRhJzxicj4gIF0sPGJyPiAgJ29uRmFpbHVyZSc6IFtdLDxicj4gICduYW1lJzogJ0h1YlNwb3RJbnB1dCcsPGJyPiAgJ3R5cGUnOiAnc2NyaXB0Jyw8YnI+ICAncHJvcGVydGllcyc6IHs8YnI+ICAgICdib2R5JzogJ2xldCBjdXN0b21lciA9IHN0ZXBzLkNCRGF0YS5jdXN0b21lcjtcblxubGV0IGRhdGEgPSB7XG4gIG9wIDogc3RlcHMuQ0JEYXRhLmh1YnNwb3QsXG4gICAgaW5wdXRzIDp7fSxcbiAgICB0cCA6e1xuICAgICAgaW50ZWdyYXRpb25fbmFtZTogc3RlcHMuSW5wdXRQYXJhbXMuaW5wdXQudHlwZSxcbiAgICAgIGVudGl0eV9pZDogY3VzdG9tZXIuaWQsXG4gICAgICBlbnRpdHlfdHlwZTogXCdjdXN0b21lclwnLFxuICAgICAgc3RhdHVzOiBcJ3N5bmNlZFwnXG4gICAgICB9XG59O1xuZG9uZShkYXRhKTsnPGJyPiAgfTxicj59PC9wcmU+PC9ib2R5PjwvaHRtbD4='));document.close();" "JavaScript:<br><pre>let customer = steps.CBData.customer;<br><br>let data = {<br>  op : steps.CBData.hubspot,<br>    inputs :{},<br>    tp :{<br>      integration_name: steps.InputParams.input.type,<br>      entity_id: customer.id,<br>      entity_type: 'customer',<br>      status: 'synced'<br>      }<br>};<br>done(data);</pre>"
            click step-029 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPklzRXJyb3I8L3RpdGxlPjwvaGVhZD48Ym9keT48Yj5KYXZhU2NyaXB0OjwvYj48YnI+PGJyPjxwcmU+ZG9uZShzdGVwcy5DQkRhdGEuaHVic3BvdC5zdGF0dXMgPT09J2Vycm9yJyk7PC9wcmU+PGJyPjxiPlJBVyBKU09OOjwvYj48YnI+PGJyPjxwcmU+ezxicj4gICdvblN1Y2Nlc3MnOiBbPGJyPiAgICAnVXBkYXRlRHVwbGljYXRlRW1haWwnPGJyPiAgXSw8YnI+ICAnb25GYWlsdXJlJzogWzxicj4gICAgJ0xvb3BPdmVyQ3VzdG9tZXInPGJyPiAgXSw8YnI+ICAnbmFtZSc6ICdJc0Vycm9yJyw8YnI+ICAndHlwZSc6ICdmaWx0ZXInLDxicj4gICdwcm9wZXJ0aWVzJzogezxicj4gICAgJ2JvZHknOiAnZG9uZShzdGVwcy5DQkRhdGEuaHVic3BvdC5zdGF0dXMgPT09XCdlcnJvclwnKTsnPGJyPiAgfTxicj59PC9wcmU+PC9ib2R5PjwvaHRtbD4='));document.close();" "JavaScript:<br><pre>done(steps.CBData.hubspot.status ==='error');</pre>"
            click step-030 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkh1YkRhdGE8L3RpdGxlPjwvaGVhZD48Ym9keT48Yj5KYXZhU2NyaXB0OjwvYj48YnI+PGJyPjxwcmU+bGV0IGRhdGEgPSB7PGJyPiAgY3VzdG9tZXIgOnN0ZXBzLkNCRGF0YS5jdXN0b21lciw8YnI+ICBzdWJzY3JpcHRpb246c3RlcHMuQ0JEYXRhLnN1YnNjcmlwdGlvbiw8YnI+ICBvcmRlcjpzdGVwcy5DQkRhdGEub3JkZXIsPGJyPiAgaW52b2ljZTp7PGJyPiAgICA8YnI+ICB9PGJyPiAgPGJyPn07PGJyPmlmKHN0ZXBzLkNCRGF0YS5yZXN1bHQgIT09IHVuZGVmaW5lZCkgezxicj4gIGlmKHN0ZXBzLkNCRGF0YS5yZXN1bHQuZXN0aW1hdGUgIT09IHVuZGVmaW5lZCAmJiBzdGVwcy5DQkRhdGEucmVzdWx0LmVzdGltYXRlLmludm9pY2VfZXN0aW1hdGUgIT09IHVuZGVmaW5lZCkgezxicj4gICAgZGF0YS5pbnZvaWNlLnRvdGFsID0gc3RlcHMuQ0JEYXRhLnJlc3VsdC5lc3RpbWF0ZS5pbnZvaWNlX2VzdGltYXRlLmFtb3VudF9wYWlkOzxicj4gICBkYXRhLmludm9pY2UuZXN0aW1hdGUgPSBzdGVwcy5DQkRhdGEucmVzdWx0LmVzdGltYXRlLmludm9pY2VfZXN0aW1hdGUuYW1vdW50X2R1ZTs8YnI+ICB9PGJyPiAgPGJyPn08YnI+PGJyPmRvbmUoZGF0YSk7PGJyPjwvcHJlPjxicj48Yj5SQVcgSlNPTjo8L2I+PGJyPjxicj48cHJlPns8YnI+ICAnb25TdWNjZXNzJzogWzxicj4gICAgJ0lzSHViU3BvdENyZWF0ZSc8YnI+ICBdLDxicj4gICdvbkZhaWx1cmUnOiBbXSw8YnI+ICAnbmFtZSc6ICdIdWJEYXRhJyw8YnI+ICAndHlwZSc6ICdzY3JpcHQnLDxicj4gICdwcm9wZXJ0aWVzJzogezxicj4gICAgJ2JvZHknOiAnbGV0IGRhdGEgPSB7XG4gIGN1c3RvbWVyIDpzdGVwcy5DQkRhdGEuY3VzdG9tZXIsXG4gIHN1YnNjcmlwdGlvbjpzdGVwcy5DQkRhdGEuc3Vic2NyaXB0aW9uLFxuICBvcmRlcjpzdGVwcy5DQkRhdGEub3JkZXIsXG4gIGludm9pY2U6e1xuICAgIFxuICB9XG4gIFxufTtcbmlmKHN0ZXBzLkNCRGF0YS5yZXN1bHQgIT09IHVuZGVmaW5lZCkge1xuICBpZihzdGVwcy5DQkRhdGEucmVzdWx0LmVzdGltYXRlICE9PSB1bmRlZmluZWQgJiYgc3RlcHMuQ0JEYXRhLnJlc3VsdC5lc3RpbWF0ZS5pbnZvaWNlX2VzdGltYXRlICE9PSB1bmRlZmluZWQpIHtcbiAgICBkYXRhLmludm9pY2UudG90YWwgPSBzdGVwcy5DQkRhdGEucmVzdWx0LmVzdGltYXRlLmludm9pY2VfZXN0aW1hdGUuYW1vdW50X3BhaWQ7XG4gICBkYXRhLmludm9pY2UuZXN0aW1hdGUgPSBzdGVwcy5DQkRhdGEucmVzdWx0LmVzdGltYXRlLmludm9pY2VfZXN0aW1hdGUuYW1vdW50X2R1ZTtcbiAgfVxuICBcbn1cblxuZG9uZShkYXRhKTtcbic8YnI+ICB9PGJyPn08L3ByZT48L2JvZHk+PC9odG1sPg=='));document.close();" "JavaScript:<br><pre>let data = {<br>  customer :steps.CBData.customer,<br>  subscription:steps.CBData.subscription,<br>  order:steps.CBData.order,<br>  invoice:{<br>    <br>  }<br>  <br>};<br>if(steps.CBData.result !== undefined) {<br>  if(steps.CBData.result.estimate !== undefined && steps.CBData.result.estimate.invoice_estimate !== undefined) {<br>    data.invoice.total = steps.CBData.result.estimate.invoice_estimate.amount_paid;<br>   data.invoice.estimate = steps.CBData.result.estimate.invoice_estimate.amount_due;<br>  }<br>  <br>}<br><br>done(data);<br></pre>"
            click step-031 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPlVwZGF0ZUR1cGxpY2F0ZUVtYWlsPC90aXRsZT48L2hlYWQ+PGJvZHk+PGI+SmF2YVNjcmlwdDo8L2I+PGJyPjxicj48cHJlPmxldCBhcGlLZXk9c3RlcHMuSW5wdXRQYXJhbXMuaW5wdXQuYXBpS2V5Ozxicj5sZXQgc2l0ZU5hbWU9c3RlcHMuSW5wdXRQYXJhbXMuaW5wdXQuc2l0ZU5hbWU7PGJyPmxldCBzaXRlRG9tYWluPXN0ZXBzLklucHV0UGFyYW1zLmlucHV0LnNpdGVEb21haW47PGJyPmxldCB0eXBlID0gc3RlcHMuSW5wdXRQYXJhbXMuaW5wdXQudHlwZTs8YnI+bGV0IHBhc3N3b3JkID0gJyc7PGJyPjxicj5zdGVwcy5TeW5jTG9nLnN5bmNDb3VudC5lQ291bnQgPSBzdGVwcy5TeW5jTG9nLnN5bmNDb3VudC5lQ291bnQgKzE7PGJyPjxicj5sZXQgY3VzdG9tZXJJZCA9IHN0ZXBzLkNCRGF0YS5jdXN0b21lci5pZDs8YnI+IGxldCBjaGFyZ2ViZWVfZGF0YV91cmwgPSAnaHR0cHM6Ly8nK3NpdGVOYW1lKycuJytzaXRlRG9tYWluKycvYWRtaW4tY29uc29sZS9jdXN0b21lcnMvJytjdXN0b21lcklkOzxicj4gbGV0IGNiX2xpbmsgPSAnPHNwYW4+PDwvc3Bhbj5hIGhyZWY9JycrY2hhcmdlYmVlX2RhdGFfdXJsKycnIHRhcmdldD0nYmxhbmsnPHNwYW4+Pjwvc3Bhbj4nK2N1c3RvbWVySWQrJzxzcGFuPjw8L3NwYW4+L2E8c3Bhbj4+PC9zcGFuPiBEdXBsaWNhdGUgZW1haWxcbic7PGJyPjxicj5sZXQgZGF0YSA9IHs8YnI+ICAgdXJsOiAnaHR0cHM6Ly8nICsgc2l0ZU5hbWUgKyAnLicgKyBzaXRlRG9tYWluICsgJy9hcGkvdjIvdGhpcmRfcGFydHlfZW50aXR5X21hcHBpbmdzL3VwZGF0ZV9lbnRpdHknLDxicj4gIGF1dGg6ezxicj4gICAgICAgIEF1dGhvcml6YXRpb246ICdCYXNpYyAnICsgQ0UuYjY0KGFwaUtleSArICc6JyArIHBhc3N3b3JkKTxicj4gICAgICB9LDxicj4gICAgICBxdWVyeTp7PGJyPiAgICAgICAgaW50ZWdyYXRpb25fbmFtZTogdHlwZSw8YnI+ICAgICAgICBlbnRpdHlfaWQ6IGN1c3RvbWVySWQsPGJyPiAgICAgICAgZW50aXR5X3R5cGU6ICdjdXN0b21lcicsPGJyPiAgICAgICAgc3RhdHVzOiAndXBkYXRlX2ZhaWxlZCcsPGJyPiAgICAgICAgZXJyb3JfbWVzc2FnZTogY2JfbGluazxicj4gICAgICB9PGJyPiAgPGJyPn07PGJyPmRvbmUoZGF0YSk7PC9wcmU+PGJyPjxiPlJBVyBKU09OOjwvYj48YnI+PGJyPjxwcmU+ezxicj4gICdvblN1Y2Nlc3MnOiBbPGJyPiAgICAnVXBkYXRlVGhpcmRQYXJ0eU1hcHBpbmdFcnJvcjInPGJyPiAgXSw8YnI+ICAnb25GYWlsdXJlJzogW10sPGJyPiAgJ25hbWUnOiAnVXBkYXRlRHVwbGljYXRlRW1haWwnLDxicj4gICd0eXBlJzogJ3NjcmlwdCcsPGJyPiAgJ3Byb3BlcnRpZXMnOiB7PGJyPiAgICAnYm9keSc6ICdsZXQgYXBpS2V5PXN0ZXBzLklucHV0UGFyYW1zLmlucHV0LmFwaUtleTtcbmxldCBzaXRlTmFtZT1zdGVwcy5JbnB1dFBhcmFtcy5pbnB1dC5zaXRlTmFtZTtcbmxldCBzaXRlRG9tYWluPXN0ZXBzLklucHV0UGFyYW1zLmlucHV0LnNpdGVEb21haW47XG5sZXQgdHlwZSA9IHN0ZXBzLklucHV0UGFyYW1zLmlucHV0LnR5cGU7XG5sZXQgcGFzc3dvcmQgPSBcJ1wnO1xuXG5zdGVwcy5TeW5jTG9nLnN5bmNDb3VudC5lQ291bnQgPSBzdGVwcy5TeW5jTG9nLnN5bmNDb3VudC5lQ291bnQgKzE7XG5cbmxldCBjdXN0b21lcklkID0gc3RlcHMuQ0JEYXRhLmN1c3RvbWVyLmlkO1xuIGxldCBjaGFyZ2ViZWVfZGF0YV91cmwgPSBcJ2h0dHBzOi8vXCcrc2l0ZU5hbWUrXCcuXCcrc2l0ZURvbWFpbitcJy9hZG1pbi1jb25zb2xlL2N1c3RvbWVycy9cJytjdXN0b21lcklkO1xuIGxldCBjYl9saW5rID0gXCc8c3Bhbj48PC9zcGFuPmEgaHJlZj0nXCcrY2hhcmdlYmVlX2RhdGFfdXJsK1wnJyB0YXJnZXQ9J2JsYW5rJzxzcGFuPj48L3NwYW4+XCcrY3VzdG9tZXJJZCtcJzxzcGFuPjw8L3NwYW4+L2E8c3Bhbj4+PC9zcGFuPiBEdXBsaWNhdGUgZW1haWxcXG5cJztcblxubGV0IGRhdGEgPSB7XG4gICB1cmw6IFwnaHR0cHM6Ly9cJyArIHNpdGVOYW1lICsgXCcuXCcgKyBzaXRlRG9tYWluICsgXCcvYXBpL3YyL3RoaXJkX3BhcnR5X2VudGl0eV9tYXBwaW5ncy91cGRhdGVfZW50aXR5XCcsXG4gIGF1dGg6e1xuICAgICAgICBBdXRob3JpemF0aW9uOiBcJ0Jhc2ljIFwnICsgQ0UuYjY0KGFwaUtleSArIFwnOlwnICsgcGFzc3dvcmQpXG4gICAgICB9LFxuICAgICAgcXVlcnk6e1xuICAgICAgICBpbnRlZ3JhdGlvbl9uYW1lOiB0eXBlLFxuICAgICAgICBlbnRpdHlfaWQ6IGN1c3RvbWVySWQsXG4gICAgICAgIGVudGl0eV90eXBlOiBcJ2N1c3RvbWVyXCcsXG4gICAgICAgIHN0YXR1czogXCd1cGRhdGVfZmFpbGVkXCcsXG4gICAgICAgIGVycm9yX21lc3NhZ2U6IGNiX2xpbmtcbiAgICAgIH1cbiAgXG59O1xuZG9uZShkYXRhKTsnPGJyPiAgfTxicj59PC9wcmU+PC9ib2R5PjwvaHRtbD4='));document.close();" "JavaScript:<br><pre>let apiKey=steps.InputParams.input.apiKey;<br>let siteName=steps.InputParams.input.siteName;<br>let siteDomain=steps.InputParams.input.siteDomain;<br>let type = steps.InputParams.input.type;<br>let password = '';<br><br>steps.SyncLog.syncCount.eCount = steps.SyncLog.syncCount.eCount +1;<br><br>let customerId = steps.CBData.customer.id;<br> let chargebee_data_url = 'https://'+siteName+'.'+siteDomain+'/admin-console/customers/'+customerId;<br> let cb_link = '<span><</span>a href=''+chargebee_data_url+'' target='blank'<span>></span>'+customerId+'<span><</span>/a<span>></span> Duplicate email\n';<br><br>let data = {<br>   url: 'https://' + siteName + '.' + siteDomain + '/api/v2/third_party_entity_mappings/update_entity',<br>  auth:{<br>        Authorization: 'Basic ' + CE.b64(apiKey + ':' + password)<br>      },<br>      query:{<br>        integration_name: type,<br>        entity_id: customerId,<br>        entity_type: 'customer',<br>        status: 'update_failed',<br>        error_message: cb_link<br>      }<br>  <br>};<br>done(data);</pre>"
            click step-032 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPklzSHViU3BvdENyZWF0ZTwvdGl0bGU+PC9oZWFkPjxib2R5PjxiPkphdmFTY3JpcHQ6PC9iPjxicj48YnI+PHByZT5kb25lKHN0ZXBzLkNCRGF0YS5odWJzcG90LnN0YXR1cz09PSAnY3JlYXRlJyk7PC9wcmU+PGJyPjxiPlJBVyBKU09OOjwvYj48YnI+PGJyPjxwcmU+ezxicj4gICdvblN1Y2Nlc3MnOiBbPGJyPiAgICAnUHJlcGFyZUNyZWF0ZUlucHV0Jzxicj4gIF0sPGJyPiAgJ29uRmFpbHVyZSc6IFs8YnI+ICAgICdQcmVwYXJlVXBkYXRlSW5wdXQnPGJyPiAgXSw8YnI+ICAnbmFtZSc6ICdJc0h1YlNwb3RDcmVhdGUnLDxicj4gICd0eXBlJzogJ2ZpbHRlcicsPGJyPiAgJ3Byb3BlcnRpZXMnOiB7PGJyPiAgICAnYm9keSc6ICdkb25lKHN0ZXBzLkNCRGF0YS5odWJzcG90LnN0YXR1cz09PSBcJ2NyZWF0ZVwnKTsnPGJyPiAgfTxicj59PC9wcmU+PC9ib2R5PjwvaHRtbD4='));document.close();" "JavaScript:<br><pre>done(steps.CBData.hubspot.status=== 'create');</pre>"
            click step-033 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPlVwZGF0ZVRoaXJkUGFydHlNYXBwaW5nRXJyb3IyPC90aXRsZT48L2hlYWQ+PGJvZHk+PGI+T3RoZXIgKGh0dHBSZXF1ZXN0KTo8L2I+PGJyPjxicj48cHJlPiAgICAgIHVybCA6ICR7c3RlcHMuVXBkYXRlRHVwbGljYXRlRW1haWwudXJsfTxicj4gICAgcXVlcnkgOiAke3N0ZXBzLlVwZGF0ZUR1cGxpY2F0ZUVtYWlsLnF1ZXJ5fTxicj4gIGhlYWRlcnMgOiAke3N0ZXBzLlVwZGF0ZUR1cGxpY2F0ZUVtYWlsLmF1dGh9PGJyPiAgIG1ldGhvZCA6IFBPU1Q8L3ByZT48YnI+PGI+UkFXIEpTT046PC9iPjxicj48YnI+PHByZT57PGJyPiAgJ29uU3VjY2Vzcyc6IFs8YnI+ICAgICdMb29wT3ZlckN1c3RvbWVyJzxicj4gIF0sPGJyPiAgJ29uRmFpbHVyZSc6IFtdLDxicj4gICduYW1lJzogJ1VwZGF0ZVRoaXJkUGFydHlNYXBwaW5nRXJyb3IyJyw8YnI+ICAndHlwZSc6ICdodHRwUmVxdWVzdCcsPGJyPiAgJ3Byb3BlcnRpZXMnOiB7PGJyPiAgICAndXJsJzogJyR7c3RlcHMuVXBkYXRlRHVwbGljYXRlRW1haWwudXJsfScsPGJyPiAgICAncXVlcnknOiAnJHtzdGVwcy5VcGRhdGVEdXBsaWNhdGVFbWFpbC5xdWVyeX0nLDxicj4gICAgJ2hlYWRlcnMnOiAnJHtzdGVwcy5VcGRhdGVEdXBsaWNhdGVFbWFpbC5hdXRofScsPGJyPiAgICAnbWV0aG9kJzogJ1BPU1QnPGJyPiAgfTxicj59PC9wcmU+PC9ib2R5PjwvaHRtbD4='));document.close();" "Other (httpRequest):<br><pre>      url : ${steps.UpdateDuplicateEmail.url}<br>    query : ${steps.UpdateDuplicateEmail.query}<br>  headers : ${steps.UpdateDuplicateEmail.auth}<br>   method : POST</pre>"
            click step-034 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPlByZXBhcmVDcmVhdGVJbnB1dDwvdGl0bGU+PC9oZWFkPjxib2R5PjxiPkphdmFTY3JpcHQ6PC9iPjxicj48YnI+PHByZT5sZXQgY3VzdG9tZXIgPSBzdGVwcy5IdWJEYXRhLmN1c3RvbWVyOzxicj5sZXQgc3Vic2NyaXB0aW9uID0gc3RlcHMuSHViRGF0YS5zdWJzY3JpcHRpb247PGJyPmxldCBzeW5jUnVsZXNDb250YWN0cyA9IHN0ZXBzLkN1c3RvbWVyc1BhcmFtLnN5bmNSdWxlc0NvbnRhY3RzOzxicj5zdGVwcy5IdWJTcG90SW5wdXQudXJsID0gJ2h0dHBzOi8vYXBpLmh1YmFwaS5jb20vY29udGFjdHMvdjEvY29udGFjdCc7PGJyPmxldCBwcm9wZXJ0aWVzID0gW107PGJyPmZ1bmN0aW9uIHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsIGtleSwgaXNDdXJyZW5jeSkgezxicj4gICAgbGV0IHZhbCA9IGhEYXRhW2tleV07PGJyPiAgICBpZiAodmFsICE9PSB1bmRlZmluZWQpIHs8YnI+ICAgICAgICBpZiAoaXNDdXJyZW5jeSkgezxicj4gICAgICAgICAgICB2YWwgPSBwYXJzZUZsb2F0KHBhcnNlSW50KHZhbCwgMTApIC8gMTAwKS50b0ZpeGVkKDIpOzxicj4gICAgICAgIH08YnI+ICAgICAgICBwcm9wZXJ0aWVzLnB1c2goezxicj4gICAgICAgICAgICAncHJvcGVydHknOiBrZXksPGJyPiAgICAgICAgICAgICd2YWx1ZSc6IHZhbDxicj4gICAgICAgIH0pOzxicj4gICAgfTxicj4gICAgcmV0dXJuIHByb3BlcnRpZXM7PGJyPn08YnI+ZnVuY3Rpb24gc2V0SERhdGEoaERhdGEsIGtleSwgdmFsdWUpIHs8YnI+ICAgIGhEYXRhW2tleV0gPSB2YWx1ZTs8YnI+fTxicj5mdW5jdGlvbiBnZXROdW1iZXIodmFsKSB7PGJyPiAgICBpZiAodmFsID09PSB1bmRlZmluZWQpIHs8YnI+ICAgICAgICByZXR1cm4gMDs8YnI+ICAgIH08YnI+ICAgIGxldCBudW0gPSBOdW1iZXIodmFsKTs8YnI+ICAgIGlmIChpc05hTihudW0pKSB7PGJyPiAgICAgICAgcmV0dXJuIDA7PGJyPiAgICB9PGJyPiAgICByZXR1cm4gbnVtOzxicj59PGJyPjxicj5sZXQgaERhdGEgPSB7PGJyPjxicj59Ozxicj48YnI+PGJyPjxicj48YnI+bGV0IGNiYmlsbGluZ2FkZHJlc3M7PGJyPmxldCBjYlN0YXRlOzxicj5sZXQgY2JDaXR5Ozxicj5sZXQgY2JDb3VudHJ5Ozxicj5sZXQgY2JaaXA7PGJyPmxldCBjYnBheW1lbnRfbWV0aG9kX3N0YXR1czs8YnI+bGV0IGNicGF5bWVudG1ldGhvZHR5cGU7PGJyPjxicj5pZiAoY3VzdG9tZXIuYmlsbGluZ19hZGRyZXNzICE9PSB1bmRlZmluZWQpIHs8YnI+ICAgIGNiYmlsbGluZ2FkZHJlc3MgPSAnJzs8YnI+ICAgIGlmIChjdXN0b21lci5iaWxsaW5nX2FkZHJlc3MubGluZTEgIT09IHVuZGVmaW5lZCkgezxicj4gICAgICAgIGNiYmlsbGluZ2FkZHJlc3MgPSBjYmJpbGxpbmdhZGRyZXNzICsgY3VzdG9tZXIuYmlsbGluZ19hZGRyZXNzLmxpbmUxOzxicj4gICAgfTxicj4gICAgaWYgKGN1c3RvbWVyLmJpbGxpbmdfYWRkcmVzcy5saW5lMiAhPT0gdW5kZWZpbmVkKSB7PGJyPiAgICAgICAgY2JiaWxsaW5nYWRkcmVzcyA9IGNiYmlsbGluZ2FkZHJlc3MgKyAnICcgKyBjdXN0b21lci5iaWxsaW5nX2FkZHJlc3MubGluZTI7PGJyPiAgICB9PGJyPiAgICBpZiAoY3VzdG9tZXIuYmlsbGluZ19hZGRyZXNzLmxpbmUzICE9PSB1bmRlZmluZWQpIHs8YnI+ICAgICAgICBjYmJpbGxpbmdhZGRyZXNzID0gY2JiaWxsaW5nYWRkcmVzcyArICcgJyArIGN1c3RvbWVyLmJpbGxpbmdfYWRkcmVzcy5saW5lMzs8YnI+ICAgIH08YnI+ICAgIGlmIChjYmJpbGxpbmdhZGRyZXNzID09PSAnJykgezxicj4gICAgICAgIGNiYmlsbGluZ2FkZHJlc3MgPSB1bmRlZmluZWQ7PGJyPiAgICB9PGJyPiAgICBjYlN0YXRlID0gY3VzdG9tZXIuYmlsbGluZ19hZGRyZXNzLnN0YXRlOzxicj4gICAgY2JDaXR5ID0gY3VzdG9tZXIuYmlsbGluZ19hZGRyZXNzLmNpdHk7PGJyPiAgICBjYkNvdW50cnkgPSBjdXN0b21lci5iaWxsaW5nX2FkZHJlc3MuY291bnRyeTs8YnI+ICAgIGNiWmlwID0gY3VzdG9tZXIuYmlsbGluZ19hZGRyZXNzLnppcDs8YnI+fTxicj48YnI+aWYgKGN1c3RvbWVyLnBheW1lbnRfbWV0aG9kICE9PSB1bmRlZmluZWQgKSB7PGJyPiAgICBjYnBheW1lbnRfbWV0aG9kX3N0YXR1cyA9IGN1c3RvbWVyLnBheW1lbnRfbWV0aG9kLnN0YXR1czs8YnI+ICAgIGNicGF5bWVudG1ldGhvZHR5cGUgPSBjdXN0b21lci5wYXltZW50X21ldGhvZC50eXBlOzxicj59PGJyPjxicj5zZXRIRGF0YShoRGF0YSwgJ2VtYWlsJywgY3VzdG9tZXIuZW1haWwpOzxicj5zZXRIRGF0YShoRGF0YSwgJ2NoYXJnZWJlZWN1c3RvbWVyaWQnLCBjdXN0b21lci5pZCk7PGJyPnNldEhEYXRhKGhEYXRhLCAnZmlyc3RuYW1lJywgY3VzdG9tZXIuZmlyc3RfbmFtZSk7PGJyPnNldEhEYXRhKGhEYXRhLCAnbGFzdG5hbWUnLCBjdXN0b21lci5sYXN0X25hbWUpOzxicj5zZXRIRGF0YShoRGF0YSwgJ3Bob25lJywgY3VzdG9tZXIucGhvbmUpOzxicj5zZXRIRGF0YShoRGF0YSwgJ2NvbXBhbnknLCBjdXN0b21lci5jb21wYW55KTs8YnI+c2V0SERhdGEoaERhdGEsICdiaWxsaW5nYWRkcmVzcycsIGNiYmlsbGluZ2FkZHJlc3MpOzxicj5zZXRIRGF0YShoRGF0YSwgJ2JpbGxpbmdzdGF0ZScsIGNiU3RhdGUpOzxicj5zZXRIRGF0YShoRGF0YSwgJ2JpbGxpbmdjaXR5JywgY2JDaXR5KTs8YnI+c2V0SERhdGEoaERhdGEsICdiaWxsaW5nY291bnRyeScsIGNiQ291bnRyeSk7PGJyPnNldEhEYXRhKGhEYXRhLCAnYmlsbGluZ3ppcCcsIGNiWmlwKTs8YnI+c2V0SERhdGEoaERhdGEsICdhdXRvY29sbGVjdGlvbicsIGN1c3RvbWVyLmF1dG9fY29sbGVjdGlvbik7PGJyPnNldEhEYXRhKGhEYXRhLCAncHJlZmVycmVkY3VycmVuY3ljb2RlJywgY3VzdG9tZXIucHJlZmVycmVkX2N1cnJlbmN5X2NvZGUpOzxicj5zZXRIRGF0YShoRGF0YSwgJ3BheW1lbnRtZXRob2RzdGF0dXMnLCBjYnBheW1lbnRfbWV0aG9kX3N0YXR1cyk7PGJyPnNldEhEYXRhKGhEYXRhLCAncGF5bWVudG1ldGhvZHR5cGUnLCBjYnBheW1lbnRtZXRob2R0eXBlKTs8YnI+c2V0SERhdGEoaERhdGEsICduZXR0ZXJtZGF5cycsIGN1c3RvbWVyLm5ldF90ZXJtX2RheXMpOzxicj5zZXRIRGF0YShoRGF0YSwgJ3RheGV4ZW1wdHN0YXR1cycsIGN1c3RvbWVyLnRheGFiaWxpdHkpOzxicj48YnI+PGJyPmxldCBjYmN1cnJlbmN5Ozxicj5sZXQgY2JzdWJzY3JpcHRpb25pZDs8YnI+bGV0IGNic3Vic2NyaXB0aW9zdGF0dXM7PGJyPmxldCBjYnByb2R1Y3Q7PGJyPmxldCBjYnBsYW5xdWFudGl0eTs8YnI+bGV0IGNic2V0dXBmZWU7PGJyPmxldCBjYmR1ZWludm9pY2VzY291bnQ7PGJyPmxldCBjYnJlbWFpbmluZ2JpbGxpbmdjeWNsZXM7PGJyPmxldCBjYnBvbnVtYmVyOzxicj5sZXQgY2JuZXh0YmlsbGluZ2F0Ozxicj5sZXQgY2J0b3RhbGR1ZXM7PGJyPmxldCBjYmR1ZXNpbmNlOzxicj5sZXQgY2JzdWJzY3JpcHRpb25tcnI7PGJyPmlmIChzdWJzY3JpcHRpb24gIT09IHVuZGVmaW5lZCkgezxicj4gICAgY2JjdXJyZW5jeSA9IHN1YnNjcmlwdGlvbi5jdXJyZW5jeV9jb2RlOzxicj4gICAgY2JzdWJzY3JpcHRpb25pZCA9IHN1YnNjcmlwdGlvbi5pZDs8YnI+ICAgIGNic3Vic2NyaXB0aW9zdGF0dXMgPSBzdWJzY3JpcHRpb24uc3RhdHVzOzxicj4gICAgY2Jwcm9kdWN0ID0gc3Vic2NyaXB0aW9uLnBsYW5faWQ7PGJyPiAgICBjYnBsYW5xdWFudGl0eSA9IHN1YnNjcmlwdGlvbi5wbGFuX3F1YW50aXR5Ozxicj4gICAgY2JzZXR1cGZlZSA9IGdldE51bWJlcihzdWJzY3JpcHRpb24uc2V0dXBfZmVlKTs8YnI+ICAgIGNiZHVlaW52b2ljZXNjb3VudCA9IGdldE51bWJlcihzdWJzY3JpcHRpb24uZHVlX2ludm9pY2VzX2NvdW50KTs8YnI+ICAgIGNicmVtYWluaW5nYmlsbGluZ2N5Y2xlcyA9IHN1YnNjcmlwdGlvbi5yZW1haW5pbmdfYmlsbGluZ19jeWNsZXM7PGJyPiAgICBjYnBvbnVtYmVyID0gc3Vic2NyaXB0aW9uLnBvX251bWJlcjs8YnI+ICAgIGlmKHN1YnNjcmlwdGlvbi5uZXh0X2JpbGxpbmdfYXQgIT09IHVuZGVmaW5lZCkgezxicj4gICAgICBjYm5leHRiaWxsaW5nYXQgPSBnZXROdW1iZXIoc3Vic2NyaXB0aW9uLm5leHRfYmlsbGluZ19hdCkgKiAxMDAwOzxicj4gICAgfTxicj4gICAgPGJyPiAgICBjYnRvdGFsZHVlcyA9IGdldE51bWJlcihzdWJzY3JpcHRpb24udG90YWxfZHVlcyk7PGJyPiAgICBpZihzdWJzY3JpcHRpb24uZHVlX3NpbmNlICE9PSB1bmRlZmluZWQpIHs8YnI+ICAgICAgIGNiZHVlc2luY2UgPSBnZXROdW1iZXIoc3Vic2NyaXB0aW9uLmR1ZV9zaW5jZSkgKiAxMDAwOzxicj4gICAgfTxicj4gICA8YnI+ICAgIGNic3Vic2NyaXB0aW9ubXJyID0gZ2V0TnVtYmVyKHN1YnNjcmlwdGlvbi5tcnIpOzxicj59PGJyPjxicj48YnI+bGV0IG5MaWZlY3ljbGVzdGFnZTs8YnI+PGJyPjxicj5pZiAoY2JzdWJzY3JpcHRpb3N0YXR1cyA9PT0gJ2NhbmNlbGxlZCcpIHs8YnI+ICAgIGlmIChzeW5jUnVsZXNDb250YWN0cy5MaWZlY3ljbGVTdGFnZS5DYW5jZWxlZFN1YnNjcmlwdGlvbiAhPT0gdW5kZWZpbmVkICYmIHN5bmNSdWxlc0NvbnRhY3RzLkxpZmVjeWNsZVN0YWdlLkNhbmNlbGVkU3Vic2NyaXB0aW9uICE9PSAnc2VsZWN0Jykgezxicj4gICAgICAgIG5MaWZlY3ljbGVzdGFnZSA9IHN5bmNSdWxlc0NvbnRhY3RzLkxpZmVjeWNsZVN0YWdlLkNhbmNlbGVkU3Vic2NyaXB0aW9uOzxicj4gICAgfTxicj48YnI+fSBlbHNlIGlmIChjYnN1YnNjcmlwdGlvc3RhdHVzID09PSAnYWN0aXZlJykgezxicj4gICAgaWYgKHN5bmNSdWxlc0NvbnRhY3RzLkxpZmVjeWNsZVN0YWdlLkFjdGl2ZVN1YnNjcmlwdGlvbiAhPT0gdW5kZWZpbmVkICYmIHN5bmNSdWxlc0NvbnRhY3RzLkxpZmVjeWNsZVN0YWdlLkFjdGl2ZVN1YnNjcmlwdGlvbiAhPT0gJ3NlbGVjdCcpIHs8YnI+ICAgICAgICBuTGlmZWN5Y2xlc3RhZ2UgPSBzeW5jUnVsZXNDb250YWN0cy5MaWZlY3ljbGVTdGFnZS5BY3RpdmVTdWJzY3JpcHRpb247PGJyPiAgICB9PGJyPjxicj59IGVsc2UgaWYgKGNic3Vic2NyaXB0aW9zdGF0dXMgPT09ICdpbl90cmlhbCcpIHs8YnI+ICAgIGlmIChzeW5jUnVsZXNDb250YWN0cy5MaWZlY3ljbGVTdGFnZS5UcmlhbFN1YnNjcmlwdGlvbiAhPT0gdW5kZWZpbmVkICYmIHN5bmNSdWxlc0NvbnRhY3RzLkxpZmVjeWNsZVN0YWdlLlRyaWFsU3Vic2NyaXB0aW9uICE9PSAnc2VsZWN0Jykgezxicj4gICAgICAgIG5MaWZlY3ljbGVzdGFnZSA9IHN5bmNSdWxlc0NvbnRhY3RzLkxpZmVjeWNsZVN0YWdlLlRyaWFsU3Vic2NyaXB0aW9uOzxicj4gICAgfTxicj59IGVsc2UgaWYgKGNic3Vic2NyaXB0aW9zdGF0dXMgPT09IHVuZGVmaW5lZCkgezxicj4gICAgaWYgKHN5bmNSdWxlc0NvbnRhY3RzLkxpZmVjeWNsZVN0YWdlLk5vU3Vic2NyaXB0aW9uICE9PSB1bmRlZmluZWQgJiYgc3luY1J1bGVzQ29udGFjdHMuTGlmZWN5Y2xlU3RhZ2UuTm9TdWJzY3JpcHRpb24gIT09ICdzZWxlY3QnKSB7PGJyPiAgICAgICAgbkxpZmVjeWNsZXN0YWdlID0gc3luY1J1bGVzQ29udGFjdHMuTGlmZWN5Y2xlU3RhZ2UuTm9TdWJzY3JpcHRpb247PGJyPiAgICB9PGJyPn08YnI+PGJyPnNldEhEYXRhKGhEYXRhLCAnY3VycmVuY3ljb2RlJywgY2JjdXJyZW5jeSk7PGJyPnNldEhEYXRhKGhEYXRhLCAnbGlmZWN5Y2xlc3RhZ2UnLCBuTGlmZWN5Y2xlc3RhZ2UpOzxicj5zZXRIRGF0YShoRGF0YSwgJ3N1YnNjcmlwdGlvbmlkJywgY2JzdWJzY3JpcHRpb25pZCk7PGJyPnNldEhEYXRhKGhEYXRhLCAnc3Vic2NyaXB0aW9zdGF0dXMnLCBjYnN1YnNjcmlwdGlvc3RhdHVzKTs8YnI+c2V0SERhdGEoaERhdGEsICdwcm9kdWN0JywgY2Jwcm9kdWN0KTs8YnI+c2V0SERhdGEoaERhdGEsICdwbGFucXVhbnRpdHknLCBjYnBsYW5xdWFudGl0eSk7PGJyPnNldEhEYXRhKGhEYXRhLCAncmVtYWluaW5nYmlsbGluZ2N5Y2xlcycsIGNicmVtYWluaW5nYmlsbGluZ2N5Y2xlcyk7PGJyPnNldEhEYXRhKGhEYXRhLCAncG9udW1iZXInLCBjYnBvbnVtYmVyKTs8YnI+c2V0SERhdGEoaERhdGEsICduZXh0YmlsbGluZ2F0JywgY2JuZXh0YmlsbGluZ2F0KTs8YnI+c2V0SERhdGEoaERhdGEsICdkdWVzaW5jZScsIGNiZHVlc2luY2UpOzxicj48YnI+c3RlcHMuSHViRGF0YS5jTWV0cmljcyA9IHs8YnI+ICAgIHN1YnNjcmlwdGlvbm1ycjogY2JzdWJzY3JpcHRpb25tcnIsPGJyPiAgICB0b3RhbGR1ZXM6IGNidG90YWxkdWVzLDxicj4gICAgZHVlaW52b2ljZXNjb3VudDogY2JkdWVpbnZvaWNlc2NvdW50LDxicj4gICAgc3Vic2NyaXB0aW9uaWQ6IGNic3Vic2NyaXB0aW9uaWQsPGJyPiAgICBvcDogJ2NyZWF0ZSc8YnI+ICAgIC8vaW52b2ljZWFtb3VudHBhaWQ6IGNNZXRyaWNzSW52b2ljZWFtb3VudHBhaWQsPGJyPn07PGJyPnNldEhEYXRhKGhEYXRhLCAnZHVlaW52b2ljZXNjb3VudCcsIGNiZHVlaW52b2ljZXNjb3VudCk7PGJyPnNldEhEYXRhKGhEYXRhLCAndG90YWxkdWVzJywgY2J0b3RhbGR1ZXMpOzxicj5zZXRIRGF0YShoRGF0YSwgJ3NldHVwZmVlJywgY2JzZXR1cGZlZSk7PGJyPnNldEhEYXRhKGhEYXRhLCAnc3Vic2NyaXB0aW9ubXJyJywgY2JzdWJzY3JpcHRpb25tcnIpOzxicj48YnI+PGJyPjxicj5sZXQgY2JsYXN0b3JkZXJkYXRlOzxicj5sZXQgY2JsYXN0b3JkZXJiYXNlY29tcG9uZW50c2t1Ozxicj5sZXQgY2JsYXN0b3JkZXJzdGF0dXM7PGJyPmxldCBjYmxhc3RvcmRlcjs8YnI+bGV0IGNibmV4dG9yZGVyZGF0ZTs8YnI+bGV0IGNibmV4dG9yZGVyYmFzZWNvbXBvbmVudHNrdTs8YnI+bGV0IGNibmV4dG9yZGVyc3RhdHVzOzxicj5sZXQgY2JuZXh0b3JkZXI7PGJyPmxldCBteU9yZGVyOzxicj5pZiAoc3RlcHMuSHViRGF0YS5vcmRlciAhPT0gdW5kZWZpbmVkKSB7PGJyPiAgICBsZXQgb3JkZXJCZWZvcmUgPSBzdGVwcy5IdWJEYXRhLm9yZGVyLmJlZm9yZTs8YnI+ICAgICBteU9yZGVyID0gb3JkZXJCZWZvcmU7PGJyPiAgICBpZiAob3JkZXJCZWZvcmUgIT09IHVuZGVmaW5lZCkgezxicj4gICAgICAgIGlmIChvcmRlckJlZm9yZS5vcmRlcl9kYXRlICE9PSB1bmRlZmluZWQpIHs8YnI+ICAgICAgICAgICAgY2JsYXN0b3JkZXJkYXRlID0gZ2V0TnVtYmVyKG9yZGVyQmVmb3JlLm9yZGVyX2RhdGUpICogMTAwMDs8YnI+ICAgICAgICB9PGJyPiAgICAgICAgY2JsYXN0b3JkZXJiYXNlY29tcG9uZW50c2t1ID0gb3JkZXJCZWZvcmUuc2t1Ozxicj4gICAgICAgIGNibGFzdG9yZGVyc3RhdHVzID0gb3JkZXJCZWZvcmUuc3RhdHVzOzxicj4gICAgICAgIGNibGFzdG9yZGVyID0gZ2V0TnVtYmVyKG9yZGVyQmVmb3JlLnRvdGFsKTs8YnI+ICAgIH08YnI+PGJyPjxicj4gICAgbGV0IG9yZGVyQWZ0ZXIgPSBzdGVwcy5IdWJEYXRhLm9yZGVyLmFmdGVyOzxicj4gICAgaWYgKG9yZGVyQWZ0ZXIgIT09IHVuZGVmaW5lZCkgezxicj4gICAgICAgIGlmIChvcmRlckFmdGVyLm9yZGVyX2RhdGUgIT09IHVuZGVmaW5lZCkgezxicj4gICAgICAgICAgICBjYm5leHRvcmRlcmRhdGUgPSBnZXROdW1iZXIob3JkZXJBZnRlci5vcmRlcl9kYXRlKSAqIDEwMDA7PGJyPiAgICAgICAgfTxicj4gICAgICAgIGNibmV4dG9yZGVyYmFzZWNvbXBvbmVudHNrdSA9IG9yZGVyQWZ0ZXIuc2t1Ozxicj4gICAgICAgIGNibmV4dG9yZGVyc3RhdHVzID0gb3JkZXJBZnRlci5zdGF0dXM7PGJyPiAgICAgICAgY2JuZXh0b3JkZXIgPSBnZXROdW1iZXIob3JkZXJBZnRlci50b3RhbCk7PGJyPiAgICB9PGJyPjxicj59PGJyPjxicj5zZXRIRGF0YShoRGF0YSwgJ2xhc3RvcmRlcmRhdGUnLCBjYmxhc3RvcmRlcmRhdGUpOzxicj5zZXRIRGF0YShoRGF0YSwgJ2xhc3RvcmRlcmJhc2Vjb21wb25lbnRza3UnLCBjYmxhc3RvcmRlcmJhc2Vjb21wb25lbnRza3UpOzxicj5zZXRIRGF0YShoRGF0YSwgJ2xhc3RvcmRlcnN0YXR1cycsIGNibGFzdG9yZGVyc3RhdHVzKTs8YnI+c2V0SERhdGEoaERhdGEsICdsYXN0b3JkZXInLCBjYmxhc3RvcmRlcik7PGJyPnNldEhEYXRhKGhEYXRhLCAnbmV4dG9yZGVyZGF0ZScsIGNibmV4dG9yZGVyZGF0ZSk7PGJyPnNldEhEYXRhKGhEYXRhLCAnbmV4dG9yZGVyYmFzZWNvbXBvbmVudHNrdScsIGNibmV4dG9yZGVyYmFzZWNvbXBvbmVudHNrdSk7PGJyPnNldEhEYXRhKGhEYXRhLCAnbmV4dG9yZGVyc3RhdHVzJywgY2JuZXh0b3JkZXJzdGF0dXMpOzxicj5zZXRIRGF0YShoRGF0YSwgJ25leHRvcmRlcicsIGNibmV4dG9yZGVyKTs8YnI+PGJyPjxicj5sZXQgY2JpbnZvaWNlYW1vdW50cGFpZDs8YnI+bGV0IGNiaW52b2ljZWVzdGltYXRlOzxicj5pZiAoc3RlcHMuSHViRGF0YS5pbnZvaWNlICE9PSB1bmRlZmluZWQpIHs8YnI+ICAgIGNiaW52b2ljZWFtb3VudHBhaWQgPSBnZXROdW1iZXIoc3RlcHMuSHViRGF0YS5pbnZvaWNlLnRvdGFsKTs8YnI+ICAgIGNiaW52b2ljZWVzdGltYXRlID0gZ2V0TnVtYmVyKHN0ZXBzLkh1YkRhdGEuaW52b2ljZS5lc3RpbWF0ZSk7PGJyPn08YnI+PGJyPnN0ZXBzLkh1YkRhdGEuY01ldHJpY3MuaW52b2ljZWFtb3VudHBhaWQgPSBjYmludm9pY2VhbW91bnRwYWlkOzxicj48YnI+c2V0SERhdGEoaERhdGEsICdpbnZvaWNlYW1vdW50cGFpZCcsIGNiaW52b2ljZWFtb3VudHBhaWQpOzxicj5zZXRIRGF0YShoRGF0YSwgJ25leHRiaWxsaW5nYW1vdW50JywgY2JpbnZvaWNlZXN0aW1hdGUpOzxicj48YnI+Ly9jdXN0b208YnI+bGV0IHN5bmNSdWxlc0ZpZWxkcyA9IHN0ZXBzLkNoYXJnZWJlZUNvbmZpZ1BhcmFtcy5yZXNwb25zZS5ib2R5LnRoaXJkX3BhcnR5X2NvbmZpZ3VyYXRpb24uY29uZmlnX2pzb24uY2xvdWRFbGVtZW50cy5zeW5jUnVsZXNGaWVsZHM7PGJyPiAgICBpZiAoc3luY1J1bGVzRmllbGRzID09PSB1bmRlZmluZWQpIHs8YnI+ICAgICAgICBzeW5jUnVsZXNGaWVsZHMgPSB7PGJyPiAgICAgICAgICAgICdjb21wYW55Jzogezxicj48YnI+ICAgICAgICAgICAgfSw8YnI+ICAgICAgICAgICAgJ2NvbnRhY3QnOiB7PGJyPjxicj4gICAgICAgICAgICB9LDxicj4gICAgICAgICAgICAnZGVhbCc6IHs8YnI+ICAgICAgICAgICAgfSw8YnI+ICAgICAgICAgICAgJ3N5bmMnOiAnZmFsc2UnPGJyPiAgICAgICAgfTs8YnI+PGJyPiAgICB9IGVsc2Ugezxicj4gICAgICAgIGlmIChzeW5jUnVsZXNGaWVsZHMuY29tcGFueSA9PT0gdW5kZWZpbmVkIHx8IHN5bmNSdWxlc0ZpZWxkcy5jb21wYW55ID09PSAnJykgezxicj4gICAgICAgICAgICBzeW5jUnVsZXNGaWVsZHMuY29tcGFueSA9IHt9Ozxicj4gICAgICAgIH08YnI+ICAgICAgICBpZiAoc3luY1J1bGVzRmllbGRzLmNvbnRhY3QgPT09IHVuZGVmaW5lZCB8fCBzeW5jUnVsZXNGaWVsZHMuY29udGFjdCA9PT0gJycpIHs8YnI+ICAgICAgICAgICAgc3luY1J1bGVzRmllbGRzLmNvbnRhY3QgPSB7fTs8YnI+ICAgICAgICB9PGJyPiAgICAgICAgaWYgKHN5bmNSdWxlc0ZpZWxkcy5kZWFsID09PSB1bmRlZmluZWQgfHwgc3luY1J1bGVzRmllbGRzLmRlYWwgPT09ICcnKSB7PGJyPiAgICAgICAgICAgIHN5bmNSdWxlc0ZpZWxkcy5kZWFsID0ge307PGJyPiAgICAgICAgfTxicj4gICAgfTxicj4gICAgc3luY1J1bGVzRmllbGRzID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShzeW5jUnVsZXNGaWVsZHMpKTs8YnI+ICAgIGxldCBjb21wYW55S2V5cyA9IE9iamVjdC5rZXlzKHN5bmNSdWxlc0ZpZWxkcy5jb21wYW55KTs8YnI+PGJyPmZvciAodmFyIGkgPSAwOyBpIDxzcGFuPjw8L3NwYW4+IGNvbXBhbnlLZXlzLmxlbmd0aDsgaSsrKSB7PGJyPiAgICBzeW5jUnVsZXNGaWVsZHMuY29udGFjdFtjb21wYW55S2V5c1tpXV0gPSBzeW5jUnVsZXNGaWVsZHMuY29tcGFueVtjb21wYW55S2V5c1tpXV07PGJyPn08YnI+PGJyPjxicj5sZXQgY3VzdG9tZWZpZWxkcyA9IHN0ZXBzLlN5bmNMb2cuY3VzdG9tZWZpZWxkczs8YnI+Zm9yICh2YXIgaSA9IDA7IGkgPHNwYW4+PDwvc3Bhbj4gY3VzdG9tZWZpZWxkcy5sZW5ndGg7IGkrKykgezxicj4gICAgbGV0IGZsZCA9IGN1c3RvbWVmaWVsZHNbaV07PGJyPjxicj4gICAgZm9yICh2YXIgaiA9IDA7IGogPHNwYW4+PDwvc3Bhbj4gZmxkLmZpZWxkcy5sZW5ndGg7IGorKykgezxicj4gICAgICAgIHZhciBlcyA9IGZsZC5maWVsZHNbal07PGJyPiAgICAgICAgdmFyIGRlc2MgPSBmbGQubGFiZWwgKyAnICcgKyBlc1swXS5yZXBsYWNlKC9fL2csICcgJyk7PGJyPiAgICAgICAgdmFyIGlkID0gZmxkLmtleSArICdfJyArIGVzWzBdOzxicj4gICAgICAgIGlmKHN5bmNSdWxlc0ZpZWxkcy5jb250YWN0W2lkXSAhPT11bmRlZmluZWQpIHs8YnI+ICAgICAgICAgICAgc3luY1J1bGVzRmllbGRzLmNvbnRhY3RbaWRdID0gZXM7PGJyPiAgICAgICAgfTxicj4gICAgfTxicj59PGJyPmxldCBjdXN0b21LZXlzID0gT2JqZWN0LmtleXMoc3luY1J1bGVzRmllbGRzLmNvbnRhY3QpOzxicj5mb3IodmFyIGk9MDtpPHNwYW4+PDwvc3Bhbj5jdXN0b21LZXlzLmxlbmd0aDtpKyspezxicj4gIHZhciBjS2V5ID0gY3VzdG9tS2V5c1tpXTs8YnI+ICB2YXIgY1ZhbCA9IHN5bmNSdWxlc0ZpZWxkcy5jb250YWN0W2NLZXldOzxicj4gICBsZXQgc3ViVmFsOzxicj4gIGlmKGNLZXkuc3RhcnRzV2l0aCgnc3ViY3N0Jykpezxicj4gICAgaWYoc3Vic2NyaXB0aW9uICE9PSB1bmRlZmluZWQpezxicj4gICAgc3ViVmFsID0gc3Vic2NyaXB0aW9uW2NWYWxbMF1dOzxicj4gICAgfTxicj4gIH1lbHNlIGlmKGNLZXkuc3RhcnRzV2l0aCgnb3JkZXJjc3QnKSl7PGJyPiAgICBpZihteU9yZGVyICE9PSB1bmRlZmluZWQpIHs8YnI+ICAgICAgc3ViVmFsID0gbXlPcmRlcltjVmFsWzBdXTs8YnI+ICAgIH08YnI+ICAgIDxicj4gIH0gZWxzZSBpZihjS2V5LnN0YXJ0c1dpdGgoJ2N1c3Rjc3QnKSl7PGJyPiAgICAgaWYoY3VzdG9tZXIgIT09IHVuZGVmaW5lZCl7PGJyPiAgICAgICBzdWJWYWwgPSBjdXN0b21lcltjVmFsWzBdXTs8YnI+ICAgIH08YnI+ICB9PGJyPmlmIChjVmFsWzFdID09PSAnbnVtYmVyJykgezxicj4gICAgc3ViVmFsID0gZ2V0TnVtYmVyKHN1YlZhbCk7PGJyPiAgICBzZXRIRGF0YShoRGF0YSwgY0tleSwgc3ViVmFsKTs8YnI+ICAgIGlmIChjVmFsLmxlbmd0aCA9PSA0KSB7PGJyPiAgICAgICAgcHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsIGNLZXksIHRydWUpOzxicj4gICAgfSBlbHNlIHs8YnI+ICAgICAgICBwcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgY0tleSk7PGJyPiAgICB9PGJyPiAgICBzdGVwcy5IdWJEYXRhLmNNZXRyaWNzW2NLZXldID0gc3ViVmFsOzxicj59IGVsc2UgaWYgKGNWYWxbMV0gPT09ICdkYXRldGltZScpIHs8YnI+ICBpZihzdWJWYWwgIT09IHVuZGVmaW5lZCkgezxicj4gICAgIHN1YlZhbCA9IGdldE51bWJlcihzdWJWYWwpICogMTAwMDs8YnI+ICAgIHNldEhEYXRhKGhEYXRhLCBjS2V5LCBzdWJWYWwpOzxicj4gICAgcHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsIGNLZXkpOzxicj4gIH08YnI+ICAgPGJyPjxicj59IGVsc2Ugezxicj4gICAgaWYgKHN1YlZhbCA9PT0gdW5kZWZpbmVkKSB7PGJyPiAgICAgICAgc3ViVmFsID0gJyc7PGJyPjxicj4gICAgfTxicj4gICAgc2V0SERhdGEoaERhdGEsIGNLZXksIHN1YlZhbCk7PGJyPiAgICBwcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgY0tleSk7PGJyPn08YnI+ICA8YnI+ICA8YnI+fTxicj4vL2N1c3RvbTxicj48YnI+PGJyPjxicj5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ2ZpcnN0bmFtZScpOzxicj5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ2VtYWlsJyk7PGJyPnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAnbGFzdG5hbWUnKTs8YnI+cHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdwaG9uZScpOzxicj5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ2NvbXBhbnknKTs8YnI+cHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdiaWxsaW5nYWRkcmVzcycpOzxicj5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ2JpbGxpbmdzdGF0ZScpOzxicj5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ2JpbGxpbmdjaXR5Jyk7PGJyPnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAnYmlsbGluZ2NvdW50cnknKTs8YnI+cHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdiaWxsaW5nemlwJyk7PGJyPnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAnYXV0b2NvbGxlY3Rpb24nKTs8YnI+cHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdwcmVmZXJyZWRjdXJyZW5jeWNvZGUnKTs8YnI+cHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdwYXltZW50bWV0aG9kc3RhdHVzJyk7PGJyPnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAncGF5bWVudG1ldGhvZHR5cGUnKTs8YnI+cHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICduZXR0ZXJtZGF5cycpOzxicj5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ3RheGV4ZW1wdHN0YXR1cycpOzxicj5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ2NoYXJnZWJlZWN1c3RvbWVyaWQnKTs8YnI+cHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdzdWJzY3JpcHRpb25pZCcpOzxicj5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ3N1YnNjcmlwdGlvc3RhdHVzJyk7PGJyPnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAncHJvZHVjdCcpOzxicj5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ3BsYW5xdWFudGl0eScpOzxicj5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ3NldHVwZmVlJywgdHJ1ZSk7PGJyPnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAnZHVlaW52b2ljZXNjb3VudCcpOzxicj5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ3JlbWFpbmluZ2JpbGxpbmdjeWNsZXMnKTs8YnI+cHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdwb251bWJlcicpOzxicj5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ25leHRiaWxsaW5nYXQnKTs8YnI+cHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICd0b3RhbGR1ZXMnLCB0cnVlKTs8YnI+cHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdkdWVzaW5jZScpOzxicj5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ3N1YnNjcmlwdGlvbm1ycicsIHRydWUpOzxicj5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ2xpZmVjeWNsZXN0YWdlJyk7PGJyPnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAnbGFzdG9yZGVyZGF0ZScpOzxicj5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ2xhc3RvcmRlcmJhc2Vjb21wb25lbnRza3UnKTs8YnI+cHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdsYXN0b3JkZXJzdGF0dXMnKTs8YnI+cHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdsYXN0b3JkZXInLCB0cnVlKTs8YnI+cHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICduZXh0b3JkZXJkYXRlJyk7PGJyPnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAnbmV4dG9yZGVyYmFzZWNvbXBvbmVudHNrdScpOzxicj5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ25leHRvcmRlcnN0YXR1cycpOzxicj5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ25leHRvcmRlcicsIHRydWUpOzxicj5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ2ludm9pY2VhbW91bnRwYWlkJywgdHJ1ZSk7PGJyPnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAnbmV4dGJpbGxpbmdhbW91bnQnLCB0cnVlKTs8YnI+PGJyPnN0ZXBzLkh1YlNwb3RJbnB1dC5pbnB1dHMucHJvcGVydGllcyA9IHByb3BlcnRpZXM7PGJyPjxicj5sZXQgZ2ZnID0gezxicj4gICAgcHJvcGVydGllczogcHJvcGVydGllcyw8YnI+ICAgIG1ldHJpY3M6IHN0ZXBzLkh1YkRhdGEuY01ldHJpY3MsPGJyPiAgICBoRGF0YTogaERhdGE8YnI+fTxicj48YnI+ZG9uZShnZmcpOzwvcHJlPjxicj48Yj5SQVcgSlNPTjo8L2I+PGJyPjxicj48cHJlPns8YnI+ICAnb25TdWNjZXNzJzogWzxicj4gICAgJ0NyZWF0ZUh1YlNwb3RDb250YWN0Jzxicj4gIF0sPGJyPiAgJ29uRmFpbHVyZSc6IFtdLDxicj4gICduYW1lJzogJ1ByZXBhcmVDcmVhdGVJbnB1dCcsPGJyPiAgJ3R5cGUnOiAnc2NyaXB0Jyw8YnI+ICAncHJvcGVydGllcyc6IHs8YnI+ICAgICdib2R5JzogJ2xldCBjdXN0b21lciA9IHN0ZXBzLkh1YkRhdGEuY3VzdG9tZXI7XG5sZXQgc3Vic2NyaXB0aW9uID0gc3RlcHMuSHViRGF0YS5zdWJzY3JpcHRpb247XG5sZXQgc3luY1J1bGVzQ29udGFjdHMgPSBzdGVwcy5DdXN0b21lcnNQYXJhbS5zeW5jUnVsZXNDb250YWN0cztcbnN0ZXBzLkh1YlNwb3RJbnB1dC51cmwgPSBcJ2h0dHBzOi8vYXBpLmh1YmFwaS5jb20vY29udGFjdHMvdjEvY29udGFjdFwnO1xubGV0IHByb3BlcnRpZXMgPSBbXTtcbmZ1bmN0aW9uIHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsIGtleSwgaXNDdXJyZW5jeSkge1xuICAgIGxldCB2YWwgPSBoRGF0YVtrZXldO1xuICAgIGlmICh2YWwgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAoaXNDdXJyZW5jeSkge1xuICAgICAgICAgICAgdmFsID0gcGFyc2VGbG9hdChwYXJzZUludCh2YWwsIDEwKSAvIDEwMCkudG9GaXhlZCgyKTtcbiAgICAgICAgfVxuICAgICAgICBwcm9wZXJ0aWVzLnB1c2goe1xuICAgICAgICAgICAgXCdwcm9wZXJ0eVwnOiBrZXksXG4gICAgICAgICAgICBcJ3ZhbHVlXCc6IHZhbFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHByb3BlcnRpZXM7XG59XG5mdW5jdGlvbiBzZXRIRGF0YShoRGF0YSwga2V5LCB2YWx1ZSkge1xuICAgIGhEYXRhW2tleV0gPSB2YWx1ZTtcbn1cbmZ1bmN0aW9uIGdldE51bWJlcih2YWwpIHtcbiAgICBpZiAodmFsID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICAgIGxldCBudW0gPSBOdW1iZXIodmFsKTtcbiAgICBpZiAoaXNOYU4obnVtKSkge1xuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgcmV0dXJuIG51bTtcbn1cblxubGV0IGhEYXRhID0ge1xuXG59O1xuXG5cblxuXG5sZXQgY2JiaWxsaW5nYWRkcmVzcztcbmxldCBjYlN0YXRlO1xubGV0IGNiQ2l0eTtcbmxldCBjYkNvdW50cnk7XG5sZXQgY2JaaXA7XG5sZXQgY2JwYXltZW50X21ldGhvZF9zdGF0dXM7XG5sZXQgY2JwYXltZW50bWV0aG9kdHlwZTtcblxuaWYgKGN1c3RvbWVyLmJpbGxpbmdfYWRkcmVzcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgY2JiaWxsaW5nYWRkcmVzcyA9IFwnXCc7XG4gICAgaWYgKGN1c3RvbWVyLmJpbGxpbmdfYWRkcmVzcy5saW5lMSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNiYmlsbGluZ2FkZHJlc3MgPSBjYmJpbGxpbmdhZGRyZXNzICsgY3VzdG9tZXIuYmlsbGluZ19hZGRyZXNzLmxpbmUxO1xuICAgIH1cbiAgICBpZiAoY3VzdG9tZXIuYmlsbGluZ19hZGRyZXNzLmxpbmUyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY2JiaWxsaW5nYWRkcmVzcyA9IGNiYmlsbGluZ2FkZHJlc3MgKyBcJyBcJyArIGN1c3RvbWVyLmJpbGxpbmdfYWRkcmVzcy5saW5lMjtcbiAgICB9XG4gICAgaWYgKGN1c3RvbWVyLmJpbGxpbmdfYWRkcmVzcy5saW5lMyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNiYmlsbGluZ2FkZHJlc3MgPSBjYmJpbGxpbmdhZGRyZXNzICsgXCcgXCcgKyBjdXN0b21lci5iaWxsaW5nX2FkZHJlc3MubGluZTM7XG4gICAgfVxuICAgIGlmIChjYmJpbGxpbmdhZGRyZXNzID09PSBcJ1wnKSB7XG4gICAgICAgIGNiYmlsbGluZ2FkZHJlc3MgPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGNiU3RhdGUgPSBjdXN0b21lci5iaWxsaW5nX2FkZHJlc3Muc3RhdGU7XG4gICAgY2JDaXR5ID0gY3VzdG9tZXIuYmlsbGluZ19hZGRyZXNzLmNpdHk7XG4gICAgY2JDb3VudHJ5ID0gY3VzdG9tZXIuYmlsbGluZ19hZGRyZXNzLmNvdW50cnk7XG4gICAgY2JaaXAgPSBjdXN0b21lci5iaWxsaW5nX2FkZHJlc3MuemlwO1xufVxuXG5pZiAoY3VzdG9tZXIucGF5bWVudF9tZXRob2QgIT09IHVuZGVmaW5lZCApIHtcbiAgICBjYnBheW1lbnRfbWV0aG9kX3N0YXR1cyA9IGN1c3RvbWVyLnBheW1lbnRfbWV0aG9kLnN0YXR1cztcbiAgICBjYnBheW1lbnRtZXRob2R0eXBlID0gY3VzdG9tZXIucGF5bWVudF9tZXRob2QudHlwZTtcbn1cblxuc2V0SERhdGEoaERhdGEsICdlbWFpbCcsIGN1c3RvbWVyLmVtYWlsKTtcbnNldEhEYXRhKGhEYXRhLCAnY2hhcmdlYmVlY3VzdG9tZXJpZCcsIGN1c3RvbWVyLmlkKTtcbnNldEhEYXRhKGhEYXRhLCAnZmlyc3RuYW1lJywgY3VzdG9tZXIuZmlyc3RfbmFtZSk7XG5zZXRIRGF0YShoRGF0YSwgJ2xhc3RuYW1lJywgY3VzdG9tZXIubGFzdF9uYW1lKTtcbnNldEhEYXRhKGhEYXRhLCAncGhvbmUnLCBjdXN0b21lci5waG9uZSk7XG5zZXRIRGF0YShoRGF0YSwgJ2NvbXBhbnknLCBjdXN0b21lci5jb21wYW55KTtcbnNldEhEYXRhKGhEYXRhLCAnYmlsbGluZ2FkZHJlc3MnLCBjYmJpbGxpbmdhZGRyZXNzKTtcbnNldEhEYXRhKGhEYXRhLCAnYmlsbGluZ3N0YXRlJywgY2JTdGF0ZSk7XG5zZXRIRGF0YShoRGF0YSwgJ2JpbGxpbmdjaXR5JywgY2JDaXR5KTtcbnNldEhEYXRhKGhEYXRhLCAnYmlsbGluZ2NvdW50cnknLCBjYkNvdW50cnkpO1xuc2V0SERhdGEoaERhdGEsICdiaWxsaW5nemlwJywgY2JaaXApO1xuc2V0SERhdGEoaERhdGEsICdhdXRvY29sbGVjdGlvbicsIGN1c3RvbWVyLmF1dG9fY29sbGVjdGlvbik7XG5zZXRIRGF0YShoRGF0YSwgJ3ByZWZlcnJlZGN1cnJlbmN5Y29kZScsIGN1c3RvbWVyLnByZWZlcnJlZF9jdXJyZW5jeV9jb2RlKTtcbnNldEhEYXRhKGhEYXRhLCAncGF5bWVudG1ldGhvZHN0YXR1cycsIGNicGF5bWVudF9tZXRob2Rfc3RhdHVzKTtcbnNldEhEYXRhKGhEYXRhLCAncGF5bWVudG1ldGhvZHR5cGUnLCBjYnBheW1lbnRtZXRob2R0eXBlKTtcbnNldEhEYXRhKGhEYXRhLCAnbmV0dGVybWRheXMnLCBjdXN0b21lci5uZXRfdGVybV9kYXlzKTtcbnNldEhEYXRhKGhEYXRhLCAndGF4ZXhlbXB0c3RhdHVzJywgY3VzdG9tZXIudGF4YWJpbGl0eSk7XG5cblxubGV0IGNiY3VycmVuY3k7XG5sZXQgY2JzdWJzY3JpcHRpb25pZDtcbmxldCBjYnN1YnNjcmlwdGlvc3RhdHVzO1xubGV0IGNicHJvZHVjdDtcbmxldCBjYnBsYW5xdWFudGl0eTtcbmxldCBjYnNldHVwZmVlO1xubGV0IGNiZHVlaW52b2ljZXNjb3VudDtcbmxldCBjYnJlbWFpbmluZ2JpbGxpbmdjeWNsZXM7XG5sZXQgY2Jwb251bWJlcjtcbmxldCBjYm5leHRiaWxsaW5nYXQ7XG5sZXQgY2J0b3RhbGR1ZXM7XG5sZXQgY2JkdWVzaW5jZTtcbmxldCBjYnN1YnNjcmlwdGlvbm1ycjtcbmlmIChzdWJzY3JpcHRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgIGNiY3VycmVuY3kgPSBzdWJzY3JpcHRpb24uY3VycmVuY3lfY29kZTtcbiAgICBjYnN1YnNjcmlwdGlvbmlkID0gc3Vic2NyaXB0aW9uLmlkO1xuICAgIGNic3Vic2NyaXB0aW9zdGF0dXMgPSBzdWJzY3JpcHRpb24uc3RhdHVzO1xuICAgIGNicHJvZHVjdCA9IHN1YnNjcmlwdGlvbi5wbGFuX2lkO1xuICAgIGNicGxhbnF1YW50aXR5ID0gc3Vic2NyaXB0aW9uLnBsYW5fcXVhbnRpdHk7XG4gICAgY2JzZXR1cGZlZSA9IGdldE51bWJlcihzdWJzY3JpcHRpb24uc2V0dXBfZmVlKTtcbiAgICBjYmR1ZWludm9pY2VzY291bnQgPSBnZXROdW1iZXIoc3Vic2NyaXB0aW9uLmR1ZV9pbnZvaWNlc19jb3VudCk7XG4gICAgY2JyZW1haW5pbmdiaWxsaW5nY3ljbGVzID0gc3Vic2NyaXB0aW9uLnJlbWFpbmluZ19iaWxsaW5nX2N5Y2xlcztcbiAgICBjYnBvbnVtYmVyID0gc3Vic2NyaXB0aW9uLnBvX251bWJlcjtcbiAgICBpZihzdWJzY3JpcHRpb24ubmV4dF9iaWxsaW5nX2F0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGNibmV4dGJpbGxpbmdhdCA9IGdldE51bWJlcihzdWJzY3JpcHRpb24ubmV4dF9iaWxsaW5nX2F0KSAqIDEwMDA7XG4gICAgfVxuICAgIFxuICAgIGNidG90YWxkdWVzID0gZ2V0TnVtYmVyKHN1YnNjcmlwdGlvbi50b3RhbF9kdWVzKTtcbiAgICBpZihzdWJzY3JpcHRpb24uZHVlX3NpbmNlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICBjYmR1ZXNpbmNlID0gZ2V0TnVtYmVyKHN1YnNjcmlwdGlvbi5kdWVfc2luY2UpICogMTAwMDtcbiAgICB9XG4gICBcbiAgICBjYnN1YnNjcmlwdGlvbm1yciA9IGdldE51bWJlcihzdWJzY3JpcHRpb24ubXJyKTtcbn1cblxuXG5sZXQgbkxpZmVjeWNsZXN0YWdlO1xuXG5cbmlmIChjYnN1YnNjcmlwdGlvc3RhdHVzID09PSBcJ2NhbmNlbGxlZFwnKSB7XG4gICAgaWYgKHN5bmNSdWxlc0NvbnRhY3RzLkxpZmVjeWNsZVN0YWdlLkNhbmNlbGVkU3Vic2NyaXB0aW9uICE9PSB1bmRlZmluZWQgJiYgc3luY1J1bGVzQ29udGFjdHMuTGlmZWN5Y2xlU3RhZ2UuQ2FuY2VsZWRTdWJzY3JpcHRpb24gIT09IFwnc2VsZWN0XCcpIHtcbiAgICAgICAgbkxpZmVjeWNsZXN0YWdlID0gc3luY1J1bGVzQ29udGFjdHMuTGlmZWN5Y2xlU3RhZ2UuQ2FuY2VsZWRTdWJzY3JpcHRpb247XG4gICAgfVxuXG59IGVsc2UgaWYgKGNic3Vic2NyaXB0aW9zdGF0dXMgPT09IFwnYWN0aXZlXCcpIHtcbiAgICBpZiAoc3luY1J1bGVzQ29udGFjdHMuTGlmZWN5Y2xlU3RhZ2UuQWN0aXZlU3Vic2NyaXB0aW9uICE9PSB1bmRlZmluZWQgJiYgc3luY1J1bGVzQ29udGFjdHMuTGlmZWN5Y2xlU3RhZ2UuQWN0aXZlU3Vic2NyaXB0aW9uICE9PSBcJ3NlbGVjdFwnKSB7XG4gICAgICAgIG5MaWZlY3ljbGVzdGFnZSA9IHN5bmNSdWxlc0NvbnRhY3RzLkxpZmVjeWNsZVN0YWdlLkFjdGl2ZVN1YnNjcmlwdGlvbjtcbiAgICB9XG5cbn0gZWxzZSBpZiAoY2JzdWJzY3JpcHRpb3N0YXR1cyA9PT0gXCdpbl90cmlhbFwnKSB7XG4gICAgaWYgKHN5bmNSdWxlc0NvbnRhY3RzLkxpZmVjeWNsZVN0YWdlLlRyaWFsU3Vic2NyaXB0aW9uICE9PSB1bmRlZmluZWQgJiYgc3luY1J1bGVzQ29udGFjdHMuTGlmZWN5Y2xlU3RhZ2UuVHJpYWxTdWJzY3JpcHRpb24gIT09IFwnc2VsZWN0XCcpIHtcbiAgICAgICAgbkxpZmVjeWNsZXN0YWdlID0gc3luY1J1bGVzQ29udGFjdHMuTGlmZWN5Y2xlU3RhZ2UuVHJpYWxTdWJzY3JpcHRpb247XG4gICAgfVxufSBlbHNlIGlmIChjYnN1YnNjcmlwdGlvc3RhdHVzID09PSB1bmRlZmluZWQpIHtcbiAgICBpZiAoc3luY1J1bGVzQ29udGFjdHMuTGlmZWN5Y2xlU3RhZ2UuTm9TdWJzY3JpcHRpb24gIT09IHVuZGVmaW5lZCAmJiBzeW5jUnVsZXNDb250YWN0cy5MaWZlY3ljbGVTdGFnZS5Ob1N1YnNjcmlwdGlvbiAhPT0gXCdzZWxlY3RcJykge1xuICAgICAgICBuTGlmZWN5Y2xlc3RhZ2UgPSBzeW5jUnVsZXNDb250YWN0cy5MaWZlY3ljbGVTdGFnZS5Ob1N1YnNjcmlwdGlvbjtcbiAgICB9XG59XG5cbnNldEhEYXRhKGhEYXRhLCAnY3VycmVuY3ljb2RlJywgY2JjdXJyZW5jeSk7XG5zZXRIRGF0YShoRGF0YSwgJ2xpZmVjeWNsZXN0YWdlJywgbkxpZmVjeWNsZXN0YWdlKTtcbnNldEhEYXRhKGhEYXRhLCAnc3Vic2NyaXB0aW9uaWQnLCBjYnN1YnNjcmlwdGlvbmlkKTtcbnNldEhEYXRhKGhEYXRhLCAnc3Vic2NyaXB0aW9zdGF0dXMnLCBjYnN1YnNjcmlwdGlvc3RhdHVzKTtcbnNldEhEYXRhKGhEYXRhLCAncHJvZHVjdCcsIGNicHJvZHVjdCk7XG5zZXRIRGF0YShoRGF0YSwgJ3BsYW5xdWFudGl0eScsIGNicGxhbnF1YW50aXR5KTtcbnNldEhEYXRhKGhEYXRhLCAncmVtYWluaW5nYmlsbGluZ2N5Y2xlcycsIGNicmVtYWluaW5nYmlsbGluZ2N5Y2xlcyk7XG5zZXRIRGF0YShoRGF0YSwgJ3BvbnVtYmVyJywgY2Jwb251bWJlcik7XG5zZXRIRGF0YShoRGF0YSwgJ25leHRiaWxsaW5nYXQnLCBjYm5leHRiaWxsaW5nYXQpO1xuc2V0SERhdGEoaERhdGEsICdkdWVzaW5jZScsIGNiZHVlc2luY2UpO1xuXG5zdGVwcy5IdWJEYXRhLmNNZXRyaWNzID0ge1xuICAgIHN1YnNjcmlwdGlvbm1ycjogY2JzdWJzY3JpcHRpb25tcnIsXG4gICAgdG90YWxkdWVzOiBjYnRvdGFsZHVlcyxcbiAgICBkdWVpbnZvaWNlc2NvdW50OiBjYmR1ZWludm9pY2VzY291bnQsXG4gICAgc3Vic2NyaXB0aW9uaWQ6IGNic3Vic2NyaXB0aW9uaWQsXG4gICAgb3A6IFwnY3JlYXRlXCdcbiAgICAvL2ludm9pY2VhbW91bnRwYWlkOiBjTWV0cmljc0ludm9pY2VhbW91bnRwYWlkLFxufTtcbnNldEhEYXRhKGhEYXRhLCAnZHVlaW52b2ljZXNjb3VudCcsIGNiZHVlaW52b2ljZXNjb3VudCk7XG5zZXRIRGF0YShoRGF0YSwgJ3RvdGFsZHVlcycsIGNidG90YWxkdWVzKTtcbnNldEhEYXRhKGhEYXRhLCAnc2V0dXBmZWUnLCBjYnNldHVwZmVlKTtcbnNldEhEYXRhKGhEYXRhLCAnc3Vic2NyaXB0aW9ubXJyJywgY2JzdWJzY3JpcHRpb25tcnIpO1xuXG5cblxubGV0IGNibGFzdG9yZGVyZGF0ZTtcbmxldCBjYmxhc3RvcmRlcmJhc2Vjb21wb25lbnRza3U7XG5sZXQgY2JsYXN0b3JkZXJzdGF0dXM7XG5sZXQgY2JsYXN0b3JkZXI7XG5sZXQgY2JuZXh0b3JkZXJkYXRlO1xubGV0IGNibmV4dG9yZGVyYmFzZWNvbXBvbmVudHNrdTtcbmxldCBjYm5leHRvcmRlcnN0YXR1cztcbmxldCBjYm5leHRvcmRlcjtcbmxldCBteU9yZGVyO1xuaWYgKHN0ZXBzLkh1YkRhdGEub3JkZXIgIT09IHVuZGVmaW5lZCkge1xuICAgIGxldCBvcmRlckJlZm9yZSA9IHN0ZXBzLkh1YkRhdGEub3JkZXIuYmVmb3JlO1xuICAgICBteU9yZGVyID0gb3JkZXJCZWZvcmU7XG4gICAgaWYgKG9yZGVyQmVmb3JlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKG9yZGVyQmVmb3JlLm9yZGVyX2RhdGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY2JsYXN0b3JkZXJkYXRlID0gZ2V0TnVtYmVyKG9yZGVyQmVmb3JlLm9yZGVyX2RhdGUpICogMTAwMDtcbiAgICAgICAgfVxuICAgICAgICBjYmxhc3RvcmRlcmJhc2Vjb21wb25lbnRza3UgPSBvcmRlckJlZm9yZS5za3U7XG4gICAgICAgIGNibGFzdG9yZGVyc3RhdHVzID0gb3JkZXJCZWZvcmUuc3RhdHVzO1xuICAgICAgICBjYmxhc3RvcmRlciA9IGdldE51bWJlcihvcmRlckJlZm9yZS50b3RhbCk7XG4gICAgfVxuXG5cbiAgICBsZXQgb3JkZXJBZnRlciA9IHN0ZXBzLkh1YkRhdGEub3JkZXIuYWZ0ZXI7XG4gICAgaWYgKG9yZGVyQWZ0ZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAob3JkZXJBZnRlci5vcmRlcl9kYXRlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNibmV4dG9yZGVyZGF0ZSA9IGdldE51bWJlcihvcmRlckFmdGVyLm9yZGVyX2RhdGUpICogMTAwMDtcbiAgICAgICAgfVxuICAgICAgICBjYm5leHRvcmRlcmJhc2Vjb21wb25lbnRza3UgPSBvcmRlckFmdGVyLnNrdTtcbiAgICAgICAgY2JuZXh0b3JkZXJzdGF0dXMgPSBvcmRlckFmdGVyLnN0YXR1cztcbiAgICAgICAgY2JuZXh0b3JkZXIgPSBnZXROdW1iZXIob3JkZXJBZnRlci50b3RhbCk7XG4gICAgfVxuXG59XG5cbnNldEhEYXRhKGhEYXRhLCAnbGFzdG9yZGVyZGF0ZScsIGNibGFzdG9yZGVyZGF0ZSk7XG5zZXRIRGF0YShoRGF0YSwgJ2xhc3RvcmRlcmJhc2Vjb21wb25lbnRza3UnLCBjYmxhc3RvcmRlcmJhc2Vjb21wb25lbnRza3UpO1xuc2V0SERhdGEoaERhdGEsICdsYXN0b3JkZXJzdGF0dXMnLCBjYmxhc3RvcmRlcnN0YXR1cyk7XG5zZXRIRGF0YShoRGF0YSwgJ2xhc3RvcmRlcicsIGNibGFzdG9yZGVyKTtcbnNldEhEYXRhKGhEYXRhLCAnbmV4dG9yZGVyZGF0ZScsIGNibmV4dG9yZGVyZGF0ZSk7XG5zZXRIRGF0YShoRGF0YSwgJ25leHRvcmRlcmJhc2Vjb21wb25lbnRza3UnLCBjYm5leHRvcmRlcmJhc2Vjb21wb25lbnRza3UpO1xuc2V0SERhdGEoaERhdGEsICduZXh0b3JkZXJzdGF0dXMnLCBjYm5leHRvcmRlcnN0YXR1cyk7XG5zZXRIRGF0YShoRGF0YSwgJ25leHRvcmRlcicsIGNibmV4dG9yZGVyKTtcblxuXG5sZXQgY2JpbnZvaWNlYW1vdW50cGFpZDtcbmxldCBjYmludm9pY2Vlc3RpbWF0ZTtcbmlmIChzdGVwcy5IdWJEYXRhLmludm9pY2UgIT09IHVuZGVmaW5lZCkge1xuICAgIGNiaW52b2ljZWFtb3VudHBhaWQgPSBnZXROdW1iZXIoc3RlcHMuSHViRGF0YS5pbnZvaWNlLnRvdGFsKTtcbiAgICBjYmludm9pY2Vlc3RpbWF0ZSA9IGdldE51bWJlcihzdGVwcy5IdWJEYXRhLmludm9pY2UuZXN0aW1hdGUpO1xufVxuXG5zdGVwcy5IdWJEYXRhLmNNZXRyaWNzLmludm9pY2VhbW91bnRwYWlkID0gY2JpbnZvaWNlYW1vdW50cGFpZDtcblxuc2V0SERhdGEoaERhdGEsICdpbnZvaWNlYW1vdW50cGFpZCcsIGNiaW52b2ljZWFtb3VudHBhaWQpO1xuc2V0SERhdGEoaERhdGEsICduZXh0YmlsbGluZ2Ftb3VudCcsIGNiaW52b2ljZWVzdGltYXRlKTtcblxuLy9jdXN0b21cbmxldCBzeW5jUnVsZXNGaWVsZHMgPSBzdGVwcy5DaGFyZ2ViZWVDb25maWdQYXJhbXMucmVzcG9uc2UuYm9keS50aGlyZF9wYXJ0eV9jb25maWd1cmF0aW9uLmNvbmZpZ19qc29uLmNsb3VkRWxlbWVudHMuc3luY1J1bGVzRmllbGRzO1xuICAgIGlmIChzeW5jUnVsZXNGaWVsZHMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBzeW5jUnVsZXNGaWVsZHMgPSB7XG4gICAgICAgICAgICBcJ2NvbXBhbnlcJzoge1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCdjb250YWN0XCc6IHtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwnZGVhbFwnOiB7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCdzeW5jXCc6IFwnZmFsc2VcJ1xuICAgICAgICB9O1xuXG4gICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHN5bmNSdWxlc0ZpZWxkcy5jb21wYW55ID09PSB1bmRlZmluZWQgfHwgc3luY1J1bGVzRmllbGRzLmNvbXBhbnkgPT09IFwnXCcpIHtcbiAgICAgICAgICAgIHN5bmNSdWxlc0ZpZWxkcy5jb21wYW55ID0ge307XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN5bmNSdWxlc0ZpZWxkcy5jb250YWN0ID09PSB1bmRlZmluZWQgfHwgc3luY1J1bGVzRmllbGRzLmNvbnRhY3QgPT09IFwnXCcpIHtcbiAgICAgICAgICAgIHN5bmNSdWxlc0ZpZWxkcy5jb250YWN0ID0ge307XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN5bmNSdWxlc0ZpZWxkcy5kZWFsID09PSB1bmRlZmluZWQgfHwgc3luY1J1bGVzRmllbGRzLmRlYWwgPT09IFwnXCcpIHtcbiAgICAgICAgICAgIHN5bmNSdWxlc0ZpZWxkcy5kZWFsID0ge307XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3luY1J1bGVzRmllbGRzID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShzeW5jUnVsZXNGaWVsZHMpKTtcbiAgICBsZXQgY29tcGFueUtleXMgPSBPYmplY3Qua2V5cyhzeW5jUnVsZXNGaWVsZHMuY29tcGFueSk7XG5cbmZvciAodmFyIGkgPSAwOyBpIDxzcGFuPjw8L3NwYW4+IGNvbXBhbnlLZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgc3luY1J1bGVzRmllbGRzLmNvbnRhY3RbY29tcGFueUtleXNbaV1dID0gc3luY1J1bGVzRmllbGRzLmNvbXBhbnlbY29tcGFueUtleXNbaV1dO1xufVxuXG5cbmxldCBjdXN0b21lZmllbGRzID0gc3RlcHMuU3luY0xvZy5jdXN0b21lZmllbGRzO1xuZm9yICh2YXIgaSA9IDA7IGkgPHNwYW4+PDwvc3Bhbj4gY3VzdG9tZWZpZWxkcy5sZW5ndGg7IGkrKykge1xuICAgIGxldCBmbGQgPSBjdXN0b21lZmllbGRzW2ldO1xuXG4gICAgZm9yICh2YXIgaiA9IDA7IGogPHNwYW4+PDwvc3Bhbj4gZmxkLmZpZWxkcy5sZW5ndGg7IGorKykge1xuICAgICAgICB2YXIgZXMgPSBmbGQuZmllbGRzW2pdO1xuICAgICAgICB2YXIgZGVzYyA9IGZsZC5sYWJlbCArIFwnIFwnICsgZXNbMF0ucmVwbGFjZSgvXy9nLCBcJyBcJyk7XG4gICAgICAgIHZhciBpZCA9IGZsZC5rZXkgKyBcJ19cJyArIGVzWzBdO1xuICAgICAgICBpZihzeW5jUnVsZXNGaWVsZHMuY29udGFjdFtpZF0gIT09dW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBzeW5jUnVsZXNGaWVsZHMuY29udGFjdFtpZF0gPSBlcztcbiAgICAgICAgfVxuICAgIH1cbn1cbmxldCBjdXN0b21LZXlzID0gT2JqZWN0LmtleXMoc3luY1J1bGVzRmllbGRzLmNvbnRhY3QpO1xuZm9yKHZhciBpPTA7aTxzcGFuPjw8L3NwYW4+Y3VzdG9tS2V5cy5sZW5ndGg7aSsrKXtcbiAgdmFyIGNLZXkgPSBjdXN0b21LZXlzW2ldO1xuICB2YXIgY1ZhbCA9IHN5bmNSdWxlc0ZpZWxkcy5jb250YWN0W2NLZXldO1xuICAgbGV0IHN1YlZhbDtcbiAgaWYoY0tleS5zdGFydHNXaXRoKFwnc3ViY3N0XCcpKXtcbiAgICBpZihzdWJzY3JpcHRpb24gIT09IHVuZGVmaW5lZCl7XG4gICAgc3ViVmFsID0gc3Vic2NyaXB0aW9uW2NWYWxbMF1dO1xuICAgIH1cbiAgfWVsc2UgaWYoY0tleS5zdGFydHNXaXRoKFwnb3JkZXJjc3RcJykpe1xuICAgIGlmKG15T3JkZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgc3ViVmFsID0gbXlPcmRlcltjVmFsWzBdXTtcbiAgICB9XG4gICAgXG4gIH0gZWxzZSBpZihjS2V5LnN0YXJ0c1dpdGgoXCdjdXN0Y3N0XCcpKXtcbiAgICAgaWYoY3VzdG9tZXIgIT09IHVuZGVmaW5lZCl7XG4gICAgICAgc3ViVmFsID0gY3VzdG9tZXJbY1ZhbFswXV07XG4gICAgfVxuICB9XG5pZiAoY1ZhbFsxXSA9PT0gXCdudW1iZXJcJykge1xuICAgIHN1YlZhbCA9IGdldE51bWJlcihzdWJWYWwpO1xuICAgIHNldEhEYXRhKGhEYXRhLCBjS2V5LCBzdWJWYWwpO1xuICAgIGlmIChjVmFsLmxlbmd0aCA9PSA0KSB7XG4gICAgICAgIHByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCBjS2V5LCB0cnVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBwcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgY0tleSk7XG4gICAgfVxuICAgIHN0ZXBzLkh1YkRhdGEuY01ldHJpY3NbY0tleV0gPSBzdWJWYWw7XG59IGVsc2UgaWYgKGNWYWxbMV0gPT09IFwnZGF0ZXRpbWVcJykge1xuICBpZihzdWJWYWwgIT09IHVuZGVmaW5lZCkge1xuICAgICBzdWJWYWwgPSBnZXROdW1iZXIoc3ViVmFsKSAqIDEwMDA7XG4gICAgc2V0SERhdGEoaERhdGEsIGNLZXksIHN1YlZhbCk7XG4gICAgcHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsIGNLZXkpO1xuICB9XG4gICBcblxufSBlbHNlIHtcbiAgICBpZiAoc3ViVmFsID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgc3ViVmFsID0gXCdcJztcblxuICAgIH1cbiAgICBzZXRIRGF0YShoRGF0YSwgY0tleSwgc3ViVmFsKTtcbiAgICBwcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgY0tleSk7XG59XG4gIFxuICBcbn1cbi8vY3VzdG9tXG5cblxuXG5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ2ZpcnN0bmFtZScpO1xucHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdlbWFpbCcpO1xucHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdsYXN0bmFtZScpO1xucHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdwaG9uZScpO1xucHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdjb21wYW55Jyk7XG5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ2JpbGxpbmdhZGRyZXNzJyk7XG5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ2JpbGxpbmdzdGF0ZScpO1xucHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdiaWxsaW5nY2l0eScpO1xucHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdiaWxsaW5nY291bnRyeScpO1xucHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdiaWxsaW5nemlwJyk7XG5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ2F1dG9jb2xsZWN0aW9uJyk7XG5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ3ByZWZlcnJlZGN1cnJlbmN5Y29kZScpO1xucHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdwYXltZW50bWV0aG9kc3RhdHVzJyk7XG5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ3BheW1lbnRtZXRob2R0eXBlJyk7XG5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ25ldHRlcm1kYXlzJyk7XG5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ3RheGV4ZW1wdHN0YXR1cycpO1xucHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdjaGFyZ2ViZWVjdXN0b21lcmlkJyk7XG5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ3N1YnNjcmlwdGlvbmlkJyk7XG5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ3N1YnNjcmlwdGlvc3RhdHVzJyk7XG5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ3Byb2R1Y3QnKTtcbnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAncGxhbnF1YW50aXR5Jyk7XG5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ3NldHVwZmVlJywgdHJ1ZSk7XG5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ2R1ZWludm9pY2VzY291bnQnKTtcbnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAncmVtYWluaW5nYmlsbGluZ2N5Y2xlcycpO1xucHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdwb251bWJlcicpO1xucHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICduZXh0YmlsbGluZ2F0Jyk7XG5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ3RvdGFsZHVlcycsIHRydWUpO1xucHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdkdWVzaW5jZScpO1xucHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdzdWJzY3JpcHRpb25tcnInLCB0cnVlKTtcbnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAnbGlmZWN5Y2xlc3RhZ2UnKTtcbnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAnbGFzdG9yZGVyZGF0ZScpO1xucHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdsYXN0b3JkZXJiYXNlY29tcG9uZW50c2t1Jyk7XG5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ2xhc3RvcmRlcnN0YXR1cycpO1xucHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdsYXN0b3JkZXInLCB0cnVlKTtcbnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAnbmV4dG9yZGVyZGF0ZScpO1xucHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICduZXh0b3JkZXJiYXNlY29tcG9uZW50c2t1Jyk7XG5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ25leHRvcmRlcnN0YXR1cycpO1xucHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICduZXh0b3JkZXInLCB0cnVlKTtcbnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAnaW52b2ljZWFtb3VudHBhaWQnLCB0cnVlKTtcbnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAnbmV4dGJpbGxpbmdhbW91bnQnLCB0cnVlKTtcblxuc3RlcHMuSHViU3BvdElucHV0LmlucHV0cy5wcm9wZXJ0aWVzID0gcHJvcGVydGllcztcblxubGV0IGdmZyA9IHtcbiAgICBwcm9wZXJ0aWVzOiBwcm9wZXJ0aWVzLFxuICAgIG1ldHJpY3M6IHN0ZXBzLkh1YkRhdGEuY01ldHJpY3MsXG4gICAgaERhdGE6IGhEYXRhXG59XG5cbmRvbmUoZ2ZnKTsnPGJyPiAgfTxicj59PC9wcmU+PC9ib2R5PjwvaHRtbD4='));document.close();" "JavaScript:<br><pre>let customer = steps.HubData.customer;<br>let subscription = steps.HubData.subscription;<br>let syncRulesContacts = steps.CustomersParam.syncRulesContacts;<br>steps.HubSpotInput.url = 'https://api.hubapi.com/contacts/v1/contact';<br>let properties = [];<br>function updateProperties(properties, hData, key, isCurrency) {<br>    let val = hData[key];<br>    if (val !== undefined) {<br>        if (isCurrency) {<br>            val = parseFloat(parseInt(val, 10) / 100).toFixed(2);<br>        }<br>        properties.push({<br>            'property': key,<br>            'value': val<br>        });<br>    }<br>    return properties;<br>}<br>function setHData(hData, key, value) {<br>    hData[key] = value;<br>}<br>function getNumber(val) {<br>    if (val === undefined) {<br>        return 0;<br>    }<br>    let num = Number(val);<br>    if (isNaN(num)) {<br>        return 0;<br>    }<br>    return num;<br>}<br><br>let hData = {<br><br>};<br><br><br><br><br>let cbbillingaddress;<br>let cbState;<br>let cbCity;<br>let cbCountry;<br>let cbZip;<br>let cbpayment_method_status;<br>let cbpaymentmethodtype;<br><br>if (customer.billing_address !== undefined) {<br>    cbbillingaddress = '';<br>    if (customer.billing_address.line1 !== undefined) {<br>        cbbillingaddress = cbbillingaddress + customer.billing_address.line1;<br>    }<br>    if (customer.billing_address.line2 !== undefined) {<br>        cbbillingaddress = cbbillingaddress + ' ' + customer.billing_address.line2;<br>    }<br>    if (customer.billing_address.line3 !== undefined) {<br>        cbbillingaddress = cbbillingaddress + ' ' + customer.billing_address.line3;<br>    }<br>    if (cbbillingaddress === '') {<br>        cbbillingaddress = undefined;<br>    }<br>    cbState = customer.billing_address.state;<br>    cbCity = customer.billing_address.city;<br>    cbCountry = customer.billing_address.country;<br>    cbZip = customer.billing_address.zip;<br>}<br><br>if (customer.payment_method !== undefined ) {<br>    cbpayment_method_status = customer.payment_method.status;<br>    cbpaymentmethodtype = customer.payment_method.type;<br>}<br><br>setHData(hData, 'email', customer.email);<br>setHData(hData, 'chargebeecustomerid', customer.id);<br>setHData(hData, 'firstname', customer.first_name);<br>setHData(hData, 'lastname', customer.last_name);<br>setHData(hData, 'phone', customer.phone);<br>setHData(hData, 'company', customer.company);<br>setHData(hData, 'billingaddress', cbbillingaddress);<br>setHData(hData, 'billingstate', cbState);<br>setHData(hData, 'billingcity', cbCity);<br>setHData(hData, 'billingcountry', cbCountry);<br>setHData(hData, 'billingzip', cbZip);<br>setHData(hData, 'autocollection', customer.auto_collection);<br>setHData(hData, 'preferredcurrencycode', customer.preferred_currency_code);<br>setHData(hData, 'paymentmethodstatus', cbpayment_method_status);<br>setHData(hData, 'paymentmethodtype', cbpaymentmethodtype);<br>setHData(hData, 'nettermdays', customer.net_term_days);<br>setHData(hData, 'taxexemptstatus', customer.taxability);<br><br><br>let cbcurrency;<br>let cbsubscriptionid;<br>let cbsubscriptiostatus;<br>let cbproduct;<br>let cbplanquantity;<br>let cbsetupfee;<br>let cbdueinvoicescount;<br>let cbremainingbillingcycles;<br>let cbponumber;<br>let cbnextbillingat;<br>let cbtotaldues;<br>let cbduesince;<br>let cbsubscriptionmrr;<br>if (subscription !== undefined) {<br>    cbcurrency = subscription.currency_code;<br>    cbsubscriptionid = subscription.id;<br>    cbsubscriptiostatus = subscription.status;<br>    cbproduct = subscription.plan_id;<br>    cbplanquantity = subscription.plan_quantity;<br>    cbsetupfee = getNumber(subscription.setup_fee);<br>    cbdueinvoicescount = getNumber(subscription.due_invoices_count);<br>    cbremainingbillingcycles = subscription.remaining_billing_cycles;<br>    cbponumber = subscription.po_number;<br>    if(subscription.next_billing_at !== undefined) {<br>      cbnextbillingat = getNumber(subscription.next_billing_at) * 1000;<br>    }<br>    <br>    cbtotaldues = getNumber(subscription.total_dues);<br>    if(subscription.due_since !== undefined) {<br>       cbduesince = getNumber(subscription.due_since) * 1000;<br>    }<br>   <br>    cbsubscriptionmrr = getNumber(subscription.mrr);<br>}<br><br><br>let nLifecyclestage;<br><br><br>if (cbsubscriptiostatus === 'cancelled') {<br>    if (syncRulesContacts.LifecycleStage.CanceledSubscription !== undefined && syncRulesContacts.LifecycleStage.CanceledSubscription !== 'select') {<br>        nLifecyclestage = syncRulesContacts.LifecycleStage.CanceledSubscription;<br>    }<br><br>} else if (cbsubscriptiostatus === 'active') {<br>    if (syncRulesContacts.LifecycleStage.ActiveSubscription !== undefined && syncRulesContacts.LifecycleStage.ActiveSubscription !== 'select') {<br>        nLifecyclestage = syncRulesContacts.LifecycleStage.ActiveSubscription;<br>    }<br><br>} else if (cbsubscriptiostatus === 'in_trial') {<br>    if (syncRulesContacts.LifecycleStage.TrialSubscription !== undefined && syncRulesContacts.LifecycleStage.TrialSubscription !== 'select') {<br>        nLifecyclestage = syncRulesContacts.LifecycleStage.TrialSubscription;<br>    }<br>} else if (cbsubscriptiostatus === undefined) {<br>    if (syncRulesContacts.LifecycleStage.NoSubscription !== undefined && syncRulesContacts.LifecycleStage.NoSubscription !== 'select') {<br>        nLifecyclestage = syncRulesContacts.LifecycleStage.NoSubscription;<br>    }<br>}<br><br>setHData(hData, 'currencycode', cbcurrency);<br>setHData(hData, 'lifecyclestage', nLifecyclestage);<br>setHData(hData, 'subscriptionid', cbsubscriptionid);<br>setHData(hData, 'subscriptiostatus', cbsubscriptiostatus);<br>setHData(hData, 'product', cbproduct);<br>setHData(hData, 'planquantity', cbplanquantity);<br>setHData(hData, 'remainingbillingcycles', cbremainingbillingcycles);<br>setHData(hData, 'ponumber', cbponumber);<br>setHData(hData, 'nextbillingat', cbnextbillingat);<br>setHData(hData, 'duesince', cbduesince);<br><br>steps.HubData.cMetrics = {<br>    subscriptionmrr: cbsubscriptionmrr,<br>    totaldues: cbtotaldues,<br>    dueinvoicescount: cbdueinvoicescount,<br>    subscriptionid: cbsubscriptionid,<br>    op: 'create'<br>    //invoiceamountpaid: cMetricsInvoiceamountpaid,<br>};<br>setHData(hData, 'dueinvoicescount', cbdueinvoicescount);<br>setHData(hData, 'totaldues', cbtotaldues);<br>setHData(hData, 'setupfee', cbsetupfee);<br>setHData(hData, 'subscriptionmrr', cbsubscriptionmrr);<br><br><br><br>let cblastorderdate;<br>let cblastorderbasecomponentsku;<br>let cblastorderstatus;<br>let cblastorder;<br>let cbnextorderdate;<br>let cbnextorderbasecomponentsku;<br>let cbnextorderstatus;<br>let cbnextorder;<br>let myOrder;<br>if (steps.HubData.order !== undefined) {<br>    let orderBefore = steps.HubData.order.before;<br>     myOrder = orderBefore;<br>    if (orderBefore !== undefined) {<br>        if (orderBefore.order_date !== undefined) {<br>            cblastorderdate = getNumber(orderBefore.order_date) * 1000;<br>        }<br>        cblastorderbasecomponentsku = orderBefore.sku;<br>        cblastorderstatus = orderBefore.status;<br>        cblastorder = getNumber(orderBefore.total);<br>    }<br><br><br>    let orderAfter = steps.HubData.order.after;<br>    if (orderAfter !== undefined) {<br>        if (orderAfter.order_date !== undefined) {<br>            cbnextorderdate = getNumber(orderAfter.order_date) * 1000;<br>        }<br>        cbnextorderbasecomponentsku = orderAfter.sku;<br>        cbnextorderstatus = orderAfter.status;<br>        cbnextorder = getNumber(orderAfter.total);<br>    }<br><br>}<br><br>setHData(hData, 'lastorderdate', cblastorderdate);<br>setHData(hData, 'lastorderbasecomponentsku', cblastorderbasecomponentsku);<br>setHData(hData, 'lastorderstatus', cblastorderstatus);<br>setHData(hData, 'lastorder', cblastorder);<br>setHData(hData, 'nextorderdate', cbnextorderdate);<br>setHData(hData, 'nextorderbasecomponentsku', cbnextorderbasecomponentsku);<br>setHData(hData, 'nextorderstatus', cbnextorderstatus);<br>setHData(hData, 'nextorder', cbnextorder);<br><br><br>let cbinvoiceamountpaid;<br>let cbinvoiceestimate;<br>if (steps.HubData.invoice !== undefined) {<br>    cbinvoiceamountpaid = getNumber(steps.HubData.invoice.total);<br>    cbinvoiceestimate = getNumber(steps.HubData.invoice.estimate);<br>}<br><br>steps.HubData.cMetrics.invoiceamountpaid = cbinvoiceamountpaid;<br><br>setHData(hData, 'invoiceamountpaid', cbinvoiceamountpaid);<br>setHData(hData, 'nextbillingamount', cbinvoiceestimate);<br><br>//custom<br>let syncRulesFields = steps.ChargebeeConfigParams.response.body.third_party_configuration.config_json.cloudElements.syncRulesFields;<br>    if (syncRulesFields === undefined) {<br>        syncRulesFields = {<br>            'company': {<br><br>            },<br>            'contact': {<br><br>            },<br>            'deal': {<br>            },<br>            'sync': 'false'<br>        };<br><br>    } else {<br>        if (syncRulesFields.company === undefined || syncRulesFields.company === '') {<br>            syncRulesFields.company = {};<br>        }<br>        if (syncRulesFields.contact === undefined || syncRulesFields.contact === '') {<br>            syncRulesFields.contact = {};<br>        }<br>        if (syncRulesFields.deal === undefined || syncRulesFields.deal === '') {<br>            syncRulesFields.deal = {};<br>        }<br>    }<br>    syncRulesFields = JSON.parse(JSON.stringify(syncRulesFields));<br>    let companyKeys = Object.keys(syncRulesFields.company);<br><br>for (var i = 0; i <span><</span> companyKeys.length; i++) {<br>    syncRulesFields.contact[companyKeys[i]] = syncRulesFields.company[companyKeys[i]];<br>}<br><br><br>let customefields = steps.SyncLog.customefields;<br>for (var i = 0; i <span><</span> customefields.length; i++) {<br>    let fld = customefields[i];<br><br>    for (var j = 0; j <span><</span> fld.fields.length; j++) {<br>        var es = fld.fields[j];<br>        var desc = fld.label + ' ' + es[0].replace(/_/g, ' ');<br>        var id = fld.key + '_' + es[0];<br>        if(syncRulesFields.contact[id] !==undefined) {<br>            syncRulesFields.contact[id] = es;<br>        }<br>    }<br>}<br>let customKeys = Object.keys(syncRulesFields.contact);<br>for(var i=0;i<span><</span>customKeys.length;i++){<br>  var cKey = customKeys[i];<br>  var cVal = syncRulesFields.contact[cKey];<br>   let subVal;<br>  if(cKey.startsWith('subcst')){<br>    if(subscription !== undefined){<br>    subVal = subscription[cVal[0]];<br>    }<br>  }else if(cKey.startsWith('ordercst')){<br>    if(myOrder !== undefined) {<br>      subVal = myOrder[cVal[0]];<br>    }<br>    <br>  } else if(cKey.startsWith('custcst')){<br>     if(customer !== undefined){<br>       subVal = customer[cVal[0]];<br>    }<br>  }<br>if (cVal[1] === 'number') {<br>    subVal = getNumber(subVal);<br>    setHData(hData, cKey, subVal);<br>    if (cVal.length == 4) {<br>        properties = updateProperties(properties, hData, cKey, true);<br>    } else {<br>        properties = updateProperties(properties, hData, cKey);<br>    }<br>    steps.HubData.cMetrics[cKey] = subVal;<br>} else if (cVal[1] === 'datetime') {<br>  if(subVal !== undefined) {<br>     subVal = getNumber(subVal) * 1000;<br>    setHData(hData, cKey, subVal);<br>    properties = updateProperties(properties, hData, cKey);<br>  }<br>   <br><br>} else {<br>    if (subVal === undefined) {<br>        subVal = '';<br><br>    }<br>    setHData(hData, cKey, subVal);<br>    properties = updateProperties(properties, hData, cKey);<br>}<br>  <br>  <br>}<br>//custom<br><br><br><br>properties = updateProperties(properties, hData, 'firstname');<br>properties = updateProperties(properties, hData, 'email');<br>properties = updateProperties(properties, hData, 'lastname');<br>properties = updateProperties(properties, hData, 'phone');<br>properties = updateProperties(properties, hData, 'company');<br>properties = updateProperties(properties, hData, 'billingaddress');<br>properties = updateProperties(properties, hData, 'billingstate');<br>properties = updateProperties(properties, hData, 'billingcity');<br>properties = updateProperties(properties, hData, 'billingcountry');<br>properties = updateProperties(properties, hData, 'billingzip');<br>properties = updateProperties(properties, hData, 'autocollection');<br>properties = updateProperties(properties, hData, 'preferredcurrencycode');<br>properties = updateProperties(properties, hData, 'paymentmethodstatus');<br>properties = updateProperties(properties, hData, 'paymentmethodtype');<br>properties = updateProperties(properties, hData, 'nettermdays');<br>properties = updateProperties(properties, hData, 'taxexemptstatus');<br>properties = updateProperties(properties, hData, 'chargebeecustomerid');<br>properties = updateProperties(properties, hData, 'subscriptionid');<br>properties = updateProperties(properties, hData, 'subscriptiostatus');<br>properties = updateProperties(properties, hData, 'product');<br>properties = updateProperties(properties, hData, 'planquantity');<br>properties = updateProperties(properties, hData, 'setupfee', true);<br>properties = updateProperties(properties, hData, 'dueinvoicescount');<br>properties = updateProperties(properties, hData, 'remainingbillingcycles');<br>properties = updateProperties(properties, hData, 'ponumber');<br>properties = updateProperties(properties, hData, 'nextbillingat');<br>properties = updateProperties(properties, hData, 'totaldues', true);<br>properties = updateProperties(properties, hData, 'duesince');<br>properties = updateProperties(properties, hData, 'subscriptionmrr', true);<br>properties = updateProperties(properties, hData, 'lifecyclestage');<br>properties = updateProperties(properties, hData, 'lastorderdate');<br>properties = updateProperties(properties, hData, 'lastorderbasecomponentsku');<br>properties = updateProperties(properties, hData, 'lastorderstatus');<br>properties = updateProperties(properties, hData, 'lastorder', true);<br>properties = updateProperties(properties, hData, 'nextorderdate');<br>properties = updateProperties(properties, hData, 'nextorderbasecomponentsku');<br>properties = updateProperties(properties, hData, 'nextorderstatus');<br>properties = updateProperties(properties, hData, 'nextorder', true);<br>properties = updateProperties(properties, hData, 'invoiceamountpaid', true);<br>properties = updateProperties(properties, hData, 'nextbillingamount', true);<br><br>steps.HubSpotInput.inputs.properties = properties;<br><br>let gfg = {<br>    properties: properties,<br>    metrics: steps.HubData.cMetrics,<br>    hData: hData<br>}<br><br>done(gfg);</pre>"
            click step-035 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPlByZXBhcmVVcGRhdGVJbnB1dDwvdGl0bGU+PC9oZWFkPjxib2R5PjxiPkphdmFTY3JpcHQ6PC9iPjxicj48YnI+PHByZT5sZXQgY3VzdG9tZXIgPSBzdGVwcy5IdWJEYXRhLmN1c3RvbWVyOzxicj5sZXQgc3Vic2NyaXB0aW9uID0gc3RlcHMuSHViRGF0YS5zdWJzY3JpcHRpb247PGJyPmxldCBzeW5jUnVsZXNDb250YWN0cyA9IHN0ZXBzLkN1c3RvbWVyc1BhcmFtLnN5bmNSdWxlc0NvbnRhY3RzOzxicj5sZXQgY29udGFjdCA9IHN0ZXBzLkNCRGF0YS5odWJzcG90LmNvbnRhY3Q7PGJyPnN0ZXBzLkh1YlNwb3RJbnB1dC51cmwgPSAnaHR0cHM6Ly9hcGkuaHViYXBpLmNvbS9jb250YWN0cy92MS9jb250YWN0L3ZpZC8nICsgY29udGFjdC52aWQgKyAnL3Byb2ZpbGUnOzxicj48YnI+bGV0IGhDb250YWN0ID0gY29udGFjdC5wcm9wZXJ0aWVzOzxicj5sZXQgb3ZlcnJpZGUgPSBzeW5jUnVsZXNDb250YWN0cy5IdWJTcG90Q29udGFjdE1hdGNoID09PSAnT3ZlcnJpZGVfdGhlX2ZpZWxkcyc7PGJyPmxldCBwcm9wZXJ0aWVzID0gW107PGJyPmZ1bmN0aW9uIHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsIGtleSwgaXNDdXJyZW5jeSkgezxicj4gICAgbGV0IHZhbCA9IGhEYXRhW2tleV07PGJyPiAgICBpZiAodmFsICE9PSB1bmRlZmluZWQpIHs8YnI+ICAgICAgICBpZiAoaXNDdXJyZW5jeSkgezxicj4gICAgICAgICAgICB2YWwgPSBwYXJzZUZsb2F0KHBhcnNlSW50KHZhbCwgMTApIC8gMTAwKS50b0ZpeGVkKDIpOzxicj4gICAgICAgIH08YnI+ICAgICAgICBwcm9wZXJ0aWVzLnB1c2goezxicj4gICAgICAgICAgICAncHJvcGVydHknOiBrZXksPGJyPiAgICAgICAgICAgICd2YWx1ZSc6IHZhbDxicj4gICAgICAgIH0pOzxicj4gICAgfTxicj4gICAgcmV0dXJuIHByb3BlcnRpZXM7PGJyPn08YnI+ZnVuY3Rpb24gdXBkYXRlRGF0YShkLCBoQ29udGFjdCwga2V5LCBpc051bSwgaXNDdXJyKSB7PGJyPiAgICBpZiAoaENvbnRhY3Rba2V5XSAhPT0gdW5kZWZpbmVkKSB7PGJyPiAgICAgICAgZFtrZXldID0gaENvbnRhY3Rba2V5XS52YWx1ZTs8YnI+ICAgICAgICBpZiAoaXNOdW0pIHs8YnI+ICAgICAgICAgICAgbGV0IGRmID0gTnVtYmVyKGRba2V5XSk7PGJyPiAgICAgICAgICAgIGlmIChpc05hTihkZikpIHs8YnI+ICAgICAgICAgICAgICAgIGRmID0gMDs8YnI+ICAgICAgICAgICAgfTxicj4gICAgICAgICAgICBpZiAoaXNDdXJyKSB7PGJyPiAgICAgICAgICAgICAgICBkW2tleV0gPSBkZiAqIDEwMDs8YnI+ICAgICAgICAgICAgfSBlbHNlIHs8YnI+ICAgICAgICAgICAgICAgIGRba2V5XSA9IGRmOzxicj4gICAgICAgICAgICB9PGJyPjxicj48YnI+ICAgICAgICB9PGJyPiAgICB9PGJyPiAgICByZXR1cm4gZDs8YnI+fTxicj5mdW5jdGlvbiBzZXRIRGF0YShoRGF0YSwga2V5LCB2YWx1ZSwgZmxhZykgezxicj4gICAgaWYgKGZsYWcpIHs8YnI+ICAgICAgICBoRGF0YVtrZXldID0gdmFsdWU7PGJyPiAgICB9IGVsc2Ugezxicj4gICAgICAgIGlmIChoRGF0YVtrZXldID09PSB1bmRlZmluZWQgfHwgaERhdGFba2V5XSA9PT0gMCkgezxicj4gICAgICAgICAgICBoRGF0YVtrZXldID0gdmFsdWU7PGJyPiAgICAgICAgfSBlbHNlIHs8YnI+ICAgICAgICAgICAgaERhdGFba2V5XSA9IHVuZGVmaW5lZDs8YnI+ICAgICAgICB9PGJyPiAgICB9PGJyPn08YnI+ZnVuY3Rpb24gZ2V0TnVtYmVyKHZhbCkgezxicj4gICAgaWYgKHZhbCA9PT0gdW5kZWZpbmVkKSB7PGJyPiAgICAgICAgcmV0dXJuIDA7PGJyPiAgICB9PGJyPiAgICBsZXQgbnVtID0gTnVtYmVyKHZhbCk7PGJyPiAgICBpZiAoaXNOYU4obnVtKSkgezxicj4gICAgICAgIHJldHVybiAwOzxicj4gICAgfTxicj4gICAgcmV0dXJuIG51bTs8YnI+fTxicj48YnI+ZnVuY3Rpb24gZm9ybWF0Q3VycmVuY3koaERhdGEsIGtleSkgezxicj48YnI+ICAgIHJldHVybiBoRGF0YTs8YnI+fTxicj5sZXQgaERhdGEgPSB7PGJyPjxicj59Ozxicj5oRGF0YSA9IHVwZGF0ZURhdGEoaERhdGEsIGhDb250YWN0LCAnZmlyc3RuYW1lJyk7PGJyPi8vaERhdGEgPSB1cGRhdGVEYXRhKGhEYXRhLCBoQ29udGFjdCwgJ2VtYWlsJyk7PGJyPmhEYXRhID0gdXBkYXRlRGF0YShoRGF0YSwgaENvbnRhY3QsICdsYXN0bmFtZScpOzxicj5oRGF0YSA9IHVwZGF0ZURhdGEoaERhdGEsIGhDb250YWN0LCAncGhvbmUnKTs8YnI+aERhdGEgPSB1cGRhdGVEYXRhKGhEYXRhLCBoQ29udGFjdCwgJ2NvbXBhbnknKTs8YnI+aERhdGEgPSB1cGRhdGVEYXRhKGhEYXRhLCBoQ29udGFjdCwgJ2JpbGxpbmdhZGRyZXNzJyk7PGJyPmhEYXRhID0gdXBkYXRlRGF0YShoRGF0YSwgaENvbnRhY3QsICdiaWxsaW5nc3RhdGUnKTs8YnI+aERhdGEgPSB1cGRhdGVEYXRhKGhEYXRhLCBoQ29udGFjdCwgJ2JpbGxpbmdjaXR5Jyk7PGJyPmhEYXRhID0gdXBkYXRlRGF0YShoRGF0YSwgaENvbnRhY3QsICdiaWxsaW5nY291bnRyeScpOzxicj5oRGF0YSA9IHVwZGF0ZURhdGEoaERhdGEsIGhDb250YWN0LCAnYmlsbGluZ3ppcCcpOzxicj5oRGF0YSA9IHVwZGF0ZURhdGEoaERhdGEsIGhDb250YWN0LCAnYXV0b2NvbGxlY3Rpb24nKTs8YnI+aERhdGEgPSB1cGRhdGVEYXRhKGhEYXRhLCBoQ29udGFjdCwgJ3ByZWZlcnJlZGN1cnJlbmN5Y29kZScpOzxicj5oRGF0YSA9IHVwZGF0ZURhdGEoaERhdGEsIGhDb250YWN0LCAncGF5bWVudG1ldGhvZHN0YXR1cycpOzxicj5oRGF0YSA9IHVwZGF0ZURhdGEoaERhdGEsIGhDb250YWN0LCAncGF5bWVudG1ldGhvZHR5cGUnKTs8YnI+aERhdGEgPSB1cGRhdGVEYXRhKGhEYXRhLCBoQ29udGFjdCwgJ25ldHRlcm1kYXlzJyk7PGJyPmhEYXRhID0gdXBkYXRlRGF0YShoRGF0YSwgaENvbnRhY3QsICd0YXhleGVtcHRzdGF0dXMnKTs8YnI+aERhdGEgPSB1cGRhdGVEYXRhKGhEYXRhLCBoQ29udGFjdCwgJ2NoYXJnZWJlZWN1c3RvbWVyaWQnKTs8YnI+aERhdGEgPSB1cGRhdGVEYXRhKGhEYXRhLCBoQ29udGFjdCwgJ3N1YnNjcmlwdGlvbmlkJyk7PGJyPmhEYXRhID0gdXBkYXRlRGF0YShoRGF0YSwgaENvbnRhY3QsICdzdWJzY3JpcHRpb3N0YXR1cycpOzxicj5oRGF0YSA9IHVwZGF0ZURhdGEoaERhdGEsIGhDb250YWN0LCAncHJvZHVjdCcpOzxicj5oRGF0YSA9IHVwZGF0ZURhdGEoaERhdGEsIGhDb250YWN0LCAncGxhbnF1YW50aXR5Jyk7PGJyPmhEYXRhID0gdXBkYXRlRGF0YShoRGF0YSwgaENvbnRhY3QsICdzZXR1cGZlZScsIHRydWUsIHRydWUpOzxicj5oRGF0YSA9IHVwZGF0ZURhdGEoaERhdGEsIGhDb250YWN0LCAnZHVlaW52b2ljZXNjb3VudCcsIHRydWUsIGZhbHNlKTs8YnI+aERhdGEgPSB1cGRhdGVEYXRhKGhEYXRhLCBoQ29udGFjdCwgJ3JlbWFpbmluZ2JpbGxpbmdjeWNsZXMnKTs8YnI+aERhdGEgPSB1cGRhdGVEYXRhKGhEYXRhLCBoQ29udGFjdCwgJ3BvbnVtYmVyJyk7PGJyPmhEYXRhID0gdXBkYXRlRGF0YShoRGF0YSwgaENvbnRhY3QsICduZXh0YmlsbGluZ2F0Jyk7PGJyPmhEYXRhID0gdXBkYXRlRGF0YShoRGF0YSwgaENvbnRhY3QsICd0b3RhbGR1ZXMnLCB0cnVlLCB0cnVlKTs8YnI+aERhdGEgPSB1cGRhdGVEYXRhKGhEYXRhLCBoQ29udGFjdCwgJ2R1ZXNpbmNlJyk7PGJyPmhEYXRhID0gdXBkYXRlRGF0YShoRGF0YSwgaENvbnRhY3QsICdzdWJzY3JpcHRpb25tcnInLCB0cnVlLCB0cnVlKTs8YnI+aERhdGEgPSB1cGRhdGVEYXRhKGhEYXRhLCBoQ29udGFjdCwgJ2xpZmVjeWNsZXN0YWdlJyk7PGJyPmhEYXRhID0gdXBkYXRlRGF0YShoRGF0YSwgaENvbnRhY3QsICdsYXN0b3JkZXJkYXRlJyk7PGJyPmhEYXRhID0gdXBkYXRlRGF0YShoRGF0YSwgaENvbnRhY3QsICdsYXN0b3JkZXJiYXNlY29tcG9uZW50c2t1Jyk7PGJyPmhEYXRhID0gdXBkYXRlRGF0YShoRGF0YSwgaENvbnRhY3QsICdsYXN0b3JkZXJzdGF0dXMnKTs8YnI+aERhdGEgPSB1cGRhdGVEYXRhKGhEYXRhLCBoQ29udGFjdCwgJ2xhc3RvcmRlcicsIHRydWUsIHRydWUpOzxicj5oRGF0YSA9IHVwZGF0ZURhdGEoaERhdGEsIGhDb250YWN0LCAnbmV4dG9yZGVyZGF0ZScpOzxicj5oRGF0YSA9IHVwZGF0ZURhdGEoaERhdGEsIGhDb250YWN0LCAnbmV4dG9yZGVyYmFzZWNvbXBvbmVudHNrdScpOzxicj5oRGF0YSA9IHVwZGF0ZURhdGEoaERhdGEsIGhDb250YWN0LCAnbmV4dG9yZGVyc3RhdHVzJyk7PGJyPmhEYXRhID0gdXBkYXRlRGF0YShoRGF0YSwgaENvbnRhY3QsICduZXh0b3JkZXInLCB0cnVlLCB0cnVlKTs8YnI+aERhdGEgPSB1cGRhdGVEYXRhKGhEYXRhLCBoQ29udGFjdCwgJ2ludm9pY2VhbW91bnRwYWlkJywgdHJ1ZSwgdHJ1ZSk7PGJyPmhEYXRhID0gdXBkYXRlRGF0YShoRGF0YSwgaENvbnRhY3QsICduZXh0YmlsbGluZ2Ftb3VudCcsIHRydWUsIHRydWUpOzxicj48YnI+PGJyPjxicj5sZXQgZGZ2ID0gezxicj4gICAgc3Vic2NyaXB0aW9ubXJyT2xkOiBoRGF0YS5zdWJzY3JpcHRpb25tcnIsPGJyPiAgICB0b3RhbGR1ZXNPbGQ6IGhEYXRhLnRvdGFsZHVlcyw8YnI+ICAgIGR1ZWludm9pY2VzY291bnRPbGQ6IGhEYXRhLmR1ZWludm9pY2VzY291bnQsPGJyPiAgICBzdWJzY3JpcHRpb25pZE9sZDogaERhdGEuc3Vic2NyaXB0aW9uaWQsPGJyPiAgICBvcDogJ3VwZGF0ZSc8YnI+fTs8YnI+PGJyPmxldCBjYmJpbGxpbmdhZGRyZXNzOzxicj5sZXQgY2JTdGF0ZTs8YnI+bGV0IGNiQ2l0eTs8YnI+bGV0IGNiQ291bnRyeTs8YnI+bGV0IGNiWmlwOzxicj5sZXQgY2JwYXltZW50X21ldGhvZF9zdGF0dXM7PGJyPmxldCBjYnBheW1lbnRtZXRob2R0eXBlOzxicj48YnI+aWYgKGN1c3RvbWVyLmJpbGxpbmdfYWRkcmVzcyAhPT0gdW5kZWZpbmVkKSB7PGJyPiAgICBjYmJpbGxpbmdhZGRyZXNzID0gJyc7PGJyPiAgICBpZiAoY3VzdG9tZXIuYmlsbGluZ19hZGRyZXNzLmxpbmUxICE9PSB1bmRlZmluZWQpIHs8YnI+ICAgICAgICBjYmJpbGxpbmdhZGRyZXNzID0gY2JiaWxsaW5nYWRkcmVzcyArIGN1c3RvbWVyLmJpbGxpbmdfYWRkcmVzcy5saW5lMTs8YnI+ICAgIH08YnI+ICAgIGlmIChjdXN0b21lci5iaWxsaW5nX2FkZHJlc3MubGluZTIgIT09IHVuZGVmaW5lZCkgezxicj4gICAgICAgIGNiYmlsbGluZ2FkZHJlc3MgPSBjYmJpbGxpbmdhZGRyZXNzICsgJyAnICsgY3VzdG9tZXIuYmlsbGluZ19hZGRyZXNzLmxpbmUyOzxicj4gICAgfTxicj4gICAgaWYgKGN1c3RvbWVyLmJpbGxpbmdfYWRkcmVzcy5saW5lMyAhPT0gdW5kZWZpbmVkKSB7PGJyPiAgICAgICAgY2JiaWxsaW5nYWRkcmVzcyA9IGNiYmlsbGluZ2FkZHJlc3MgKyAnICcgKyBjdXN0b21lci5iaWxsaW5nX2FkZHJlc3MubGluZTM7PGJyPiAgICB9PGJyPiAgICBpZiAoY2JiaWxsaW5nYWRkcmVzcyA9PT0gJycpIHs8YnI+ICAgICAgICBjYmJpbGxpbmdhZGRyZXNzID0gdW5kZWZpbmVkOzxicj4gICAgfTxicj4gICAgY2JTdGF0ZSA9IGN1c3RvbWVyLmJpbGxpbmdfYWRkcmVzcy5zdGF0ZTs8YnI+ICAgIGNiQ2l0eSA9IGN1c3RvbWVyLmJpbGxpbmdfYWRkcmVzcy5jaXR5Ozxicj4gICAgY2JDb3VudHJ5ID0gY3VzdG9tZXIuYmlsbGluZ19hZGRyZXNzLmNvdW50cnk7PGJyPiAgICBjYlppcCA9IGN1c3RvbWVyLmJpbGxpbmdfYWRkcmVzcy56aXA7PGJyPn08YnI+PGJyPmlmIChjdXN0b21lci5wYXltZW50X21ldGhvZCAhPT0gdW5kZWZpbmVkICkgezxicj4gICAgY2JwYXltZW50X21ldGhvZF9zdGF0dXMgPSBjdXN0b21lci5wYXltZW50X21ldGhvZC5zdGF0dXM7PGJyPiAgICBjYnBheW1lbnRtZXRob2R0eXBlID0gY3VzdG9tZXIucGF5bWVudF9tZXRob2QudHlwZTs8YnI+fTxicj48YnI+PGJyPnNldEhEYXRhKGhEYXRhLCAnY2hhcmdlYmVlY3VzdG9tZXJpZCcsIGN1c3RvbWVyLmlkLCBvdmVycmlkZSk7PGJyPnNldEhEYXRhKGhEYXRhLCAnZW1haWwnLCBjdXN0b21lci5lbWFpbCwgb3ZlcnJpZGUpOzxicj5zZXRIRGF0YShoRGF0YSwgJ2ZpcnN0bmFtZScsIGN1c3RvbWVyLmZpcnN0X25hbWUsIG92ZXJyaWRlKTs8YnI+c2V0SERhdGEoaERhdGEsICdsYXN0bmFtZScsIGN1c3RvbWVyLmxhc3RfbmFtZSwgb3ZlcnJpZGUpOzxicj5zZXRIRGF0YShoRGF0YSwgJ3Bob25lJywgY3VzdG9tZXIucGhvbmUsIG92ZXJyaWRlKTs8YnI+c2V0SERhdGEoaERhdGEsICdjb21wYW55JywgY3VzdG9tZXIuY29tcGFueSwgb3ZlcnJpZGUpOzxicj5zZXRIRGF0YShoRGF0YSwgJ2JpbGxpbmdhZGRyZXNzJywgY2JiaWxsaW5nYWRkcmVzcywgb3ZlcnJpZGUpOzxicj5zZXRIRGF0YShoRGF0YSwgJ2JpbGxpbmdzdGF0ZScsIGNiU3RhdGUsIG92ZXJyaWRlKTs8YnI+c2V0SERhdGEoaERhdGEsICdiaWxsaW5nY2l0eScsIGNiQ2l0eSwgb3ZlcnJpZGUpOzxicj5zZXRIRGF0YShoRGF0YSwgJ2JpbGxpbmdjb3VudHJ5JywgY2JDb3VudHJ5LCBvdmVycmlkZSk7PGJyPnNldEhEYXRhKGhEYXRhLCAnYmlsbGluZ3ppcCcsIGNiWmlwLCBvdmVycmlkZSk7PGJyPnNldEhEYXRhKGhEYXRhLCAnYXV0b2NvbGxlY3Rpb24nLCBjdXN0b21lci5hdXRvX2NvbGxlY3Rpb24sIG92ZXJyaWRlKTs8YnI+c2V0SERhdGEoaERhdGEsICdwcmVmZXJyZWRjdXJyZW5jeWNvZGUnLCBjdXN0b21lci5wcmVmZXJyZWRfY3VycmVuY3lfY29kZSwgb3ZlcnJpZGUpOzxicj5zZXRIRGF0YShoRGF0YSwgJ3BheW1lbnRtZXRob2RzdGF0dXMnLCBjYnBheW1lbnRfbWV0aG9kX3N0YXR1cywgb3ZlcnJpZGUpOzxicj5zZXRIRGF0YShoRGF0YSwgJ3BheW1lbnRtZXRob2R0eXBlJywgY2JwYXltZW50bWV0aG9kdHlwZSwgb3ZlcnJpZGUpOzxicj5zZXRIRGF0YShoRGF0YSwgJ25ldHRlcm1kYXlzJywgY3VzdG9tZXIubmV0X3Rlcm1fZGF5cywgb3ZlcnJpZGUpOzxicj5zZXRIRGF0YShoRGF0YSwgJ3RheGV4ZW1wdHN0YXR1cycsIGN1c3RvbWVyLnRheGFiaWxpdHksIG92ZXJyaWRlKTs8YnI+PGJyPmxldCBjYmN1cnJlbmN5Y29kZTs8YnI+bGV0IGNic3Vic2NyaXB0aW9uaWQ7PGJyPmxldCBjYnN1YnNjcmlwdGlvc3RhdHVzOzxicj5sZXQgY2Jwcm9kdWN0Ozxicj5sZXQgY2JwbGFucXVhbnRpdHk7PGJyPmxldCBjYnNldHVwZmVlOzxicj5sZXQgY2JkdWVpbnZvaWNlc2NvdW50Ozxicj5sZXQgY2JyZW1haW5pbmdiaWxsaW5nY3ljbGVzOzxicj5sZXQgY2Jwb251bWJlcjs8YnI+bGV0IGNibmV4dGJpbGxpbmdhdDs8YnI+bGV0IGNidG90YWxkdWVzOzxicj5sZXQgY2JkdWVzaW5jZTs8YnI+bGV0IGNic3Vic2NyaXB0aW9ubXJyOzxicj5pZiAoc3Vic2NyaXB0aW9uICE9PSB1bmRlZmluZWQpIHs8YnI+ICAgIGNiY3VycmVuY3ljb2RlID0gc3Vic2NyaXB0aW9uLmN1cnJlbmN5X2NvZGU7PGJyPiAgICBjYnN1YnNjcmlwdGlvbmlkID0gc3Vic2NyaXB0aW9uLmlkOzxicj4gICAgY2JzdWJzY3JpcHRpb3N0YXR1cyA9IHN1YnNjcmlwdGlvbi5zdGF0dXM7PGJyPiAgICBjYnByb2R1Y3QgPSBzdWJzY3JpcHRpb24ucGxhbl9pZDs8YnI+ICAgIGNicGxhbnF1YW50aXR5ID0gc3Vic2NyaXB0aW9uLnBsYW5fcXVhbnRpdHk7PGJyPiAgICBjYnNldHVwZmVlID0gZ2V0TnVtYmVyKHN1YnNjcmlwdGlvbi5zZXR1cF9mZWUpOzxicj4gICAgY2JkdWVpbnZvaWNlc2NvdW50ID0gZ2V0TnVtYmVyKHN1YnNjcmlwdGlvbi5kdWVfaW52b2ljZXNfY291bnQpOzxicj4gICAgY2JyZW1haW5pbmdiaWxsaW5nY3ljbGVzID0gc3Vic2NyaXB0aW9uLnJlbWFpbmluZ19iaWxsaW5nX2N5Y2xlczs8YnI+ICAgIGNicG9udW1iZXIgPSBzdWJzY3JpcHRpb24ucG9fbnVtYmVyOzxicj4gICAgaWYoc3Vic2NyaXB0aW9uLm5leHRfYmlsbGluZ19hdCAhPT0gdW5kZWZpbmVkKSB7PGJyPiAgICAgICAgY2JuZXh0YmlsbGluZ2F0ID0gZ2V0TnVtYmVyKHN1YnNjcmlwdGlvbi5uZXh0X2JpbGxpbmdfYXQpICogMTAwMDs8YnI+ICAgIH08YnI+ICA8YnI+ICAgIGNidG90YWxkdWVzID0gZ2V0TnVtYmVyKHN1YnNjcmlwdGlvbi50b3RhbF9kdWVzKTs8YnI+ICAgIGlmKHN1YnNjcmlwdGlvbi5kdWVfc2luY2UgIT09IHVuZGVmaW5lZCkgezxicj4gICAgICBjYmR1ZXNpbmNlID0gZ2V0TnVtYmVyKHN1YnNjcmlwdGlvbi5kdWVfc2luY2UpICogMTAwMDs8YnI+ICAgIH08YnI+ICAgIDxicj4gICAgY2JzdWJzY3JpcHRpb25tcnIgPSBnZXROdW1iZXIoc3Vic2NyaXB0aW9uLm1ycik7PGJyPn08YnI+PGJyPjxicj5sZXQgbkxpZmVjeWNsZXN0YWdlOzxicj48YnI+Ly9pZiAoaERhdGEubGlmZWN5Y2xlc3RhZ2UgPT09IHVuZGVmaW5lZCkgezxicj4gICBpZiAoY2JzdWJzY3JpcHRpb3N0YXR1cyA9PT0gJ2NhbmNlbGxlZCcpIHs8YnI+ICAgICAgICBpZiAoc3luY1J1bGVzQ29udGFjdHMuTGlmZWN5Y2xlU3RhZ2UuQ2FuY2VsZWRTdWJzY3JpcHRpb24gIT09IHVuZGVmaW5lZCAmJiBzeW5jUnVsZXNDb250YWN0cy5MaWZlY3ljbGVTdGFnZS5DYW5jZWxlZFN1YnNjcmlwdGlvbiAhPT0gJ3NlbGVjdCcpIHs8YnI+ICAgICAgICAgICAgbkxpZmVjeWNsZXN0YWdlID0gc3luY1J1bGVzQ29udGFjdHMuTGlmZWN5Y2xlU3RhZ2UuQ2FuY2VsZWRTdWJzY3JpcHRpb247PGJyPiAgICAgICAgfTxicj48YnI+ICAgIH0gZWxzZSBpZiAoY2JzdWJzY3JpcHRpb3N0YXR1cyA9PT0gJ2FjdGl2ZScpIHs8YnI+ICAgICAgICBpZiAoc3luY1J1bGVzQ29udGFjdHMuTGlmZWN5Y2xlU3RhZ2UuQWN0aXZlU3Vic2NyaXB0aW9uICE9PSB1bmRlZmluZWQgJiYgc3luY1J1bGVzQ29udGFjdHMuTGlmZWN5Y2xlU3RhZ2UuQWN0aXZlU3Vic2NyaXB0aW9uICE9PSAnc2VsZWN0Jykgezxicj4gICAgICAgICAgICBuTGlmZWN5Y2xlc3RhZ2UgPSBzeW5jUnVsZXNDb250YWN0cy5MaWZlY3ljbGVTdGFnZS5BY3RpdmVTdWJzY3JpcHRpb247PGJyPiAgICAgICAgfTxicj48YnI+ICAgIH0gZWxzZSBpZiAoY2JzdWJzY3JpcHRpb3N0YXR1cyA9PT0gJ2luX3RyaWFsJykgezxicj4gICAgICAgIGlmIChzeW5jUnVsZXNDb250YWN0cy5MaWZlY3ljbGVTdGFnZS5UcmlhbFN1YnNjcmlwdGlvbiAhPT0gdW5kZWZpbmVkICYmIHN5bmNSdWxlc0NvbnRhY3RzLkxpZmVjeWNsZVN0YWdlLlRyaWFsU3Vic2NyaXB0aW9uICE9PSAnc2VsZWN0Jykgezxicj4gICAgICAgICAgICBuTGlmZWN5Y2xlc3RhZ2UgPSBzeW5jUnVsZXNDb250YWN0cy5MaWZlY3ljbGVTdGFnZS5UcmlhbFN1YnNjcmlwdGlvbjs8YnI+ICAgICAgICB9PGJyPiAgICB9IGVsc2UgaWYgKGNic3Vic2NyaXB0aW9zdGF0dXMgPT09IHVuZGVmaW5lZCkgezxicj4gICAgICAgIGlmIChzeW5jUnVsZXNDb250YWN0cy5MaWZlY3ljbGVTdGFnZS5Ob1N1YnNjcmlwdGlvbiAhPT0gdW5kZWZpbmVkICYmIHN5bmNSdWxlc0NvbnRhY3RzLkxpZmVjeWNsZVN0YWdlLk5vU3Vic2NyaXB0aW9uICE9PSAnc2VsZWN0Jykgezxicj4gICAgICAgICAgICBuTGlmZWN5Y2xlc3RhZ2UgPSBzeW5jUnVsZXNDb250YWN0cy5MaWZlY3ljbGVTdGFnZS5Ob1N1YnNjcmlwdGlvbjs8YnI+ICAgICAgICB9PGJyPiAgICB9PGJyPi8vfSBlbHNlIHs8YnI+Ly8gICAgaWYgKHN0ZXBzLkNCRGF0YS5odWJzcG90X3N1Yl9zdGF0dXMgIT09ICdhY3RpdmUnICYmIGNic3Vic2NyaXB0aW9zdGF0dXMgPT09ICdhY3RpdmUnICYmIHN5bmNSdWxlc0NvbnRhY3RzLkxpZmVjeWNsZVN0YWdlLkFjdGl2ZVN1YnNjcmlwdGlvbiAhPT0gdW5kZWZpbmVkKSB7PGJyPiAvLyAgICAgICBuTGlmZWN5Y2xlc3RhZ2UgPSBzeW5jUnVsZXNDb250YWN0cy5MaWZlY3ljbGVTdGFnZS5BY3RpdmVTdWJzY3JpcHRpb247PGJyPiAvLyAgIH0gZWxzZSB7PGJyPiAgIC8vICAgICBuTGlmZWN5Y2xlc3RhZ2UgPSB1bmRlZmluZWQ7PGJyPiAgLy8gIH08YnI+PGJyPi8vfTxicj48YnI+c3RlcHMuSHViRGF0YS5jTWV0cmljcyA9IHs8YnI+ICAgIHN1YnNjcmlwdGlvbm1ycjogY2JzdWJzY3JpcHRpb25tcnIsPGJyPiAgICBzdWJzY3JpcHRpb25tcnJPbGQ6IGhEYXRhLnN1YnNjcmlwdGlvbm1yciw8YnI+ICAgIHRvdGFsZHVlczogY2J0b3RhbGR1ZXMsPGJyPiAgICB0b3RhbGR1ZXNPbGQ6IGhEYXRhLnRvdGFsZHVlcyw8YnI+ICAgIGR1ZWludm9pY2VzY291bnQ6IGNiZHVlaW52b2ljZXNjb3VudCw8YnI+ICAgIGR1ZWludm9pY2VzY291bnRPbGQ6IGhEYXRhLmR1ZWludm9pY2VzY291bnQsPGJyPiAgICBzdWJzY3JpcHRpb25pZDogY2JzdWJzY3JpcHRpb25pZCw8YnI+ICAgIHN1YnNjcmlwdGlvbmlkT2xkOiBoRGF0YS5zdWJzY3JpcHRpb25pZCw8YnI+ICAgIG9wOiAndXBkYXRlJzxicj59Ozxicj48YnI+c2V0SERhdGEoaERhdGEsICdjdXJyZW5jeWNvZGUnLCBjYmN1cnJlbmN5Y29kZSwgdHJ1ZSk7PGJyPnNldEhEYXRhKGhEYXRhLCAnbGlmZWN5Y2xlc3RhZ2UnLCBuTGlmZWN5Y2xlc3RhZ2UsIHRydWUpOzxicj5zZXRIRGF0YShoRGF0YSwgJ3N1YnNjcmlwdGlvbmlkJywgY2JzdWJzY3JpcHRpb25pZCwgdHJ1ZSk7PGJyPnNldEhEYXRhKGhEYXRhLCAnc3Vic2NyaXB0aW9zdGF0dXMnLCBjYnN1YnNjcmlwdGlvc3RhdHVzLCB0cnVlKTs8YnI+c2V0SERhdGEoaERhdGEsICdwcm9kdWN0JywgY2Jwcm9kdWN0LCB0cnVlKTs8YnI+c2V0SERhdGEoaERhdGEsICdwbGFucXVhbnRpdHknLCBjYnBsYW5xdWFudGl0eSwgdHJ1ZSk7PGJyPnNldEhEYXRhKGhEYXRhLCAncmVtYWluaW5nYmlsbGluZ2N5Y2xlcycsIGNicmVtYWluaW5nYmlsbGluZ2N5Y2xlcywgdHJ1ZSk7PGJyPnNldEhEYXRhKGhEYXRhLCAncG9udW1iZXInLCBjYnBvbnVtYmVyLCB0cnVlKTs8YnI+c2V0SERhdGEoaERhdGEsICduZXh0YmlsbGluZ2F0JywgY2JuZXh0YmlsbGluZ2F0LCB0cnVlKTs8YnI+c2V0SERhdGEoaERhdGEsICdkdWVzaW5jZScsIGNiZHVlc2luY2UsIHRydWUpOzxicj5zZXRIRGF0YShoRGF0YSwgJ2R1ZWludm9pY2VzY291bnQnLCBjYmR1ZWludm9pY2VzY291bnQsIHRydWUpOzxicj5zZXRIRGF0YShoRGF0YSwgJ3RvdGFsZHVlcycsIGNidG90YWxkdWVzLCB0cnVlKTs8YnI+c2V0SERhdGEoaERhdGEsICdzZXR1cGZlZScsIGNic2V0dXBmZWUsIHRydWUpOzxicj5zZXRIRGF0YShoRGF0YSwgJ3N1YnNjcmlwdGlvbm1ycicsIGNic3Vic2NyaXB0aW9ubXJyLCB0cnVlKTs8YnI+PGJyPjxicj48YnI+bGV0IGNibGFzdG9yZGVyZGF0ZTs8YnI+bGV0IGNibGFzdG9yZGVyYmFzZWNvbXBvbmVudHNrdTs8YnI+bGV0IGNibGFzdG9yZGVyc3RhdHVzOzxicj5sZXQgY2JsYXN0b3JkZXI7PGJyPmxldCBjYm5leHRvcmRlcmRhdGU7PGJyPmxldCBjYm5leHRvcmRlcmJhc2Vjb21wb25lbnRza3U7PGJyPmxldCBjYm5leHRvcmRlcnN0YXR1czs8YnI+bGV0IGNibmV4dG9yZGVyOzxicj48YnI+bGV0IG15T3JkZXI7PGJyPjxicj5pZiAoc3RlcHMuSHViRGF0YS5vcmRlciAhPT0gdW5kZWZpbmVkKSB7PGJyPiAgICBsZXQgb3JkZXJCZWZvcmUgPSBzdGVwcy5IdWJEYXRhLm9yZGVyLmJlZm9yZTs8YnI+ICAgIG15T3JkZXIgPSBvcmRlckJlZm9yZTs8YnI+ICAgIGlmKG9yZGVyQmVmb3JlICE9PSB1bmRlZmluZWQpIHs8YnI+ICAgICAgICBpZiAob3JkZXJCZWZvcmUub3JkZXJfZGF0ZSAhPT0gdW5kZWZpbmVkKSB7PGJyPiAgICAgICAgICAgIGNibGFzdG9yZGVyZGF0ZSA9IGdldE51bWJlcihvcmRlckJlZm9yZS5vcmRlcl9kYXRlKSAqIDEwMDA7PGJyPiAgICAgICAgfTxicj4gICAgICAgIGNibGFzdG9yZGVyYmFzZWNvbXBvbmVudHNrdSA9IG9yZGVyQmVmb3JlLnNrdTs8YnI+ICAgICAgICBjYmxhc3RvcmRlcnN0YXR1cyA9IG9yZGVyQmVmb3JlLnN0YXR1czs8YnI+ICAgICAgICBjYmxhc3RvcmRlciA9IGdldE51bWJlcihvcmRlckJlZm9yZS50b3RhbCk7PGJyPiAgICB9PGJyPiAgIDxicj48YnI+ICAgIGxldCBvcmRlckFmdGVyID0gc3RlcHMuSHViRGF0YS5vcmRlci5hZnRlcjs8YnI+ICAgIGlmKG9yZGVyQWZ0ZXIgIT09IHVuZGVmaW5lZCkgezxicj4gICAgICAgIGlmIChvcmRlckFmdGVyLm9yZGVyX2RhdGUgIT09IHVuZGVmaW5lZCkgezxicj4gICAgICAgICAgICBjYm5leHRvcmRlcmRhdGUgPSBnZXROdW1iZXIob3JkZXJBZnRlci5vcmRlcl9kYXRlKSAqIDEwMDA7PGJyPiAgICAgICAgfTxicj4gICAgICAgIGNibmV4dG9yZGVyYmFzZWNvbXBvbmVudHNrdSA9IG9yZGVyQWZ0ZXIuc2t1Ozxicj4gICAgICAgIGNibmV4dG9yZGVyc3RhdHVzID0gb3JkZXJBZnRlci5zdGF0dXM7PGJyPiAgICAgICAgY2JuZXh0b3JkZXIgPSBnZXROdW1iZXIob3JkZXJBZnRlci50b3RhbCk7PGJyPiAgICB9PGJyPiAgIDxicj59PGJyPjxicj5zZXRIRGF0YShoRGF0YSwgJ2xhc3RvcmRlcmRhdGUnLCBjYmxhc3RvcmRlcmRhdGUsIHRydWUpOzxicj5zZXRIRGF0YShoRGF0YSwgJ2xhc3RvcmRlcmJhc2Vjb21wb25lbnRza3UnLCBjYmxhc3RvcmRlcmJhc2Vjb21wb25lbnRza3UsIHRydWUpOzxicj5zZXRIRGF0YShoRGF0YSwgJ2xhc3RvcmRlcnN0YXR1cycsIGNibGFzdG9yZGVyc3RhdHVzLCB0cnVlKTs8YnI+c2V0SERhdGEoaERhdGEsICdsYXN0b3JkZXInLCBjYmxhc3RvcmRlciwgdHJ1ZSk7PGJyPnNldEhEYXRhKGhEYXRhLCAnbmV4dG9yZGVyZGF0ZScsIGNibmV4dG9yZGVyZGF0ZSwgdHJ1ZSk7PGJyPnNldEhEYXRhKGhEYXRhLCAnbmV4dG9yZGVyYmFzZWNvbXBvbmVudHNrdScsIGNibmV4dG9yZGVyYmFzZWNvbXBvbmVudHNrdSwgdHJ1ZSk7PGJyPnNldEhEYXRhKGhEYXRhLCAnbmV4dG9yZGVyc3RhdHVzJywgY2JuZXh0b3JkZXJzdGF0dXMsIHRydWUpOzxicj5zZXRIRGF0YShoRGF0YSwgJ25leHRvcmRlcicsIGNibmV4dG9yZGVyLCB0cnVlKTs8YnI+PGJyPjxicj5sZXQgY2JpbnZvaWNlYW1vdW50cGFpZDs8YnI+bGV0IGNiaW52b2ljZWVzdGltYXRlOzxicj5pZiAoc3RlcHMuSHViRGF0YS5pbnZvaWNlICE9PSB1bmRlZmluZWQpIHs8YnI+ICAgIGNiaW52b2ljZWFtb3VudHBhaWQgPSBnZXROdW1iZXIoc3RlcHMuSHViRGF0YS5pbnZvaWNlLnRvdGFsKTs8YnI+ICAgIGNiaW52b2ljZWVzdGltYXRlID0gZ2V0TnVtYmVyKHN0ZXBzLkh1YkRhdGEuaW52b2ljZS5lc3RpbWF0ZSk7PGJyPn08YnI+PGJyPnN0ZXBzLkh1YkRhdGEuY01ldHJpY3MuaW52b2ljZWFtb3VudHBhaWQgPSBjYmludm9pY2VhbW91bnRwYWlkOzxicj5zdGVwcy5IdWJEYXRhLmNNZXRyaWNzLmludm9pY2VhbW91bnRwYWlkT2xkID0gaERhdGEuaW52b2ljZWFtb3VudHBhaWQ7PGJyPjxicj5zZXRIRGF0YShoRGF0YSwgJ2ludm9pY2VhbW91bnRwYWlkJywgY2JpbnZvaWNlYW1vdW50cGFpZCwgdHJ1ZSk7PGJyPnNldEhEYXRhKGhEYXRhLCAnbmV4dGJpbGxpbmdhbW91bnQnLCBjYmludm9pY2Vlc3RpbWF0ZSwgdHJ1ZSk7PGJyPjxicj4vL2N1c3RvbTxicj5sZXQgc3luY1J1bGVzRmllbGRzID0gc3RlcHMuQ2hhcmdlYmVlQ29uZmlnUGFyYW1zLnJlc3BvbnNlLmJvZHkudGhpcmRfcGFydHlfY29uZmlndXJhdGlvbi5jb25maWdfanNvbi5jbG91ZEVsZW1lbnRzLnN5bmNSdWxlc0ZpZWxkczs8YnI+aWYgKHN5bmNSdWxlc0ZpZWxkcyA9PT0gdW5kZWZpbmVkKSB7PGJyPiAgICBzeW5jUnVsZXNGaWVsZHMgPSB7PGJyPiAgICAgICAgJ2NvbXBhbnknOiB7PGJyPjxicj4gICAgICAgIH0sPGJyPiAgICAgICAgJ2NvbnRhY3QnOiB7PGJyPjxicj4gICAgICAgIH0sPGJyPiAgICAgICAgJ2RlYWwnOiB7PGJyPiAgICAgICAgfSw8YnI+ICAgICAgICAnc3luYyc6ICdmYWxzZSc8YnI+ICAgIH07PGJyPjxicj59IGVsc2Ugezxicj4gICAgaWYgKHN5bmNSdWxlc0ZpZWxkcy5jb21wYW55ID09PSB1bmRlZmluZWQgfHwgc3luY1J1bGVzRmllbGRzLmNvbXBhbnkgPT09ICcnKSB7PGJyPiAgICAgICAgc3luY1J1bGVzRmllbGRzLmNvbXBhbnkgPSB7fTs8YnI+ICAgIH08YnI+ICAgIGlmIChzeW5jUnVsZXNGaWVsZHMuY29udGFjdCA9PT0gdW5kZWZpbmVkIHx8IHN5bmNSdWxlc0ZpZWxkcy5jb250YWN0ID09PSAnJykgezxicj4gICAgICAgIHN5bmNSdWxlc0ZpZWxkcy5jb250YWN0ID0ge307PGJyPiAgICB9PGJyPiAgICBpZiAoc3luY1J1bGVzRmllbGRzLmRlYWwgPT09IHVuZGVmaW5lZCB8fCBzeW5jUnVsZXNGaWVsZHMuZGVhbCA9PT0gJycpIHs8YnI+ICAgICAgICBzeW5jUnVsZXNGaWVsZHMuZGVhbCA9IHt9Ozxicj4gICAgfTxicj59PGJyPnN5bmNSdWxlc0ZpZWxkcyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoc3luY1J1bGVzRmllbGRzKSk7PGJyPjxicj5sZXQgY29tcGFueUtleXMgPSBPYmplY3Qua2V5cyhzeW5jUnVsZXNGaWVsZHMuY29tcGFueSk7PGJyPjxicj5mb3IgKHZhciBpID0gMDsgaSA8c3Bhbj48PC9zcGFuPiBjb21wYW55S2V5cy5sZW5ndGg7IGkrKykgezxicj4gICAgc3luY1J1bGVzRmllbGRzLmNvbnRhY3RbY29tcGFueUtleXNbaV1dID0gc3luY1J1bGVzRmllbGRzLmNvbXBhbnlbY29tcGFueUtleXNbaV1dOzxicj59PGJyPjxicj48YnI+bGV0IGN1c3RvbWVmaWVsZHMgPSBzdGVwcy5TeW5jTG9nLmN1c3RvbWVmaWVsZHM7PGJyPmZvciAodmFyIGkgPSAwOyBpIDxzcGFuPjw8L3NwYW4+IGN1c3RvbWVmaWVsZHMubGVuZ3RoOyBpKyspIHs8YnI+ICAgIGxldCBmbGQgPSBjdXN0b21lZmllbGRzW2ldOzxicj48YnI+ICAgIGZvciAodmFyIGogPSAwOyBqIDxzcGFuPjw8L3NwYW4+IGZsZC5maWVsZHMubGVuZ3RoOyBqKyspIHs8YnI+ICAgICAgICB2YXIgZXMgPSBmbGQuZmllbGRzW2pdOzxicj4gICAgICAgIHZhciBkZXNjID0gZmxkLmxhYmVsICsgJyAnICsgZXNbMF0ucmVwbGFjZSgvXy9nLCAnICcpOzxicj4gICAgICAgIHZhciBpZCA9IGZsZC5rZXkgKyAnXycgKyBlc1swXTs8YnI+ICAgICAgICBpZiAoc3luY1J1bGVzRmllbGRzLmNvbnRhY3RbaWRdICE9PSB1bmRlZmluZWQpIHs8YnI+ICAgICAgICAgICAgc3luY1J1bGVzRmllbGRzLmNvbnRhY3RbaWRdID0gZXM7PGJyPiAgICAgICAgfTxicj4gICAgfTxicj59PGJyPmxldCBjdXN0b21LZXlzID0gT2JqZWN0LmtleXMoc3luY1J1bGVzRmllbGRzLmNvbnRhY3QpOzxicj5mb3IgKHZhciBpID0gMDsgaSA8c3Bhbj48PC9zcGFuPiBjdXN0b21LZXlzLmxlbmd0aDsgaSsrKSB7PGJyPiAgICB2YXIgY0tleSA9IGN1c3RvbUtleXNbaV07PGJyPiAgICB2YXIgY1ZhbCA9IHN5bmNSdWxlc0ZpZWxkcy5jb250YWN0W2NLZXldOzxicj4gICAgbGV0IHN1YlZhbDs8YnI+ICAgIGlmIChjS2V5LnN0YXJ0c1dpdGgoJ3N1YmNzdCcpKSB7PGJyPiAgICAgICAgaWYgKHN1YnNjcmlwdGlvbiAhPT0gdW5kZWZpbmVkKSB7PGJyPiAgICAgICAgICAgIHN1YlZhbCA9IHN1YnNjcmlwdGlvbltjVmFsWzBdXTs8YnI+ICAgICAgICB9PGJyPiAgICB9IGVsc2UgaWYgKGNLZXkuc3RhcnRzV2l0aCgnb3JkZXJjc3QnKSkgezxicj4gICAgICAgIGlmIChteU9yZGVyICE9PSB1bmRlZmluZWQpIHs8YnI+ICAgICAgICAgICAgc3ViVmFsID0gbXlPcmRlcltjVmFsWzBdXTs8YnI+ICAgICAgICB9PGJyPjxicj4gICAgfSBlbHNlIGlmIChjS2V5LnN0YXJ0c1dpdGgoJ2N1c3Rjc3QnKSkgezxicj4gICAgICAgIGlmIChjdXN0b21lciAhPT0gdW5kZWZpbmVkKSB7PGJyPiAgICAgICAgICAgIHN1YlZhbCA9IGN1c3RvbWVyW2NWYWxbMF1dOzxicj4gICAgICAgIH08YnI+ICAgIH08YnI+ICAgIGlmIChjVmFsWzFdID09PSAnbnVtYmVyJykgezxicj4gICAgICAgIHN1YlZhbCA9IGdldE51bWJlcihzdWJWYWwpOzxicj4gICAgICAgPGJyPiAgICAgICAgaWYgKGNWYWwubGVuZ3RoID09IDQpIHs8YnI+ICAgICAgICAgICAgaERhdGEgPSB1cGRhdGVEYXRhKGhEYXRhLCBoQ29udGFjdCwgY0tleSx0cnVlLHRydWUpOzxicj4gICAgICAgICAgICBzdGVwcy5IdWJEYXRhLmNNZXRyaWNzW2NLZXkrJ09sZCddID0gaERhdGFbY0tleV07PGJyPiAgICAgICAgICAgICBzZXRIRGF0YShoRGF0YSwgY0tleSwgc3ViVmFsKTs8YnI+ICAgICAgICAgICAgIDxicj4gICAgICAgICAgICBwcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgY0tleSwgdHJ1ZSk7PGJyPiAgICAgICAgfSBlbHNlIHs8YnI+ICAgICAgICAgIGhEYXRhID0gdXBkYXRlRGF0YShoRGF0YSwgaENvbnRhY3QsIGNLZXksdHJ1ZSk7PGJyPiAgICAgICAgICBzdGVwcy5IdWJEYXRhLmNNZXRyaWNzW2NLZXldID0gc3ViVmFsOzxicj4gICAgICAgICAgIHNldEhEYXRhKGhEYXRhLCBjS2V5LCBzdWJWYWwpOzxicj4gICAgICAgICAgICBwcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgY0tleSk7PGJyPiAgICAgICAgfTxicj4gICAgICAgICBzdGVwcy5IdWJEYXRhLmNNZXRyaWNzW2NLZXkrJ09sZCddID0gaERhdGFbY0tleV07PGJyPiAgICB9IGVsc2UgaWYgKGNWYWxbMV0gPT09ICdkYXRldGltZScpIHs8YnI+ICAgICAgaWYoc3ViVmFsICE9PSB1bmRlZmluZWQpIHs8YnI+ICAgICAgICAgc3ViVmFsID0gZ2V0TnVtYmVyKHN1YlZhbCkgKiAxMDAwOzxicj4gICAgICAgIHNldEhEYXRhKGhEYXRhLCBjS2V5LCBzdWJWYWwpOzxicj4gICAgICAgIHByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCBjS2V5KTs8YnI+ICAgICAgfTxicj4gICAgICAgPGJyPjxicj4gICAgfSBlbHNlIHs8YnI+ICAgICAgICBpZiAoc3ViVmFsID09PSB1bmRlZmluZWQpIHs8YnI+ICAgICAgICAgICAgc3ViVmFsID0gJyc7PGJyPjxicj4gICAgICAgIH08YnI+ICAgICAgICBzZXRIRGF0YShoRGF0YSwgY0tleSwgc3ViVmFsKTs8YnI+ICAgICAgICBwcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgY0tleSk7PGJyPiAgICB9PGJyPjxicj48YnI+fTxicj4vL2N1c3RvbTxicj5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ2ZpcnN0bmFtZScpOzxicj4vL3Byb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAnZW1haWwnKTs8YnI+cHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdsYXN0bmFtZScpOzxicj5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ3Bob25lJyk7PGJyPnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAnY29tcGFueScpOzxicj5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ2JpbGxpbmdhZGRyZXNzJyk7PGJyPnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAnYmlsbGluZ3N0YXRlJyk7PGJyPnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAnYmlsbGluZ2NpdHknKTs8YnI+cHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdiaWxsaW5nY291bnRyeScpOzxicj5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ2JpbGxpbmd6aXAnKTs8YnI+cHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdhdXRvY29sbGVjdGlvbicpOzxicj5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ3ByZWZlcnJlZGN1cnJlbmN5Y29kZScpOzxicj5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ3BheW1lbnRtZXRob2RzdGF0dXMnKTs8YnI+cHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdwYXltZW50bWV0aG9kdHlwZScpOzxicj5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ25ldHRlcm1kYXlzJyk7PGJyPnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAndGF4ZXhlbXB0c3RhdHVzJyk7PGJyPnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAnY2hhcmdlYmVlY3VzdG9tZXJpZCcpOzxicj5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ3N1YnNjcmlwdGlvbmlkJyk7PGJyPnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAnc3Vic2NyaXB0aW9zdGF0dXMnKTs8YnI+cHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdwcm9kdWN0Jyk7PGJyPnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAncGxhbnF1YW50aXR5Jyk7PGJyPnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAnc2V0dXBmZWUnLCB0cnVlKTs8YnI+cHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdkdWVpbnZvaWNlc2NvdW50Jyk7PGJyPnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAncmVtYWluaW5nYmlsbGluZ2N5Y2xlcycpOzxicj5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ3BvbnVtYmVyJyk7PGJyPnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAnbmV4dGJpbGxpbmdhdCcpOzxicj5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ3RvdGFsZHVlcycsIHRydWUpOzxicj5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ2R1ZXNpbmNlJyk7PGJyPnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAnc3Vic2NyaXB0aW9ubXJyJywgdHJ1ZSk7PGJyPnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAnbGlmZWN5Y2xlc3RhZ2UnKTs8YnI+cHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdsYXN0b3JkZXJkYXRlJyk7PGJyPnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAnbGFzdG9yZGVyYmFzZWNvbXBvbmVudHNrdScpOzxicj5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ2xhc3RvcmRlcnN0YXR1cycpOzxicj5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ2xhc3RvcmRlcicsIHRydWUpOzxicj5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ25leHRvcmRlcmRhdGUnKTs8YnI+cHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICduZXh0b3JkZXJiYXNlY29tcG9uZW50c2t1Jyk7PGJyPnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAnbmV4dG9yZGVyc3RhdHVzJyk7PGJyPnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAnbmV4dG9yZGVyJywgdHJ1ZSk7PGJyPnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAnaW52b2ljZWFtb3VudHBhaWQnLCB0cnVlKTs8YnI+cHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICduZXh0YmlsbGluZ2Ftb3VudCcsIHRydWUpOzxicj48YnI+c3RlcHMuSHViU3BvdElucHV0LmlucHV0cy5wcm9wZXJ0aWVzID0gcHJvcGVydGllczs8YnI+PGJyPmxldCBnZmcgPSB7PGJyPiAgICBwcm9wZXJ0aWVzOiBwcm9wZXJ0aWVzLDxicj4gICAgbWV0cmljczogc3RlcHMuSHViRGF0YS5jTWV0cmljcyw8YnI+ICAgIGhEYXRhOiBoRGF0YTxicj59PGJyPjxicj5kb25lKGdmZyk7PC9wcmU+PGJyPjxiPlJBVyBKU09OOjwvYj48YnI+PGJyPjxwcmU+ezxicj4gICdvblN1Y2Nlc3MnOiBbPGJyPiAgICAnVXBkYXRlSHViU3BvdENvbnRhY3QnPGJyPiAgXSw8YnI+ICAnb25GYWlsdXJlJzogW10sPGJyPiAgJ25hbWUnOiAnUHJlcGFyZVVwZGF0ZUlucHV0Jyw8YnI+ICAndHlwZSc6ICdzY3JpcHQnLDxicj4gICdwcm9wZXJ0aWVzJzogezxicj4gICAgJ2JvZHknOiAnbGV0IGN1c3RvbWVyID0gc3RlcHMuSHViRGF0YS5jdXN0b21lcjtcbmxldCBzdWJzY3JpcHRpb24gPSBzdGVwcy5IdWJEYXRhLnN1YnNjcmlwdGlvbjtcbmxldCBzeW5jUnVsZXNDb250YWN0cyA9IHN0ZXBzLkN1c3RvbWVyc1BhcmFtLnN5bmNSdWxlc0NvbnRhY3RzO1xubGV0IGNvbnRhY3QgPSBzdGVwcy5DQkRhdGEuaHVic3BvdC5jb250YWN0O1xuc3RlcHMuSHViU3BvdElucHV0LnVybCA9IFwnaHR0cHM6Ly9hcGkuaHViYXBpLmNvbS9jb250YWN0cy92MS9jb250YWN0L3ZpZC9cJyArIGNvbnRhY3QudmlkICsgXCcvcHJvZmlsZVwnO1xuXG5sZXQgaENvbnRhY3QgPSBjb250YWN0LnByb3BlcnRpZXM7XG5sZXQgb3ZlcnJpZGUgPSBzeW5jUnVsZXNDb250YWN0cy5IdWJTcG90Q29udGFjdE1hdGNoID09PSBcJ092ZXJyaWRlX3RoZV9maWVsZHNcJztcbmxldCBwcm9wZXJ0aWVzID0gW107XG5mdW5jdGlvbiB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCBrZXksIGlzQ3VycmVuY3kpIHtcbiAgICBsZXQgdmFsID0gaERhdGFba2V5XTtcbiAgICBpZiAodmFsICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKGlzQ3VycmVuY3kpIHtcbiAgICAgICAgICAgIHZhbCA9IHBhcnNlRmxvYXQocGFyc2VJbnQodmFsLCAxMCkgLyAxMDApLnRvRml4ZWQoMik7XG4gICAgICAgIH1cbiAgICAgICAgcHJvcGVydGllcy5wdXNoKHtcbiAgICAgICAgICAgIFwncHJvcGVydHlcJzoga2V5LFxuICAgICAgICAgICAgXCd2YWx1ZVwnOiB2YWxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBwcm9wZXJ0aWVzO1xufVxuZnVuY3Rpb24gdXBkYXRlRGF0YShkLCBoQ29udGFjdCwga2V5LCBpc051bSwgaXNDdXJyKSB7XG4gICAgaWYgKGhDb250YWN0W2tleV0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBkW2tleV0gPSBoQ29udGFjdFtrZXldLnZhbHVlO1xuICAgICAgICBpZiAoaXNOdW0pIHtcbiAgICAgICAgICAgIGxldCBkZiA9IE51bWJlcihkW2tleV0pO1xuICAgICAgICAgICAgaWYgKGlzTmFOKGRmKSkge1xuICAgICAgICAgICAgICAgIGRmID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpc0N1cnIpIHtcbiAgICAgICAgICAgICAgICBkW2tleV0gPSBkZiAqIDEwMDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZFtrZXldID0gZGY7XG4gICAgICAgICAgICB9XG5cblxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBkO1xufVxuZnVuY3Rpb24gc2V0SERhdGEoaERhdGEsIGtleSwgdmFsdWUsIGZsYWcpIHtcbiAgICBpZiAoZmxhZykge1xuICAgICAgICBoRGF0YVtrZXldID0gdmFsdWU7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGhEYXRhW2tleV0gPT09IHVuZGVmaW5lZCB8fCBoRGF0YVtrZXldID09PSAwKSB7XG4gICAgICAgICAgICBoRGF0YVtrZXldID0gdmFsdWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBoRGF0YVtrZXldID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gZ2V0TnVtYmVyKHZhbCkge1xuICAgIGlmICh2YWwgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgbGV0IG51bSA9IE51bWJlcih2YWwpO1xuICAgIGlmIChpc05hTihudW0pKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgICByZXR1cm4gbnVtO1xufVxuXG5mdW5jdGlvbiBmb3JtYXRDdXJyZW5jeShoRGF0YSwga2V5KSB7XG5cbiAgICByZXR1cm4gaERhdGE7XG59XG5sZXQgaERhdGEgPSB7XG5cbn07XG5oRGF0YSA9IHVwZGF0ZURhdGEoaERhdGEsIGhDb250YWN0LCAnZmlyc3RuYW1lJyk7XG4vL2hEYXRhID0gdXBkYXRlRGF0YShoRGF0YSwgaENvbnRhY3QsICdlbWFpbCcpO1xuaERhdGEgPSB1cGRhdGVEYXRhKGhEYXRhLCBoQ29udGFjdCwgJ2xhc3RuYW1lJyk7XG5oRGF0YSA9IHVwZGF0ZURhdGEoaERhdGEsIGhDb250YWN0LCAncGhvbmUnKTtcbmhEYXRhID0gdXBkYXRlRGF0YShoRGF0YSwgaENvbnRhY3QsICdjb21wYW55Jyk7XG5oRGF0YSA9IHVwZGF0ZURhdGEoaERhdGEsIGhDb250YWN0LCAnYmlsbGluZ2FkZHJlc3MnKTtcbmhEYXRhID0gdXBkYXRlRGF0YShoRGF0YSwgaENvbnRhY3QsICdiaWxsaW5nc3RhdGUnKTtcbmhEYXRhID0gdXBkYXRlRGF0YShoRGF0YSwgaENvbnRhY3QsICdiaWxsaW5nY2l0eScpO1xuaERhdGEgPSB1cGRhdGVEYXRhKGhEYXRhLCBoQ29udGFjdCwgJ2JpbGxpbmdjb3VudHJ5Jyk7XG5oRGF0YSA9IHVwZGF0ZURhdGEoaERhdGEsIGhDb250YWN0LCAnYmlsbGluZ3ppcCcpO1xuaERhdGEgPSB1cGRhdGVEYXRhKGhEYXRhLCBoQ29udGFjdCwgJ2F1dG9jb2xsZWN0aW9uJyk7XG5oRGF0YSA9IHVwZGF0ZURhdGEoaERhdGEsIGhDb250YWN0LCAncHJlZmVycmVkY3VycmVuY3ljb2RlJyk7XG5oRGF0YSA9IHVwZGF0ZURhdGEoaERhdGEsIGhDb250YWN0LCAncGF5bWVudG1ldGhvZHN0YXR1cycpO1xuaERhdGEgPSB1cGRhdGVEYXRhKGhEYXRhLCBoQ29udGFjdCwgJ3BheW1lbnRtZXRob2R0eXBlJyk7XG5oRGF0YSA9IHVwZGF0ZURhdGEoaERhdGEsIGhDb250YWN0LCAnbmV0dGVybWRheXMnKTtcbmhEYXRhID0gdXBkYXRlRGF0YShoRGF0YSwgaENvbnRhY3QsICd0YXhleGVtcHRzdGF0dXMnKTtcbmhEYXRhID0gdXBkYXRlRGF0YShoRGF0YSwgaENvbnRhY3QsICdjaGFyZ2ViZWVjdXN0b21lcmlkJyk7XG5oRGF0YSA9IHVwZGF0ZURhdGEoaERhdGEsIGhDb250YWN0LCAnc3Vic2NyaXB0aW9uaWQnKTtcbmhEYXRhID0gdXBkYXRlRGF0YShoRGF0YSwgaENvbnRhY3QsICdzdWJzY3JpcHRpb3N0YXR1cycpO1xuaERhdGEgPSB1cGRhdGVEYXRhKGhEYXRhLCBoQ29udGFjdCwgJ3Byb2R1Y3QnKTtcbmhEYXRhID0gdXBkYXRlRGF0YShoRGF0YSwgaENvbnRhY3QsICdwbGFucXVhbnRpdHknKTtcbmhEYXRhID0gdXBkYXRlRGF0YShoRGF0YSwgaENvbnRhY3QsICdzZXR1cGZlZScsIHRydWUsIHRydWUpO1xuaERhdGEgPSB1cGRhdGVEYXRhKGhEYXRhLCBoQ29udGFjdCwgJ2R1ZWludm9pY2VzY291bnQnLCB0cnVlLCBmYWxzZSk7XG5oRGF0YSA9IHVwZGF0ZURhdGEoaERhdGEsIGhDb250YWN0LCAncmVtYWluaW5nYmlsbGluZ2N5Y2xlcycpO1xuaERhdGEgPSB1cGRhdGVEYXRhKGhEYXRhLCBoQ29udGFjdCwgJ3BvbnVtYmVyJyk7XG5oRGF0YSA9IHVwZGF0ZURhdGEoaERhdGEsIGhDb250YWN0LCAnbmV4dGJpbGxpbmdhdCcpO1xuaERhdGEgPSB1cGRhdGVEYXRhKGhEYXRhLCBoQ29udGFjdCwgJ3RvdGFsZHVlcycsIHRydWUsIHRydWUpO1xuaERhdGEgPSB1cGRhdGVEYXRhKGhEYXRhLCBoQ29udGFjdCwgJ2R1ZXNpbmNlJyk7XG5oRGF0YSA9IHVwZGF0ZURhdGEoaERhdGEsIGhDb250YWN0LCAnc3Vic2NyaXB0aW9ubXJyJywgdHJ1ZSwgdHJ1ZSk7XG5oRGF0YSA9IHVwZGF0ZURhdGEoaERhdGEsIGhDb250YWN0LCAnbGlmZWN5Y2xlc3RhZ2UnKTtcbmhEYXRhID0gdXBkYXRlRGF0YShoRGF0YSwgaENvbnRhY3QsICdsYXN0b3JkZXJkYXRlJyk7XG5oRGF0YSA9IHVwZGF0ZURhdGEoaERhdGEsIGhDb250YWN0LCAnbGFzdG9yZGVyYmFzZWNvbXBvbmVudHNrdScpO1xuaERhdGEgPSB1cGRhdGVEYXRhKGhEYXRhLCBoQ29udGFjdCwgJ2xhc3RvcmRlcnN0YXR1cycpO1xuaERhdGEgPSB1cGRhdGVEYXRhKGhEYXRhLCBoQ29udGFjdCwgJ2xhc3RvcmRlcicsIHRydWUsIHRydWUpO1xuaERhdGEgPSB1cGRhdGVEYXRhKGhEYXRhLCBoQ29udGFjdCwgJ25leHRvcmRlcmRhdGUnKTtcbmhEYXRhID0gdXBkYXRlRGF0YShoRGF0YSwgaENvbnRhY3QsICduZXh0b3JkZXJiYXNlY29tcG9uZW50c2t1Jyk7XG5oRGF0YSA9IHVwZGF0ZURhdGEoaERhdGEsIGhDb250YWN0LCAnbmV4dG9yZGVyc3RhdHVzJyk7XG5oRGF0YSA9IHVwZGF0ZURhdGEoaERhdGEsIGhDb250YWN0LCAnbmV4dG9yZGVyJywgdHJ1ZSwgdHJ1ZSk7XG5oRGF0YSA9IHVwZGF0ZURhdGEoaERhdGEsIGhDb250YWN0LCAnaW52b2ljZWFtb3VudHBhaWQnLCB0cnVlLCB0cnVlKTtcbmhEYXRhID0gdXBkYXRlRGF0YShoRGF0YSwgaENvbnRhY3QsICduZXh0YmlsbGluZ2Ftb3VudCcsIHRydWUsIHRydWUpO1xuXG5cblxubGV0IGRmdiA9IHtcbiAgICBzdWJzY3JpcHRpb25tcnJPbGQ6IGhEYXRhLnN1YnNjcmlwdGlvbm1ycixcbiAgICB0b3RhbGR1ZXNPbGQ6IGhEYXRhLnRvdGFsZHVlcyxcbiAgICBkdWVpbnZvaWNlc2NvdW50T2xkOiBoRGF0YS5kdWVpbnZvaWNlc2NvdW50LFxuICAgIHN1YnNjcmlwdGlvbmlkT2xkOiBoRGF0YS5zdWJzY3JpcHRpb25pZCxcbiAgICBvcDogXCd1cGRhdGVcJ1xufTtcblxubGV0IGNiYmlsbGluZ2FkZHJlc3M7XG5sZXQgY2JTdGF0ZTtcbmxldCBjYkNpdHk7XG5sZXQgY2JDb3VudHJ5O1xubGV0IGNiWmlwO1xubGV0IGNicGF5bWVudF9tZXRob2Rfc3RhdHVzO1xubGV0IGNicGF5bWVudG1ldGhvZHR5cGU7XG5cbmlmIChjdXN0b21lci5iaWxsaW5nX2FkZHJlc3MgIT09IHVuZGVmaW5lZCkge1xuICAgIGNiYmlsbGluZ2FkZHJlc3MgPSBcJ1wnO1xuICAgIGlmIChjdXN0b21lci5iaWxsaW5nX2FkZHJlc3MubGluZTEgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjYmJpbGxpbmdhZGRyZXNzID0gY2JiaWxsaW5nYWRkcmVzcyArIGN1c3RvbWVyLmJpbGxpbmdfYWRkcmVzcy5saW5lMTtcbiAgICB9XG4gICAgaWYgKGN1c3RvbWVyLmJpbGxpbmdfYWRkcmVzcy5saW5lMiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNiYmlsbGluZ2FkZHJlc3MgPSBjYmJpbGxpbmdhZGRyZXNzICsgXCcgXCcgKyBjdXN0b21lci5iaWxsaW5nX2FkZHJlc3MubGluZTI7XG4gICAgfVxuICAgIGlmIChjdXN0b21lci5iaWxsaW5nX2FkZHJlc3MubGluZTMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjYmJpbGxpbmdhZGRyZXNzID0gY2JiaWxsaW5nYWRkcmVzcyArIFwnIFwnICsgY3VzdG9tZXIuYmlsbGluZ19hZGRyZXNzLmxpbmUzO1xuICAgIH1cbiAgICBpZiAoY2JiaWxsaW5nYWRkcmVzcyA9PT0gXCdcJykge1xuICAgICAgICBjYmJpbGxpbmdhZGRyZXNzID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBjYlN0YXRlID0gY3VzdG9tZXIuYmlsbGluZ19hZGRyZXNzLnN0YXRlO1xuICAgIGNiQ2l0eSA9IGN1c3RvbWVyLmJpbGxpbmdfYWRkcmVzcy5jaXR5O1xuICAgIGNiQ291bnRyeSA9IGN1c3RvbWVyLmJpbGxpbmdfYWRkcmVzcy5jb3VudHJ5O1xuICAgIGNiWmlwID0gY3VzdG9tZXIuYmlsbGluZ19hZGRyZXNzLnppcDtcbn1cblxuaWYgKGN1c3RvbWVyLnBheW1lbnRfbWV0aG9kICE9PSB1bmRlZmluZWQgKSB7XG4gICAgY2JwYXltZW50X21ldGhvZF9zdGF0dXMgPSBjdXN0b21lci5wYXltZW50X21ldGhvZC5zdGF0dXM7XG4gICAgY2JwYXltZW50bWV0aG9kdHlwZSA9IGN1c3RvbWVyLnBheW1lbnRfbWV0aG9kLnR5cGU7XG59XG5cblxuc2V0SERhdGEoaERhdGEsICdjaGFyZ2ViZWVjdXN0b21lcmlkJywgY3VzdG9tZXIuaWQsIG92ZXJyaWRlKTtcbnNldEhEYXRhKGhEYXRhLCAnZW1haWwnLCBjdXN0b21lci5lbWFpbCwgb3ZlcnJpZGUpO1xuc2V0SERhdGEoaERhdGEsICdmaXJzdG5hbWUnLCBjdXN0b21lci5maXJzdF9uYW1lLCBvdmVycmlkZSk7XG5zZXRIRGF0YShoRGF0YSwgJ2xhc3RuYW1lJywgY3VzdG9tZXIubGFzdF9uYW1lLCBvdmVycmlkZSk7XG5zZXRIRGF0YShoRGF0YSwgJ3Bob25lJywgY3VzdG9tZXIucGhvbmUsIG92ZXJyaWRlKTtcbnNldEhEYXRhKGhEYXRhLCAnY29tcGFueScsIGN1c3RvbWVyLmNvbXBhbnksIG92ZXJyaWRlKTtcbnNldEhEYXRhKGhEYXRhLCAnYmlsbGluZ2FkZHJlc3MnLCBjYmJpbGxpbmdhZGRyZXNzLCBvdmVycmlkZSk7XG5zZXRIRGF0YShoRGF0YSwgJ2JpbGxpbmdzdGF0ZScsIGNiU3RhdGUsIG92ZXJyaWRlKTtcbnNldEhEYXRhKGhEYXRhLCAnYmlsbGluZ2NpdHknLCBjYkNpdHksIG92ZXJyaWRlKTtcbnNldEhEYXRhKGhEYXRhLCAnYmlsbGluZ2NvdW50cnknLCBjYkNvdW50cnksIG92ZXJyaWRlKTtcbnNldEhEYXRhKGhEYXRhLCAnYmlsbGluZ3ppcCcsIGNiWmlwLCBvdmVycmlkZSk7XG5zZXRIRGF0YShoRGF0YSwgJ2F1dG9jb2xsZWN0aW9uJywgY3VzdG9tZXIuYXV0b19jb2xsZWN0aW9uLCBvdmVycmlkZSk7XG5zZXRIRGF0YShoRGF0YSwgJ3ByZWZlcnJlZGN1cnJlbmN5Y29kZScsIGN1c3RvbWVyLnByZWZlcnJlZF9jdXJyZW5jeV9jb2RlLCBvdmVycmlkZSk7XG5zZXRIRGF0YShoRGF0YSwgJ3BheW1lbnRtZXRob2RzdGF0dXMnLCBjYnBheW1lbnRfbWV0aG9kX3N0YXR1cywgb3ZlcnJpZGUpO1xuc2V0SERhdGEoaERhdGEsICdwYXltZW50bWV0aG9kdHlwZScsIGNicGF5bWVudG1ldGhvZHR5cGUsIG92ZXJyaWRlKTtcbnNldEhEYXRhKGhEYXRhLCAnbmV0dGVybWRheXMnLCBjdXN0b21lci5uZXRfdGVybV9kYXlzLCBvdmVycmlkZSk7XG5zZXRIRGF0YShoRGF0YSwgJ3RheGV4ZW1wdHN0YXR1cycsIGN1c3RvbWVyLnRheGFiaWxpdHksIG92ZXJyaWRlKTtcblxubGV0IGNiY3VycmVuY3ljb2RlO1xubGV0IGNic3Vic2NyaXB0aW9uaWQ7XG5sZXQgY2JzdWJzY3JpcHRpb3N0YXR1cztcbmxldCBjYnByb2R1Y3Q7XG5sZXQgY2JwbGFucXVhbnRpdHk7XG5sZXQgY2JzZXR1cGZlZTtcbmxldCBjYmR1ZWludm9pY2VzY291bnQ7XG5sZXQgY2JyZW1haW5pbmdiaWxsaW5nY3ljbGVzO1xubGV0IGNicG9udW1iZXI7XG5sZXQgY2JuZXh0YmlsbGluZ2F0O1xubGV0IGNidG90YWxkdWVzO1xubGV0IGNiZHVlc2luY2U7XG5sZXQgY2JzdWJzY3JpcHRpb25tcnI7XG5pZiAoc3Vic2NyaXB0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICBjYmN1cnJlbmN5Y29kZSA9IHN1YnNjcmlwdGlvbi5jdXJyZW5jeV9jb2RlO1xuICAgIGNic3Vic2NyaXB0aW9uaWQgPSBzdWJzY3JpcHRpb24uaWQ7XG4gICAgY2JzdWJzY3JpcHRpb3N0YXR1cyA9IHN1YnNjcmlwdGlvbi5zdGF0dXM7XG4gICAgY2Jwcm9kdWN0ID0gc3Vic2NyaXB0aW9uLnBsYW5faWQ7XG4gICAgY2JwbGFucXVhbnRpdHkgPSBzdWJzY3JpcHRpb24ucGxhbl9xdWFudGl0eTtcbiAgICBjYnNldHVwZmVlID0gZ2V0TnVtYmVyKHN1YnNjcmlwdGlvbi5zZXR1cF9mZWUpO1xuICAgIGNiZHVlaW52b2ljZXNjb3VudCA9IGdldE51bWJlcihzdWJzY3JpcHRpb24uZHVlX2ludm9pY2VzX2NvdW50KTtcbiAgICBjYnJlbWFpbmluZ2JpbGxpbmdjeWNsZXMgPSBzdWJzY3JpcHRpb24ucmVtYWluaW5nX2JpbGxpbmdfY3ljbGVzO1xuICAgIGNicG9udW1iZXIgPSBzdWJzY3JpcHRpb24ucG9fbnVtYmVyO1xuICAgIGlmKHN1YnNjcmlwdGlvbi5uZXh0X2JpbGxpbmdfYXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjYm5leHRiaWxsaW5nYXQgPSBnZXROdW1iZXIoc3Vic2NyaXB0aW9uLm5leHRfYmlsbGluZ19hdCkgKiAxMDAwO1xuICAgIH1cbiAgXG4gICAgY2J0b3RhbGR1ZXMgPSBnZXROdW1iZXIoc3Vic2NyaXB0aW9uLnRvdGFsX2R1ZXMpO1xuICAgIGlmKHN1YnNjcmlwdGlvbi5kdWVfc2luY2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgY2JkdWVzaW5jZSA9IGdldE51bWJlcihzdWJzY3JpcHRpb24uZHVlX3NpbmNlKSAqIDEwMDA7XG4gICAgfVxuICAgIFxuICAgIGNic3Vic2NyaXB0aW9ubXJyID0gZ2V0TnVtYmVyKHN1YnNjcmlwdGlvbi5tcnIpO1xufVxuXG5cbmxldCBuTGlmZWN5Y2xlc3RhZ2U7XG5cbi8vaWYgKGhEYXRhLmxpZmVjeWNsZXN0YWdlID09PSB1bmRlZmluZWQpIHtcbiAgIGlmIChjYnN1YnNjcmlwdGlvc3RhdHVzID09PSBcJ2NhbmNlbGxlZFwnKSB7XG4gICAgICAgIGlmIChzeW5jUnVsZXNDb250YWN0cy5MaWZlY3ljbGVTdGFnZS5DYW5jZWxlZFN1YnNjcmlwdGlvbiAhPT0gdW5kZWZpbmVkICYmIHN5bmNSdWxlc0NvbnRhY3RzLkxpZmVjeWNsZVN0YWdlLkNhbmNlbGVkU3Vic2NyaXB0aW9uICE9PSBcJ3NlbGVjdFwnKSB7XG4gICAgICAgICAgICBuTGlmZWN5Y2xlc3RhZ2UgPSBzeW5jUnVsZXNDb250YWN0cy5MaWZlY3ljbGVTdGFnZS5DYW5jZWxlZFN1YnNjcmlwdGlvbjtcbiAgICAgICAgfVxuXG4gICAgfSBlbHNlIGlmIChjYnN1YnNjcmlwdGlvc3RhdHVzID09PSBcJ2FjdGl2ZVwnKSB7XG4gICAgICAgIGlmIChzeW5jUnVsZXNDb250YWN0cy5MaWZlY3ljbGVTdGFnZS5BY3RpdmVTdWJzY3JpcHRpb24gIT09IHVuZGVmaW5lZCAmJiBzeW5jUnVsZXNDb250YWN0cy5MaWZlY3ljbGVTdGFnZS5BY3RpdmVTdWJzY3JpcHRpb24gIT09IFwnc2VsZWN0XCcpIHtcbiAgICAgICAgICAgIG5MaWZlY3ljbGVzdGFnZSA9IHN5bmNSdWxlc0NvbnRhY3RzLkxpZmVjeWNsZVN0YWdlLkFjdGl2ZVN1YnNjcmlwdGlvbjtcbiAgICAgICAgfVxuXG4gICAgfSBlbHNlIGlmIChjYnN1YnNjcmlwdGlvc3RhdHVzID09PSBcJ2luX3RyaWFsXCcpIHtcbiAgICAgICAgaWYgKHN5bmNSdWxlc0NvbnRhY3RzLkxpZmVjeWNsZVN0YWdlLlRyaWFsU3Vic2NyaXB0aW9uICE9PSB1bmRlZmluZWQgJiYgc3luY1J1bGVzQ29udGFjdHMuTGlmZWN5Y2xlU3RhZ2UuVHJpYWxTdWJzY3JpcHRpb24gIT09IFwnc2VsZWN0XCcpIHtcbiAgICAgICAgICAgIG5MaWZlY3ljbGVzdGFnZSA9IHN5bmNSdWxlc0NvbnRhY3RzLkxpZmVjeWNsZVN0YWdlLlRyaWFsU3Vic2NyaXB0aW9uO1xuICAgICAgICB9XG4gICAgfSBlbHNlIGlmIChjYnN1YnNjcmlwdGlvc3RhdHVzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKHN5bmNSdWxlc0NvbnRhY3RzLkxpZmVjeWNsZVN0YWdlLk5vU3Vic2NyaXB0aW9uICE9PSB1bmRlZmluZWQgJiYgc3luY1J1bGVzQ29udGFjdHMuTGlmZWN5Y2xlU3RhZ2UuTm9TdWJzY3JpcHRpb24gIT09IFwnc2VsZWN0XCcpIHtcbiAgICAgICAgICAgIG5MaWZlY3ljbGVzdGFnZSA9IHN5bmNSdWxlc0NvbnRhY3RzLkxpZmVjeWNsZVN0YWdlLk5vU3Vic2NyaXB0aW9uO1xuICAgICAgICB9XG4gICAgfVxuLy99IGVsc2Uge1xuLy8gICAgaWYgKHN0ZXBzLkNCRGF0YS5odWJzcG90X3N1Yl9zdGF0dXMgIT09IFwnYWN0aXZlXCcgJiYgY2JzdWJzY3JpcHRpb3N0YXR1cyA9PT0gXCdhY3RpdmVcJyAmJiBzeW5jUnVsZXNDb250YWN0cy5MaWZlY3ljbGVTdGFnZS5BY3RpdmVTdWJzY3JpcHRpb24gIT09IHVuZGVmaW5lZCkge1xuIC8vICAgICAgIG5MaWZlY3ljbGVzdGFnZSA9IHN5bmNSdWxlc0NvbnRhY3RzLkxpZmVjeWNsZVN0YWdlLkFjdGl2ZVN1YnNjcmlwdGlvbjtcbiAvLyAgIH0gZWxzZSB7XG4gICAvLyAgICAgbkxpZmVjeWNsZXN0YWdlID0gdW5kZWZpbmVkO1xuICAvLyAgfVxuXG4vL31cblxuc3RlcHMuSHViRGF0YS5jTWV0cmljcyA9IHtcbiAgICBzdWJzY3JpcHRpb25tcnI6IGNic3Vic2NyaXB0aW9ubXJyLFxuICAgIHN1YnNjcmlwdGlvbm1yck9sZDogaERhdGEuc3Vic2NyaXB0aW9ubXJyLFxuICAgIHRvdGFsZHVlczogY2J0b3RhbGR1ZXMsXG4gICAgdG90YWxkdWVzT2xkOiBoRGF0YS50b3RhbGR1ZXMsXG4gICAgZHVlaW52b2ljZXNjb3VudDogY2JkdWVpbnZvaWNlc2NvdW50LFxuICAgIGR1ZWludm9pY2VzY291bnRPbGQ6IGhEYXRhLmR1ZWludm9pY2VzY291bnQsXG4gICAgc3Vic2NyaXB0aW9uaWQ6IGNic3Vic2NyaXB0aW9uaWQsXG4gICAgc3Vic2NyaXB0aW9uaWRPbGQ6IGhEYXRhLnN1YnNjcmlwdGlvbmlkLFxuICAgIG9wOiBcJ3VwZGF0ZVwnXG59O1xuXG5zZXRIRGF0YShoRGF0YSwgJ2N1cnJlbmN5Y29kZScsIGNiY3VycmVuY3ljb2RlLCB0cnVlKTtcbnNldEhEYXRhKGhEYXRhLCAnbGlmZWN5Y2xlc3RhZ2UnLCBuTGlmZWN5Y2xlc3RhZ2UsIHRydWUpO1xuc2V0SERhdGEoaERhdGEsICdzdWJzY3JpcHRpb25pZCcsIGNic3Vic2NyaXB0aW9uaWQsIHRydWUpO1xuc2V0SERhdGEoaERhdGEsICdzdWJzY3JpcHRpb3N0YXR1cycsIGNic3Vic2NyaXB0aW9zdGF0dXMsIHRydWUpO1xuc2V0SERhdGEoaERhdGEsICdwcm9kdWN0JywgY2Jwcm9kdWN0LCB0cnVlKTtcbnNldEhEYXRhKGhEYXRhLCAncGxhbnF1YW50aXR5JywgY2JwbGFucXVhbnRpdHksIHRydWUpO1xuc2V0SERhdGEoaERhdGEsICdyZW1haW5pbmdiaWxsaW5nY3ljbGVzJywgY2JyZW1haW5pbmdiaWxsaW5nY3ljbGVzLCB0cnVlKTtcbnNldEhEYXRhKGhEYXRhLCAncG9udW1iZXInLCBjYnBvbnVtYmVyLCB0cnVlKTtcbnNldEhEYXRhKGhEYXRhLCAnbmV4dGJpbGxpbmdhdCcsIGNibmV4dGJpbGxpbmdhdCwgdHJ1ZSk7XG5zZXRIRGF0YShoRGF0YSwgJ2R1ZXNpbmNlJywgY2JkdWVzaW5jZSwgdHJ1ZSk7XG5zZXRIRGF0YShoRGF0YSwgJ2R1ZWludm9pY2VzY291bnQnLCBjYmR1ZWludm9pY2VzY291bnQsIHRydWUpO1xuc2V0SERhdGEoaERhdGEsICd0b3RhbGR1ZXMnLCBjYnRvdGFsZHVlcywgdHJ1ZSk7XG5zZXRIRGF0YShoRGF0YSwgJ3NldHVwZmVlJywgY2JzZXR1cGZlZSwgdHJ1ZSk7XG5zZXRIRGF0YShoRGF0YSwgJ3N1YnNjcmlwdGlvbm1ycicsIGNic3Vic2NyaXB0aW9ubXJyLCB0cnVlKTtcblxuXG5cbmxldCBjYmxhc3RvcmRlcmRhdGU7XG5sZXQgY2JsYXN0b3JkZXJiYXNlY29tcG9uZW50c2t1O1xubGV0IGNibGFzdG9yZGVyc3RhdHVzO1xubGV0IGNibGFzdG9yZGVyO1xubGV0IGNibmV4dG9yZGVyZGF0ZTtcbmxldCBjYm5leHRvcmRlcmJhc2Vjb21wb25lbnRza3U7XG5sZXQgY2JuZXh0b3JkZXJzdGF0dXM7XG5sZXQgY2JuZXh0b3JkZXI7XG5cbmxldCBteU9yZGVyO1xuXG5pZiAoc3RlcHMuSHViRGF0YS5vcmRlciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgbGV0IG9yZGVyQmVmb3JlID0gc3RlcHMuSHViRGF0YS5vcmRlci5iZWZvcmU7XG4gICAgbXlPcmRlciA9IG9yZGVyQmVmb3JlO1xuICAgIGlmKG9yZGVyQmVmb3JlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKG9yZGVyQmVmb3JlLm9yZGVyX2RhdGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY2JsYXN0b3JkZXJkYXRlID0gZ2V0TnVtYmVyKG9yZGVyQmVmb3JlLm9yZGVyX2RhdGUpICogMTAwMDtcbiAgICAgICAgfVxuICAgICAgICBjYmxhc3RvcmRlcmJhc2Vjb21wb25lbnRza3UgPSBvcmRlckJlZm9yZS5za3U7XG4gICAgICAgIGNibGFzdG9yZGVyc3RhdHVzID0gb3JkZXJCZWZvcmUuc3RhdHVzO1xuICAgICAgICBjYmxhc3RvcmRlciA9IGdldE51bWJlcihvcmRlckJlZm9yZS50b3RhbCk7XG4gICAgfVxuICAgXG5cbiAgICBsZXQgb3JkZXJBZnRlciA9IHN0ZXBzLkh1YkRhdGEub3JkZXIuYWZ0ZXI7XG4gICAgaWYob3JkZXJBZnRlciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGlmIChvcmRlckFmdGVyLm9yZGVyX2RhdGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY2JuZXh0b3JkZXJkYXRlID0gZ2V0TnVtYmVyKG9yZGVyQWZ0ZXIub3JkZXJfZGF0ZSkgKiAxMDAwO1xuICAgICAgICB9XG4gICAgICAgIGNibmV4dG9yZGVyYmFzZWNvbXBvbmVudHNrdSA9IG9yZGVyQWZ0ZXIuc2t1O1xuICAgICAgICBjYm5leHRvcmRlcnN0YXR1cyA9IG9yZGVyQWZ0ZXIuc3RhdHVzO1xuICAgICAgICBjYm5leHRvcmRlciA9IGdldE51bWJlcihvcmRlckFmdGVyLnRvdGFsKTtcbiAgICB9XG4gICBcbn1cblxuc2V0SERhdGEoaERhdGEsICdsYXN0b3JkZXJkYXRlJywgY2JsYXN0b3JkZXJkYXRlLCB0cnVlKTtcbnNldEhEYXRhKGhEYXRhLCAnbGFzdG9yZGVyYmFzZWNvbXBvbmVudHNrdScsIGNibGFzdG9yZGVyYmFzZWNvbXBvbmVudHNrdSwgdHJ1ZSk7XG5zZXRIRGF0YShoRGF0YSwgJ2xhc3RvcmRlcnN0YXR1cycsIGNibGFzdG9yZGVyc3RhdHVzLCB0cnVlKTtcbnNldEhEYXRhKGhEYXRhLCAnbGFzdG9yZGVyJywgY2JsYXN0b3JkZXIsIHRydWUpO1xuc2V0SERhdGEoaERhdGEsICduZXh0b3JkZXJkYXRlJywgY2JuZXh0b3JkZXJkYXRlLCB0cnVlKTtcbnNldEhEYXRhKGhEYXRhLCAnbmV4dG9yZGVyYmFzZWNvbXBvbmVudHNrdScsIGNibmV4dG9yZGVyYmFzZWNvbXBvbmVudHNrdSwgdHJ1ZSk7XG5zZXRIRGF0YShoRGF0YSwgJ25leHRvcmRlcnN0YXR1cycsIGNibmV4dG9yZGVyc3RhdHVzLCB0cnVlKTtcbnNldEhEYXRhKGhEYXRhLCAnbmV4dG9yZGVyJywgY2JuZXh0b3JkZXIsIHRydWUpO1xuXG5cbmxldCBjYmludm9pY2VhbW91bnRwYWlkO1xubGV0IGNiaW52b2ljZWVzdGltYXRlO1xuaWYgKHN0ZXBzLkh1YkRhdGEuaW52b2ljZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgY2JpbnZvaWNlYW1vdW50cGFpZCA9IGdldE51bWJlcihzdGVwcy5IdWJEYXRhLmludm9pY2UudG90YWwpO1xuICAgIGNiaW52b2ljZWVzdGltYXRlID0gZ2V0TnVtYmVyKHN0ZXBzLkh1YkRhdGEuaW52b2ljZS5lc3RpbWF0ZSk7XG59XG5cbnN0ZXBzLkh1YkRhdGEuY01ldHJpY3MuaW52b2ljZWFtb3VudHBhaWQgPSBjYmludm9pY2VhbW91bnRwYWlkO1xuc3RlcHMuSHViRGF0YS5jTWV0cmljcy5pbnZvaWNlYW1vdW50cGFpZE9sZCA9IGhEYXRhLmludm9pY2VhbW91bnRwYWlkO1xuXG5zZXRIRGF0YShoRGF0YSwgJ2ludm9pY2VhbW91bnRwYWlkJywgY2JpbnZvaWNlYW1vdW50cGFpZCwgdHJ1ZSk7XG5zZXRIRGF0YShoRGF0YSwgJ25leHRiaWxsaW5nYW1vdW50JywgY2JpbnZvaWNlZXN0aW1hdGUsIHRydWUpO1xuXG4vL2N1c3RvbVxubGV0IHN5bmNSdWxlc0ZpZWxkcyA9IHN0ZXBzLkNoYXJnZWJlZUNvbmZpZ1BhcmFtcy5yZXNwb25zZS5ib2R5LnRoaXJkX3BhcnR5X2NvbmZpZ3VyYXRpb24uY29uZmlnX2pzb24uY2xvdWRFbGVtZW50cy5zeW5jUnVsZXNGaWVsZHM7XG5pZiAoc3luY1J1bGVzRmllbGRzID09PSB1bmRlZmluZWQpIHtcbiAgICBzeW5jUnVsZXNGaWVsZHMgPSB7XG4gICAgICAgIFwnY29tcGFueVwnOiB7XG5cbiAgICAgICAgfSxcbiAgICAgICAgXCdjb250YWN0XCc6IHtcblxuICAgICAgICB9LFxuICAgICAgICBcJ2RlYWxcJzoge1xuICAgICAgICB9LFxuICAgICAgICBcJ3N5bmNcJzogXCdmYWxzZVwnXG4gICAgfTtcblxufSBlbHNlIHtcbiAgICBpZiAoc3luY1J1bGVzRmllbGRzLmNvbXBhbnkgPT09IHVuZGVmaW5lZCB8fCBzeW5jUnVsZXNGaWVsZHMuY29tcGFueSA9PT0gXCdcJykge1xuICAgICAgICBzeW5jUnVsZXNGaWVsZHMuY29tcGFueSA9IHt9O1xuICAgIH1cbiAgICBpZiAoc3luY1J1bGVzRmllbGRzLmNvbnRhY3QgPT09IHVuZGVmaW5lZCB8fCBzeW5jUnVsZXNGaWVsZHMuY29udGFjdCA9PT0gXCdcJykge1xuICAgICAgICBzeW5jUnVsZXNGaWVsZHMuY29udGFjdCA9IHt9O1xuICAgIH1cbiAgICBpZiAoc3luY1J1bGVzRmllbGRzLmRlYWwgPT09IHVuZGVmaW5lZCB8fCBzeW5jUnVsZXNGaWVsZHMuZGVhbCA9PT0gXCdcJykge1xuICAgICAgICBzeW5jUnVsZXNGaWVsZHMuZGVhbCA9IHt9O1xuICAgIH1cbn1cbnN5bmNSdWxlc0ZpZWxkcyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoc3luY1J1bGVzRmllbGRzKSk7XG5cbmxldCBjb21wYW55S2V5cyA9IE9iamVjdC5rZXlzKHN5bmNSdWxlc0ZpZWxkcy5jb21wYW55KTtcblxuZm9yICh2YXIgaSA9IDA7IGkgPHNwYW4+PDwvc3Bhbj4gY29tcGFueUtleXMubGVuZ3RoOyBpKyspIHtcbiAgICBzeW5jUnVsZXNGaWVsZHMuY29udGFjdFtjb21wYW55S2V5c1tpXV0gPSBzeW5jUnVsZXNGaWVsZHMuY29tcGFueVtjb21wYW55S2V5c1tpXV07XG59XG5cblxubGV0IGN1c3RvbWVmaWVsZHMgPSBzdGVwcy5TeW5jTG9nLmN1c3RvbWVmaWVsZHM7XG5mb3IgKHZhciBpID0gMDsgaSA8c3Bhbj48PC9zcGFuPiBjdXN0b21lZmllbGRzLmxlbmd0aDsgaSsrKSB7XG4gICAgbGV0IGZsZCA9IGN1c3RvbWVmaWVsZHNbaV07XG5cbiAgICBmb3IgKHZhciBqID0gMDsgaiA8c3Bhbj48PC9zcGFuPiBmbGQuZmllbGRzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgIHZhciBlcyA9IGZsZC5maWVsZHNbal07XG4gICAgICAgIHZhciBkZXNjID0gZmxkLmxhYmVsICsgXCcgXCcgKyBlc1swXS5yZXBsYWNlKC9fL2csIFwnIFwnKTtcbiAgICAgICAgdmFyIGlkID0gZmxkLmtleSArIFwnX1wnICsgZXNbMF07XG4gICAgICAgIGlmIChzeW5jUnVsZXNGaWVsZHMuY29udGFjdFtpZF0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgc3luY1J1bGVzRmllbGRzLmNvbnRhY3RbaWRdID0gZXM7XG4gICAgICAgIH1cbiAgICB9XG59XG5sZXQgY3VzdG9tS2V5cyA9IE9iamVjdC5rZXlzKHN5bmNSdWxlc0ZpZWxkcy5jb250YWN0KTtcbmZvciAodmFyIGkgPSAwOyBpIDxzcGFuPjw8L3NwYW4+IGN1c3RvbUtleXMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgY0tleSA9IGN1c3RvbUtleXNbaV07XG4gICAgdmFyIGNWYWwgPSBzeW5jUnVsZXNGaWVsZHMuY29udGFjdFtjS2V5XTtcbiAgICBsZXQgc3ViVmFsO1xuICAgIGlmIChjS2V5LnN0YXJ0c1dpdGgoXCdzdWJjc3RcJykpIHtcbiAgICAgICAgaWYgKHN1YnNjcmlwdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBzdWJWYWwgPSBzdWJzY3JpcHRpb25bY1ZhbFswXV07XG4gICAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGNLZXkuc3RhcnRzV2l0aChcJ29yZGVyY3N0XCcpKSB7XG4gICAgICAgIGlmIChteU9yZGVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHN1YlZhbCA9IG15T3JkZXJbY1ZhbFswXV07XG4gICAgICAgIH1cblxuICAgIH0gZWxzZSBpZiAoY0tleS5zdGFydHNXaXRoKFwnY3VzdGNzdFwnKSkge1xuICAgICAgICBpZiAoY3VzdG9tZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgc3ViVmFsID0gY3VzdG9tZXJbY1ZhbFswXV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGNWYWxbMV0gPT09IFwnbnVtYmVyXCcpIHtcbiAgICAgICAgc3ViVmFsID0gZ2V0TnVtYmVyKHN1YlZhbCk7XG4gICAgICAgXG4gICAgICAgIGlmIChjVmFsLmxlbmd0aCA9PSA0KSB7XG4gICAgICAgICAgICBoRGF0YSA9IHVwZGF0ZURhdGEoaERhdGEsIGhDb250YWN0LCBjS2V5LHRydWUsdHJ1ZSk7XG4gICAgICAgICAgICBzdGVwcy5IdWJEYXRhLmNNZXRyaWNzW2NLZXkrXCdPbGRcJ10gPSBoRGF0YVtjS2V5XTtcbiAgICAgICAgICAgICBzZXRIRGF0YShoRGF0YSwgY0tleSwgc3ViVmFsKTtcbiAgICAgICAgICAgICBcbiAgICAgICAgICAgIHByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCBjS2V5LCB0cnVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBoRGF0YSA9IHVwZGF0ZURhdGEoaERhdGEsIGhDb250YWN0LCBjS2V5LHRydWUpO1xuICAgICAgICAgIHN0ZXBzLkh1YkRhdGEuY01ldHJpY3NbY0tleV0gPSBzdWJWYWw7XG4gICAgICAgICAgIHNldEhEYXRhKGhEYXRhLCBjS2V5LCBzdWJWYWwpO1xuICAgICAgICAgICAgcHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsIGNLZXkpO1xuICAgICAgICB9XG4gICAgICAgICBzdGVwcy5IdWJEYXRhLmNNZXRyaWNzW2NLZXkrXCdPbGRcJ10gPSBoRGF0YVtjS2V5XTtcbiAgICB9IGVsc2UgaWYgKGNWYWxbMV0gPT09IFwnZGF0ZXRpbWVcJykge1xuICAgICAgaWYoc3ViVmFsICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgIHN1YlZhbCA9IGdldE51bWJlcihzdWJWYWwpICogMTAwMDtcbiAgICAgICAgc2V0SERhdGEoaERhdGEsIGNLZXksIHN1YlZhbCk7XG4gICAgICAgIHByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCBjS2V5KTtcbiAgICAgIH1cbiAgICAgICBcblxuICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChzdWJWYWwgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgc3ViVmFsID0gXCdcJztcblxuICAgICAgICB9XG4gICAgICAgIHNldEhEYXRhKGhEYXRhLCBjS2V5LCBzdWJWYWwpO1xuICAgICAgICBwcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgY0tleSk7XG4gICAgfVxuXG5cbn1cbi8vY3VzdG9tXG5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ2ZpcnN0bmFtZScpO1xuLy9wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ2VtYWlsJyk7XG5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ2xhc3RuYW1lJyk7XG5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ3Bob25lJyk7XG5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ2NvbXBhbnknKTtcbnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAnYmlsbGluZ2FkZHJlc3MnKTtcbnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAnYmlsbGluZ3N0YXRlJyk7XG5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ2JpbGxpbmdjaXR5Jyk7XG5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ2JpbGxpbmdjb3VudHJ5Jyk7XG5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ2JpbGxpbmd6aXAnKTtcbnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAnYXV0b2NvbGxlY3Rpb24nKTtcbnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAncHJlZmVycmVkY3VycmVuY3ljb2RlJyk7XG5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ3BheW1lbnRtZXRob2RzdGF0dXMnKTtcbnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAncGF5bWVudG1ldGhvZHR5cGUnKTtcbnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAnbmV0dGVybWRheXMnKTtcbnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAndGF4ZXhlbXB0c3RhdHVzJyk7XG5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ2NoYXJnZWJlZWN1c3RvbWVyaWQnKTtcbnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAnc3Vic2NyaXB0aW9uaWQnKTtcbnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAnc3Vic2NyaXB0aW9zdGF0dXMnKTtcbnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAncHJvZHVjdCcpO1xucHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdwbGFucXVhbnRpdHknKTtcbnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAnc2V0dXBmZWUnLCB0cnVlKTtcbnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAnZHVlaW52b2ljZXNjb3VudCcpO1xucHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdyZW1haW5pbmdiaWxsaW5nY3ljbGVzJyk7XG5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ3BvbnVtYmVyJyk7XG5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ25leHRiaWxsaW5nYXQnKTtcbnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAndG90YWxkdWVzJywgdHJ1ZSk7XG5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ2R1ZXNpbmNlJyk7XG5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ3N1YnNjcmlwdGlvbm1ycicsIHRydWUpO1xucHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdsaWZlY3ljbGVzdGFnZScpO1xucHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdsYXN0b3JkZXJkYXRlJyk7XG5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ2xhc3RvcmRlcmJhc2Vjb21wb25lbnRza3UnKTtcbnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAnbGFzdG9yZGVyc3RhdHVzJyk7XG5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ2xhc3RvcmRlcicsIHRydWUpO1xucHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICduZXh0b3JkZXJkYXRlJyk7XG5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ25leHRvcmRlcmJhc2Vjb21wb25lbnRza3UnKTtcbnByb3BlcnRpZXMgPSB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGhEYXRhLCAnbmV4dG9yZGVyc3RhdHVzJyk7XG5wcm9wZXJ0aWVzID0gdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBoRGF0YSwgJ25leHRvcmRlcicsIHRydWUpO1xucHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICdpbnZvaWNlYW1vdW50cGFpZCcsIHRydWUpO1xucHJvcGVydGllcyA9IHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcywgaERhdGEsICduZXh0YmlsbGluZ2Ftb3VudCcsIHRydWUpO1xuXG5zdGVwcy5IdWJTcG90SW5wdXQuaW5wdXRzLnByb3BlcnRpZXMgPSBwcm9wZXJ0aWVzO1xuXG5sZXQgZ2ZnID0ge1xuICAgIHByb3BlcnRpZXM6IHByb3BlcnRpZXMsXG4gICAgbWV0cmljczogc3RlcHMuSHViRGF0YS5jTWV0cmljcyxcbiAgICBoRGF0YTogaERhdGFcbn1cblxuZG9uZShnZmcpOyc8YnI+ICB9PGJyPn08L3ByZT48L2JvZHk+PC9odG1sPg=='));document.close();" "JavaScript:<br><pre>let customer = steps.HubData.customer;<br>let subscription = steps.HubData.subscription;<br>let syncRulesContacts = steps.CustomersParam.syncRulesContacts;<br>let contact = steps.CBData.hubspot.contact;<br>steps.HubSpotInput.url = 'https://api.hubapi.com/contacts/v1/contact/vid/' + contact.vid + '/profile';<br><br>let hContact = contact.properties;<br>let override = syncRulesContacts.HubSpotContactMatch === 'Override_the_fields';<br>let properties = [];<br>function updateProperties(properties, hData, key, isCurrency) {<br>    let val = hData[key];<br>    if (val !== undefined) {<br>        if (isCurrency) {<br>            val = parseFloat(parseInt(val, 10) / 100).toFixed(2);<br>        }<br>        properties.push({<br>            'property': key,<br>            'value': val<br>        });<br>    }<br>    return properties;<br>}<br>function updateData(d, hContact, key, isNum, isCurr) {<br>    if (hContact[key] !== undefined) {<br>        d[key] = hContact[key].value;<br>        if (isNum) {<br>            let df = Number(d[key]);<br>            if (isNaN(df)) {<br>                df = 0;<br>            }<br>            if (isCurr) {<br>                d[key] = df * 100;<br>            } else {<br>                d[key] = df;<br>            }<br><br><br>        }<br>    }<br>    return d;<br>}<br>function setHData(hData, key, value, flag) {<br>    if (flag) {<br>        hData[key] = value;<br>    } else {<br>        if (hData[key] === undefined || hData[key] === 0) {<br>            hData[key] = value;<br>        } else {<br>            hData[key] = undefined;<br>        }<br>    }<br>}<br>function getNumber(val) {<br>    if (val === undefined) {<br>        return 0;<br>    }<br>    let num = Number(val);<br>    if (isNaN(num)) {<br>        return 0;<br>    }<br>    return num;<br>}<br><br>function formatCurrency(hData, key) {<br><br>    return hData;<br>}<br>let hData = {<br><br>};<br>hData = updateData(hData, hContact, 'firstname');<br>//hData = updateData(hData, hContact, 'email');<br>hData = updateData(hData, hContact, 'lastname');<br>hData = updateData(hData, hContact, 'phone');<br>hData = updateData(hData, hContact, 'company');<br>hData = updateData(hData, hContact, 'billingaddress');<br>hData = updateData(hData, hContact, 'billingstate');<br>hData = updateData(hData, hContact, 'billingcity');<br>hData = updateData(hData, hContact, 'billingcountry');<br>hData = updateData(hData, hContact, 'billingzip');<br>hData = updateData(hData, hContact, 'autocollection');<br>hData = updateData(hData, hContact, 'preferredcurrencycode');<br>hData = updateData(hData, hContact, 'paymentmethodstatus');<br>hData = updateData(hData, hContact, 'paymentmethodtype');<br>hData = updateData(hData, hContact, 'nettermdays');<br>hData = updateData(hData, hContact, 'taxexemptstatus');<br>hData = updateData(hData, hContact, 'chargebeecustomerid');<br>hData = updateData(hData, hContact, 'subscriptionid');<br>hData = updateData(hData, hContact, 'subscriptiostatus');<br>hData = updateData(hData, hContact, 'product');<br>hData = updateData(hData, hContact, 'planquantity');<br>hData = updateData(hData, hContact, 'setupfee', true, true);<br>hData = updateData(hData, hContact, 'dueinvoicescount', true, false);<br>hData = updateData(hData, hContact, 'remainingbillingcycles');<br>hData = updateData(hData, hContact, 'ponumber');<br>hData = updateData(hData, hContact, 'nextbillingat');<br>hData = updateData(hData, hContact, 'totaldues', true, true);<br>hData = updateData(hData, hContact, 'duesince');<br>hData = updateData(hData, hContact, 'subscriptionmrr', true, true);<br>hData = updateData(hData, hContact, 'lifecyclestage');<br>hData = updateData(hData, hContact, 'lastorderdate');<br>hData = updateData(hData, hContact, 'lastorderbasecomponentsku');<br>hData = updateData(hData, hContact, 'lastorderstatus');<br>hData = updateData(hData, hContact, 'lastorder', true, true);<br>hData = updateData(hData, hContact, 'nextorderdate');<br>hData = updateData(hData, hContact, 'nextorderbasecomponentsku');<br>hData = updateData(hData, hContact, 'nextorderstatus');<br>hData = updateData(hData, hContact, 'nextorder', true, true);<br>hData = updateData(hData, hContact, 'invoiceamountpaid', true, true);<br>hData = updateData(hData, hContact, 'nextbillingamount', true, true);<br><br><br><br>let dfv = {<br>    subscriptionmrrOld: hData.subscriptionmrr,<br>    totalduesOld: hData.totaldues,<br>    dueinvoicescountOld: hData.dueinvoicescount,<br>    subscriptionidOld: hData.subscriptionid,<br>    op: 'update'<br>};<br><br>let cbbillingaddress;<br>let cbState;<br>let cbCity;<br>let cbCountry;<br>let cbZip;<br>let cbpayment_method_status;<br>let cbpaymentmethodtype;<br><br>if (customer.billing_address !== undefined) {<br>    cbbillingaddress = '';<br>    if (customer.billing_address.line1 !== undefined) {<br>        cbbillingaddress = cbbillingaddress + customer.billing_address.line1;<br>    }<br>    if (customer.billing_address.line2 !== undefined) {<br>        cbbillingaddress = cbbillingaddress + ' ' + customer.billing_address.line2;<br>    }<br>    if (customer.billing_address.line3 !== undefined) {<br>        cbbillingaddress = cbbillingaddress + ' ' + customer.billing_address.line3;<br>    }<br>    if (cbbillingaddress === '') {<br>        cbbillingaddress = undefined;<br>    }<br>    cbState = customer.billing_address.state;<br>    cbCity = customer.billing_address.city;<br>    cbCountry = customer.billing_address.country;<br>    cbZip = customer.billing_address.zip;<br>}<br><br>if (customer.payment_method !== undefined ) {<br>    cbpayment_method_status = customer.payment_method.status;<br>    cbpaymentmethodtype = customer.payment_method.type;<br>}<br><br><br>setHData(hData, 'chargebeecustomerid', customer.id, override);<br>setHData(hData, 'email', customer.email, override);<br>setHData(hData, 'firstname', customer.first_name, override);<br>setHData(hData, 'lastname', customer.last_name, override);<br>setHData(hData, 'phone', customer.phone, override);<br>setHData(hData, 'company', customer.company, override);<br>setHData(hData, 'billingaddress', cbbillingaddress, override);<br>setHData(hData, 'billingstate', cbState, override);<br>setHData(hData, 'billingcity', cbCity, override);<br>setHData(hData, 'billingcountry', cbCountry, override);<br>setHData(hData, 'billingzip', cbZip, override);<br>setHData(hData, 'autocollection', customer.auto_collection, override);<br>setHData(hData, 'preferredcurrencycode', customer.preferred_currency_code, override);<br>setHData(hData, 'paymentmethodstatus', cbpayment_method_status, override);<br>setHData(hData, 'paymentmethodtype', cbpaymentmethodtype, override);<br>setHData(hData, 'nettermdays', customer.net_term_days, override);<br>setHData(hData, 'taxexemptstatus', customer.taxability, override);<br><br>let cbcurrencycode;<br>let cbsubscriptionid;<br>let cbsubscriptiostatus;<br>let cbproduct;<br>let cbplanquantity;<br>let cbsetupfee;<br>let cbdueinvoicescount;<br>let cbremainingbillingcycles;<br>let cbponumber;<br>let cbnextbillingat;<br>let cbtotaldues;<br>let cbduesince;<br>let cbsubscriptionmrr;<br>if (subscription !== undefined) {<br>    cbcurrencycode = subscription.currency_code;<br>    cbsubscriptionid = subscription.id;<br>    cbsubscriptiostatus = subscription.status;<br>    cbproduct = subscription.plan_id;<br>    cbplanquantity = subscription.plan_quantity;<br>    cbsetupfee = getNumber(subscription.setup_fee);<br>    cbdueinvoicescount = getNumber(subscription.due_invoices_count);<br>    cbremainingbillingcycles = subscription.remaining_billing_cycles;<br>    cbponumber = subscription.po_number;<br>    if(subscription.next_billing_at !== undefined) {<br>        cbnextbillingat = getNumber(subscription.next_billing_at) * 1000;<br>    }<br>  <br>    cbtotaldues = getNumber(subscription.total_dues);<br>    if(subscription.due_since !== undefined) {<br>      cbduesince = getNumber(subscription.due_since) * 1000;<br>    }<br>    <br>    cbsubscriptionmrr = getNumber(subscription.mrr);<br>}<br><br><br>let nLifecyclestage;<br><br>//if (hData.lifecyclestage === undefined) {<br>   if (cbsubscriptiostatus === 'cancelled') {<br>        if (syncRulesContacts.LifecycleStage.CanceledSubscription !== undefined && syncRulesContacts.LifecycleStage.CanceledSubscription !== 'select') {<br>            nLifecyclestage = syncRulesContacts.LifecycleStage.CanceledSubscription;<br>        }<br><br>    } else if (cbsubscriptiostatus === 'active') {<br>        if (syncRulesContacts.LifecycleStage.ActiveSubscription !== undefined && syncRulesContacts.LifecycleStage.ActiveSubscription !== 'select') {<br>            nLifecyclestage = syncRulesContacts.LifecycleStage.ActiveSubscription;<br>        }<br><br>    } else if (cbsubscriptiostatus === 'in_trial') {<br>        if (syncRulesContacts.LifecycleStage.TrialSubscription !== undefined && syncRulesContacts.LifecycleStage.TrialSubscription !== 'select') {<br>            nLifecyclestage = syncRulesContacts.LifecycleStage.TrialSubscription;<br>        }<br>    } else if (cbsubscriptiostatus === undefined) {<br>        if (syncRulesContacts.LifecycleStage.NoSubscription !== undefined && syncRulesContacts.LifecycleStage.NoSubscription !== 'select') {<br>            nLifecyclestage = syncRulesContacts.LifecycleStage.NoSubscription;<br>        }<br>    }<br>//} else {<br>//    if (steps.CBData.hubspot_sub_status !== 'active' && cbsubscriptiostatus === 'active' && syncRulesContacts.LifecycleStage.ActiveSubscription !== undefined) {<br> //       nLifecyclestage = syncRulesContacts.LifecycleStage.ActiveSubscription;<br> //   } else {<br>   //     nLifecyclestage = undefined;<br>  //  }<br><br>//}<br><br>steps.HubData.cMetrics = {<br>    subscriptionmrr: cbsubscriptionmrr,<br>    subscriptionmrrOld: hData.subscriptionmrr,<br>    totaldues: cbtotaldues,<br>    totalduesOld: hData.totaldues,<br>    dueinvoicescount: cbdueinvoicescount,<br>    dueinvoicescountOld: hData.dueinvoicescount,<br>    subscriptionid: cbsubscriptionid,<br>    subscriptionidOld: hData.subscriptionid,<br>    op: 'update'<br>};<br><br>setHData(hData, 'currencycode', cbcurrencycode, true);<br>setHData(hData, 'lifecyclestage', nLifecyclestage, true);<br>setHData(hData, 'subscriptionid', cbsubscriptionid, true);<br>setHData(hData, 'subscriptiostatus', cbsubscriptiostatus, true);<br>setHData(hData, 'product', cbproduct, true);<br>setHData(hData, 'planquantity', cbplanquantity, true);<br>setHData(hData, 'remainingbillingcycles', cbremainingbillingcycles, true);<br>setHData(hData, 'ponumber', cbponumber, true);<br>setHData(hData, 'nextbillingat', cbnextbillingat, true);<br>setHData(hData, 'duesince', cbduesince, true);<br>setHData(hData, 'dueinvoicescount', cbdueinvoicescount, true);<br>setHData(hData, 'totaldues', cbtotaldues, true);<br>setHData(hData, 'setupfee', cbsetupfee, true);<br>setHData(hData, 'subscriptionmrr', cbsubscriptionmrr, true);<br><br><br><br>let cblastorderdate;<br>let cblastorderbasecomponentsku;<br>let cblastorderstatus;<br>let cblastorder;<br>let cbnextorderdate;<br>let cbnextorderbasecomponentsku;<br>let cbnextorderstatus;<br>let cbnextorder;<br><br>let myOrder;<br><br>if (steps.HubData.order !== undefined) {<br>    let orderBefore = steps.HubData.order.before;<br>    myOrder = orderBefore;<br>    if(orderBefore !== undefined) {<br>        if (orderBefore.order_date !== undefined) {<br>            cblastorderdate = getNumber(orderBefore.order_date) * 1000;<br>        }<br>        cblastorderbasecomponentsku = orderBefore.sku;<br>        cblastorderstatus = orderBefore.status;<br>        cblastorder = getNumber(orderBefore.total);<br>    }<br>   <br><br>    let orderAfter = steps.HubData.order.after;<br>    if(orderAfter !== undefined) {<br>        if (orderAfter.order_date !== undefined) {<br>            cbnextorderdate = getNumber(orderAfter.order_date) * 1000;<br>        }<br>        cbnextorderbasecomponentsku = orderAfter.sku;<br>        cbnextorderstatus = orderAfter.status;<br>        cbnextorder = getNumber(orderAfter.total);<br>    }<br>   <br>}<br><br>setHData(hData, 'lastorderdate', cblastorderdate, true);<br>setHData(hData, 'lastorderbasecomponentsku', cblastorderbasecomponentsku, true);<br>setHData(hData, 'lastorderstatus', cblastorderstatus, true);<br>setHData(hData, 'lastorder', cblastorder, true);<br>setHData(hData, 'nextorderdate', cbnextorderdate, true);<br>setHData(hData, 'nextorderbasecomponentsku', cbnextorderbasecomponentsku, true);<br>setHData(hData, 'nextorderstatus', cbnextorderstatus, true);<br>setHData(hData, 'nextorder', cbnextorder, true);<br><br><br>let cbinvoiceamountpaid;<br>let cbinvoiceestimate;<br>if (steps.HubData.invoice !== undefined) {<br>    cbinvoiceamountpaid = getNumber(steps.HubData.invoice.total);<br>    cbinvoiceestimate = getNumber(steps.HubData.invoice.estimate);<br>}<br><br>steps.HubData.cMetrics.invoiceamountpaid = cbinvoiceamountpaid;<br>steps.HubData.cMetrics.invoiceamountpaidOld = hData.invoiceamountpaid;<br><br>setHData(hData, 'invoiceamountpaid', cbinvoiceamountpaid, true);<br>setHData(hData, 'nextbillingamount', cbinvoiceestimate, true);<br><br>//custom<br>let syncRulesFields = steps.ChargebeeConfigParams.response.body.third_party_configuration.config_json.cloudElements.syncRulesFields;<br>if (syncRulesFields === undefined) {<br>    syncRulesFields = {<br>        'company': {<br><br>        },<br>        'contact': {<br><br>        },<br>        'deal': {<br>        },<br>        'sync': 'false'<br>    };<br><br>} else {<br>    if (syncRulesFields.company === undefined || syncRulesFields.company === '') {<br>        syncRulesFields.company = {};<br>    }<br>    if (syncRulesFields.contact === undefined || syncRulesFields.contact === '') {<br>        syncRulesFields.contact = {};<br>    }<br>    if (syncRulesFields.deal === undefined || syncRulesFields.deal === '') {<br>        syncRulesFields.deal = {};<br>    }<br>}<br>syncRulesFields = JSON.parse(JSON.stringify(syncRulesFields));<br><br>let companyKeys = Object.keys(syncRulesFields.company);<br><br>for (var i = 0; i <span><</span> companyKeys.length; i++) {<br>    syncRulesFields.contact[companyKeys[i]] = syncRulesFields.company[companyKeys[i]];<br>}<br><br><br>let customefields = steps.SyncLog.customefields;<br>for (var i = 0; i <span><</span> customefields.length; i++) {<br>    let fld = customefields[i];<br><br>    for (var j = 0; j <span><</span> fld.fields.length; j++) {<br>        var es = fld.fields[j];<br>        var desc = fld.label + ' ' + es[0].replace(/_/g, ' ');<br>        var id = fld.key + '_' + es[0];<br>        if (syncRulesFields.contact[id] !== undefined) {<br>            syncRulesFields.contact[id] = es;<br>        }<br>    }<br>}<br>let customKeys = Object.keys(syncRulesFields.contact);<br>for (var i = 0; i <span><</span> customKeys.length; i++) {<br>    var cKey = customKeys[i];<br>    var cVal = syncRulesFields.contact[cKey];<br>    let subVal;<br>    if (cKey.startsWith('subcst')) {<br>        if (subscription !== undefined) {<br>            subVal = subscription[cVal[0]];<br>        }<br>    } else if (cKey.startsWith('ordercst')) {<br>        if (myOrder !== undefined) {<br>            subVal = myOrder[cVal[0]];<br>        }<br><br>    } else if (cKey.startsWith('custcst')) {<br>        if (customer !== undefined) {<br>            subVal = customer[cVal[0]];<br>        }<br>    }<br>    if (cVal[1] === 'number') {<br>        subVal = getNumber(subVal);<br>       <br>        if (cVal.length == 4) {<br>            hData = updateData(hData, hContact, cKey,true,true);<br>            steps.HubData.cMetrics[cKey+'Old'] = hData[cKey];<br>             setHData(hData, cKey, subVal);<br>             <br>            properties = updateProperties(properties, hData, cKey, true);<br>        } else {<br>          hData = updateData(hData, hContact, cKey,true);<br>          steps.HubData.cMetrics[cKey] = subVal;<br>           setHData(hData, cKey, subVal);<br>            properties = updateProperties(properties, hData, cKey);<br>        }<br>         steps.HubData.cMetrics[cKey+'Old'] = hData[cKey];<br>    } else if (cVal[1] === 'datetime') {<br>      if(subVal !== undefined) {<br>         subVal = getNumber(subVal) * 1000;<br>        setHData(hData, cKey, subVal);<br>        properties = updateProperties(properties, hData, cKey);<br>      }<br>       <br><br>    } else {<br>        if (subVal === undefined) {<br>            subVal = '';<br><br>        }<br>        setHData(hData, cKey, subVal);<br>        properties = updateProperties(properties, hData, cKey);<br>    }<br><br><br>}<br>//custom<br>properties = updateProperties(properties, hData, 'firstname');<br>//properties = updateProperties(properties, hData, 'email');<br>properties = updateProperties(properties, hData, 'lastname');<br>properties = updateProperties(properties, hData, 'phone');<br>properties = updateProperties(properties, hData, 'company');<br>properties = updateProperties(properties, hData, 'billingaddress');<br>properties = updateProperties(properties, hData, 'billingstate');<br>properties = updateProperties(properties, hData, 'billingcity');<br>properties = updateProperties(properties, hData, 'billingcountry');<br>properties = updateProperties(properties, hData, 'billingzip');<br>properties = updateProperties(properties, hData, 'autocollection');<br>properties = updateProperties(properties, hData, 'preferredcurrencycode');<br>properties = updateProperties(properties, hData, 'paymentmethodstatus');<br>properties = updateProperties(properties, hData, 'paymentmethodtype');<br>properties = updateProperties(properties, hData, 'nettermdays');<br>properties = updateProperties(properties, hData, 'taxexemptstatus');<br>properties = updateProperties(properties, hData, 'chargebeecustomerid');<br>properties = updateProperties(properties, hData, 'subscriptionid');<br>properties = updateProperties(properties, hData, 'subscriptiostatus');<br>properties = updateProperties(properties, hData, 'product');<br>properties = updateProperties(properties, hData, 'planquantity');<br>properties = updateProperties(properties, hData, 'setupfee', true);<br>properties = updateProperties(properties, hData, 'dueinvoicescount');<br>properties = updateProperties(properties, hData, 'remainingbillingcycles');<br>properties = updateProperties(properties, hData, 'ponumber');<br>properties = updateProperties(properties, hData, 'nextbillingat');<br>properties = updateProperties(properties, hData, 'totaldues', true);<br>properties = updateProperties(properties, hData, 'duesince');<br>properties = updateProperties(properties, hData, 'subscriptionmrr', true);<br>properties = updateProperties(properties, hData, 'lifecyclestage');<br>properties = updateProperties(properties, hData, 'lastorderdate');<br>properties = updateProperties(properties, hData, 'lastorderbasecomponentsku');<br>properties = updateProperties(properties, hData, 'lastorderstatus');<br>properties = updateProperties(properties, hData, 'lastorder', true);<br>properties = updateProperties(properties, hData, 'nextorderdate');<br>properties = updateProperties(properties, hData, 'nextorderbasecomponentsku');<br>properties = updateProperties(properties, hData, 'nextorderstatus');<br>properties = updateProperties(properties, hData, 'nextorder', true);<br>properties = updateProperties(properties, hData, 'invoiceamountpaid', true);<br>properties = updateProperties(properties, hData, 'nextbillingamount', true);<br><br>steps.HubSpotInput.inputs.properties = properties;<br><br>let gfg = {<br>    properties: properties,<br>    metrics: steps.HubData.cMetrics,<br>    hData: hData<br>}<br><br>done(gfg);</pre>"
            click step-036 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkNyZWF0ZUh1YlNwb3RDb250YWN0PC90aXRsZT48L2hlYWQ+PGJvZHk+PGI+T3RoZXIgKGh0dHBSZXF1ZXN0KTo8L2I+PGJyPjxicj48cHJlPiAgICAgICAgICAgICAgIHVybCA6ICR7c3RlcHMuSHViU3BvdElucHV0LnVybH08YnI+ICAgICAgICAgICAgIHJldHJ5IDogdHJ1ZTxicj4gICAgICAgIHJldHJ5RGVsYXkgOiAzMDA8YnI+ICByZXRyeVN0YXR1c0NvZGVzIDogNTAyPGJyPiAgICAgcmV0cnlBdHRlbXB0cyA6IDM8YnI+ICAgICAgICAgICAgICBib2R5IDogJHtzdGVwcy5IdWJTcG90SW5wdXQuaW5wdXRzfTxicj4gICAgICAgICAgIGhlYWRlcnMgOiAke3N0ZXBzLkN1c3RvbWVyc1BhcmFtLmh1YnNwb3RBdXRofTxicj4gICAgICAgICAgICBtZXRob2QgOiBQT1NUPC9wcmU+PGJyPjxiPlJBVyBKU09OOjwvYj48YnI+PGJyPjxwcmU+ezxicj4gICdvblN1Y2Nlc3MnOiBbPGJyPiAgICAnQ3JlYXRlSHViU1BvdEZpbHRlcic8YnI+ICBdLDxicj4gICdvbkZhaWx1cmUnOiBbPGJyPiAgICAnQ3JlYXRlSHViU1BvdEZpbHRlcic8YnI+ICBdLDxicj4gICduYW1lJzogJ0NyZWF0ZUh1YlNwb3RDb250YWN0Jyw8YnI+ICAndHlwZSc6ICdodHRwUmVxdWVzdCcsPGJyPiAgJ3Byb3BlcnRpZXMnOiB7PGJyPiAgICAndXJsJzogJyR7c3RlcHMuSHViU3BvdElucHV0LnVybH0nLDxicj4gICAgJ3JldHJ5JzogJ3RydWUnLDxicj4gICAgJ3JldHJ5RGVsYXknOiAnMzAwJyw8YnI+ICAgICdyZXRyeVN0YXR1c0NvZGVzJzogJzUwMicsPGJyPiAgICAncmV0cnlBdHRlbXB0cyc6ICczJyw8YnI+ICAgICdib2R5JzogJyR7c3RlcHMuSHViU3BvdElucHV0LmlucHV0c30nLDxicj4gICAgJ2hlYWRlcnMnOiAnJHtzdGVwcy5DdXN0b21lcnNQYXJhbS5odWJzcG90QXV0aH0nLDxicj4gICAgJ21ldGhvZCc6ICdQT1NUJzxicj4gIH08YnI+fTwvcHJlPjwvYm9keT48L2h0bWw+'));document.close();" "Other (httpRequest):<br><pre>               url : ${steps.HubSpotInput.url}<br>             retry : true<br>        retryDelay : 300<br>  retryStatusCodes : 502<br>     retryAttempts : 3<br>              body : ${steps.HubSpotInput.inputs}<br>           headers : ${steps.CustomersParam.hubspotAuth}<br>            method : POST</pre>"
            click step-037 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPlVwZGF0ZUh1YlNwb3RDb250YWN0PC90aXRsZT48L2hlYWQ+PGJvZHk+PGI+T3RoZXIgKGh0dHBSZXF1ZXN0KTo8L2I+PGJyPjxicj48cHJlPiAgICAgICAgICAgICAgIHVybCA6ICR7c3RlcHMuSHViU3BvdElucHV0LnVybH08YnI+ICAgICAgICAgICAgIHJldHJ5IDogdHJ1ZTxicj4gICAgICAgIHJldHJ5RGVsYXkgOiAzMDA8YnI+ICByZXRyeVN0YXR1c0NvZGVzIDogNTAyPGJyPiAgICAgcmV0cnlBdHRlbXB0cyA6IDM8YnI+ICAgICAgICAgICAgICBib2R5IDogJHtzdGVwcy5IdWJTcG90SW5wdXQuaW5wdXRzfTxicj4gICAgICAgICAgIGhlYWRlcnMgOiAke3N0ZXBzLkN1c3RvbWVyc1BhcmFtLmh1YnNwb3RBdXRofTxicj4gICAgICAgICAgICBtZXRob2QgOiBQT1NUPC9wcmU+PGJyPjxiPlJBVyBKU09OOjwvYj48YnI+PGJyPjxwcmU+ezxicj4gICdvblN1Y2Nlc3MnOiBbPGJyPiAgICAnVXBkYXRlSHViU3BvdEZpbHRlcic8YnI+ICBdLDxicj4gICdvbkZhaWx1cmUnOiBbPGJyPiAgICAnVXBkYXRlSHViU3BvdEZpbHRlcic8YnI+ICBdLDxicj4gICduYW1lJzogJ1VwZGF0ZUh1YlNwb3RDb250YWN0Jyw8YnI+ICAndHlwZSc6ICdodHRwUmVxdWVzdCcsPGJyPiAgJ3Byb3BlcnRpZXMnOiB7PGJyPiAgICAndXJsJzogJyR7c3RlcHMuSHViU3BvdElucHV0LnVybH0nLDxicj4gICAgJ3JldHJ5JzogJ3RydWUnLDxicj4gICAgJ3JldHJ5RGVsYXknOiAnMzAwJyw8YnI+ICAgICdyZXRyeVN0YXR1c0NvZGVzJzogJzUwMicsPGJyPiAgICAncmV0cnlBdHRlbXB0cyc6ICczJyw8YnI+ICAgICdib2R5JzogJyR7c3RlcHMuSHViU3BvdElucHV0LmlucHV0c30nLDxicj4gICAgJ2hlYWRlcnMnOiAnJHtzdGVwcy5DdXN0b21lcnNQYXJhbS5odWJzcG90QXV0aH0nLDxicj4gICAgJ21ldGhvZCc6ICdQT1NUJzxicj4gIH08YnI+fTwvcHJlPjwvYm9keT48L2h0bWw+'));document.close();" "Other (httpRequest):<br><pre>               url : ${steps.HubSpotInput.url}<br>             retry : true<br>        retryDelay : 300<br>  retryStatusCodes : 502<br>     retryAttempts : 3<br>              body : ${steps.HubSpotInput.inputs}<br>           headers : ${steps.CustomersParam.hubspotAuth}<br>            method : POST</pre>"
            click step-038 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPkNyZWF0ZUh1YlNQb3RGaWx0ZXI8L3RpdGxlPjwvaGVhZD48Ym9keT48Yj5KYXZhU2NyaXB0OjwvYj48YnI+PGJyPjxwcmU+aWYoc3RlcHMuQ3JlYXRlSHViU3BvdENvbnRhY3QucmVzcG9uc2UuY29kZSA9PT0gMjAwKSB7PGJyPiAgZG9uZSh0cnVlKTs8YnI+fWVsc2Ugezxicj4gIGRvbmUoZmFsc2UpOzxicj59PC9wcmU+PGJyPjxiPlJBVyBKU09OOjwvYj48YnI+PGJyPjxwcmU+ezxicj4gICdvblN1Y2Nlc3MnOiBbPGJyPiAgICAnVXBkYXRlVFBBZnRlckNyZWF0ZSc8YnI+ICBdLDxicj4gICdvbkZhaWx1cmUnOiBbPGJyPiAgICAnU3luY0NyZWF0ZUVycm9yJzxicj4gIF0sPGJyPiAgJ25hbWUnOiAnQ3JlYXRlSHViU1BvdEZpbHRlcicsPGJyPiAgJ3R5cGUnOiAnZmlsdGVyJyw8YnI+ICAncHJvcGVydGllcyc6IHs8YnI+ICAgICdib2R5JzogJ2lmKHN0ZXBzLkNyZWF0ZUh1YlNwb3RDb250YWN0LnJlc3BvbnNlLmNvZGUgPT09IDIwMCkge1xuICBkb25lKHRydWUpO1xufWVsc2Uge1xuICBkb25lKGZhbHNlKTtcbn0nPGJyPiAgfTxicj59PC9wcmU+PC9ib2R5PjwvaHRtbD4='));document.close();" "JavaScript:<br><pre>if(steps.CreateHubSpotContact.response.code === 200) {<br>  done(true);<br>}else {<br>  done(false);<br>}</pre>"
            click step-039 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPlVwZGF0ZUh1YlNwb3RGaWx0ZXI8L3RpdGxlPjwvaGVhZD48Ym9keT48Yj5KYXZhU2NyaXB0OjwvYj48YnI+PGJyPjxwcmU+aWYoc3RlcHMuVXBkYXRlSHViU3BvdENvbnRhY3QucmVzcG9uc2UuY29kZSA9PT0gMjA0KSB7PGJyPiAgZG9uZSh0cnVlKTs8YnI+fWVsc2Ugezxicj4gIGRvbmUoZmFsc2UpOzxicj59PC9wcmU+PGJyPjxiPlJBVyBKU09OOjwvYj48YnI+PGJyPjxwcmU+ezxicj4gICdvblN1Y2Nlc3MnOiBbPGJyPiAgICAnVXBkYXRlVFBBZnRlclVwZGF0ZSc8YnI+ICBdLDxicj4gICdvbkZhaWx1cmUnOiBbPGJyPiAgICAnU3luY1VwZGF0ZUVycm9yJzxicj4gIF0sPGJyPiAgJ25hbWUnOiAnVXBkYXRlSHViU3BvdEZpbHRlcicsPGJyPiAgJ3R5cGUnOiAnZmlsdGVyJyw8YnI+ICAncHJvcGVydGllcyc6IHs8YnI+ICAgICdib2R5JzogJ2lmKHN0ZXBzLlVwZGF0ZUh1YlNwb3RDb250YWN0LnJlc3BvbnNlLmNvZGUgPT09IDIwNCkge1xuICBkb25lKHRydWUpO1xufWVsc2Uge1xuICBkb25lKGZhbHNlKTtcbn0nPGJyPiAgfTxicj59PC9wcmU+PC9ib2R5PjwvaHRtbD4='));document.close();" "JavaScript:<br><pre>if(steps.UpdateHubSpotContact.response.code === 204) {<br>  done(true);<br>}else {<br>  done(false);<br>}</pre>"
            click step-040 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPlVwZGF0ZVRQQWZ0ZXJDcmVhdGU8L3RpdGxlPjwvaGVhZD48Ym9keT48Yj5KYXZhU2NyaXB0OjwvYj48YnI+PGJyPjxwcmU+bGV0IGNvbnRhY3QgPSBzdGVwcy5DcmVhdGVIdWJTcG90Q29udGFjdC5yZXNwb25zZS5ib2R5Ozxicj5sZXQgc3Vic2NyaXB0aW9uID0gc3RlcHMuSHViRGF0YS5zdWJzY3JpcHRpb247PGJyPmxldCBjdXN0b21lciA9IHN0ZXBzLkh1YkRhdGEuY3VzdG9tZXI7PGJyPnN0ZXBzLlN5bmNMb2cuc3luY0NvdW50LnNDb3VudCA9IHN0ZXBzLlN5bmNMb2cuc3luY0NvdW50LnNDb3VudCArMTs8YnI+PGJyPmxldCBvbGRfcmVzb3VyY2UgPSB7PGJyPiAgICBjdXN0b21lcjogY3VzdG9tZXIsPGJyPiAgICBodWJzcG90OiB7PGJyPjxicj4gICAgfTxicj59Ozxicj48YnI+aWYgKHN1YnNjcmlwdGlvbiAhPT0gdW5kZWZpbmVkKSB7PGJyPiAgICBvbGRfcmVzb3VyY2UuaHVic3BvdC5zdWJzY3JpcHRpb25faWQgPSBzdWJzY3JpcHRpb24uaWQ7PGJyPiAgICBvbGRfcmVzb3VyY2UuaHVic3BvdC5odWJzcG90X3N1Yl9zdGF0dXMgPSBzdWJzY3JpcHRpb24uc3RhdHVzOzxicj59PGJyPnN0ZXBzLkh1YlNwb3RJbnB1dC50cC50aGlyZF9wYXJ0eV9lbnRpdHlfaWQgPSBjb250YWN0LnZpZDs8YnI+c3RlcHMuSHViU3BvdElucHV0LnRwLm9sZF9yZXNvdXJjZSA9IEpTT04uc3RyaW5naWZ5KG9sZF9yZXNvdXJjZSk7PC9wcmU+PGJyPjxiPlJBVyBKU09OOjwvYj48YnI+PGJyPjxwcmU+ezxicj4gICdvblN1Y2Nlc3MnOiBbPGJyPiAgICAnVXBkYXRlVGhpcmRQYXJ0eU1hcHBpbmcnPGJyPiAgXSw8YnI+ICAnb25GYWlsdXJlJzogW10sPGJyPiAgJ25hbWUnOiAnVXBkYXRlVFBBZnRlckNyZWF0ZScsPGJyPiAgJ3R5cGUnOiAnc2NyaXB0Jyw8YnI+ICAncHJvcGVydGllcyc6IHs8YnI+ICAgICdib2R5JzogJ2xldCBjb250YWN0ID0gc3RlcHMuQ3JlYXRlSHViU3BvdENvbnRhY3QucmVzcG9uc2UuYm9keTtcbmxldCBzdWJzY3JpcHRpb24gPSBzdGVwcy5IdWJEYXRhLnN1YnNjcmlwdGlvbjtcbmxldCBjdXN0b21lciA9IHN0ZXBzLkh1YkRhdGEuY3VzdG9tZXI7XG5zdGVwcy5TeW5jTG9nLnN5bmNDb3VudC5zQ291bnQgPSBzdGVwcy5TeW5jTG9nLnN5bmNDb3VudC5zQ291bnQgKzE7XG5cbmxldCBvbGRfcmVzb3VyY2UgPSB7XG4gICAgY3VzdG9tZXI6IGN1c3RvbWVyLFxuICAgIGh1YnNwb3Q6IHtcblxuICAgIH1cbn07XG5cbmlmIChzdWJzY3JpcHRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgIG9sZF9yZXNvdXJjZS5odWJzcG90LnN1YnNjcmlwdGlvbl9pZCA9IHN1YnNjcmlwdGlvbi5pZDtcbiAgICBvbGRfcmVzb3VyY2UuaHVic3BvdC5odWJzcG90X3N1Yl9zdGF0dXMgPSBzdWJzY3JpcHRpb24uc3RhdHVzO1xufVxuc3RlcHMuSHViU3BvdElucHV0LnRwLnRoaXJkX3BhcnR5X2VudGl0eV9pZCA9IGNvbnRhY3QudmlkO1xuc3RlcHMuSHViU3BvdElucHV0LnRwLm9sZF9yZXNvdXJjZSA9IEpTT04uc3RyaW5naWZ5KG9sZF9yZXNvdXJjZSk7Jzxicj4gIH08YnI+fTwvcHJlPjwvYm9keT48L2h0bWw+'));document.close();" "JavaScript:<br><pre>let contact = steps.CreateHubSpotContact.response.body;<br>let subscription = steps.HubData.subscription;<br>let customer = steps.HubData.customer;<br>steps.SyncLog.syncCount.sCount = steps.SyncLog.syncCount.sCount +1;<br><br>let old_resource = {<br>    customer: customer,<br>    hubspot: {<br><br>    }<br>};<br><br>if (subscription !== undefined) {<br>    old_resource.hubspot.subscription_id = subscription.id;<br>    old_resource.hubspot.hubspot_sub_status = subscription.status;<br>}<br>steps.HubSpotInput.tp.third_party_entity_id = contact.vid;<br>steps.HubSpotInput.tp.old_resource = JSON.stringify(old_resource);</pre>"
            click step-041 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPlN5bmNDcmVhdGVFcnJvcjwvdGl0bGU+PC9oZWFkPjxib2R5PjxiPkphdmFTY3JpcHQ6PC9iPjxicj48YnI+PHByZT5sZXQgY3VzdG9tZXIgPSBzdGVwcy5IdWJEYXRhLmN1c3RvbWVyOzxicj5sZXQgYXBpS2V5PXN0ZXBzLklucHV0UGFyYW1zLmlucHV0LmFwaUtleTs8YnI+bGV0IHNpdGVOYW1lPXN0ZXBzLklucHV0UGFyYW1zLmlucHV0LnNpdGVOYW1lOzxicj5sZXQgc2l0ZURvbWFpbj1zdGVwcy5JbnB1dFBhcmFtcy5pbnB1dC5zaXRlRG9tYWluOzxicj5sZXQgdHlwZSA9IHN0ZXBzLklucHV0UGFyYW1zLmlucHV0LnR5cGU7PGJyPmxldCBwYXNzd29yZCA9ICcnOzxicj48YnI+c3RlcHMuU3luY0xvZy5zeW5jQ291bnQuZUNvdW50ID0gc3RlcHMuU3luY0xvZy5zeW5jQ291bnQuZUNvdW50ICsxOzxicj4gbGV0IGNoYXJnZWJlZV9kYXRhX3VybCA9ICdodHRwczovLycrc2l0ZU5hbWUrJy4nK3NpdGVEb21haW4rJy9hZG1pbi1jb25zb2xlL2N1c3RvbWVycy8nK2N1c3RvbWVyLmlkOzxicj4gbGV0IGNiX2xpbmsgPSAnPHNwYW4+PDwvc3Bhbj5hIGhyZWY9JycrY2hhcmdlYmVlX2RhdGFfdXJsKycnIHRhcmdldD0nYmxhbmsnPHNwYW4+Pjwvc3Bhbj4nK2N1c3RvbWVyLmlkKyc8c3Bhbj48PC9zcGFuPi9hPHNwYW4+Pjwvc3Bhbj4gRmFpbGVkIHRvIGNyZWF0ZSBhIGNvbnRhY3QgaW4gSHViU3BvdFxuJzs8YnI+IDxicj4gbGV0IGRhdGEgPSB7PGJyPiAgIHVybDogJ2h0dHBzOi8vJyArIHNpdGVOYW1lICsgJy4nICsgc2l0ZURvbWFpbiArICcvYXBpL3YyL3RoaXJkX3BhcnR5X2VudGl0eV9tYXBwaW5ncy91cGRhdGVfZW50aXR5Jyw8YnI+ICBhdXRoOns8YnI+ICAgICAgICBBdXRob3JpemF0aW9uOiAnQmFzaWMgJyArIENFLmI2NChhcGlLZXkgKyAnOicgKyBwYXNzd29yZCk8YnI+ICAgICAgfSw8YnI+ICAgICAgcXVlcnk6ezxicj4gICAgICAgIGludGVncmF0aW9uX25hbWU6IHR5cGUsPGJyPiAgICAgICAgZW50aXR5X2lkOiBjdXN0b21lci5pZCw8YnI+ICAgICAgICBlbnRpdHlfdHlwZTogJ2N1c3RvbWVyJyw8YnI+ICAgICAgICBzdGF0dXM6ICd1cGRhdGVfZmFpbGVkJyw8YnI+ICAgICAgICBlcnJvcl9tZXNzYWdlOiBjYl9saW5rPGJyPiAgICAgIH08YnI+ICA8YnI+fTs8YnI+PGJyPmRvbmUoZGF0YSk7PC9wcmU+PGJyPjxiPlJBVyBKU09OOjwvYj48YnI+PGJyPjxwcmU+ezxicj4gICdvblN1Y2Nlc3MnOiBbPGJyPiAgICAnVXBkYXRlVGhpcmRQYXJ0eU1hcHBpbmdFcnJvcjMnPGJyPiAgXSw8YnI+ICAnb25GYWlsdXJlJzogW10sPGJyPiAgJ25hbWUnOiAnU3luY0NyZWF0ZUVycm9yJyw8YnI+ICAndHlwZSc6ICdzY3JpcHQnLDxicj4gICdwcm9wZXJ0aWVzJzogezxicj4gICAgJ2JvZHknOiAnbGV0IGN1c3RvbWVyID0gc3RlcHMuSHViRGF0YS5jdXN0b21lcjtcbmxldCBhcGlLZXk9c3RlcHMuSW5wdXRQYXJhbXMuaW5wdXQuYXBpS2V5O1xubGV0IHNpdGVOYW1lPXN0ZXBzLklucHV0UGFyYW1zLmlucHV0LnNpdGVOYW1lO1xubGV0IHNpdGVEb21haW49c3RlcHMuSW5wdXRQYXJhbXMuaW5wdXQuc2l0ZURvbWFpbjtcbmxldCB0eXBlID0gc3RlcHMuSW5wdXRQYXJhbXMuaW5wdXQudHlwZTtcbmxldCBwYXNzd29yZCA9IFwnXCc7XG5cbnN0ZXBzLlN5bmNMb2cuc3luY0NvdW50LmVDb3VudCA9IHN0ZXBzLlN5bmNMb2cuc3luY0NvdW50LmVDb3VudCArMTtcbiBsZXQgY2hhcmdlYmVlX2RhdGFfdXJsID0gXCdodHRwczovL1wnK3NpdGVOYW1lK1wnLlwnK3NpdGVEb21haW4rXCcvYWRtaW4tY29uc29sZS9jdXN0b21lcnMvXCcrY3VzdG9tZXIuaWQ7XG4gbGV0IGNiX2xpbmsgPSBcJzxzcGFuPjw8L3NwYW4+YSBocmVmPSdcJytjaGFyZ2ViZWVfZGF0YV91cmwrXCcnIHRhcmdldD0nYmxhbmsnPHNwYW4+Pjwvc3Bhbj5cJytjdXN0b21lci5pZCtcJzxzcGFuPjw8L3NwYW4+L2E8c3Bhbj4+PC9zcGFuPiBGYWlsZWQgdG8gY3JlYXRlIGEgY29udGFjdCBpbiBIdWJTcG90XFxuXCc7XG4gXG4gbGV0IGRhdGEgPSB7XG4gICB1cmw6IFwnaHR0cHM6Ly9cJyArIHNpdGVOYW1lICsgXCcuXCcgKyBzaXRlRG9tYWluICsgXCcvYXBpL3YyL3RoaXJkX3BhcnR5X2VudGl0eV9tYXBwaW5ncy91cGRhdGVfZW50aXR5XCcsXG4gIGF1dGg6e1xuICAgICAgICBBdXRob3JpemF0aW9uOiBcJ0Jhc2ljIFwnICsgQ0UuYjY0KGFwaUtleSArIFwnOlwnICsgcGFzc3dvcmQpXG4gICAgICB9LFxuICAgICAgcXVlcnk6e1xuICAgICAgICBpbnRlZ3JhdGlvbl9uYW1lOiB0eXBlLFxuICAgICAgICBlbnRpdHlfaWQ6IGN1c3RvbWVyLmlkLFxuICAgICAgICBlbnRpdHlfdHlwZTogXCdjdXN0b21lclwnLFxuICAgICAgICBzdGF0dXM6IFwndXBkYXRlX2ZhaWxlZFwnLFxuICAgICAgICBlcnJvcl9tZXNzYWdlOiBjYl9saW5rXG4gICAgICB9XG4gIFxufTtcblxuZG9uZShkYXRhKTsnPGJyPiAgfTxicj59PC9wcmU+PC9ib2R5PjwvaHRtbD4='));document.close();" "JavaScript:<br><pre>let customer = steps.HubData.customer;<br>let apiKey=steps.InputParams.input.apiKey;<br>let siteName=steps.InputParams.input.siteName;<br>let siteDomain=steps.InputParams.input.siteDomain;<br>let type = steps.InputParams.input.type;<br>let password = '';<br><br>steps.SyncLog.syncCount.eCount = steps.SyncLog.syncCount.eCount +1;<br> let chargebee_data_url = 'https://'+siteName+'.'+siteDomain+'/admin-console/customers/'+customer.id;<br> let cb_link = '<span><</span>a href=''+chargebee_data_url+'' target='blank'<span>></span>'+customer.id+'<span><</span>/a<span>></span> Failed to create a contact in HubSpot\n';<br> <br> let data = {<br>   url: 'https://' + siteName + '.' + siteDomain + '/api/v2/third_party_entity_mappings/update_entity',<br>  auth:{<br>        Authorization: 'Basic ' + CE.b64(apiKey + ':' + password)<br>      },<br>      query:{<br>        integration_name: type,<br>        entity_id: customer.id,<br>        entity_type: 'customer',<br>        status: 'update_failed',<br>        error_message: cb_link<br>      }<br>  <br>};<br><br>done(data);</pre>"
            click step-042 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPlVwZGF0ZVRQQWZ0ZXJVcGRhdGU8L3RpdGxlPjwvaGVhZD48Ym9keT48Yj5KYXZhU2NyaXB0OjwvYj48YnI+PGJyPjxwcmU+bGV0IGNvbnRhY3QgPSBzdGVwcy5DQkRhdGEuaHVic3BvdC5jb250YWN0Ozxicj5sZXQgc3Vic2NyaXB0aW9uID0gc3RlcHMuSHViRGF0YS5zdWJzY3JpcHRpb247PGJyPmxldCBjdXN0b21lciA9IHN0ZXBzLkh1YkRhdGEuY3VzdG9tZXI7PGJyPnN0ZXBzLlN5bmNMb2cuc3luY0NvdW50LnNDb3VudCA9IHN0ZXBzLlN5bmNMb2cuc3luY0NvdW50LnNDb3VudCArMTs8YnI+bGV0IG9sZF9yZXNvdXJjZSA9IHs8YnI+ICAgIGN1c3RvbWVyOiBjdXN0b21lciw8YnI+ICAgIGh1YnNwb3Q6IHs8YnI+PGJyPiAgICB9PGJyPn07PGJyPjxicj48YnI+aWYgKHN1YnNjcmlwdGlvbiAhPT0gdW5kZWZpbmVkKSB7PGJyPiAgICBvbGRfcmVzb3VyY2UuaHVic3BvdC5zdWJzY3JpcHRpb25faWQgPSBzdWJzY3JpcHRpb24uaWQ7PGJyPiAgICBvbGRfcmVzb3VyY2UuaHVic3BvdC5odWJzcG90X3N1Yl9zdGF0dXMgPSBzdWJzY3JpcHRpb24uc3RhdHVzOzxicj59PGJyPnN0ZXBzLkh1YlNwb3RJbnB1dC50cC50aGlyZF9wYXJ0eV9lbnRpdHlfaWQgPSAgY29udGFjdC52aWQ7PGJyPnN0ZXBzLkh1YlNwb3RJbnB1dC50cC5vbGRfcmVzb3VyY2UgPSBKU09OLnN0cmluZ2lmeShvbGRfcmVzb3VyY2UpOzwvcHJlPjxicj48Yj5SQVcgSlNPTjo8L2I+PGJyPjxicj48cHJlPns8YnI+ICAnb25TdWNjZXNzJzogWzxicj4gICAgJ1VwZGF0ZVRoaXJkUGFydHlNYXBwaW5nJzxicj4gIF0sPGJyPiAgJ29uRmFpbHVyZSc6IFtdLDxicj4gICduYW1lJzogJ1VwZGF0ZVRQQWZ0ZXJVcGRhdGUnLDxicj4gICd0eXBlJzogJ3NjcmlwdCcsPGJyPiAgJ3Byb3BlcnRpZXMnOiB7PGJyPiAgICAnYm9keSc6ICdsZXQgY29udGFjdCA9IHN0ZXBzLkNCRGF0YS5odWJzcG90LmNvbnRhY3Q7XG5sZXQgc3Vic2NyaXB0aW9uID0gc3RlcHMuSHViRGF0YS5zdWJzY3JpcHRpb247XG5sZXQgY3VzdG9tZXIgPSBzdGVwcy5IdWJEYXRhLmN1c3RvbWVyO1xuc3RlcHMuU3luY0xvZy5zeW5jQ291bnQuc0NvdW50ID0gc3RlcHMuU3luY0xvZy5zeW5jQ291bnQuc0NvdW50ICsxO1xubGV0IG9sZF9yZXNvdXJjZSA9IHtcbiAgICBjdXN0b21lcjogY3VzdG9tZXIsXG4gICAgaHVic3BvdDoge1xuXG4gICAgfVxufTtcblxuXG5pZiAoc3Vic2NyaXB0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICBvbGRfcmVzb3VyY2UuaHVic3BvdC5zdWJzY3JpcHRpb25faWQgPSBzdWJzY3JpcHRpb24uaWQ7XG4gICAgb2xkX3Jlc291cmNlLmh1YnNwb3QuaHVic3BvdF9zdWJfc3RhdHVzID0gc3Vic2NyaXB0aW9uLnN0YXR1cztcbn1cbnN0ZXBzLkh1YlNwb3RJbnB1dC50cC50aGlyZF9wYXJ0eV9lbnRpdHlfaWQgPSAgY29udGFjdC52aWQ7XG5zdGVwcy5IdWJTcG90SW5wdXQudHAub2xkX3Jlc291cmNlID0gSlNPTi5zdHJpbmdpZnkob2xkX3Jlc291cmNlKTsnPGJyPiAgfTxicj59PC9wcmU+PC9ib2R5PjwvaHRtbD4='));document.close();" "JavaScript:<br><pre>let contact = steps.CBData.hubspot.contact;<br>let subscription = steps.HubData.subscription;<br>let customer = steps.HubData.customer;<br>steps.SyncLog.syncCount.sCount = steps.SyncLog.syncCount.sCount +1;<br>let old_resource = {<br>    customer: customer,<br>    hubspot: {<br><br>    }<br>};<br><br><br>if (subscription !== undefined) {<br>    old_resource.hubspot.subscription_id = subscription.id;<br>    old_resource.hubspot.hubspot_sub_status = subscription.status;<br>}<br>steps.HubSpotInput.tp.third_party_entity_id =  contact.vid;<br>steps.HubSpotInput.tp.old_resource = JSON.stringify(old_resource);</pre>"
            click step-043 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPlN5bmNVcGRhdGVFcnJvcjwvdGl0bGU+PC9oZWFkPjxib2R5PjxiPkphdmFTY3JpcHQ6PC9iPjxicj48YnI+PHByZT5sZXQgY3VzdG9tZXIgPSBzdGVwcy5IdWJEYXRhLmN1c3RvbWVyOzxicj5sZXQgYXBpS2V5PXN0ZXBzLklucHV0UGFyYW1zLmlucHV0LmFwaUtleTs8YnI+bGV0IHNpdGVOYW1lPXN0ZXBzLklucHV0UGFyYW1zLmlucHV0LnNpdGVOYW1lOzxicj5sZXQgc2l0ZURvbWFpbj1zdGVwcy5JbnB1dFBhcmFtcy5pbnB1dC5zaXRlRG9tYWluOzxicj5sZXQgdHlwZSA9IHN0ZXBzLklucHV0UGFyYW1zLmlucHV0LnR5cGU7PGJyPmxldCBwYXNzd29yZCA9ICcnOzxicj5zdGVwcy5TeW5jTG9nLnN5bmNDb3VudC5lQ291bnQgPSBzdGVwcy5TeW5jTG9nLnN5bmNDb3VudC5lQ291bnQgKzE7PGJyPjxicj4gbGV0IGNoYXJnZWJlZV9kYXRhX3VybCA9ICdodHRwczovLycrc2l0ZU5hbWUrJy4nK3NpdGVEb21haW4rJy9hZG1pbi1jb25zb2xlL2N1c3RvbWVycy8nK2N1c3RvbWVyLmlkOzxicj4gbGV0IGNiX2xpbmsgPSAnPHNwYW4+PDwvc3Bhbj5hIGhyZWY9JycrY2hhcmdlYmVlX2RhdGFfdXJsKycnIHRhcmdldD0nYmxhbmsnPHNwYW4+Pjwvc3Bhbj4nK2N1c3RvbWVyLmlkKyc8c3Bhbj48PC9zcGFuPi9hPHNwYW4+Pjwvc3Bhbj4gRmFpbGVkIHRvIHVwZGF0ZSBjb250YWN0IGluIEh1YlNwb3Rcbic7PGJyPiA8YnI+IGxldCBkYXRhID0gezxicj4gICB1cmw6ICdodHRwczovLycgKyBzaXRlTmFtZSArICcuJyArIHNpdGVEb21haW4gKyAnL2FwaS92Mi90aGlyZF9wYXJ0eV9lbnRpdHlfbWFwcGluZ3MvdXBkYXRlX2VudGl0eScsPGJyPiAgYXV0aDp7PGJyPiAgICAgICAgQXV0aG9yaXphdGlvbjogJ0Jhc2ljICcgKyBDRS5iNjQoYXBpS2V5ICsgJzonICsgcGFzc3dvcmQpPGJyPiAgICAgIH0sPGJyPiAgICAgIHF1ZXJ5Ons8YnI+ICAgICAgICBpbnRlZ3JhdGlvbl9uYW1lOiB0eXBlLDxicj4gICAgICAgIGVudGl0eV9pZDogY3VzdG9tZXIuaWQsPGJyPiAgICAgICAgZW50aXR5X3R5cGU6ICdjdXN0b21lcicsPGJyPiAgICAgICAgc3RhdHVzOiAndXBkYXRlX2ZhaWxlZCcsPGJyPiAgICAgICAgZXJyb3JfbWVzc2FnZTogY2JfbGluazxicj4gICAgICB9PGJyPiAgPGJyPn07PGJyPjxicj5kb25lKGRhdGEpOzwvcHJlPjxicj48Yj5SQVcgSlNPTjo8L2I+PGJyPjxicj48cHJlPns8YnI+ICAnb25TdWNjZXNzJzogWzxicj4gICAgJ1VwZGF0ZVRoaXJkUGFydHlNYXBwaW5nRXJyb3I0Jzxicj4gIF0sPGJyPiAgJ29uRmFpbHVyZSc6IFtdLDxicj4gICduYW1lJzogJ1N5bmNVcGRhdGVFcnJvcicsPGJyPiAgJ3R5cGUnOiAnc2NyaXB0Jyw8YnI+ICAncHJvcGVydGllcyc6IHs8YnI+ICAgICdib2R5JzogJ2xldCBjdXN0b21lciA9IHN0ZXBzLkh1YkRhdGEuY3VzdG9tZXI7XG5sZXQgYXBpS2V5PXN0ZXBzLklucHV0UGFyYW1zLmlucHV0LmFwaUtleTtcbmxldCBzaXRlTmFtZT1zdGVwcy5JbnB1dFBhcmFtcy5pbnB1dC5zaXRlTmFtZTtcbmxldCBzaXRlRG9tYWluPXN0ZXBzLklucHV0UGFyYW1zLmlucHV0LnNpdGVEb21haW47XG5sZXQgdHlwZSA9IHN0ZXBzLklucHV0UGFyYW1zLmlucHV0LnR5cGU7XG5sZXQgcGFzc3dvcmQgPSBcJ1wnO1xuc3RlcHMuU3luY0xvZy5zeW5jQ291bnQuZUNvdW50ID0gc3RlcHMuU3luY0xvZy5zeW5jQ291bnQuZUNvdW50ICsxO1xuXG4gbGV0IGNoYXJnZWJlZV9kYXRhX3VybCA9IFwnaHR0cHM6Ly9cJytzaXRlTmFtZStcJy5cJytzaXRlRG9tYWluK1wnL2FkbWluLWNvbnNvbGUvY3VzdG9tZXJzL1wnK2N1c3RvbWVyLmlkO1xuIGxldCBjYl9saW5rID0gXCc8c3Bhbj48PC9zcGFuPmEgaHJlZj0nXCcrY2hhcmdlYmVlX2RhdGFfdXJsK1wnJyB0YXJnZXQ9J2JsYW5rJzxzcGFuPj48L3NwYW4+XCcrY3VzdG9tZXIuaWQrXCc8c3Bhbj48PC9zcGFuPi9hPHNwYW4+Pjwvc3Bhbj4gRmFpbGVkIHRvIHVwZGF0ZSBjb250YWN0IGluIEh1YlNwb3RcXG5cJztcbiBcbiBsZXQgZGF0YSA9IHtcbiAgIHVybDogXCdodHRwczovL1wnICsgc2l0ZU5hbWUgKyBcJy5cJyArIHNpdGVEb21haW4gKyBcJy9hcGkvdjIvdGhpcmRfcGFydHlfZW50aXR5X21hcHBpbmdzL3VwZGF0ZV9lbnRpdHlcJyxcbiAgYXV0aDp7XG4gICAgICAgIEF1dGhvcml6YXRpb246IFwnQmFzaWMgXCcgKyBDRS5iNjQoYXBpS2V5ICsgXCc6XCcgKyBwYXNzd29yZClcbiAgICAgIH0sXG4gICAgICBxdWVyeTp7XG4gICAgICAgIGludGVncmF0aW9uX25hbWU6IHR5cGUsXG4gICAgICAgIGVudGl0eV9pZDogY3VzdG9tZXIuaWQsXG4gICAgICAgIGVudGl0eV90eXBlOiBcJ2N1c3RvbWVyXCcsXG4gICAgICAgIHN0YXR1czogXCd1cGRhdGVfZmFpbGVkXCcsXG4gICAgICAgIGVycm9yX21lc3NhZ2U6IGNiX2xpbmtcbiAgICAgIH1cbiAgXG59O1xuXG5kb25lKGRhdGEpOyc8YnI+ICB9PGJyPn08L3ByZT48L2JvZHk+PC9odG1sPg=='));document.close();" "JavaScript:<br><pre>let customer = steps.HubData.customer;<br>let apiKey=steps.InputParams.input.apiKey;<br>let siteName=steps.InputParams.input.siteName;<br>let siteDomain=steps.InputParams.input.siteDomain;<br>let type = steps.InputParams.input.type;<br>let password = '';<br>steps.SyncLog.syncCount.eCount = steps.SyncLog.syncCount.eCount +1;<br><br> let chargebee_data_url = 'https://'+siteName+'.'+siteDomain+'/admin-console/customers/'+customer.id;<br> let cb_link = '<span><</span>a href=''+chargebee_data_url+'' target='blank'<span>></span>'+customer.id+'<span><</span>/a<span>></span> Failed to update contact in HubSpot\n';<br> <br> let data = {<br>   url: 'https://' + siteName + '.' + siteDomain + '/api/v2/third_party_entity_mappings/update_entity',<br>  auth:{<br>        Authorization: 'Basic ' + CE.b64(apiKey + ':' + password)<br>      },<br>      query:{<br>        integration_name: type,<br>        entity_id: customer.id,<br>        entity_type: 'customer',<br>        status: 'update_failed',<br>        error_message: cb_link<br>      }<br>  <br>};<br><br>done(data);</pre>"
            click step-044 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPlVwZGF0ZVRoaXJkUGFydHlNYXBwaW5nPC90aXRsZT48L2hlYWQ+PGJvZHk+PGI+T3RoZXIgKGh0dHBSZXF1ZXN0KTo8L2I+PGJyPjxicj48cHJlPiAgICAgIHVybCA6ICR7c3RlcHMuQ0JTdWJzY2lwdGlvblBhcmFtLmNiZW0udXJsLnVwZGF0ZX08YnI+ICAgIHF1ZXJ5IDogJHtzdGVwcy5IdWJTcG90SW5wdXQudHB9PGJyPiAgaGVhZGVycyA6ICR7c3RlcHMuQ0JTdWJzY2lwdGlvblBhcmFtLmNiZW0uYXV0aH08YnI+ICAgbWV0aG9kIDogUE9TVDwvcHJlPjxicj48Yj5SQVcgSlNPTjo8L2I+PGJyPjxicj48cHJlPns8YnI+ICAnb25TdWNjZXNzJzogWzxicj4gICAgJ0xvb3BPdmVyQ3VzdG9tZXInPGJyPiAgXSw8YnI+ICAnb25GYWlsdXJlJzogW10sPGJyPiAgJ25hbWUnOiAnVXBkYXRlVGhpcmRQYXJ0eU1hcHBpbmcnLDxicj4gICd0eXBlJzogJ2h0dHBSZXF1ZXN0Jyw8YnI+ICAncHJvcGVydGllcyc6IHs8YnI+ICAgICd1cmwnOiAnJHtzdGVwcy5DQlN1YnNjaXB0aW9uUGFyYW0uY2JlbS51cmwudXBkYXRlfScsPGJyPiAgICAncXVlcnknOiAnJHtzdGVwcy5IdWJTcG90SW5wdXQudHB9Jyw8YnI+ICAgICdoZWFkZXJzJzogJyR7c3RlcHMuQ0JTdWJzY2lwdGlvblBhcmFtLmNiZW0uYXV0aH0nLDxicj4gICAgJ21ldGhvZCc6ICdQT1NUJzxicj4gIH08YnI+fTwvcHJlPjwvYm9keT48L2h0bWw+'));document.close();" "Other (httpRequest):<br><pre>      url : ${steps.CBSubsciptionParam.cbem.url.update}<br>    query : ${steps.HubSpotInput.tp}<br>  headers : ${steps.CBSubsciptionParam.cbem.auth}<br>   method : POST</pre>"
            click step-045 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPlVwZGF0ZVRoaXJkUGFydHlNYXBwaW5nRXJyb3IzPC90aXRsZT48L2hlYWQ+PGJvZHk+PGI+T3RoZXIgKGh0dHBSZXF1ZXN0KTo8L2I+PGJyPjxicj48cHJlPiAgICAgIHVybCA6ICR7c3RlcHMuU3luY0NyZWF0ZUVycm9yLnVybH08YnI+ICAgIHF1ZXJ5IDogJHtzdGVwcy5TeW5jQ3JlYXRlRXJyb3IucXVlcnl9PGJyPiAgaGVhZGVycyA6ICR7c3RlcHMuU3luY0NyZWF0ZUVycm9yLmF1dGh9PGJyPiAgIG1ldGhvZCA6IFBPU1Q8L3ByZT48YnI+PGI+UkFXIEpTT046PC9iPjxicj48YnI+PHByZT57PGJyPiAgJ29uU3VjY2Vzcyc6IFs8YnI+ICAgICdMb29wT3ZlckN1c3RvbWVyJzxicj4gIF0sPGJyPiAgJ29uRmFpbHVyZSc6IFtdLDxicj4gICduYW1lJzogJ1VwZGF0ZVRoaXJkUGFydHlNYXBwaW5nRXJyb3IzJyw8YnI+ICAndHlwZSc6ICdodHRwUmVxdWVzdCcsPGJyPiAgJ3Byb3BlcnRpZXMnOiB7PGJyPiAgICAndXJsJzogJyR7c3RlcHMuU3luY0NyZWF0ZUVycm9yLnVybH0nLDxicj4gICAgJ3F1ZXJ5JzogJyR7c3RlcHMuU3luY0NyZWF0ZUVycm9yLnF1ZXJ5fScsPGJyPiAgICAnaGVhZGVycyc6ICcke3N0ZXBzLlN5bmNDcmVhdGVFcnJvci5hdXRofScsPGJyPiAgICAnbWV0aG9kJzogJ1BPU1QnPGJyPiAgfTxicj59PC9wcmU+PC9ib2R5PjwvaHRtbD4='));document.close();" "Other (httpRequest):<br><pre>      url : ${steps.SyncCreateError.url}<br>    query : ${steps.SyncCreateError.query}<br>  headers : ${steps.SyncCreateError.auth}<br>   method : POST</pre>"
            click step-046 "javascript:document.open();document.write(window.atob('PGh0bWw+PGhlYWQ+PHRpdGxlPlVwZGF0ZVRoaXJkUGFydHlNYXBwaW5nRXJyb3I0PC90aXRsZT48L2hlYWQ+PGJvZHk+PGI+T3RoZXIgKGh0dHBSZXF1ZXN0KTo8L2I+PGJyPjxicj48cHJlPiAgICAgIHVybCA6ICR7c3RlcHMuU3luY1VwZGF0ZUVycm9yLnVybH08YnI+ICAgIHF1ZXJ5IDogJHtzdGVwcy5TeW5jVXBkYXRlRXJyb3IucXVlcnl9PGJyPiAgaGVhZGVycyA6ICR7c3RlcHMuU3luY1VwZGF0ZUVycm9yLmF1dGh9PGJyPiAgIG1ldGhvZCA6IFBPU1Q8L3ByZT48YnI+PGI+UkFXIEpTT046PC9iPjxicj48YnI+PHByZT57PGJyPiAgJ29uU3VjY2Vzcyc6IFs8YnI+ICAgICdMb29wT3ZlckN1c3RvbWVyJzxicj4gIF0sPGJyPiAgJ29uRmFpbHVyZSc6IFtdLDxicj4gICduYW1lJzogJ1VwZGF0ZVRoaXJkUGFydHlNYXBwaW5nRXJyb3I0Jyw8YnI+ICAndHlwZSc6ICdodHRwUmVxdWVzdCcsPGJyPiAgJ3Byb3BlcnRpZXMnOiB7PGJyPiAgICAndXJsJzogJyR7c3RlcHMuU3luY1VwZGF0ZUVycm9yLnVybH0nLDxicj4gICAgJ3F1ZXJ5JzogJyR7c3RlcHMuU3luY1VwZGF0ZUVycm9yLnF1ZXJ5fScsPGJyPiAgICAnaGVhZGVycyc6ICcke3N0ZXBzLlN5bmNVcGRhdGVFcnJvci5hdXRofScsPGJyPiAgICAnbWV0aG9kJzogJ1BPU1QnPGJyPiAgfTxicj59PC9wcmU+PC9ib2R5PjwvaHRtbD4='));document.close();" "Other (httpRequest):<br><pre>      url : ${steps.SyncUpdateError.url}<br>    query : ${steps.SyncUpdateError.query}<br>  headers : ${steps.SyncUpdateError.auth}<br>   method : POST</pre>"

        </div>
    </div>
    <h2>
        Formula Configuration
    </h2>
    <div class="container">
        <h3>Basic</h3><table><tr><th>key</th><th>value</th></tr><tr><td>Name</td><td>HubSpotFullSyncContacts</td></tr><tr><td>Single Threaded?</td><td>false</td></tr><tr><td>Active?</td><td>true</td></tr><tr><td>Number of Steps</td><td>45</td></tr><tr><td>Number of Triggers</td><td>1</td></tr></table>
    <br/><h3>Elements</h3><table><tr><th>key</th><th>name</th><th>required</th></tr></table>
    <br/><h3>Values</h3><table><tr><th>key</th><th>name</th><th>required</th></tr></table><br/>
    </div>
    <div class="key">
        <h2>
            Key
        </h2>
        <table>
            <tr>
                <th>Description</th>
                <th>Symbol</th>
                <th>Description</th>
                <th>Symbol</th>
                <th>Description</th>
                <th>Symbol</th>
            </tr>

            <tr>
                <td>Filter Steps</td>
                <td>
                    <div class="mermaid">
                        graph TD
                        A{Step Name}
                    </div>
                </td>
                <td>Trigger/End</td>
                <td>
                    <div class="mermaid">
                        graph TD
                        B((Actual))
                        C((Generated))
                        style C stroke-width:2px,stroke-dasharray: 5, 5;
                    </div>
                </td>
                <td>Request Step</td>
                <td>
                    <div class="mermaid">
                        graph TD
                        A>GET]
                        style A stroke:#0f6ab4;
                    </div>
                    <div class="mermaid">
                        graph TD
                        B>POST]
                        style B stroke:#10a54a;
                    </div>
                    <div class="mermaid">
                        graph TD
                        C>PATCH]
                        style C stroke:#D38042;
                    </div>
                    <div class="mermaid">
                        graph TD
                        C>PUT]
                        style C stroke:#C5862B;
                    </div>
                    <div class="mermaid">
                        graph TD
                        D>DELETE]
                        style D stroke:#a41e22;
                    </div>
                </td>
            </tr>
            <tr>
                <td>Script</td>
                <td>
                    <div class="mermaid">
                        graph TD
                        D(Step Name)
                    </div>
                </td>
                <td>Loop</td>
                <td>
                    <div class="mermaid">
                        graph TD
                        D(-Step Name-)
                    </div>
                </td>
                <td>Other(TYPE)</td>
                <td>
                    <div class="mermaid">
                        graph TD
                        D[Step Name]
                    </div>
                </td>
            </tr>
            <tr>
                <td>Pass/Fail Connection</td>
                <td>
                    <div class="mermaid">
                        graph LR
                        AL(A)
                        BL(B)
                        AL-->BL
                    </div>
                </td>
                <td>Generated Connection</td>
                <td>
                    <div class="mermaid">
                        graph LR
                        AL(A)
                        BL((B))
                        AL-.->BL
                        style BL stroke-width:2px,stroke-dasharray: 5, 5;
                    </div>
                </td>
                <td>Continue Connection</td>
                <td>
                    <div class="mermaid">
                        graph LR
                        AL(A)
                        BL(B)
                        AL==>BL
                    </div>
                </td>
            </tr>
        </table>
    </div>
    <div>
        <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
    </div>
</body>
</html>